<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CS 340 Chapter 3 - EER Comprehensive Exam (30 Questions)</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Crimson+Pro:wght@400;600;700&family=Space+Mono:wght@400;700&family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #1a3a52;
            --secondary: #2c5f7f;
            --accent: #e67e22;
            --success: #27ae60;
            --danger: #e74c3c;
            --warning: #f39c12;
            --light: #f8f9fa;
            --dark: #0d1b2a;
        }

        body {
            font-family: 'DM Sans', sans-serif;
            background: linear-gradient(135deg, #e8f0f7 0%, #f0f4f8 100%);
            color: var(--dark);
            line-height: 1.6;
            min-height: 100vh;
        }

        .exam-container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        .exam-header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            padding: 50px 40px;
            border-radius: 20px;
            margin-bottom: 40px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.15);
            position: relative;
            overflow: hidden;
        }

        .exam-header::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -10%;
            width: 400px;
            height: 400px;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            border-radius: 50%;
            animation: float 15s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            50% { transform: translate(-20px, 20px) rotate(180deg); }
        }

        .exam-header h1 {
            font-family: 'Crimson Pro', serif;
            font-size: 2.5rem;
            margin-bottom: 10px;
            position: relative;
            z-index: 1;
        }

        .exam-header p {
            font-size: 1.1rem;
            opacity: 0.9;
            position: relative;
            z-index: 1;
        }

        .exam-meta {
            display: flex;
            gap: 30px;
            margin-top: 25px;
            flex-wrap: wrap;
            position: relative;
            z-index: 1;
        }

        .meta-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.95rem;
            background: rgba(255,255,255,0.15);
            padding: 8px 16px;
            border-radius: 20px;
            backdrop-filter: blur(10px);
        }

        .timer-section {
            background: white;
            padding: 20px 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
            position: sticky;
            top: 20px;
            z-index: 100;
        }

        .timer {
            font-family: 'Space Mono', monospace;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
        }

        .timer.warning {
            color: var(--warning);
            animation: pulse 1s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }

        .progress-bar {
            flex-grow: 1;
            height: 8px;
            background: #e1e8ed;
            border-radius: 10px;
            margin: 0 20px;
            overflow: hidden;
            min-width: 200px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--success) 0%, var(--accent) 100%);
            border-radius: 10px;
            transition: width 0.3s ease;
        }

        .question-card {
            background: white;
            padding: 35px;
            border-radius: 15px;
            margin-bottom: 25px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            transition: all 0.3s ease;
            border-left: 5px solid var(--primary);
        }

        .question-card:hover {
            box-shadow: 0 8px 25px rgba(0,0,0,0.12);
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e1e8ed;
        }

        .question-number {
            font-family: 'Crimson Pro', serif;
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--primary);
        }

        .question-points {
            background: linear-gradient(135deg, #f0f7ff 0%, #e6f2ff 100%);
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--secondary);
        }

        .question-text {
            font-size: 1.1rem;
            margin-bottom: 25px;
            color: #333;
            line-height: 1.7;
        }

        .mcq-option {
            background: #f8f9fa;
            border: 2px solid #e1e8ed;
            padding: 15px 20px;
            border-radius: 10px;
            margin-bottom: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .mcq-option:hover {
            border-color: var(--accent);
            background: #fff;
            transform: translateX(5px);
        }

        .mcq-option input[type="radio"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        .mcq-option.selected {
            border-color: var(--accent);
            background: linear-gradient(135deg, #fff8f0 0%, #ffeed9 100%);
        }

        .mcq-option.correct {
            border-color: var(--success);
            background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%);
        }

        .mcq-option.incorrect {
            border-color: var(--danger);
            background: linear-gradient(135deg, #fff5f5 0%, #ffe6e6 100%);
        }

        .text-answer {
            width: 100%;
            padding: 15px;
            border: 2px solid #e1e8ed;
            border-radius: 10px;
            font-size: 1rem;
            font-family: 'DM Sans', sans-serif;
            transition: all 0.2s ease;
            resize: vertical;
        }

        .text-answer:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(230, 126, 34, 0.1);
        }

        .feedback {
            margin-top: 20px;
            padding: 20px;
            border-radius: 10px;
            display: none;
        }

        .feedback.show {
            display: block;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .feedback.correct {
            background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%);
            border-left: 4px solid var(--success);
        }

        .feedback.incorrect {
            background: linear-gradient(135deg, #fff5f5 0%, #ffe6e6 100%);
            border-left: 4px solid var(--danger);
        }

        .feedback.partial {
            background: linear-gradient(135deg, #fff8f0 0%, #ffe6b3 100%);
            border-left: 4px solid var(--warning);
        }

        .feedback-title {
            font-weight: 700;
            font-size: 1.1rem;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .feedback-text {
            line-height: 1.7;
        }

        .model-answer {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin-top: 12px;
            border-left: 3px solid var(--accent);
        }

        .model-answer-title {
            font-weight: 600;
            color: var(--accent);
            margin-bottom: 8px;
        }

        .submit-section {
            position: sticky;
            bottom: 20px;
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 -4px 20px rgba(0,0,0,0.15);
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 20px;
            flex-wrap: wrap;
            z-index: 100;
        }

        .btn {
            padding: 15px 40px;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'DM Sans', sans-serif;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--accent) 0%, #d35400 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(230, 126, 34, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(230, 126, 34, 0.4);
        }

        .btn-secondary {
            background: #e1e8ed;
            color: var(--dark);
        }

        .btn-secondary:hover {
            background: #d1d8dd;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .modal.show {
            display: flex;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background: white;
            padding: 50px;
            border-radius: 20px;
            max-width: 600px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            animation: slideUp 0.4s ease;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-header h2 {
            font-family: 'Crimson Pro', serif;
            font-size: 2.5rem;
            color: var(--primary);
            margin-bottom: 10px;
            text-align: center;
        }

        .score-display {
            font-size: 4rem;
            font-weight: 700;
            font-family: 'Space Mono', monospace;
            text-align: center;
            margin: 30px 0;
            background: linear-gradient(135deg, var(--accent) 0%, #d35400 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .score-breakdown {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            margin: 25px 0;
        }

        .score-item {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid #e1e8ed;
        }

        .score-item:last-child {
            border-bottom: none;
        }

        .performance-badge {
            display: inline-block;
            padding: 10px 25px;
            border-radius: 25px;
            font-weight: 700;
            margin-top: 20px;
            text-align: center;
        }

        .badge-excellent {
            background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%);
            color: var(--success);
        }

        .badge-good {
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            color: #1976d2;
        }

        .badge-fair {
            background: linear-gradient(135deg, #fff8f0 0%, #ffe6b3 100%);
            color: var(--warning);
        }

        .badge-poor {
            background: linear-gradient(135deg, #fff5f5 0%, #ffe6e6 100%);
            color: var(--danger);
        }

        .modal-buttons {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }

        .modal-buttons .btn {
            flex: 1;
        }

        .instructions {
            background: linear-gradient(135deg, #f0f7ff 0%, #e6f2ff 100%);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
            border-left: 5px solid var(--secondary);
        }

        .instructions h3 {
            font-family: 'Crimson Pro', serif;
            color: var(--primary);
            margin-bottom: 15px;
        }

        .instructions ul {
            margin-left: 20px;
        }

        .instructions li {
            margin-bottom: 8px;
        }

        .section-header {
            background: linear-gradient(135deg, #f0f7ff 0%, #e6f2ff 100%);
            padding: 20px 30px;
            border-radius: 12px;
            margin: 40px 0 25px;
            border-left: 5px solid var(--accent);
        }

        .section-header h2 {
            font-family: 'Crimson Pro', serif;
            color: var(--primary);
            font-size: 1.8rem;
        }

        .exam-footer {
            text-align: center;
            margin-top: 60px;
            padding: 30px;
            color: #666;
        }

        .exam-footer .name {
            font-family: 'Crimson Pro', serif;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--accent);
            margin-bottom: 10px;
        }

        @media (max-width: 768px) {
            .exam-header h1 {
                font-size: 2rem;
            }

            .question-card {
                padding: 25px 20px;
            }

            .submit-section {
                flex-direction: column;
            }

            .modal-content {
                padding: 30px 20px;
            }

            .score-display {
                font-size: 3rem;
            }

            .timer-section {
                flex-direction: column;
            }

            .progress-bar {
                width: 100%;
                margin: 15px 0;
            }
        }
    </style>
</head>
<body>
    <div class="exam-container">
        <div class="exam-header">
            <h1>Chapter 3: Enhanced ER (EER) Model - Comprehensive Exam</h1>
            <p>Complete assessment covering all EER concepts: subclasses, superclasses, specialization, generalization, and categories</p>
            <div class="exam-meta">
                <div class="meta-item">üìö 30 Questions</div>
                <div class="meta-item">üíØ 150 Points</div>
                <div class="meta-item">‚è±Ô∏è 60 Minutes</div>
                <div class="meta-item">üë©‚Äçüéì Shoug Alomran</div>
            </div>
        </div>

        <div class="instructions">
            <h3>üìã Exam Instructions</h3>
            <ul>
                <li>This comprehensive exam covers ALL topics from Chapter 3 (EER Model)</li>
                <li>30 questions total: 20 Multiple Choice + 10 Short Answer</li>
                <li>Topics include: Subclasses/Superclasses, Specialization, Generalization, Attribute Inheritance, Disjoint vs Overlapping, Total vs Partial, Categories (UNION types), Attribute-defined Specialization, and EER Diagram Notation</li>
                <li>No feedback shown until you click "Submit Exam"</li>
                <li>Short answer questions use intelligent keyword-based grading</li>
                <li>60 minutes to complete - manage your time wisely</li>
            </ul>
        </div>

        <div class="timer-section">
            <div class="timer" id="timer">60:00</div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill" style="width: 0%"></div>
            </div>
            <div id="questionsAnswered">0/30 Answered</div>
        </div>

        <!-- SECTION 1: EER Basics & Subclasses/Superclasses -->
        <div class="section-header">
            <h2>üî∑ Section 1: EER Basics & Subclasses/Superclasses (7 questions)</h2>
        </div>

        <!-- Q1 -->
        <div class="question-card" data-question="1">
            <div class="question-header">
                <span class="question-number">Question 1</span>
                <span class="question-points">5 points</span>
            </div>
            <div class="question-text">
                What does EER stand for and what does it add to the basic ER model?
            </div>
            <div class="options">
                <label class="mcq-option">
                    <input type="radio" name="q1" value="a">
                    <span>Enhanced Entity-Relationship; adds subclasses/superclasses, specialization/generalization, and categories</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q1" value="b">
                    <span>Extended Entity-Relationship; adds only subclasses and superclasses</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q1" value="c">
                    <span>Enhanced Entity-Relationship; adds only specialization hierarchies</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q1" value="d">
                    <span>Extended Entity-Relationship; adds foreign key constraints</span>
                </label>
            </div>
            <div class="feedback" id="feedback1"></div>
        </div>

        <!-- Q2 -->
        <div class="question-card" data-question="2">
            <div class="question-header">
                <span class="question-number">Question 2</span>
                <span class="question-points">5 points</span>
            </div>
            <div class="question-text">
                Why do we need subclasses in database modeling?
            </div>
            <div class="options">
                <label class="mcq-option">
                    <input type="radio" name="q2" value="a">
                    <span>To represent meaningful subgroupings of entities with specific attributes and relationships</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q2" value="b">
                    <span>To reduce the size of the database</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q2" value="c">
                    <span>To eliminate all redundancy</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q2" value="d">
                    <span>To replace relationships between entities</span>
                </label>
            </div>
            <div class="feedback" id="feedback2"></div>
        </div>

        <!-- Q3 -->
        <div class="question-card" data-question="3">
            <div class="question-header">
                <span class="question-number">Question 3</span>
                <span class="question-points">5 points</span>
            </div>
            <div class="question-text">
                In the EMPLOYEE example, SECRETARY, ENGINEER, and TECHNICIAN are subclasses. What is the basis for this grouping?
            </div>
            <div class="options">
                <label class="mcq-option">
                    <input type="radio" name="q3" value="a">
                    <span>Job type - the employee's specific job role</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q3" value="b">
                    <span>Salary level</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q3" value="c">
                    <span>Work location</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q3" value="d">
                    <span>Years of experience</span>
                </label>
            </div>
            <div class="feedback" id="feedback3"></div>
        </div>

        <!-- Q4 -->
        <div class="question-card" data-question="4">
            <div class="question-header">
                <span class="question-number">Question 4</span>
                <span class="question-points">5 points</span>
            </div>
            <div class="question-text">
                What is attribute inheritance in the context of superclasses and subclasses?
            </div>
            <textarea class="text-answer" id="q4" rows="4" placeholder="Type your answer here..."></textarea>
            <div class="feedback" id="feedback4"></div>
        </div>

        <!-- Q5 -->
        <div class="question-card" data-question="5">
            <div class="question-header">
                <span class="question-number">Question 5</span>
                <span class="question-points">5 points</span>
            </div>
            <div class="question-text">
                What are "subtypes" in EER modeling?
            </div>
            <div class="options">
                <label class="mcq-option">
                    <input type="radio" name="q5" value="a">
                    <span>Another term for subclasses - meaningful subgroupings of a superclass entity type</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q5" value="b">
                    <span>Different data types for attributes</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q5" value="c">
                    <span>Types of relationships</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q5" value="d">
                    <span>Weak entity types</span>
                </label>
            </div>
            <div class="feedback" id="feedback5"></div>
        </div>

        <!-- Q6 -->
        <div class="question-card" data-question="6">
            <div class="question-header">
                <span class="question-number">Question 6</span>
                <span class="question-points">5 points</span>
            </div>
            <div class="question-text">
                Give two examples of how EMPLOYEE entities could be meaningfully grouped into subclasses based on different criteria.
            </div>
            <textarea class="text-answer" id="q6" rows="4" placeholder="Type your answer here..."></textarea>
            <div class="feedback" id="feedback6"></div>
        </div>

        <!-- Q7 -->
        <div class="question-card" data-question="7">
            <div class="question-header">
                <span class="question-number">Question 7</span>
                <span class="question-points">5 points</span>
            </div>
            <div class="question-text">
                A subclass entity is a member of which entity types?
            </div>
            <div class="options">
                <label class="mcq-option">
                    <input type="radio" name="q7" value="a">
                    <span>Both the subclass AND its superclass</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q7" value="b">
                    <span>Only the subclass</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q7" value="c">
                    <span>Only the superclass</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q7" value="d">
                    <span>Neither - it's independent</span>
                </label>
            </div>
            <div class="feedback" id="feedback7"></div>
        </div>

        <!-- SECTION 2: Specialization & Generalization -->
        <div class="section-header">
            <h2>üî∫ Section 2: Specialization & Generalization (6 questions)</h2>
        </div>

        <!-- Q8 -->
        <div class="question-card" data-question="8">
            <div class="question-header">
                <span class="question-number">Question 8</span>
                <span class="question-points">5 points</span>
            </div>
            <div class="question-text">
                What is specialization in EER modeling?
            </div>
            <div class="options">
                <label class="mcq-option">
                    <input type="radio" name="q8" value="a">
                    <span>The process of defining a set of subclasses of an entity type (top-down approach)</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q8" value="b">
                    <span>The process of combining multiple entity types into one (bottom-up approach)</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q8" value="c">
                    <span>The process of creating relationships between entities</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q8" value="d">
                    <span>The process of normalizing a database</span>
                </label>
            </div>
            <div class="feedback" id="feedback8"></div>
        </div>

        <!-- Q9 -->
        <div class="question-card" data-question="9">
            <div class="question-header">
                <span class="question-number">Question 9</span>
                <span class="question-points">5 points</span>
            </div>
            <div class="question-text">
                Explain the difference between specialization and generalization. Which is top-down and which is bottom-up?
            </div>
            <textarea class="text-answer" id="q9" rows="4" placeholder="Type your answer here..."></textarea>
            <div class="feedback" id="feedback9"></div>
        </div>

        <!-- Q10 -->
        <div class="question-card" data-question="10">
            <div class="question-header">
                <span class="question-number">Question 10</span>
                <span class="question-points">5 points</span>
            </div>
            <div class="question-text">
                What is an "attribute-defined specialization" or "discriminator"?
            </div>
            <div class="options">
                <label class="mcq-option">
                    <input type="radio" name="q10" value="a">
                    <span>A specialization where all subclasses have membership condition based on the same superclass attribute</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q10" value="b">
                    <span>A specialization based on relationship types</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q10" value="c">
                    <span>A specialization that doesn't use attributes</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q10" value="d">
                    <span>A specialization that merges multiple superclasses</span>
                </label>
            </div>
            <div class="feedback" id="feedback10"></div>
        </div>

        <!-- Q11 -->
        <div class="question-card" data-question="11">
            <div class="question-header">
                <span class="question-number">Question 11</span>
                <span class="question-points">5 points</span>
            </div>
            <div class="question-text">
                In the EMPLOYEE example with SECRETARY, TECHNICIAN, and ENGINEER subclasses, what is the defining attribute (discriminator)?
            </div>
            <div class="options">
                <label class="mcq-option">
                    <input type="radio" name="q11" value="a">
                    <span>Job_type</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q11" value="b">
                    <span>Salary</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q11" value="c">
                    <span>Name</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q11" value="d">
                    <span>Department</span>
                </label>
            </div>
            <div class="feedback" id="feedback11"></div>
        </div>

        <!-- Q12 -->
        <div class="question-card" data-question="12">
            <div class="question-header">
                <span class="question-number">Question 12</span>
                <span class="question-points">5 points</span>
            </div>
            <div class="question-text">
                Describe generalization and explain why it is typically a "total" constraint.
            </div>
            <textarea class="text-answer" id="q12" rows="4" placeholder="Type your answer here..."></textarea>
            <div class="feedback" id="feedback12"></div>
        </div>

        <!-- Q13 -->
        <div class="question-card" data-question="13">
            <div class="question-header">
                <span class="question-number">Question 13</span>
                <span class="question-points">5 points</span>
            </div>
            <div class="question-text">
                What is a specialization hierarchy?
            </div>
            <div class="options">
                <label class="mcq-option">
                    <input type="radio" name="q13" value="a">
                    <span>A structure where every subclass has at most one superclass (single inheritance)</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q13" value="b">
                    <span>A structure where subclasses can have multiple superclasses</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q13" value="c">
                    <span>A ranking system for entities</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q13" value="d">
                    <span>A tree structure of relationships</span>
                </label>
            </div>
            <div class="feedback" id="feedback13"></div>
        </div>

        <!-- SECTION 3: Constraints on Specialization/Generalization -->
        <div class="section-header">
            <h2>‚öôÔ∏è Section 3: Constraints on Specialization/Generalization (10 questions)</h2>
        </div>

        <!-- Q14 -->
        <div class="question-card" data-question="14">
            <div class="question-header">
                <span class="question-number">Question 14</span>
                <span class="question-points">5 points</span>
            </div>
            <div class="question-text">
                What are the two main types of constraints that apply to specialization and generalization?
            </div>
            <div class="options">
                <label class="mcq-option">
                    <input type="radio" name="q14" value="a">
                    <span>Disjointness constraint and Completeness (Exhaustiveness) constraint</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q14" value="b">
                    <span>Primary key constraint and Foreign key constraint</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q14" value="c">
                    <span>Existence constraint and Uniqueness constraint</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q14" value="d">
                    <span>Cardinality constraint and Participation constraint</span>
                </label>
            </div>
            <div class="feedback" id="feedback14"></div>
        </div>

        <!-- Q15 -->
        <div class="question-card" data-question="15">
            <div class="question-header">
                <span class="question-number">Question 15</span>
                <span class="question-points">5 points</span>
            </div>
            <div class="question-text">
                What does the "disjointness constraint" specify and how is it represented in EER diagrams?
            </div>
            <textarea class="text-answer" id="q15" rows="4" placeholder="Type your answer here..."></textarea>
            <div class="feedback" id="feedback15"></div>
        </div>

        <!-- Q16 -->
        <div class="question-card" data-question="16">
            <div class="question-header">
                <span class="question-number">Question 16</span>
                <span class="question-points">5 points</span>
            </div>
            <div class="question-text">
                What is an "overlapping" specialization?
            </div>
            <div class="options">
                <label class="mcq-option">
                    <input type="radio" name="q16" value="a">
                    <span>A specialization where an entity can be a member of more than one subclass; represented by 'o' in EER diagrams</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q16" value="b">
                    <span>A specialization where subclasses must be disjoint; represented by 'd'</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q16" value="c">
                    <span>A specialization with duplicate attributes</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q16" value="d">
                    <span>A specialization with shared relationships</span>
                </label>
            </div>
            <div class="feedback" id="feedback16"></div>
        </div>

        <!-- Q17 -->
        <div class="question-card" data-question="17">
            <div class="question-header">
                <span class="question-number">Question 17</span>
                <span class="question-points">5 points</span>
            </div>
            <div class="question-text">
                Explain the difference between "total" and "partial" completeness constraints in specialization.
            </div>
            <textarea class="text-answer" id="q17" rows="4" placeholder="Type your answer here..."></textarea>
            <div class="feedback" id="feedback17"></div>
        </div>

        <!-- Q18 -->
        <div class="question-card" data-question="18">
            <div class="question-header">
                <span class="question-number">Question 18</span>
                <span class="question-points">5 points</span>
            </div>
            <div class="question-text">
                How is a "total" specialization represented in an EER diagram?
            </div>
            <div class="options">
                <label class="mcq-option">
                    <input type="radio" name="q18" value="a">
                    <span>A double line connecting the superclass to the circle</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q18" value="b">
                    <span>A single line connecting the superclass to the circle</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q18" value="c">
                    <span>A dashed line</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q18" value="d">
                    <span>A bold arrow</span>
                </label>
            </div>
            <div class="feedback" id="feedback18"></div>
        </div>

        <!-- Q19 -->
        <div class="question-card" data-question="19">
            <div class="question-header">
                <span class="question-number">Question 19</span>
                <span class="question-points">5 points</span>
            </div>
            <div class="question-text">
                What are the four possible combinations of disjointness and completeness constraints?
            </div>
            <textarea class="text-answer" id="q19" rows="4" placeholder="Type your answer here..."></textarea>
            <div class="feedback" id="feedback19"></div>
        </div>

        <!-- Q20 -->
        <div class="question-card" data-question="20">
            <div class="question-header">
                <span class="question-number">Question 20</span>
                <span class="question-points">5 points</span>
            </div>
            <div class="question-text">
                What happens when you delete an entity from a superclass?
            </div>
            <div class="options">
                <label class="mcq-option">
                    <input type="radio" name="q20" value="a">
                    <span>It is automatically deleted from all subclasses to which it belongs</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q20" value="b">
                    <span>It remains in all subclasses</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q20" value="c">
                    <span>Only the superclass data is deleted</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q20" value="d">
                    <span>The deletion is not allowed</span>
                </label>
            </div>
            <div class="feedback" id="feedback20"></div>
        </div>

        <!-- Q21 -->
        <div class="question-card" data-question="21">
            <div class="question-header">
                <span class="question-number">Question 21</span>
                <span class="question-points">5 points</span>
            </div>
            <div class="question-text">
                When inserting an entity in a superclass of a TOTAL specialization, what must happen?
            </div>
            <div class="options">
                <label class="mcq-option">
                    <input type="radio" name="q21" value="a">
                    <span>The entity must be inserted in at least one of the subclasses</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q21" value="b">
                    <span>The entity cannot be inserted in any subclass</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q21" value="c">
                    <span>The entity must be inserted in all subclasses</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q21" value="d">
                    <span>The insertion is optional</span>
                </label>
            </div>
            <div class="feedback" id="feedback21"></div>
        </div>

        <!-- Q22 -->
        <div class="question-card" data-question="22">
            <div class="question-header">
                <span class="question-number">Question 22</span>
                <span class="question-points">5 points</span>
            </div>
            <div class="question-text">
                Explain what happens when inserting an entity in a superclass of a PARTIAL specialization.
            </div>
            <textarea class="text-answer" id="q22" rows="3" placeholder="Type your answer here..."></textarea>
            <div class="feedback" id="feedback22"></div>
        </div>

        <!-- Q23 -->
        <div class="question-card" data-question="23">
            <div class="question-header">
                <span class="question-number">Question 23</span>
                <span class="question-points">5 points</span>
            </div>
            <div class="question-text">
                In an EER diagram, what does the symbol 'd' inside a circle represent?
            </div>
            <div class="options">
                <label class="mcq-option">
                    <input type="radio" name="q23" value="a">
                    <span>Disjoint constraint - subclasses are disjoint (entity can be in at most one subclass)</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q23" value="b">
                    <span>Derived attribute</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q23" value="c">
                    <span>Delete constraint</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q23" value="d">
                    <span>Discriminator attribute</span>
                </label>
            </div>
            <div class="feedback" id="feedback23"></div>
        </div>

        <!-- SECTION 4: Categories (UNION Types) -->
        <div class="section-header">
            <h2>üî∂ Section 4: Categories (UNION Types) (7 questions)</h2>
        </div>

        <!-- Q24 -->
        <div class="question-card" data-question="24">
            <div class="question-header">
                <span class="question-number">Question 24</span>
                <span class="question-points">5 points</span>
            </div>
            <div class="question-text">
                What is a "category" or "UNION type" in EER modeling?
            </div>
            <div class="options">
                <label class="mcq-option">
                    <input type="radio" name="q24" value="a">
                    <span>A subclass that has several possible superclasses representing different entity types; a subset of the UNION of distinct entity types</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q24" value="b">
                    <span>A superclass with multiple subclasses</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q24" value="c">
                    <span>A type of relationship</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q24" value="d">
                    <span>A specialization hierarchy</span>
                </label>
            </div>
            <div class="feedback" id="feedback24"></div>
        </div>

        <!-- Q25 -->
        <div class="question-card" data-question="25">
            <div class="question-header">
                <span class="question-number">Question 25</span>
                <span class="question-points">5 points</span>
            </div>
            <div class="question-text">
                How is attribute inheritance different in categories compared to regular specialization?
            </div>
            <textarea class="text-answer" id="q25" rows="4" placeholder="Type your answer here..."></textarea>
            <div class="feedback" id="feedback25"></div>
        </div>

        <!-- Q26 -->
        <div class="question-card" data-question="26">
            <div class="question-header">
                <span class="question-number">Question 26</span>
                <span class="question-points">5 points</span>
            </div>
            <div class="question-text">
                Can the superclasses of a category have different key attributes?
            </div>
            <div class="options">
                <label class="mcq-option">
                    <input type="radio" name="q26" value="a">
                    <span>Yes, superclasses may have different key attributes or the same key attribute</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q26" value="b">
                    <span>No, they must always have the same key</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q26" value="c">
                    <span>No, they cannot have any keys</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q26" value="d">
                    <span>Only if they are weak entities</span>
                </label>
            </div>
            <div class="feedback" id="feedback26"></div>
        </div>

        <!-- Q27 -->
        <div class="question-card" data-question="27">
            <div class="question-header">
                <span class="question-number">Question 27</span>
                <span class="question-points">5 points</span>
            </div>
            <div class="question-text">
                Explain the difference between a "total category" and a "partial category".
            </div>
            <textarea class="text-answer" id="q27" rows="4" placeholder="Type your answer here..."></textarea>
            <div class="feedback" id="feedback27"></div>
        </div>

        <!-- Q28 -->
        <div class="question-card" data-question="28">
            <div class="question-header">
                <span class="question-number">Question 28</span>
                <span class="question-points">5 points</span>
            </div>
            <div class="question-text">
                How is a total category represented in an EER diagram?
            </div>
            <div class="options">
                <label class="mcq-option">
                    <input type="radio" name="q28" value="a">
                    <span>A double line connecting the category and the circle</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q28" value="b">
                    <span>A single line connecting the category and the circle</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q28" value="c">
                    <span>A dashed line</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q28" value="d">
                    <span>No line at all</span>
                </label>
            </div>
            <div class="feedback" id="feedback28"></div>
        </div>

        <!-- Q29 -->
        <div class="question-card" data-question="29">
            <div class="question-header">
                <span class="question-number">Question 29</span>
                <span class="question-points">5 points</span>
            </div>
            <div class="question-text">
                When should you use categorization (UNION type) versus specialization/generalization?
            </div>
            <textarea class="text-answer" id="q29" rows="4" placeholder="Type your answer here..."></textarea>
            <div class="feedback" id="feedback29"></div>
        </div>

        <!-- Q30 -->
        <div class="question-card" data-question="30">
            <div class="question-header">
                <span class="question-number">Question 30</span>
                <span class="question-points">5 points</span>
            </div>
            <div class="question-text">
                What are the three main EER concepts that improve the expressive power of ER diagrams?
            </div>
            <div class="options">
                <label class="mcq-option">
                    <input type="radio" name="q30" value="a">
                    <span>Superclasses/subclasses (specialization/generalization), Categories (UNION types), and Aggregation</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q30" value="b">
                    <span>Entities, Attributes, and Relationships</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q30" value="c">
                    <span>Primary keys, Foreign keys, and Constraints</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q30" value="d">
                    <span>Tables, Views, and Indexes</span>
                </label>
            </div>
            <div class="feedback" id="feedback30"></div>
        </div>

        <div class="submit-section">
            <div style="font-size: 0.9rem; color: #666;">
                üìù No feedback shown until submission
            </div>
            <button class="btn btn-primary" onclick="submitExam()">Submit Exam</button>
        </div>

        <div class="exam-footer">
            <div class="name">Shoug Alomran</div>
            <div>CS 340: Introduction to Database Systems - Chapter 3 EER Comprehensive Exam</div>
        </div>
    </div>

    <!-- Results Modal -->
    <div class="modal" id="resultsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Exam Results</h2>
            </div>
            <div class="score-display" id="finalScore">0%</div>
            <div class="score-breakdown" id="scoreBreakdown"></div>
            <div style="text-align: center;">
                <div class="performance-badge" id="performanceBadge"></div>
            </div>
            <div class="modal-buttons">
                <button class="btn btn-secondary" onclick="closeModal()">Review Answers</button>
                <button class="btn btn-primary" onclick="retakeExam()">Retake Exam</button>
            </div>
        </div>
    </div>

    <script>
        // Comprehensive Answer Key for 30 EER Questions
        const answerKey = {
            // SECTION 1: EER Basics & Subclasses/Superclasses
            q1: {
                type: 'mcq',
                correct: 'a',
                explanation: 'EER stands for Enhanced Entity-Relationship (also called Extended ER). It extends the basic ER model by adding three additional concepts: subclasses/superclasses, specialization/generalization hierarchies, and categories (UNION types). These additions enable modeling of more complex database applications.',
                points: 5
            },
            q2: {
                type: 'mcq',
                correct: 'a',
                explanation: 'Subclasses are needed to represent meaningful subgroupings of entities that have specific attributes and relationships that don\'t apply to all entities in the superclass. This allows more precise modeling of real-world scenarios where entities have both common and specific characteristics.',
                points: 5
            },
            q3: {
                type: 'mcq',
                correct: 'a',
                explanation: 'SECRETARY, ENGINEER, and TECHNICIAN are subclasses based on Job Type - the specific job role of the employee. This is an attribute-defined specialization where Job_type is the defining attribute (discriminator) that determines which subclass an employee belongs to.',
                points: 5
            },
            q4: {
                type: 'text',
                keywords: ['subclass', 'inherit', 'superclass', 'attributes', 'relationships', 'specific', 'additional', 'local'],
                modelAnswer: 'Attribute inheritance means that a subclass entity inherits all attributes and relationships of its superclass, plus it can have its own specific (local) attributes and relationships. For example, an ENGINEER inherits all EMPLOYEE attributes (Name, SSN, Address) and can also have additional attributes specific to engineers (Eng_type).',
                explanation: 'Subclasses inherit all attributes and relationships from their superclass and can define additional specific attributes. This allows entities to have both general and specialized characteristics.',
                points: 5
            },
            q5: {
                type: 'mcq',
                correct: 'a',
                explanation: 'Subtypes are another term for subclasses - they represent meaningful subgroupings of entities from a superclass entity type. The terms "subclass" and "subtype" are used interchangeably in EER modeling.',
                points: 5
            },
            q6: {
                type: 'text',
                keywords: ['job', 'role', 'secretary', 'engineer', 'manager', 'salaried', 'hourly', 'pay', 'method', 'payment'],
                modelAnswer: 'Two examples: (1) Based on job type: SECRETARY, ENGINEER, TECHNICIAN - grouping by specific job role, (2) Based on method of pay: SALARIED_EMPLOYEE, HOURLY_EMPLOYEE - grouping by payment method. Another example is MANAGER based on the role employees play.',
                explanation: 'EMPLOYEE entities can be grouped by job type (SECRETARY, ENGINEER, TECHNICIAN), method of pay (SALARIED, HOURLY), or role (MANAGER). Different criteria create different meaningful subclasses.',
                points: 5
            },
            q7: {
                type: 'mcq',
                correct: 'a',
                explanation: 'A subclass entity is a member of BOTH the subclass AND its superclass. This is fundamental to inheritance - the entity has all characteristics of both the general superclass and the specific subclass.',
                points: 5
            },

            // SECTION 2: Specialization & Generalization
            q8: {
                type: 'mcq',
                correct: 'a',
                explanation: 'Specialization is the process of defining a set of subclasses of an entity type. It is a top-down approach where you start with a general entity type and identify meaningful specialized subgroupings. For example, starting with EMPLOYEE and specializing into SECRETARY, ENGINEER, TECHNICIAN.',
                points: 5
            },
            q9: {
                type: 'text',
                keywords: ['specialization', 'top', 'down', 'generalization', 'bottom', 'up', 'subclasses', 'superclass', 'common'],
                modelAnswer: 'Specialization is a top-down approach: starting with an entity type and defining subclasses based on distinguishing characteristics. Generalization is a bottom-up approach: starting with several entity types with common features and generalizing them into a superclass. Specialization goes from general to specific; generalization goes from specific to general.',
                explanation: 'Specialization (top-down) defines subclasses from a superclass. Generalization (bottom-up) creates a superclass from existing entity types by identifying common attributes.',
                points: 5
            },
            q10: {
                type: 'mcq',
                correct: 'a',
                explanation: 'An attribute-defined specialization occurs when all subclasses have their membership condition based on the same attribute of the superclass. This attribute is called the defining attribute or discriminator. For example, Job_type determines whether an EMPLOYEE is a SECRETARY, ENGINEER, or TECHNICIAN.',
                points: 5
            },
            q11: {
                type: 'mcq',
                correct: 'a',
                explanation: 'Job_type is the defining attribute (discriminator) that determines which subclass an employee belongs to. The value of Job_type (e.g., "Secretary", "Engineer", "Technician") determines the employee\'s membership in the corresponding subclass.',
                points: 5
            },
            q12: {
                type: 'text',
                keywords: ['generalization', 'bottom', 'up', 'common', 'superclass', 'subclasses', 'total', 'entities', 'combine'],
                modelAnswer: 'Generalization is the process of generalizing entities by combining lower-level entity types that share common attributes into a higher-level entity type (superclass). It\'s typically total because when you generalize from existing entity types, every entity in those types must be included in the resulting superclass - all entities participate in the generalization.',
                explanation: 'Generalization combines entity types with common features into a superclass. It\'s usually total because all entities from the original types must exist in the generalized superclass.',
                points: 5
            },
            q13: {
                type: 'mcq',
                correct: 'a',
                explanation: 'A specialization hierarchy is a structure where every subclass participates as a subclass in only one superclass relationship. This means each subclass has at most one superclass, creating a single inheritance hierarchy (tree structure).',
                points: 5
            },

            // SECTION 3: Constraints on Specialization/Generalization
            q14: {
                type: 'mcq',
                correct: 'a',
                explanation: 'The two basic constraints are: (1) Disjointness Constraint - determines whether subclasses must be disjoint or can overlap, and (2) Completeness (Exhaustiveness) Constraint - determines whether every superclass entity must belong to a subclass (total) or not (partial).',
                points: 5
            },
            q15: {
                type: 'text',
                keywords: ['disjoint', 'entity', 'at most one', 'subclass', 'd', 'member', 'single'],
                modelAnswer: 'The disjointness constraint specifies that subclasses must be disjoint - an entity can be a member of at most one of the subclasses in the specialization. In EER diagrams, disjoint specialization is represented by the letter "d" inside a circle connecting the superclass to the subclasses.',
                explanation: 'Disjointness means an entity can belong to at most one subclass. Shown with "d" in EER diagrams. Ensures no entity is in multiple subclasses simultaneously.',
                points: 5
            },
            q16: {
                type: 'mcq',
                correct: 'a',
                explanation: 'An overlapping specialization (represented by "o" in EER diagrams) allows the same entity to be a member of more than one subclass. This is the opposite of disjoint. For example, an EMPLOYEE could be both a MANAGER and an ENGINEER simultaneously.',
                points: 5
            },
            q17: {
                type: 'text',
                keywords: ['total', 'every', 'entity', 'must', 'belong', 'subclass', 'partial', 'not necessarily', 'double', 'single', 'line'],
                modelAnswer: 'Total completeness means every entity in the superclass MUST be a member of at least one subclass - represented by a double line in EER diagrams. Partial completeness means an entity is NOT necessarily a member of any subclass - represented by a single line. Total is similar to total participation in ER.',
                explanation: 'Total (double line) requires every superclass entity to belong to at least one subclass. Partial (single line) allows entities to not belong to any subclass.',
                points: 5
            },
            q18: {
                type: 'mcq',
                correct: 'a',
                explanation: 'A total specialization is represented by a double line connecting the superclass to the circle in the EER diagram. This indicates that every entity in the superclass must participate in at least one subclass - similar to total participation constraint in ER diagrams.',
                points: 5
            },
            q19: {
                type: 'text',
                keywords: ['disjoint total', 'disjoint partial', 'overlapping total', 'overlapping partial', 'four'],
                modelAnswer: 'The four possible combinations are: (1) Disjoint, total - entity in exactly one subclass, (2) Disjoint, partial - entity in at most one subclass, (3) Overlapping, total - entity in one or more subclasses, (4) Overlapping, partial - entity in zero or more subclasses. These constraints are independent of each other.',
                explanation: 'Four combinations: (1) Disjoint + Total, (2) Disjoint + Partial, (3) Overlapping + Total, (4) Overlapping + Partial. Constraints are independent.',
                points: 5
            },
            q20: {
                type: 'mcq',
                correct: 'a',
                explanation: 'When you delete an entity from a superclass, it is automatically deleted from all subclasses to which it belongs. This maintains referential integrity - a subclass entity cannot exist without its corresponding superclass entity.',
                points: 5
            },
            q21: {
                type: 'mcq',
                correct: 'a',
                explanation: 'In a total specialization, when you insert an entity into the superclass, it MUST be inserted into at least one of the subclasses. This enforces the total completeness constraint - every superclass entity must participate in the specialization.',
                points: 5
            },
            q22: {
                type: 'text',
                keywords: ['partial', 'not necessarily', 'optional', 'subclass', 'may', 'not required'],
                modelAnswer: 'When inserting an entity in a superclass of a partial specialization, the entity is NOT necessarily inserted in any of the subclasses. The insertion into subclasses is optional because partial means entities don\'t have to belong to any subclass.',
                explanation: 'In partial specialization, inserting into superclass does NOT require insertion into any subclass. Subclass membership is optional.',
                points: 5
            },
            q23: {
                type: 'mcq',
                correct: 'a',
                explanation: 'The symbol "d" inside a circle represents the disjoint constraint in an EER diagram. It specifies that the subclasses must be disjoint - an entity can be a member of at most one subclass in the specialization.',
                points: 5
            },

            // SECTION 4: Categories (UNION Types)
            q24: {
                type: 'mcq',
                correct: 'a',
                explanation: 'A category (UNION type) is a subclass that has several possible superclasses representing different entity types. It represents a collection of entities that is a subset of the UNION of distinct entity types. Unlike regular specialization where subclasses share the same superclass, categories allow multiple different superclasses.',
                points: 5
            },
            q25: {
                type: 'text',
                keywords: ['selective', 'inheritance', 'only', 'member', 'superclass', 'single', 'one', 'categorization'],
                modelAnswer: 'In categories, attribute inheritance is selective (selective inheritance). An entity in a category inherits attributes and relationships only from the ONE superclass it is a member of, not from all possible superclasses. This is different from regular specialization where entities inherit from their single superclass.',
                explanation: 'Categories use selective inheritance - entities inherit only from the superclass they belong to, not all possible superclasses. Regular specialization inherits from the single superclass.',
                points: 5
            },
            q26: {
                type: 'mcq',
                correct: 'a',
                explanation: 'Yes, the superclasses of a category may have different key attributes (as in OWNER category with PERSON, BANK, COMPANY) or they may have the same key attribute (as in REGISTERED_VEHICLE). This flexibility is one feature that distinguishes categories from regular specialization.',
                points: 5
            },
            q27: {
                type: 'text',
                keywords: ['total', 'union', 'all entities', 'partial', 'subset', 'double line', 'single line'],
                modelAnswer: 'A total category holds the union of ALL entities in its superclasses - every entity from the superclasses must be in the category (represented by a double line). A partial category can hold a subset of the union - not all entities from superclasses need to be in the category (represented by a single line).',
                explanation: 'Total category (double line) includes all entities from superclasses (complete union). Partial category (single line) includes only a subset (partial union).',
                points: 5
            },
            q28: {
                type: 'mcq',
                correct: 'a',
                explanation: 'A total category is represented by a double line connecting the category and the circle in the EER diagram. This indicates that the category includes the complete union of all entities from its superclasses.',
                points: 5
            },
            q29: {
                type: 'text',
                keywords: ['same type', 'share', 'attributes', 'key', 'specialization', 'different types', 'categorization', 'union'],
                modelAnswer: 'Use specialization/generalization when the classes represent the same type of entities and share numerous attributes including the same key attributes. Use categorization (UNION type) when superclasses represent different types of entities or when modeling a collection that is a subset of the union of distinct entity types. The choice can be subjective for total categories.',
                explanation: 'Use specialization when entities are same type with shared attributes/keys. Use categorization when modeling different entity types or when needing selective inheritance from multiple sources.',
                points: 5
            },
            q30: {
                type: 'mcq',
                correct: 'a',
                explanation: 'The three main EER concepts that improve expressive power are: (1) Superclasses and subclasses with specialization/generalization, (2) Categories or UNION types, and (3) Aggregation. These enable modeling of very complex database applications beyond what basic ER can handle.',
                points: 5
            }
        };

        let answers = {};
        let timeRemaining = 3600; // 60 minutes
        let timerInterval;
        let startTime = Date.now();

        // Timer
        function startTimer() {
            timerInterval = setInterval(() => {
                timeRemaining--;
                
                const minutes = Math.floor(timeRemaining / 60);
                const seconds = timeRemaining % 60;
                const timerEl = document.getElementById('timer');
                timerEl.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
                
                if (timeRemaining <= 600) {
                    timerEl.classList.add('warning');
                }
                
                if (timeRemaining <= 0) {
                    clearInterval(timerInterval);
                    submitExam();
                }
            }, 1000);
        }

        // Track answers
        document.querySelectorAll('input[type="radio"]').forEach(radio => {
            radio.addEventListener('change', (e) => {
                const questionNum = e.target.name;
                answers[questionNum] = e.target.value;
                
                const options = e.target.closest('.options').querySelectorAll('.mcq-option');
                options.forEach(opt => opt.classList.remove('selected'));
                e.target.closest('.mcq-option').classList.add('selected');
                
                updateProgress();
            });
        });

        document.querySelectorAll('.text-answer').forEach(textarea => {
            textarea.addEventListener('blur', (e) => {
                const questionNum = e.target.id;
                answers[questionNum] = e.target.value;
                updateProgress();
            });
        });

        // Grade MCQ
        function gradeMCQ(questionNum) {
            const answer = answerKey[questionNum];
            const userAnswer = answers[questionNum];
            const feedbackEl = document.getElementById(`feedback${questionNum.slice(1)}`);
            const options = document.querySelectorAll(`input[name="${questionNum}"]`);
            
            feedbackEl.classList.remove('correct', 'incorrect');
            feedbackEl.classList.add('show');
            
            options.forEach(option => {
                const optionEl = option.closest('.mcq-option');
                optionEl.classList.remove('correct', 'incorrect');
                
                if (option.value === answer.correct) {
                    optionEl.classList.add('correct');
                }
                
                if (option.value === userAnswer && userAnswer !== answer.correct) {
                    optionEl.classList.add('incorrect');
                }
            });
            
            if (userAnswer === answer.correct) {
                feedbackEl.className = 'feedback show correct';
                feedbackEl.innerHTML = `
                    <div class="feedback-title">‚úÖ Correct! (+${answer.points} points)</div>
                    <div class="feedback-text">${answer.explanation}</div>
                `;
            } else {
                feedbackEl.className = 'feedback show incorrect';
                feedbackEl.innerHTML = `
                    <div class="feedback-title">‚ùå Incorrect (0 points)</div>
                    <div class="feedback-text">${answer.explanation}</div>
                `;
            }
        }

        // Grade Text
        function gradeText(questionNum) {
            const answer = answerKey[questionNum];
            const userAnswer = (answers[questionNum] || '').toLowerCase();
            const feedbackEl = document.getElementById(`feedback${questionNum.slice(1)}`);
            
            if (!userAnswer.trim()) {
                feedbackEl.className = 'feedback show incorrect';
                feedbackEl.innerHTML = `
                    <div class="feedback-title">‚ùå No Answer Provided (0 points)</div>
                    <div class="feedback-text">${answer.explanation}</div>
                    <div class="model-answer">
                        <div class="model-answer-title">üìù Model Answer:</div>
                        ${answer.modelAnswer}
                    </div>
                `;
                return;
            }
            
            let keywordCount = 0;
            answer.keywords.forEach(keyword => {
                if (userAnswer.includes(keyword.toLowerCase())) {
                    keywordCount++;
                }
            });
            
            const percentage = keywordCount / answer.keywords.length;
            let earnedPoints = Math.round(percentage * answer.points);
            
            feedbackEl.classList.add('show');
            
            if (percentage >= 0.7) {
                feedbackEl.className = 'feedback show correct';
                feedbackEl.innerHTML = `
                    <div class="feedback-title">‚úÖ Excellent Answer! (+${earnedPoints} points)</div>
                    <div class="feedback-text">${answer.explanation}</div>
                `;
            } else if (percentage >= 0.4) {
                feedbackEl.className = 'feedback show partial';
                feedbackEl.innerHTML = `
                    <div class="feedback-title">‚ö†Ô∏è Partial Credit (+${earnedPoints} points)</div>
                    <div class="feedback-text">Your answer touches on some key points but could be more complete. ${answer.explanation}</div>
                    <div class="model-answer">
                        <div class="model-answer-title">üìù Model Answer:</div>
                        ${answer.modelAnswer}
                    </div>
                `;
            } else {
                feedbackEl.className = 'feedback show incorrect';
                earnedPoints = 0;
                feedbackEl.innerHTML = `
                    <div class="feedback-title">‚ùå Needs Improvement (0 points)</div>
                    <div class="feedback-text">${answer.explanation}</div>
                    <div class="model-answer">
                        <div class="model-answer-title">üìù Model Answer:</div>
                        ${answer.modelAnswer}
                    </div>
                `;
            }
        }

        // Update progress
        function updateProgress() {
            const totalQuestions = Object.keys(answerKey).length;
            const answeredQuestions = Object.keys(answers).length;
            
            document.getElementById('questionsAnswered').textContent = 
                `${answeredQuestions}/${totalQuestions} Answered`;
            
            const percentage = (answeredQuestions / totalQuestions) * 100;
            document.getElementById('progressFill').style.width = `${percentage}%`;
        }

        // Submit Exam
        function submitExam() {
            clearInterval(timerInterval);
            
            // Grade all questions
            Object.keys(answerKey).forEach(key => {
                if (answerKey[key].type === 'mcq') {
                    gradeMCQ(key);
                } else if (answerKey[key].type === 'text') {
                    gradeText(key);
                }
            });
            
            // Calculate score
            let totalPoints = 0;
            let earnedPoints = 0;
            
            Object.keys(answerKey).forEach(key => {
                totalPoints += answerKey[key].points;
                
                if (answerKey[key].type === 'mcq') {
                    if (answers[key] === answerKey[key].correct) {
                        earnedPoints += answerKey[key].points;
                    }
                } else {
                    const userAnswer = (answers[key] || '').toLowerCase();
                    let keywordCount = 0;
                    answerKey[key].keywords.forEach(keyword => {
                        if (userAnswer.includes(keyword.toLowerCase())) {
                            keywordCount++;
                        }
                    });
                    const percentage = keywordCount / answerKey[key].keywords.length;
                    earnedPoints += Math.round(percentage * answerKey[key].points);
                }
            });
            
            const finalPercentage = Math.round((earnedPoints / totalPoints) * 100);
            
            // Show results
            document.getElementById('finalScore').textContent = `${finalPercentage}%`;
            
            let performanceText = '';
            let badgeClass = '';
            
            if (finalPercentage >= 90) {
                performanceText = 'üåü Excellent! Outstanding mastery of EER concepts!';
                badgeClass = 'badge-excellent';
            } else if (finalPercentage >= 75) {
                performanceText = 'üëç Good Job! Solid understanding of EER modeling.';
                badgeClass = 'badge-good';
            } else if (finalPercentage >= 60) {
                performanceText = 'üìö Fair. Review the EER material for better understanding.';
                badgeClass = 'badge-fair';
            } else {
                performanceText = 'üìñ Needs Improvement. Please review Chapter 3 thoroughly.';
                badgeClass = 'badge-poor';
            }
            
            const badge = document.getElementById('performanceBadge');
            badge.textContent = performanceText;
            badge.className = `performance-badge ${badgeClass}`;
            
            const timeSpent = Math.floor((Date.now() - startTime) / 1000);
            const minutes = Math.floor(timeSpent / 60);
            const seconds = timeSpent % 60;
            
            document.getElementById('scoreBreakdown').innerHTML = `
                <div class="score-item">
                    <span>Total Points:</span>
                    <strong>${earnedPoints} / ${totalPoints}</strong>
                </div>
                <div class="score-item">
                    <span>Percentage:</span>
                    <strong>${finalPercentage}%</strong>
                </div>
                <div class="score-item">
                    <span>Questions Answered:</span>
                    <strong>${Object.keys(answers).length} / ${Object.keys(answerKey).length}</strong>
                </div>
                <div class="score-item">
                    <span>Time Spent:</span>
                    <strong>${minutes}m ${seconds}s</strong>
                </div>
            `;
            
            document.getElementById('resultsModal').classList.add('show');
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function closeModal() {
            document.getElementById('resultsModal').classList.remove('show');
        }

        function retakeExam() {
            location.reload();
        }

        // Initialize
        startTimer();
    </script>
</body>
</html>