<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CS 340 Chapter 1 - Comprehensive Exam (30 Questions)</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Crimson+Pro:wght@400;600;700&family=Space+Mono:wght@400;700&family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #1a3a52;
            --secondary: #2c5f7f;
            --accent: #e67e22;
            --success: #27ae60;
            --danger: #e74c3c;
            --warning: #f39c12;
            --light: #f8f9fa;
            --dark: #0d1b2a;
            --bg: #fafbfc;
        }

        body {
            font-family: 'DM Sans', sans-serif;
            background: linear-gradient(135deg, #e8f0f7 0%, #f0f4f8 100%);
            color: var(--dark);
            line-height: 1.6;
            min-height: 100vh;
        }

        .exam-container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 40px 20px;
        }

        /* Header */
        .exam-header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
            color: white;
            padding: 50px 40px;
            border-radius: 20px;
            margin-bottom: 40px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.15);
            position: relative;
            overflow: hidden;
        }

        .exam-header::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -10%;
            width: 400px;
            height: 400px;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            border-radius: 50%;
            animation: float 15s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            50% { transform: translate(-20px, 20px) rotate(180deg); }
        }

        .exam-header h1 {
            font-family: 'Crimson Pro', serif;
            font-size: 2.5rem;
            margin-bottom: 10px;
            position: relative;
            z-index: 1;
        }

        .exam-header p {
            font-size: 1.1rem;
            opacity: 0.9;
            position: relative;
            z-index: 1;
        }

        .exam-meta {
            display: flex;
            gap: 30px;
            margin-top: 25px;
            flex-wrap: wrap;
            position: relative;
            z-index: 1;
        }

        .meta-item {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.95rem;
            background: rgba(255,255,255,0.15);
            padding: 8px 16px;
            border-radius: 20px;
            backdrop-filter: blur(10px);
        }

        /* Timer */
        .timer-section {
            background: white;
            padding: 20px 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 15px;
        }

        .timer {
            font-family: 'Space Mono', monospace;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
        }

        .timer.warning {
            color: var(--warning);
            animation: pulse 1s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.6; }
        }

        .progress-bar {
            flex-grow: 1;
            height: 8px;
            background: #e1e8ed;
            border-radius: 10px;
            margin: 0 20px;
            overflow: hidden;
            min-width: 200px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--success) 0%, var(--accent) 100%);
            border-radius: 10px;
            transition: width 0.3s ease;
        }

        /* Questions */
        .question-card {
            background: white;
            padding: 35px;
            border-radius: 15px;
            margin-bottom: 25px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.08);
            transition: all 0.3s ease;
            border-left: 5px solid var(--primary);
        }

        .question-card:hover {
            box-shadow: 0 8px 25px rgba(0,0,0,0.12);
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e1e8ed;
        }

        .question-number {
            font-family: 'Crimson Pro', serif;
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--primary);
        }

        .question-points {
            background: linear-gradient(135deg, #f0f7ff 0%, #e6f2ff 100%);
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--secondary);
        }

        .question-text {
            font-size: 1.1rem;
            margin-bottom: 25px;
            color: #333;
            line-height: 1.7;
        }

        /* MCQ Options */
        .mcq-option {
            background: #f8f9fa;
            border: 2px solid #e1e8ed;
            padding: 15px 20px;
            border-radius: 10px;
            margin-bottom: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .mcq-option:hover {
            border-color: var(--accent);
            background: #fff;
            transform: translateX(5px);
        }

        .mcq-option input[type="radio"],
        .mcq-option input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }

        .mcq-option.selected {
            border-color: var(--accent);
            background: linear-gradient(135deg, #fff8f0 0%, #ffeed9 100%);
        }

        .mcq-option.correct {
            border-color: var(--success);
            background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%);
        }

        .mcq-option.incorrect {
            border-color: var(--danger);
            background: linear-gradient(135deg, #fff5f5 0%, #ffe6e6 100%);
        }

        /* Text Input */
        .text-answer {
            width: 100%;
            padding: 15px;
            border: 2px solid #e1e8ed;
            border-radius: 10px;
            font-size: 1rem;
            font-family: 'DM Sans', sans-serif;
            transition: all 0.2s ease;
            resize: vertical;
        }

        .text-answer:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(230, 126, 34, 0.1);
        }

        /* Feedback */
        .feedback {
            margin-top: 20px;
            padding: 20px;
            border-radius: 10px;
            display: none;
        }

        .feedback.show {
            display: block;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .feedback.correct {
            background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%);
            border-left: 4px solid var(--success);
        }

        .feedback.incorrect {
            background: linear-gradient(135deg, #fff5f5 0%, #ffe6e6 100%);
            border-left: 4px solid var(--danger);
        }

        .feedback.partial {
            background: linear-gradient(135deg, #fff8f0 0%, #ffe6b3 100%);
            border-left: 4px solid var(--warning);
        }

        .feedback-title {
            font-weight: 700;
            font-size: 1.1rem;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .feedback-text {
            line-height: 1.7;
        }

        .model-answer {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin-top: 12px;
            border-left: 3px solid var(--accent);
        }

        .model-answer-title {
            font-weight: 600;
            color: var(--accent);
            margin-bottom: 8px;
        }

        /* Submit Button */
        .submit-section {
            position: sticky;
            bottom: 20px;
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 -4px 20px rgba(0,0,0,0.15);
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 15px 40px;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'DM Sans', sans-serif;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--accent) 0%, #d35400 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(230, 126, 34, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(230, 126, 34, 0.4);
        }

        .btn-secondary {
            background: #e1e8ed;
            color: var(--dark);
        }

        .btn-secondary:hover {
            background: #d1d8dd;
        }

        /* Results Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .modal.show {
            display: flex;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal-content {
            background: white;
            padding: 50px;
            border-radius: 20px;
            max-width: 600px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            animation: slideUp 0.4s ease;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .modal-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .modal-header h2 {
            font-family: 'Crimson Pro', serif;
            font-size: 2.5rem;
            color: var(--primary);
            margin-bottom: 10px;
        }

        .score-display {
            font-size: 4rem;
            font-weight: 700;
            font-family: 'Space Mono', monospace;
            text-align: center;
            margin: 30px 0;
            background: linear-gradient(135deg, var(--accent) 0%, #d35400 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .score-breakdown {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            margin: 25px 0;
        }

        .score-item {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid #e1e8ed;
        }

        .score-item:last-child {
            border-bottom: none;
        }

        .performance-badge {
            display: inline-block;
            padding: 10px 25px;
            border-radius: 25px;
            font-weight: 700;
            margin-top: 20px;
            text-align: center;
        }

        .badge-excellent {
            background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%);
            color: var(--success);
        }

        .badge-good {
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
            color: #1976d2;
        }

        .badge-fair {
            background: linear-gradient(135deg, #fff8f0 0%, #ffe6b3 100%);
            color: var(--warning);
        }

        .badge-poor {
            background: linear-gradient(135deg, #fff5f5 0%, #ffe6e6 100%);
            color: var(--danger);
        }

        .modal-buttons {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }

        .modal-buttons .btn {
            flex: 1;
        }

        /* Instructions */
        .instructions {
            background: linear-gradient(135deg, #f0f7ff 0%, #e6f2ff 100%);
            padding: 25px;
            border-radius: 15px;
            margin-bottom: 30px;
            border-left: 5px solid var(--secondary);
        }

        .instructions h3 {
            font-family: 'Crimson Pro', serif;
            color: var(--primary);
            margin-bottom: 15px;
        }

        .instructions ul {
            margin-left: 20px;
        }

        .instructions li {
            margin-bottom: 8px;
        }

        /* Section Headers */
        .section-header {
            background: linear-gradient(135deg, #f0f7ff 0%, #e6f2ff 100%);
            padding: 20px 30px;
            border-radius: 12px;
            margin: 40px 0 25px;
            border-left: 5px solid var(--accent);
        }

        .section-header h2 {
            font-family: 'Crimson Pro', serif;
            color: var(--primary);
            font-size: 1.8rem;
        }

        /* Footer */
        .exam-footer {
            text-align: center;
            margin-top: 60px;
            padding: 30px;
            color: #666;
        }

        .exam-footer .name {
            font-family: 'Crimson Pro', serif;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--accent);
            margin-bottom: 10px;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .exam-header h1 {
                font-size: 2rem;
            }

            .question-card {
                padding: 25px 20px;
            }

            .submit-section {
                flex-direction: column;
            }

            .modal-content {
                padding: 30px 20px;
            }

            .score-display {
                font-size: 3rem;
            }

            .timer-section {
                flex-direction: column;
            }

            .progress-bar {
                width: 100%;
                margin: 15px 0;
            }
        }
    </style>
</head>
<body>
    <div class="exam-container">
        <div class="exam-header">
            <h1>Chapter 1: Comprehensive Database Systems Exam</h1>
            <p>Complete assessment covering all fundamental database concepts</p>
            <div class="exam-meta">
                <div class="meta-item">üìö 30 Questions</div>
                <div class="meta-item">üíØ 150 Points</div>
                <div class="meta-item">‚è±Ô∏è 60 Minutes</div>
                <div class="meta-item">üë©‚Äçüéì Shoug Alomran</div>
            </div>
        </div>

        <div class="instructions">
            <h3>üìã Exam Instructions</h3>
            <ul>
                <li>This comprehensive exam covers ALL topics from Chapter 1</li>
                <li>30 questions total: 20 Multiple Choice + 10 Short Answer</li>
                <li>Answer all questions to receive full credit</li>
                <li>Instant feedback provided with detailed explanations</li>
                <li>Short answer questions use intelligent keyword matching</li>
                <li>Click "Submit Exam" when finished for your final score</li>
            </ul>
        </div>

        <div class="timer-section">
            <div class="timer" id="timer">60:00</div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill" style="width: 0%"></div>
            </div>
            <div id="questionsAnswered">0/30 Answered</div>
        </div>

        <!-- SECTION 1: DBMS Fundamentals -->
        <div class="section-header">
            <h2>üìä Section 1: DBMS Fundamentals (8 questions)</h2>
        </div>

        <!-- Q1 -->
        <div class="question-card" data-question="1">
            <div class="question-header">
                <span class="question-number">Question 1</span>
                <span class="question-points">5 points</span>
            </div>
            <div class="question-text">
                What is the primary difference between a database and a database management system (DBMS)?
            </div>
            <div class="options">
                <label class="mcq-option">
                    <input type="radio" name="q1" value="a">
                    <span>A database is hardware, while a DBMS is software</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q1" value="b">
                    <span>A database is the data itself, while a DBMS is the software that manages the data</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q1" value="c">
                    <span>A database is for small datasets, while a DBMS is for large datasets</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q1" value="d">
                    <span>There is no difference; the terms are interchangeable</span>
                </label>
            </div>
            <div class="feedback" id="feedback1"></div>
        </div>

        <!-- Q2 -->
        <div class="question-card" data-question="2">
            <div class="question-header">
                <span class="question-number">Question 2</span>
                <span class="question-points">5 points</span>
            </div>
            <div class="question-text">
                Which of the following is NOT a typical advantage of using a DBMS over a file-based system?
            </div>
            <div class="options">
                <label class="mcq-option">
                    <input type="radio" name="q2" value="a">
                    <span>Controlled redundancy</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q2" value="b">
                    <span>Data consistency</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q2" value="c">
                    <span>Concurrent access control</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q2" value="d">
                    <span>Lower initial development cost</span>
                </label>
            </div>
            <div class="feedback" id="feedback2"></div>
        </div>

        <!-- Q3 -->
        <div class="question-card" data-question="3">
            <div class="question-header">
                <span class="question-number">Question 3</span>
                <span class="question-points">5 points</span>
            </div>
            <div class="question-text">
                In which scenario would using a DBMS NOT be recommended?
            </div>
            <div class="options">
                <label class="mcq-option">
                    <input type="radio" name="q3" value="a">
                    <span>A banking system requiring ACID compliance and multiple concurrent users</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q3" value="b">
                    <span>A simple embedded system with static data and severe hardware limitations</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q3" value="c">
                    <span>A university managing student records with frequent updates</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q3" value="d">
                    <span>An e-commerce platform handling thousands of transactions daily</span>
                </label>
            </div>
            <div class="feedback" id="feedback3"></div>
        </div>

        <!-- Q4 -->
        <div class="question-card" data-question="4">
            <div class="question-header">
                <span class="question-number">Question 4</span>
                <span class="question-points">5 points</span>
            </div>
            <div class="question-text">
                What are "queries" and "transactions" in the context of database applications?
            </div>
            <div class="options">
                <label class="mcq-option">
                    <input type="radio" name="q4" value="a">
                    <span>Queries are requests for data retrieval; transactions are collections of database operations</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q4" value="b">
                    <span>Queries modify data; transactions retrieve data</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q4" value="c">
                    <span>Both terms refer to the same concept</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q4" value="d">
                    <span>Queries are used by DBAs; transactions are used by end users</span>
                </label>
            </div>
            <div class="feedback" id="feedback4"></div>
        </div>

        <!-- Q5 -->
        <div class="question-card" data-question="5">
            <div class="question-header">
                <span class="question-number">Question 5</span>
                <span class="question-points">5 points</span>
            </div>
            <div class="question-text">
                List three main objectives/goals of a DBMS.
            </div>
            <textarea class="text-answer" id="q5" rows="4" placeholder="Type your answer here..."></textarea>
            <div class="feedback" id="feedback5"></div>
        </div>

        <!-- Q6 -->
        <div class="question-card" data-question="6">
            <div class="question-header">
                <span class="question-number">Question 6</span>
                <span class="question-points">5 points</span>
            </div>
            <div class="question-text">
                What is "program-data independence" and why is it important in database systems?
            </div>
            <textarea class="text-answer" id="q6" rows="4" placeholder="Type your answer here..."></textarea>
            <div class="feedback" id="feedback6"></div>
        </div>

        <!-- Q7 -->
        <div class="question-card" data-question="7">
            <div class="question-header">
                <span class="question-number">Question 7</span>
                <span class="question-points">5 points</span>
            </div>
            <div class="question-text">
                Which characteristic of the database approach allows a database to be "self-describing"?
            </div>
            <div class="options">
                <label class="mcq-option">
                    <input type="radio" name="q7" value="a">
                    <span>The database stores the system catalog (metadata) along with the actual data</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q7" value="b">
                    <span>The database automatically creates documentation</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q7" value="c">
                    <span>The database uses natural language processing</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q7" value="d">
                    <span>The database includes user manuals within its structure</span>
                </label>
            </div>
            <div class="feedback" id="feedback7"></div>
        </div>

        <!-- Q8 -->
        <div class="question-card" data-question="8">
            <div class="question-header">
                <span class="question-number">Question 8</span>
                <span class="question-points">5 points</span>
            </div>
            <div class="question-text">
                What is the difference between logical data independence and physical data independence?
            </div>
            <textarea class="text-answer" id="q8" rows="4" placeholder="Type your answer here..."></textarea>
            <div class="feedback" id="feedback8"></div>
        </div>

        <!-- SECTION 2: Data Abstraction & Schemas -->
        <div class="section-header">
            <h2>üîç Section 2: Data Abstraction & Schemas (5 questions)</h2>
        </div>

        <!-- Q9 -->
        <div class="question-card" data-question="9">
            <div class="question-header">
                <span class="question-number">Question 9</span>
                <span class="question-points">5 points</span>
            </div>
            <div class="question-text">
                What are the three levels of data abstraction in a database system?
            </div>
            <div class="options">
                <label class="mcq-option">
                    <input type="radio" name="q9" value="a">
                    <span>Physical level, Logical level, View level</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q9" value="b">
                    <span>Input level, Processing level, Output level</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q9" value="c">
                    <span>User level, Application level, System level</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q9" value="d">
                    <span>Hardware level, Software level, Network level</span>
                </label>
            </div>
            <div class="feedback" id="feedback9"></div>
        </div>

        <!-- Q10 -->
        <div class="question-card" data-question="10">
            <div class="question-header">
                <span class="question-number">Question 10</span>
                <span class="question-points">5 points</span>
            </div>
            <div class="question-text">
                What is the difference between a database schema and a database instance?
            </div>
            <div class="options">
                <label class="mcq-option">
                    <input type="radio" name="q10" value="a">
                    <span>Schema is the structure/design that rarely changes; instance is the actual data at a specific moment</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q10" value="b">
                    <span>Schema is the data; instance is the structure</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q10" value="c">
                    <span>Schema is for small databases; instance is for large databases</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q10" value="d">
                    <span>They are the same thing with different names</span>
                </label>
            </div>
            <div class="feedback" id="feedback10"></div>
        </div>

        <!-- Q11 -->
        <div class="question-card" data-question="11">
            <div class="question-header">
                <span class="question-number">Question 11</span>
                <span class="question-points">5 points</span>
            </div>
            <div class="question-text">
                Which schema describes the database design at the storage/physical level?
            </div>
            <div class="options">
                <label class="mcq-option">
                    <input type="radio" name="q11" value="a">
                    <span>Physical schema</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q11" value="b">
                    <span>Logical schema</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q11" value="c">
                    <span>External schema</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q11" value="d">
                    <span>Conceptual schema</span>
                </label>
            </div>
            <div class="feedback" id="feedback11"></div>
        </div>

        <!-- Q12 -->
        <div class="question-card" data-question="12">
            <div class="question-header">
                <span class="question-number">Question 12</span>
                <span class="question-points">5 points</span>
            </div>
            <div class="question-text">
                Explain what "data abstraction" means in the context of database systems.
            </div>
            <textarea class="text-answer" id="q12" rows="4" placeholder="Type your answer here..."></textarea>
            <div class="feedback" id="feedback12"></div>
        </div>

        <!-- Q13 -->
        <div class="question-card" data-question="13">
            <div class="question-header">
                <span class="question-number">Question 13</span>
                <span class="question-points">5 points</span>
            </div>
            <div class="question-text">
                Why do different users (e.g., students, registrars, DBAs) need different "views" of the same database?
            </div>
            <textarea class="text-answer" id="q13" rows="4" placeholder="Type your answer here..."></textarea>
            <div class="feedback" id="feedback13"></div>
        </div>

        <!-- SECTION 3: ACID Properties -->
        <div class="section-header">
            <h2>‚ö° Section 3: ACID Properties & Transactions (6 questions)</h2>
        </div>

        <!-- Q14 -->
        <div class="question-card" data-question="14">
            <div class="question-header">
                <span class="question-number">Question 14</span>
                <span class="question-points">5 points</span>
            </div>
            <div class="question-text">
                What does the "A" in ACID stand for, and what does it guarantee?
            </div>
            <div class="options">
                <label class="mcq-option">
                    <input type="radio" name="q14" value="a">
                    <span>Atomicity - ensures the "all or nothing" rule; transactions execute completely or not at all</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q14" value="b">
                    <span>Availability - ensures the database is always accessible</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q14" value="c">
                    <span>Accuracy - ensures all data is correct</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q14" value="d">
                    <span>Authentication - ensures only authorized users access data</span>
                </label>
            </div>
            <div class="feedback" id="feedback14"></div>
        </div>

        <!-- Q15 -->
        <div class="question-card" data-question="15">
            <div class="question-header">
                <span class="question-number">Question 15</span>
                <span class="question-points">5 points</span>
            </div>
            <div class="question-text">
                Explain the "Consistency" property in ACID. What must be maintained before and after a transaction?
            </div>
            <textarea class="text-answer" id="q15" rows="4" placeholder="Type your answer here..."></textarea>
            <div class="feedback" id="feedback15"></div>
        </div>

        <!-- Q16 -->
        <div class="question-card" data-question="16">
            <div class="question-header">
                <span class="question-number">Question 16</span>
                <span class="question-points">5 points</span>
            </div>
            <div class="question-text">
                What problem does the "Isolation" property solve in concurrent database systems?
            </div>
            <div class="options">
                <label class="mcq-option">
                    <input type="radio" name="q16" value="a">
                    <span>It prevents transactions from interfering with each other when executing concurrently</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q16" value="b">
                    <span>It prevents data loss during system failures</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q16" value="c">
                    <span>It prevents unauthorized access to data</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q16" value="d">
                    <span>It prevents data redundancy</span>
                </label>
            </div>
            <div class="feedback" id="feedback16"></div>
        </div>

        <!-- Q17 -->
        <div class="question-card" data-question="17">
            <div class="question-header">
                <span class="question-number">Question 17</span>
                <span class="question-points">5 points</span>
            </div>
            <div class="question-text">
                Explain "Durability" in ACID. What happens to committed transactions?
            </div>
            <textarea class="text-answer" id="q17" rows="4" placeholder="Type your answer here..."></textarea>
            <div class="feedback" id="feedback17"></div>
        </div>

        <!-- Q18 -->
        <div class="question-card" data-question="18">
            <div class="question-header">
                <span class="question-number">Question 18</span>
                <span class="question-points">5 points</span>
            </div>
            <div class="question-text">
                If a bank transfer transaction fails after deducting money from Account A but before adding it to Account B, which ACID property was violated?
            </div>
            <div class="options">
                <label class="mcq-option">
                    <input type="radio" name="q18" value="a">
                    <span>Atomicity - the transaction should have been all-or-nothing</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q18" value="b">
                    <span>Consistency - the total balance is no longer preserved</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q18" value="c">
                    <span>Both Atomicity and Consistency</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q18" value="d">
                    <span>Isolation</span>
                </label>
            </div>
            <div class="feedback" id="feedback18"></div>
        </div>

        <!-- Q19 -->
        <div class="question-card" data-question="19">
            <div class="question-header">
                <span class="question-number">Question 19</span>
                <span class="question-points">5 points</span>
            </div>
            <div class="question-text">
                What does OLTP stand for and what is its significance in database systems?
            </div>
            <div class="options">
                <label class="mcq-option">
                    <input type="radio" name="q19" value="a">
                    <span>Online Transaction Processing - handles hundreds of concurrent transactions per second</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q19" value="b">
                    <span>Offline Transaction Processing - handles batch transactions</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q19" value="c">
                    <span>Online Testing and Production - for quality assurance</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q19" value="d">
                    <span>Optimized Linear Transaction Protocol - for faster processing</span>
                </label>
            </div>
            <div class="feedback" id="feedback19"></div>
        </div>

        <!-- SECTION 4: Database Users -->
        <div class="section-header">
            <h2>üë• Section 4: Database Users & Roles (4 questions)</h2>
        </div>

        <!-- Q20 -->
        <div class="question-card" data-question="20">
            <div class="question-header">
                <span class="question-number">Question 20</span>
                <span class="question-points">5 points</span>
            </div>
            <div class="question-text">
                What are the main responsibilities of a Database Administrator (DBA)?
            </div>
            <textarea class="text-answer" id="q20" rows="4" placeholder="Type your answer here..."></textarea>
            <div class="feedback" id="feedback20"></div>
        </div>

        <!-- Q21 -->
        <div class="question-card" data-question="21">
            <div class="question-header">
                <span class="question-number">Question 21</span>
                <span class="question-points">5 points</span>
            </div>
            <div class="question-text">
                What is the difference between "Casual End Users" and "Naive/Parametric End Users"?
            </div>
            <div class="options">
                <label class="mcq-option">
                    <input type="radio" name="q21" value="a">
                    <span>Casual users access the database occasionally (e.g., managers); Naive users perform routine tasks with canned transactions (e.g., bank tellers)</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q21" value="b">
                    <span>Casual users are beginners; Naive users are experts</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q21" value="c">
                    <span>Casual users modify data; Naive users only read data</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q21" value="d">
                    <span>There is no significant difference</span>
                </label>
            </div>
            <div class="feedback" id="feedback21"></div>
        </div>

        <!-- Q22 -->
        <div class="question-card" data-question="22">
            <div class="question-header">
                <span class="question-number">Question 22</span>
                <span class="question-points">5 points</span>
            </div>
            <div class="question-text">
                What is the primary role of Database Designers?
            </div>
            <div class="options">
                <label class="mcq-option">
                    <input type="radio" name="q22" value="a">
                    <span>Define the database content, structure, constraints, and communicate with end-users to understand their needs</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q22" value="b">
                    <span>Monitor database performance and authorize user access</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q22" value="c">
                    <span>Create the user interface for database applications</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q22" value="d">
                    <span>Backup and restore database data</span>
                </label>
            </div>
            <div class="feedback" id="feedback22"></div>
        </div>

        <!-- Q23 -->
        <div class="question-card" data-question="23">
            <div class="question-header">
                <span class="question-number">Question 23</span>
                <span class="question-points">5 points</span>
            </div>
            <div class="question-text">
                Give two examples of "canned transactions" that Naive/Parametric end users perform.
            </div>
            <textarea class="text-answer" id="q23" rows="3" placeholder="Type your answer here..."></textarea>
            <div class="feedback" id="feedback23"></div>
        </div>

        <!-- SECTION 5: Database Security -->
        <div class="section-header">
            <h2>üîí Section 5: Database Security (4 questions)</h2>
        </div>

        <!-- Q24 -->
        <div class="question-card" data-question="24">
            <div class="question-header">
                <span class="question-number">Question 24</span>
                <span class="question-points">5 points</span>
            </div>
            <div class="question-text">
                What are the three main sources of database security risks?
            </div>
            <div class="options">
                <label class="mcq-option">
                    <input type="radio" name="q24" value="a">
                    <span>Malicious insider, Negligent person within organization, External attacker</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q24" value="b">
                    <span>Viruses, Hackers, Hardware failures</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q24" value="c">
                    <span>Software bugs, Network issues, Power outages</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q24" value="d">
                    <span>User errors, System crashes, Data corruption</span>
                </label>
            </div>
            <div class="feedback" id="feedback24"></div>
        </div>

        <!-- Q25 -->
        <div class="question-card" data-question="25">
            <div class="question-header">
                <span class="question-number">Question 25</span>
                <span class="question-points">5 points</span>
            </div>
            <div class="question-text">
                Which security component restricts database access ensuring only authorized users can view or modify data?
            </div>
            <div class="options">
                <label class="mcq-option">
                    <input type="radio" name="q25" value="a">
                    <span>Access Control</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q25" value="b">
                    <span>Encryption</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q25" value="c">
                    <span>Audit Trails</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q25" value="d">
                    <span>Data Masking</span>
                </label>
            </div>
            <div class="feedback" id="feedback25"></div>
        </div>

        <!-- Q26 -->
        <div class="question-card" data-question="26">
            <div class="question-header">
                <span class="question-number">Question 26</span>
                <span class="question-points">5 points</span>
            </div>
            <div class="question-text">
                Explain the purpose of "Audit Trails" in database security.
            </div>
            <textarea class="text-answer" id="q26" rows="3" placeholder="Type your answer here..."></textarea>
            <div class="feedback" id="feedback26"></div>
        </div>

        <!-- Q27 -->
        <div class="question-card" data-question="27">
            <div class="question-header">
                <span class="question-number">Question 27</span>
                <span class="question-points">5 points</span>
            </div>
            <div class="question-text">
                What is the difference between "Encryption" and "Data Masking/Redaction"?
            </div>
            <textarea class="text-answer" id="q27" rows="4" placeholder="Type your answer here..."></textarea>
            <div class="feedback" id="feedback27"></div>
        </div>

        <!-- SECTION 6: System Catalog -->
        <div class="section-header">
            <h2>üìñ Section 6: System Catalog (3 questions)</h2>
        </div>

        <!-- Q28 -->
        <div class="question-card" data-question="28">
            <div class="question-header">
                <span class="question-number">Question 28</span>
                <span class="question-points">5 points</span>
            </div>
            <div class="question-text">
                What is the system catalog (data dictionary) and what information does it store?
            </div>
            <textarea class="text-answer" id="q28" rows="4" placeholder="Type your answer here..."></textarea>
            <div class="feedback" id="feedback28"></div>
        </div>

        <!-- Q29 -->
        <div class="question-card" data-question="29">
            <div class="question-header">
                <span class="question-number">Question 29</span>
                <span class="question-points">5 points</span>
            </div>
            <div class="question-text">
                What is "metadata" in the context of database systems?
            </div>
            <div class="options">
                <label class="mcq-option">
                    <input type="radio" name="q29" value="a">
                    <span>Data about data - the description and structure information stored in the system catalog</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q29" value="b">
                    <span>The actual data stored in database tables</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q29" value="c">
                    <span>Backup copies of the database</span>
                </label>
                <label class="mcq-option">
                    <input type="radio" name="q29" value="d">
                    <span>Encrypted database content</span>
                </label>
            </div>
            <div class="feedback" id="feedback29"></div>
        </div>

        <!-- Q30 -->
        <div class="question-card" data-question="30">
            <div class="question-header">
                <span class="question-number">Question 30</span>
                <span class="question-points">5 points</span>
            </div>
            <div class="question-text">
                The system catalog can be queried using standard query languages like SQL. True or False, and why?
            </div>
            <textarea class="text-answer" id="q30" rows="3" placeholder="Type your answer here..."></textarea>
            <div class="feedback" id="feedback30"></div>
        </div>

        <div class="submit-section">
            <button class="btn btn-secondary" onclick="reviewAnswers()">Review Answers</button>
            <button class="btn btn-primary" onclick="submitExam()">Submit Exam</button>
        </div>

        <div class="exam-footer">
            <div class="name">Shoug Alomran</div>
            <div>CS 340: Introduction to Database Systems - Chapter 1 Comprehensive Exam</div>
        </div>
    </div>

    <!-- Results Modal -->
    <div class="modal" id="resultsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Exam Results</h2>
            </div>
            <div class="score-display" id="finalScore">0%</div>
            <div class="score-breakdown" id="scoreBreakdown"></div>
            <div style="text-align: center;">
                <div class="performance-badge" id="performanceBadge"></div>
            </div>
            <div class="modal-buttons">
                <button class="btn btn-secondary" onclick="closeModal()">Review Answers</button>
                <button class="btn btn-primary" onclick="retakeExam()">Retake Exam</button>
            </div>
        </div>
    </div>

    <script>
        // Comprehensive Answer Key for 30 Questions
        const answerKey = {
            // SECTION 1: DBMS Fundamentals
            q1: {
                type: 'mcq',
                correct: 'b',
                explanation: 'A database is the collection of related data itself, while a DBMS is the software system that manages, accesses, modifies, and maintains that data. The DBMS provides the interface between users/applications and the database.',
                points: 5
            },
            q2: {
                type: 'mcq',
                correct: 'd',
                explanation: 'DBMS systems typically have HIGHER initial development costs compared to simple file-based systems due to software licensing, training, and setup. However, they provide controlled redundancy, data consistency, concurrent access, security, and recovery - benefits that file systems cannot easily provide.',
                points: 5
            },
            q3: {
                type: 'mcq',
                correct: 'b',
                explanation: 'DBMS is not recommended for simple embedded systems with static data and severe hardware limitations. The overhead of a DBMS (memory, processing, storage) is unnecessary when data is static, there\'s no concurrent access, and hardware resources are constrained.',
                points: 5
            },
            q4: {
                type: 'mcq',
                correct: 'a',
                explanation: 'Queries are requests that retrieve/read data from the database and generate results. Transactions are collections of database operations (reads and writes) that must be executed as a single logical unit to maintain database consistency.',
                points: 5
            },
            q5: {
                type: 'text',
                keywords: ['availability', 'integrity', 'security', 'independence', 'data', 'access', 'authorized', 'reliable', 'correct', 'meaningful'],
                modelAnswer: 'Three main objectives of a DBMS are: (1) Data Availability - making data available to users in a meaningful format at reasonable cost, (2) Data Integrity - ensuring data is reliable and correct, (3) Data Security - ensuring only authorized users can access data, often enforced through passwords and access controls.',
                explanation: 'Key objectives include data availability (accessible to users), data integrity (reliable/correct data), data security (authorized access only), and data independence (hiding implementation details).',
                points: 5
            },
            q6: {
                type: 'text',
                keywords: ['structure', 'storage', 'programs', 'change', 'applications', 'catalog', 'independent', 'modify'],
                modelAnswer: 'Program-data independence means that the structure of data files is stored separately from application programs (in the DBMS catalog). This allows changing data structures and storage organization without having to change the application programs that access the data. It\'s important because it makes systems more flexible and easier to maintain.',
                explanation: 'Program-data independence separates data structure from programs, allowing changes to storage/structure without modifying applications. This is achieved by storing structure information in the DBMS catalog.',
                points: 5
            },
            q7: {
                type: 'mcq',
                correct: 'a',
                explanation: 'A database is "self-describing" because it stores not only the data itself but also a complete description of the database structure (metadata) in the system catalog. This includes table definitions, data types, constraints, and relationships - allowing the DBMS to work with different databases.',
                points: 5
            },
            q8: {
                type: 'text',
                keywords: ['logical', 'physical', 'conceptual', 'schema', 'external', 'storage', 'internal', 'structure', 'view'],
                modelAnswer: 'Logical data independence is the ability to change the conceptual/logical schema without changing external schemas (user views) or application programs. Physical data independence is the ability to change the internal/physical schema (storage structures, file organization, indexes) without changing the conceptual schema. Physical independence is easier to achieve than logical independence.',
                explanation: 'Logical independence allows changes to database structure without affecting user views. Physical independence allows changes to storage implementation without affecting logical structure. Physical is easier to achieve.',
                points: 5
            },

            // SECTION 2: Data Abstraction & Schemas
            q9: {
                type: 'mcq',
                correct: 'a',
                explanation: 'The three levels of data abstraction are: (1) Physical level - describes HOW data is actually stored, (2) Logical level - describes WHAT data is stored and relationships, (3) View level (External level) - shows different parts of the database to different users based on their needs.',
                points: 5
            },
            q10: {
                type: 'mcq',
                correct: 'a',
                explanation: 'A schema is the logical structure/design of the database that changes very infrequently (the blueprint). An instance is the actual data stored in the database at a particular moment in time, which changes frequently as data is inserted, updated, or deleted.',
                points: 5
            },
            q11: {
                type: 'mcq',
                correct: 'a',
                explanation: 'The physical schema describes the database design at the physical/storage level - how data is actually stored on disk, including file organization, storage structures, access paths, and indexes.',
                points: 5
            },
            q12: {
                type: 'text',
                keywords: ['suppression', 'hiding', 'details', 'storage', 'conceptual', 'view', 'implementation', 'essential'],
                modelAnswer: 'Data abstraction is the suppression of details about how data is stored and organized, while highlighting essential features for improved understanding. It allows users to work with data at a conceptual level without needing to know storage implementation details, making systems easier to use and maintain.',
                explanation: 'Data abstraction hides storage/implementation details and provides conceptual views of data, making databases easier to use and allowing changes to physical storage without affecting users.',
                points: 5
            },
            q13: {
                type: 'text',
                keywords: ['security', 'relevant', 'authorized', 'need', 'different', 'access', 'permissions', 'specific', 'interest'],
                modelAnswer: 'Different users need different views because: (1) Security - users should only see data they\'re authorized to access, (2) Relevance - each user needs only data relevant to their role/tasks, (3) Simplicity - showing only necessary information makes the database easier to use. For example, students see grades and enrollment, while registrars see all student records and DBAs see system-level information.',
                explanation: 'Different views provide security (authorized access only), relevance (showing only needed data), and simplicity (hiding unnecessary complexity) for different user roles.',
                points: 5
            },

            // SECTION 3: ACID Properties
            q14: {
                type: 'mcq',
                correct: 'a',
                explanation: 'Atomicity ensures the "all or nothing" rule - a transaction is treated as a single unit that either executes completely or doesn\'t execute at all. If any part fails, the entire transaction is rolled back (aborted) and no partial changes are saved.',
                points: 5
            },
            q15: {
                type: 'text',
                keywords: ['integrity', 'constraints', 'valid', 'consistent', 'rules', 'before', 'after', 'correct'],
                modelAnswer: 'Consistency ensures that integrity constraints must be maintained so the database is consistent before and after the transaction. The database must remain in a valid state - all data integrity rules, constraints, and relationships must be satisfied. For example, in a bank transfer, the total amount of money must be the same before and after the transaction.',
                explanation: 'Consistency maintains integrity constraints and ensures the database remains in a valid state before and after transactions, with all rules and relationships preserved.',
                points: 5
            },
            q16: {
                type: 'mcq',
                correct: 'a',
                explanation: 'Isolation prevents concurrent transactions from interfering with each other. It ensures that changes made by one transaction are not visible to other transactions until committed. This prevents problems like reading intermediate/inconsistent states when multiple transactions are executing simultaneously.',
                points: 5
            },
            q17: {
                type: 'text',
                keywords: ['permanent', 'committed', 'persist', 'failure', 'non-volatile', 'memory', 'disk', 'storage', 'lost'],
                modelAnswer: 'Durability ensures that once a transaction has been committed, its effects are permanently stored in the database and persist even if system failures occur (power outage, crash). The changes are written to non-volatile memory/disk and are never lost. The effects of committed transactions are durable and cannot be undone by system failures.',
                explanation: 'Durability guarantees that committed transactions are permanently saved to non-volatile storage and persist even after system failures. Changes are never lost once committed.',
                points: 5
            },
            q18: {
                type: 'mcq',
                correct: 'c',
                explanation: 'Both Atomicity and Consistency were violated. Atomicity was violated because the transaction executed partially (not all-or-nothing). Consistency was violated because the total balance is no longer preserved - money was deducted but not added, breaking the integrity constraint that total money must remain constant.',
                points: 5
            },
            q19: {
                type: 'mcq',
                correct: 'a',
                explanation: 'OLTP stands for Online Transaction Processing. It is a major part of database applications that allows hundreds or even thousands of concurrent transactions to execute per second in real-time. Examples include banking systems, reservation systems, and e-commerce platforms.',
                points: 5
            },

            // SECTION 4: Database Users
            q20: {
                type: 'text',
                keywords: ['authorize', 'access', 'monitor', 'performance', 'efficiency', 'backup', 'recovery', 'resources', 'coordinate'],
                modelAnswer: 'Main DBA responsibilities include: (1) Authorizing access to the database and managing user permissions, (2) Coordinating and monitoring database use and performance, (3) Acquiring software and hardware resources, (4) Controlling database use and monitoring efficiency, (5) Managing backup and recovery procedures.',
                explanation: 'DBAs handle authorization/access control, performance monitoring, resource management, backup/recovery, and coordination of database use.',
                points: 5
            },
            q21: {
                type: 'mcq',
                correct: 'a',
                explanation: 'Casual end users occasionally access the database and may need different queries each time - typically middle or high-level managers. Naive/Parametric end users make up a large portion of users whose main job involves constantly querying and updating the database using standard pre-programmed queries (canned transactions) like bank tellers or reservation agents.',
                points: 5
            },
            q22: {
                type: 'mcq',
                correct: 'a',
                explanation: 'Database Designers are responsible for defining the content, structure, constraints, and functions/transactions of the database. They must communicate with end-users to understand their requirements and translate them into a database design that meets those needs.',
                points: 5
            },
            q23: {
                type: 'text',
                keywords: ['bank', 'teller', 'account', 'balance', 'withdrawal', 'deposit', 'reservation', 'hotel', 'airline', 'shipping', 'package', 'social', 'media', 'check'],
                modelAnswer: 'Examples of canned transactions include: (1) Bank tellers checking account balances and posting withdrawals/deposits, (2) Reservation agents checking availability and making reservations for airlines/hotels, (3) Shipping company employees entering package information and tracking shipments, (4) Social media users posting and reading content.',
                explanation: 'Canned transactions are routine, pre-programmed database operations. Examples: banking transactions, reservations, package tracking, social media interactions.',
                points: 5
            },

            // SECTION 5: Database Security
            q24: {
                type: 'mcq',
                correct: 'a',
                explanation: 'The three main sources of database security risks are: (1) Malicious insider with ill-intent who has privileged access, (2) Negligent person within the organization who exposes the database through careless actions, (3) External attacker who obtains credentials through social engineering or other methods. Insider threats are the most common cause of security breaches.',
                points: 5
            },
            q25: {
                type: 'mcq',
                correct: 'a',
                explanation: 'Access Control restricts access to the database, ensuring only authorized users have permission to view or modify data. It involves user authentication, authorization, and role-based access controls to prevent unauthorized access.',
                points: 5
            },
            q26: {
                type: 'text',
                keywords: ['records', 'monitor', 'activities', 'track', 'access', 'operations', 'who', 'what', 'when', 'suspicious', 'log'],
                modelAnswer: 'Audit Trails record and monitor all database activities, tracking who accessed the database, what operations were performed, and when they occurred. This allows administrators to identify suspicious activities, investigate security incidents, and maintain accountability. Audit logs help in detecting unauthorized access and tracking changes.',
                explanation: 'Audit trails log all database activities (who, what, when) to monitor access, detect suspicious behavior, investigate incidents, and maintain accountability.',
                points: 5
            },
            q27: {
                type: 'text',
                keywords: ['encryption', 'convert', 'secure', 'key', 'decrypt', 'masking', 'hide', 'conceal', 'display', 'permissions', 'redaction'],
                modelAnswer: 'Encryption protects data by converting it into a secure format that requires a decryption key to access - making data unreadable even if unauthorized access occurs. Data Masking/Redaction conceals sensitive information when displayed to users without proper permissions by hiding or replacing characters (e.g., showing **** instead of credit card numbers) - the data itself is not encrypted, just hidden from view.',
                explanation: 'Encryption converts data to unreadable format requiring a key; masking hides sensitive data from display without proper permissions (data not changed, just hidden from view).',
                points: 5
            },

            // SECTION 6: System Catalog
            q28: {
                type: 'text',
                keywords: ['metadata', 'schema', 'tables', 'structure', 'types', 'constraints', 'description', 'columns', 'relationships', 'indexes', 'security'],
                modelAnswer: 'The system catalog (data dictionary) is a collection of tables and views that store metadata - information about the database structure. It stores: relation names, attribute names and types, domain definitions, constraints (primary keys, foreign keys, NULL constraints), views, indexes, storage structures, security/authorization information (users, privileges), and statistical information for query optimization.',
                explanation: 'System catalog stores metadata (data about data) including table structures, data types, constraints, indexes, security information, and statistics for the database.',
                points: 5
            },
            q29: {
                type: 'mcq',
                correct: 'a',
                explanation: 'Metadata is "data about data" - it is the description and structural information about the database stored in the system catalog. This includes table definitions, column names and types, constraints, relationships, and other schema information rather than the actual data itself.',
                points: 5
            },
            q30: {
                type: 'text',
                keywords: ['true', 'yes', 'query', 'sql', 'language', 'access', 'dbms', 'stored', 'tables', 'relational'],
                modelAnswer: 'True. The system catalog is stored as relations/tables in relational DBMS, so it can be queried using standard query languages like SQL. This allows both DBMS routines and authorized users to access catalog information to learn about database structure, tables, columns, constraints, and other metadata.',
                explanation: 'True - the catalog is stored as tables/relations and can be queried with SQL, allowing users and DBMS to access metadata about the database structure.',
                points: 5
            }
        };

        let answers = {};
        let timeRemaining = 3600; // 60 minutes in seconds
        let timerInterval;
        let startTime = Date.now();

        // Timer
        function startTimer() {
            timerInterval = setInterval(() => {
                timeRemaining--;
                
                const minutes = Math.floor(timeRemaining / 60);
                const seconds = timeRemaining % 60;
                const timerEl = document.getElementById('timer');
                timerEl.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
                
                if (timeRemaining <= 600) { // 10 minutes warning
                    timerEl.classList.add('warning');
                }
                
                if (timeRemaining <= 0) {
                    clearInterval(timerInterval);
                    submitExam();
                }
            }, 1000);
        }

        // Track answers
        document.querySelectorAll('input[type="radio"]').forEach(radio => {
            radio.addEventListener('change', (e) => {
                const questionNum = e.target.name;
                answers[questionNum] = e.target.value;
                
                // Update selected styling
                const options = e.target.closest('.options').querySelectorAll('.mcq-option');
                options.forEach(opt => opt.classList.remove('selected'));
                e.target.closest('.mcq-option').classList.add('selected');
                
                updateProgress();
            });
        });

        document.querySelectorAll('.text-answer').forEach(textarea => {
            textarea.addEventListener('blur', (e) => {
                const questionNum = e.target.id;
                answers[questionNum] = e.target.value;
                updateProgress();
            });
        });

        // Grade MCQ
        function gradeMCQ(questionNum) {
            const answer = answerKey[questionNum];
            const userAnswer = answers[questionNum];
            const feedbackEl = document.getElementById(`feedback${questionNum.slice(1)}`);
            const options = document.querySelectorAll(`input[name="${questionNum}"]`);
            
            feedbackEl.classList.remove('correct', 'incorrect');
            feedbackEl.classList.add('show');
            
            options.forEach(option => {
                const optionEl = option.closest('.mcq-option');
                optionEl.classList.remove('correct', 'incorrect');
                
                if (option.value === answer.correct) {
                    optionEl.classList.add('correct');
                }
                
                if (option.value === userAnswer && userAnswer !== answer.correct) {
                    optionEl.classList.add('incorrect');
                }
            });
            
            if (userAnswer === answer.correct) {
                feedbackEl.className = 'feedback show correct';
                feedbackEl.innerHTML = `
                    <div class="feedback-title">‚úÖ Correct! (+${answer.points} points)</div>
                    <div class="feedback-text">${answer.explanation}</div>
                `;
            } else {
                feedbackEl.className = 'feedback show incorrect';
                feedbackEl.innerHTML = `
                    <div class="feedback-title">‚ùå Incorrect (0 points)</div>
                    <div class="feedback-text">${answer.explanation}</div>
                `;
            }
        }

        // Grade Text Answer
        function gradeText(questionNum) {
            const answer = answerKey[questionNum];
            const userAnswer = (answers[questionNum] || '').toLowerCase();
            const feedbackEl = document.getElementById(`feedback${questionNum.slice(1)}`);
            
            if (!userAnswer.trim()) {
                feedbackEl.className = 'feedback show incorrect';
                feedbackEl.innerHTML = `
                    <div class="feedback-title">‚ùå No Answer Provided (0 points)</div>
                    <div class="feedback-text">${answer.explanation}</div>
                    <div class="model-answer">
                        <div class="model-answer-title">üìù Model Answer:</div>
                        ${answer.modelAnswer}
                    </div>
                `;
                return;
            }
            
            // Check for keywords
            let keywordCount = 0;
            answer.keywords.forEach(keyword => {
                if (userAnswer.includes(keyword.toLowerCase())) {
                    keywordCount++;
                }
            });
            
            const percentage = keywordCount / answer.keywords.length;
            let earnedPoints = Math.round(percentage * answer.points);
            
            feedbackEl.classList.add('show');
            
            if (percentage >= 0.7) {
                feedbackEl.className = 'feedback show correct';
                feedbackEl.innerHTML = `
                    <div class="feedback-title">‚úÖ Excellent Answer! (+${earnedPoints} points)</div>
                    <div class="feedback-text">${answer.explanation}</div>
                `;
            } else if (percentage >= 0.4) {
                feedbackEl.className = 'feedback show partial';
                feedbackEl.innerHTML = `
                    <div class="feedback-title">‚ö†Ô∏è Partial Credit (+${earnedPoints} points)</div>
                    <div class="feedback-text">Your answer touches on some key points but could be more complete. ${answer.explanation}</div>
                    <div class="model-answer">
                        <div class="model-answer-title">üìù Model Answer:</div>
                        ${answer.modelAnswer}
                    </div>
                `;
            } else {
                feedbackEl.className = 'feedback show incorrect';
                earnedPoints = 0;
                feedbackEl.innerHTML = `
                    <div class="feedback-title">‚ùå Needs Improvement (0 points)</div>
                    <div class="feedback-text">${answer.explanation}</div>
                    <div class="model-answer">
                        <div class="model-answer-title">üìù Model Answer:</div>
                        ${answer.modelAnswer}
                    </div>
                `;
            }
        }

        // Update progress
        function updateProgress() {
            const totalQuestions = Object.keys(answerKey).length;
            const answeredQuestions = Object.keys(answers).length;
            
            document.getElementById('questionsAnswered').textContent = 
                `${answeredQuestions}/${totalQuestions} Answered`;
            
            const percentage = (answeredQuestions / totalQuestions) * 100;
            document.getElementById('progressFill').style.width = `${percentage}%`;
        }

        // Submit Exam
        function submitExam() {
            clearInterval(timerInterval);
            
            // Grade all MCQ questions
            Object.keys(answerKey).forEach(key => {
                if (answerKey[key].type === 'mcq') {
                    gradeMCQ(key);
                } else if (answerKey[key].type === 'text') {
                    gradeText(key);
                }
            });
            
            // Calculate score
            let totalPoints = 0;
            let earnedPoints = 0;
            
            Object.keys(answerKey).forEach(key => {
                totalPoints += answerKey[key].points;
                
                if (answerKey[key].type === 'mcq') {
                    if (answers[key] === answerKey[key].correct) {
                        earnedPoints += answerKey[key].points;
                    }
                } else {
                    const userAnswer = (answers[key] || '').toLowerCase();
                    let keywordCount = 0;
                    answerKey[key].keywords.forEach(keyword => {
                        if (userAnswer.includes(keyword.toLowerCase())) {
                            keywordCount++;
                        }
                    });
                    const percentage = keywordCount / answerKey[key].keywords.length;
                    earnedPoints += Math.round(percentage * answerKey[key].points);
                }
            });
            
            const finalPercentage = Math.round((earnedPoints / totalPoints) * 100);
            
            // Show results modal
            document.getElementById('finalScore').textContent = `${finalPercentage}%`;
            
            let performanceText = '';
            let badgeClass = '';
            
            if (finalPercentage >= 90) {
                performanceText = 'üåü Excellent! Outstanding mastery of Chapter 1!';
                badgeClass = 'badge-excellent';
            } else if (finalPercentage >= 75) {
                performanceText = 'üëç Good Job! Solid understanding of database fundamentals.';
                badgeClass = 'badge-good';
            } else if (finalPercentage >= 60) {
                performanceText = 'üìö Fair. Review the material for better understanding.';
                badgeClass = 'badge-fair';
            } else {
                performanceText = 'üìñ Needs Improvement. Please review Chapter 1 thoroughly.';
                badgeClass = 'badge-poor';
            }
            
            const badge = document.getElementById('performanceBadge');
            badge.textContent = performanceText;
            badge.className = `performance-badge ${badgeClass}`;
            
            // Breakdown
            const timeSpent = Math.floor((Date.now() - startTime) / 1000);
            const minutes = Math.floor(timeSpent / 60);
            const seconds = timeSpent % 60;
            
            document.getElementById('scoreBreakdown').innerHTML = `
                <div class="score-item">
                    <span>Total Points:</span>
                    <strong>${earnedPoints} / ${totalPoints}</strong>
                </div>
                <div class="score-item">
                    <span>Percentage:</span>
                    <strong>${finalPercentage}%</strong>
                </div>
                <div class="score-item">
                    <span>Questions Answered:</span>
                    <strong>${Object.keys(answers).length} / ${Object.keys(answerKey).length}</strong>
                </div>
                <div class="score-item">
                    <span>Time Spent:</span>
                    <strong>${minutes}m ${seconds}s</strong>
                </div>
            `;
            
            document.getElementById('resultsModal').classList.add('show');
        }

        function reviewAnswers() {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function closeModal() {
            document.getElementById('resultsModal').classList.remove('show');
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        function retakeExam() {
            location.reload();
        }

        // Initialize
        startTimer();
    </script>
</body>
</html>