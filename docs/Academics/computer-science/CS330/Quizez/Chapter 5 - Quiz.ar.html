<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CS330 Chapter 5 Exam</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2em;
            margin-bottom: 10px;
        }
        
        .header p {
            opacity: 0.9;
            font-size: 1.1em;
        }
        
        .exam-info {
            background: #f8f9fa;
            padding: 20px 30px;
            border-bottom: 3px solid #667eea;
        }
        
        .exam-info div {
            display: inline-block;
            margin-right: 30px;
            font-weight: 600;
        }
        
        .content {
            padding: 30px;
        }
        
        .section {
            margin-bottom: 40px;
        }
        
        .section-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            font-size: 1.3em;
            font-weight: 600;
        }
        
        .question {
            background: #f8f9fa;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }
        
        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }
        
        .question-number {
            font-weight: 700;
            color: #667eea;
            font-size: 1.1em;
        }
        
        .question-marks {
            background: #667eea;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.9em;
        }
        
        .past-exam-tag {
            background: #28a745;
            color: white;
            padding: 3px 10px;
            border-radius: 15px;
            font-size: 0.8em;
            margin-left: 10px;
        }
        
        .question-text {
            margin-bottom: 15px;
            line-height: 1.6;
            color: #333;
        }
        
        .options {
            margin-left: 0;
        }
        
        .option {
            margin: 10px 0;
            padding: 12px 15px;
            background: white;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            border: 2px solid transparent;
        }
        
        .option:hover {
            background: #e9ecef;
            border-color: #667eea;
        }
        
        .option input[type="radio"] {
            margin-right: 12px;
            cursor: pointer;
            width: 18px;
            height: 18px;
            flex-shrink: 0;
        }
        
        .option-text {
            flex: 1;
            line-height: 1.5;
        }
        
        .answer-input {
            width: 100%;
            padding: 15px;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            font-family: inherit;
            font-size: 1em;
            transition: border-color 0.3s;
        }
        
        .answer-input:focus {
            outline: none;
            border-color: #667eea;
        }
        
        textarea.answer-input {
            min-height: 120px;
            resize: vertical;
        }
        
        .data-table {
            width: 100%;
            margin: 15px 0;
            border-collapse: collapse;
        }
        
        .data-table th {
            background: #667eea;
            color: white;
            border: 1px solid #dee2e6;
            padding: 10px;
        }
        
        .data-table td {
            border: 1px solid #dee2e6;
            padding: 8px;
            text-align: center;
            background: white;
        }
        
        .submit-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 40px;
            border: none;
            border-radius: 25px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            display: block;
            margin: 30px auto;
            transition: transform 0.3s;
        }
        
        .submit-btn:hover {
            transform: scale(1.05);
        }
        
        .results {
            display: none;
            background: #f8f9fa;
            padding: 30px;
            border-radius: 15px;
            margin-top: 30px;
        }
        
        .results.show {
            display: block;
        }
        
        .score-display {
            text-align: center;
            font-size: 2em;
            margin-bottom: 30px;
            padding: 20px;
            background: white;
            border-radius: 10px;
        }
        
        .score-display .score {
            color: #667eea;
            font-weight: 700;
            font-size: 1.5em;
        }
        
        .feedback {
            margin-top: 15px;
            padding: 15px;
            border-radius: 8px;
        }
        
        .feedback.correct {
            background: #d4edda;
            border-left: 4px solid #28a745;
        }
        
        .feedback.incorrect {
            background: #f8d7da;
            border-left: 4px solid #dc3545;
        }
        
        .feedback.partial {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
        }
        
        .feedback-title {
            font-weight: 700;
            margin-bottom: 10px;
        }
        
        .keywords-found {
            color: #28a745;
            font-weight: 600;
        }
        
        .keywords-missing {
            color: #dc3545;
            font-weight: 600;
        }
    </style>
  <script src="/javascripts/standalone-theme.js"></script>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üñ•Ô∏è CS330: Operating Systems</h1>
            <p>Chapter 5: CPU Scheduling - Comprehensive Exam</p>
        </div>
        
        <div class="exam-info">
            <div>‚è±Ô∏è Duration: 90 minutes</div>
            <div>üìä Total Marks: 50</div>
            <div>üìù Questions: 15</div>
        </div>
        
        <div class="content">
            <form id="examForm">
                <!-- Section 1: Multiple Choice Questions -->
                <div class="section">
                    <div class="section-header">Section 1: Multiple Choice Questions (20 Marks)</div>
                    
                    <!-- Question 1 -->
                    <div class="question">
                        <div class="question-header">
                            <span class="question-number">Question 1 <span class="past-exam-tag">Past Exam</span></span>
                            <span class="question-marks">2 Marks</span>
                        </div>
                        <div class="question-text">
                            Which of the following is NOT a function of the dispatcher?
                        </div>
                        <div class="options">
                            <label class="option">
                                <input type="radio" name="q1" value="a">
                                <span class="option-text">a) Switching context</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q1" value="b">
                                <span class="option-text">b) Loading the CPU with a new process</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q1" value="c">
                                <span class="option-text">c) Switching to user mode</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q1" value="d">
                                <span class="option-text">d) Jumping to the proper location in the user program to restart that program</span>
                            </label>
                        </div>
                    </div>
                    
                    <!-- Question 2 -->
                    <div class="question">
                        <div class="question-header">
                            <span class="question-number">Question 2 <span class="past-exam-tag">Past Exam</span></span>
                            <span class="question-marks">2 Marks</span>
                        </div>
                        <div class="question-text">
                            Which scheduling algorithm uses the concept of time-slicing to schedule processes?
                        </div>
                        <div class="options">
                            <label class="option">
                                <input type="radio" name="q2" value="a">
                                <span class="option-text">a) Priority Scheduling</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q2" value="b">
                                <span class="option-text">b) Shortest Job First</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q2" value="c">
                                <span class="option-text">c) Round Robin</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q2" value="d">
                                <span class="option-text">d) Multi-Level Queue Scheduling</span>
                            </label>
                        </div>
                    </div>
                    
                    <!-- Question 3 -->
                    <div class="question">
                        <div class="question-header">
                            <span class="question-number">Question 3 <span class="past-exam-tag">Past Exam</span></span>
                            <span class="question-marks">2 Marks</span>
                        </div>
                        <div class="question-text">
                            In Round Robin (RR) scheduling, what is the significance of the time quantum?
                        </div>
                        <div class="options">
                            <label class="option">
                                <input type="radio" name="q3" value="a">
                                <span class="option-text">a) It sets the maximum CPU time a process can have in one turn</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q3" value="b">
                                <span class="option-text">b) It determines the priority of processes</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q3" value="c">
                                <span class="option-text">c) It specifies the order of execution</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q3" value="d">
                                <span class="option-text">d) It defines the scheduling criteria</span>
                            </label>
                        </div>
                    </div>
                    
                    <!-- Question 4 -->
                    <div class="question">
                        <div class="question-header">
                            <span class="question-number">Question 4 <span class="past-exam-tag">Past Exam</span></span>
                            <span class="question-marks">2 Marks</span>
                        </div>
                        <div class="question-text">
                            In the First-Come-First-Serve (FCFS) scheduling algorithm, which process is selected to execute first?
                        </div>
                        <div class="options">
                            <label class="option">
                                <input type="radio" name="q4" value="a">
                                <span class="option-text">a) The process with the shortest burst time</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q4" value="b">
                                <span class="option-text">b) The process with the highest priority</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q4" value="c">
                                <span class="option-text">c) The process with the longest burst time</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q4" value="d">
                                <span class="option-text">d) The process that arrives first</span>
                            </label>
                        </div>
                    </div>
                    
                    <!-- Question 5 -->
                    <div class="question">
                        <div class="question-header">
                            <span class="question-number">Question 5 <span class="past-exam-tag">Past Exam</span></span>
                            <span class="question-marks">2 Marks</span>
                        </div>
                        <div class="question-text">
                            Which scheduling algorithm is less likely to cause starvation, preemptive SJF or non-preemptive SJF?
                        </div>
                        <div class="options">
                            <label class="option">
                                <input type="radio" name="q5" value="a">
                                <span class="option-text">a) Non-preemptive SJF is less likely to cause starvation</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q5" value="b">
                                <span class="option-text">b) Neither preemptive nor non-preemptive SJF can cause starvation</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q5" value="c">
                                <span class="option-text">c) Preemptive SJF is less likely to cause starvation</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q5" value="d">
                                <span class="option-text">d) Both are equally likely to cause starvation</span>
                            </label>
                        </div>
                    </div>
                    
                    <!-- Question 6 -->
                    <div class="question">
                        <div class="question-header">
                            <span class="question-number">Question 6 <span class="past-exam-tag">Past Exam</span></span>
                            <span class="question-marks">2 Marks</span>
                        </div>
                        <div class="question-text">
                            What is the difference between preemptive and non-preemptive scheduling?
                        </div>
                        <div class="options">
                            <label class="option">
                                <input type="radio" name="q6" value="a">
                                <span class="option-text">a) Preemptive scheduling allows processes to be interrupted; non-preemptive does not</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q6" value="b">
                                <span class="option-text">b) Non-preemptive scheduling allows processes to be interrupted; preemptive does not</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q6" value="c">
                                <span class="option-text">c) Both are the same</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q6" value="d">
                                <span class="option-text">d) Neither allows interruption of running processes</span>
                            </label>
                        </div>
                    </div>
                    
                    <!-- Question 7 -->
                    <div class="question">
                        <div class="question-header">
                            <span class="question-number">Question 7 <span class="past-exam-tag">Past Exam</span></span>
                            <span class="question-marks">2 Marks</span>
                        </div>
                        <div class="question-text">
                            In priority scheduling, how is starvation prevented?
                        </div>
                        <div class="options">
                            <label class="option">
                                <input type="radio" name="q7" value="a">
                                <span class="option-text">a) By increasing the priority of waiting processes over time (aging)</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q7" value="b">
                                <span class="option-text">b) By decreasing the priority of waiting processes</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q7" value="c">
                                <span class="option-text">c) By implementing round robin scheduling</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q7" value="d">
                                <span class="option-text">d) By using shortest job first scheduling</span>
                            </label>
                        </div>
                    </div>
                    
                    <!-- Question 8 -->
                    <div class="question">
                        <div class="question-header">
                            <span class="question-number">Question 8</span>
                            <span class="question-marks">2 Marks</span>
                        </div>
                        <div class="question-text">
                            What is dispatch latency?
                        </div>
                        <div class="options">
                            <label class="option">
                                <input type="radio" name="q8" value="a">
                                <span class="option-text">a) The time it takes for the dispatcher to stop one process and start another running</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q8" value="b">
                                <span class="option-text">b) The time a process waits in the ready queue</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q8" value="c">
                                <span class="option-text">c) The time taken to complete a process</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q8" value="d">
                                <span class="option-text">d) The time taken for I/O operations</span>
                            </label>
                        </div>
                    </div>
                    
                    <!-- Question 9 -->
                    <div class="question">
                        <div class="question-header">
                            <span class="question-number">Question 9 <span class="past-exam-tag">Past Exam</span></span>
                            <span class="question-marks">2 Marks</span>
                        </div>
                        <div class="question-text">
                            Which scheduling algorithm can cause starvation of some processes?
                        </div>
                        <div class="options">
                            <label class="option">
                                <input type="radio" name="q9" value="a">
                                <span class="option-text">a) First Come First Serve</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q9" value="b">
                                <span class="option-text">b) Round Robin</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q9" value="c">
                                <span class="option-text">c) Priority Scheduling</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q9" value="d">
                                <span class="option-text">d) Shortest Job First</span>
                            </label>
                        </div>
                    </div>
                    
                    <!-- Question 10 -->
                    <div class="question">
                        <div class="question-header">
                            <span class="question-number">Question 10 <span class="past-exam-tag">Past Exam</span></span>
                            <span class="question-marks">2 Marks</span>
                        </div>
                        <div class="question-text">
                            What is the main drawback of the First Come First Serve scheduling algorithm?
                        </div>
                        <div class="options">
                            <label class="option">
                                <input type="radio" name="q10" value="a">
                                <span class="option-text">a) Starvation</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q10" value="b">
                                <span class="option-text">b) Long average waiting time</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q10" value="c">
                                <span class="option-text">c) Complex implementation</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q10" value="d">
                                <span class="option-text">d) Requires time slicing</span>
                            </label>
                        </div>
                    </div>
                </div>
                
                <!-- Section 2: Short Answer Questions -->
                <div class="section">
                    <div class="section-header">Section 2: Short Answer Questions (15 Marks)</div>
                    
                    <!-- Question 11 -->
                    <div class="question">
                        <div class="question-header">
                            <span class="question-number">Question 11 <span class="past-exam-tag">Past Exam</span></span>
                            <span class="question-marks">3 Marks</span>
                        </div>
                        <div class="question-text">
                            Define the following: (i) Turnaround time of a process (ii) Throughput of a system
                        </div>
                        <textarea class="answer-input" name="q11" placeholder="Enter your answer here..."></textarea>
                    </div>
                    
                    <!-- Question 12 -->
                    <div class="question">
                        <div class="question-header">
                            <span class="question-number">Question 12 <span class="past-exam-tag">Past Exam</span></span>
                            <span class="question-marks">4 Marks</span>
                        </div>
                        <div class="question-text">
                            In Multi-Level Queue Scheduling, how are processes classified into different queues? Explain with an example.
                        </div>
                        <textarea class="answer-input" name="q12" placeholder="Enter your answer here..."></textarea>
                    </div>
                    
                    <!-- Question 13 -->
                    <div class="question">
                        <div class="question-header">
                            <span class="question-number">Question 13</span>
                            <span class="question-marks">4 Marks</span>
                        </div>
                        <div class="question-text">
                            What is the convoy effect? Explain how it occurs in FCFS scheduling and provide an example scenario.
                        </div>
                        <textarea class="answer-input" name="q13" placeholder="Enter your answer here..."></textarea>
                    </div>
                    
                    <!-- Question 14 -->
                    <div class="question">
                        <div class="question-header">
                            <span class="question-number">Question 14</span>
                            <span class="question-marks">4 Marks</span>
                        </div>
                        <div class="question-text">
                            Explain the relationship between time quantum size and system performance in Round Robin scheduling. What happens if the time quantum is too small or too large?
                        </div>
                        <textarea class="answer-input" name="q14" placeholder="Enter your answer here..."></textarea>
                    </div>
                </div>
                
                <!-- Section 3: Problem Solving -->
                <div class="section">
                    <div class="section-header">Section 3: Problem Solving (15 Marks)</div>
                    
                    <!-- Question 15 -->
                    <div class="question">
                        <div class="question-header">
                            <span class="question-number">Question 15 <span class="past-exam-tag">Past Exam</span></span>
                            <span class="question-marks">15 Marks</span>
                        </div>
                        <div class="question-text">
                            <p>Consider the following set of processes, with the length of the CPU-burst time given in milliseconds:</p>
                            <table class="data-table">
                                <tr>
                                    <th>Process</th>
                                    <th>Burst Time</th>
                                    <th>Priority</th>
                                </tr>
                                <tr>
                                    <td>P1</td>
                                    <td>4</td>
                                    <td>3</td>
                                </tr>
                                <tr>
                                    <td>P2</td>
                                    <td>3</td>
                                    <td>1</td>
                                </tr>
                                <tr>
                                    <td>P3</td>
                                    <td>8</td>
                                    <td>4</td>
                                </tr>
                                <tr>
                                    <td>P4</td>
                                    <td>7</td>
                                    <td>2</td>
                                </tr>
                                <tr>
                                    <td>P5</td>
                                    <td>5</td>
                                    <td>3</td>
                                </tr>
                            </table>
                            <p style="margin: 15px 0;">The processes are assumed to have arrived in the order P1, P2, P3, P4, P5, all at time 0.</p>
                            <p><strong>a)</strong> Draw Gantt charts for FCFS and SJF (non-preemptive) scheduling. (5 marks)</p>
                            <p><strong>b)</strong> Calculate the average waiting time for each algorithm. (5 marks)</p>
                            <p><strong>c)</strong> Calculate the average turnaround time for each algorithm. (5 marks)</p>
                        </div>
                        <textarea class="answer-input" name="q15" placeholder="Show your work here (Gantt charts, calculations, etc.)..." rows="12"></textarea>
                    </div>
                </div>
                
                <button type="submit" class="submit-btn">Submit Exam</button>
            </form>
            
            <div id="results" class="results"></div>
        </div>
    </div>

    <script>
        const correctAnswers = {
            q1: 'b',
            q2: 'c',
            q3: 'a',
            q4: 'd',
            q5: 'a',
            q6: 'a',
            q7: 'a',
            q8: 'a',
            q9: 'c',
            q10: 'b'
        };

        const explanations = {
            q1: "The dispatcher's functions are: switching context, switching to user mode, and jumping to the proper location. Loading the CPU with a new process is actually done by the CPU scheduler, not the dispatcher.",
            q2: "Round Robin is the scheduling algorithm that uses time-slicing. Each process gets a small unit of CPU time (time quantum), and processes are switched in a circular manner.",
            q3: "The time quantum in Round Robin sets the maximum CPU time a process can have in one turn. After this time elapses, the process is preempted and moved to the end of the ready queue.",
            q4: "FCFS (First-Come-First-Serve) selects the process that arrives first. It's a simple, non-preemptive scheduling algorithm that processes requests in the order they arrive.",
            q5: "Non-preemptive SJF is less likely to cause starvation because once a process starts executing, it runs to completion. In preemptive SJF, shorter processes can continuously preempt longer ones, causing potential starvation.",
            q6: "Preemptive scheduling allows the operating system to interrupt a running process and allocate the CPU to another process. Non-preemptive scheduling means once a process starts, it runs until completion or it blocks for I/O.",
            q7: "Aging is used to prevent starvation in priority scheduling. The priority of waiting processes is gradually increased over time, ensuring that even low-priority processes eventually get CPU time.",
            q8: "Dispatch latency is the time it takes for the dispatcher to stop one process and start another running. It includes the time to save the state of one process and load the state of another.",
            q9: "Priority Scheduling can cause starvation because low-priority processes may never execute if high-priority processes keep arriving. This is why aging is used as a solution.",
            q10: "FCFS has a long average waiting time, especially when short processes arrive after long processes (convoy effect). It's simple but inefficient in terms of average waiting time."
        };

        const writtenQuestionKeywords = {
          q11: {
                keywords: ['turnaround', 'time', 'submission', 'completion', 'throughput', 'processes', 'unit'],
                keyPhrases: ['time of submission', 'time of completion', 'processes complete', 'per time unit', 'per unit time'],
                minKeywords: 5,
                mockAnswer: "(i) Turnaround time is the interval from the time of submission of a process to the time of completion. It includes waiting time in the ready queue, execution time on the CPU, and I/O time.\n\n(ii) Throughput is the number of processes that complete their execution per time unit. It measures the amount of work accomplished by the system."
            },
            q12: {
                keywords: ['priority', 'queues', 'different', 'classified', 'foreground', 'background', 'system', 'interactive', 'batch'],
                keyPhrases: ['based on priority', 'different queues', 'foreground processes', 'background processes', 'system processes'],
                minKeywords: 5,
                mockAnswer: "In Multi-Level Queue Scheduling, processes are classified into different queues based on their priority or type. Each queue has its own scheduling algorithm. For example:\n\n- System processes (highest priority) - use FCFS\n- Interactive/Foreground processes (medium priority) - use Round Robin\n- Batch/Background processes (lowest priority) - use FCFS\n\nProcesses remain in their assigned queue and cannot move between queues. Each queue is given a certain amount of CPU time."
            },
            q13: {
                keywords: ['convoy', 'effect', 'fcfs', 'long', 'process', 'short', 'waiting', 'cpu-bound', 'io-bound'],
                keyPhrases: ['convoy effect', 'long process', 'short processes', 'waiting time', 'cpu-bound process'],
                minKeywords: 5,
                mockAnswer: "The convoy effect occurs in FCFS scheduling when a long CPU-bound process arrives first, causing all shorter processes behind it to wait for a long time. This results in poor average waiting time.\n\nExample: If a CPU-bound process with burst time 100ms arrives first, followed by several I/O-bound processes with burst times of 1ms each, all the short processes must wait for the long process to complete, even though they could finish quickly. This is inefficient because the short processes could have completed and moved to I/O, allowing better CPU utilization."
            },
            q14: {
                keywords: ['time', 'quantum', 'small', 'large', 'context', 'switch', 'overhead', 'performance', 'response'],
                keyPhrases: ['time quantum', 'too small', 'too large', 'context switch', 'overhead', 'response time'],
                minKeywords: 6,
                mockAnswer: "Time quantum size has a significant impact on Round Robin performance:\n\n**Too Small:** If the time quantum is too small, there will be too many context switches, increasing overhead. The CPU spends more time switching between processes than executing them, reducing throughput and CPU utilization.\n\n**Too Large:** If the time quantum is too large, Round Robin behaves like FCFS, losing the benefit of time-sharing. Response time increases, and the system becomes less interactive.\n\n**Optimal:** The time quantum should be large compared to context switch time (typically 10-100ms). As a rule, 80% of CPU bursts should be shorter than the time quantum."
            }
        };

        document.getElementById('examForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            let totalScore = 0;
            let maxScore = 50;
            let resultsHTML = '<div class="score-display">Calculating your score...</div>';
            
            // Grade MCQs (20 marks total)
            let mcqScore = 0;
            for (let i = 1; i <= 10; i++) {
                const questionName = `q${i}`;
                const selectedAnswer = document.querySelector(`input[name="${questionName}"]:checked`);
                const questionDiv = document.querySelectorAll('.question')[i-1];
                
                if (selectedAnswer) {
                    if (selectedAnswer.value === correctAnswers[questionName]) {
                        mcqScore += 2;
                        resultsHTML += `
                            <div class="question">
                                <div class="question-header">
                                    <span class="question-number">Question ${i}</span>
                                    <span class="question-marks">2/2 Marks ‚úì</span>
                                </div>
                                <div class="feedback correct">
                                    <div class="feedback-title">‚úì Correct!</div>
                                    <p>${explanations[questionName]}</p>
                                </div>
                            </div>
                        `;
                    } else {
                        resultsHTML += `
                            <div class="question">
                                <div class="question-header">
                                    <span class="question-number">Question ${i}</span>
                                    <span class="question-marks">0/2 Marks ‚úó</span>
                                </div>
                                <div class="feedback incorrect">
                                    <div class="feedback-title">‚úó Incorrect</div>
                                    <p><strong>Your answer:</strong> ${selectedAnswer.value.toUpperCase()}</p>
                                    <p><strong>Correct answer:</strong> ${correctAnswers[questionName].toUpperCase()}</p>
                                    <p><strong>Explanation:</strong> ${explanations[questionName]}</p>
                                </div>
                            </div>
                        `;
                    }
                } else {
                    resultsHTML += `
                        <div class="question">
                            <div class="question-header">
                                <span class="question-number">Question ${i}</span>
                                <span class="question-marks">0/2 Marks</span>
                            </div>
                            <div class="feedback incorrect">
                                <div class="feedback-title">No answer provided</div>
                                <p><strong>Correct answer:</strong> ${correctAnswers[questionName].toUpperCase()}</p>
                                <p>${explanations[questionName]}</p>
                            </div>
                        </div>
                    `;
                }
            }
            
            totalScore += mcqScore;
            
            // Grade Written Questions (15 marks total)
            let writtenScore = 0;
            
            // Question 11 (3 marks)
            const q11Answer = document.querySelector('textarea[name="q11"]').value.toLowerCase();
            const q11Data = writtenQuestionKeywords.q11;
            let q11Keywords = 0;
            let q11Found = [];
            let q11Missing = [];
            
            q11Data.keywords.forEach(keyword => {
                if (q11Answer.includes(keyword.toLowerCase())) {
                    q11Keywords++;
                    q11Found.push(keyword);
                } else {
                    q11Missing.push(keyword);
                }
            });
            
            q11Data.keyPhrases.forEach(phrase => {
                if (q11Answer.includes(phrase.toLowerCase())) {
                    q11Keywords += 0.5;
                }
            });
            
            const q11Score = Math.min(3, Math.round((q11Keywords / q11Data.keywords.length) * 3));
            writtenScore += q11Score;
            
            resultsHTML += `
                <div class="question">
                    <div class="question-header">
                        <span class="question-number">Question 11</span>
                        <span class="question-marks">${q11Score}/3 Marks</span>
                    </div>
                    <div class="feedback ${q11Score === 3 ? 'correct' : q11Score > 0 ? 'partial' : 'incorrect'}">
                        <div class="feedback-title">${q11Score === 3 ? '‚úì Excellent!' : q11Score > 0 ? '‚ö† Partial Credit' : '‚úó Needs Improvement'}</div>
                        <p><strong>Your Answer:</strong> ${document.querySelector('textarea[name="q11"]').value || 'No answer provided'}</p>
                        <p><strong>Keywords Found:</strong> <span class="keywords-found">${q11Found.join(', ') || 'None'}</span></p>
                        <p><strong>Keywords Missing:</strong> <span class="keywords-missing">${q11Missing.join(', ') || 'None'}</span></p>
                        <p><strong>Model Answer:</strong> ${q11Data.mockAnswer}</p>
                    </div>
                </div>
            `;
            
            // Question 12 (4 marks)
            const q12Answer = document.querySelector('textarea[name="q12"]').value.toLowerCase();
            const q12Data = writtenQuestionKeywords.q12;
            let q12Keywords = 0;
            let q12Found = [];
            let q12Missing = [];
            
            q12Data.keywords.forEach(keyword => {
                if (q12Answer.includes(keyword.toLowerCase())) {
                    q12Keywords++;
                    q12Found.push(keyword);
                } else {
                    q12Missing.push(keyword);
                }
            });
            
            const q12Score = Math.min(4, Math.round((q12Keywords / q12Data.keywords.length) * 4));
            writtenScore += q12Score;
            
            resultsHTML += `
                <div class="question">
                    <div class="question-header">
                        <span class="question-number">Question 12</span>
                        <span class="question-marks">${q12Score}/4 Marks</span>
                    </div>
                    <div class="feedback ${q12Score === 4 ? 'correct' : q12Score > 0 ? 'partial' : 'incorrect'}">
                        <div class="feedback-title">${q12Score === 4 ? '‚úì Excellent!' : q12Score > 0 ? '‚ö† Partial Credit' : '‚úó Needs Improvement'}</div>
                        <p><strong>Your Answer:</strong> ${document.querySelector('textarea[name="q12"]').value || 'No answer provided'}</p>
                        <p><strong>Keywords Found:</strong> <span class="keywords-found">${q12Found.join(', ') || 'None'}</span></p>
                        <p><strong>Keywords Missing:</strong> <span class="keywords-missing">${q12Missing.join(', ') || 'None'}</span></p>
                        <p><strong>Model Answer:</strong> ${q12Data.mockAnswer}</p>
                    </div>
                </div>
            `;
            
            // Question 13 (4 marks)
            const q13Answer = document.querySelector('textarea[name="q13"]').value.toLowerCase();
            const q13Data = writtenQuestionKeywords.q13;
            let q13Keywords = 0;
            let q13Found = [];
            let q13Missing = [];
            
            q13Data.keywords.forEach(keyword => {
                if (q13Answer.includes(keyword.toLowerCase())) {
                    q13Keywords++;
                    q13Found.push(keyword);
                } else {
                    q13Missing.push(keyword);
                }
            });
            
            const q13Score = Math.min(4, Math.round((q13Keywords / q13Data.keywords.length) * 4));
            writtenScore += q13Score;
            
            resultsHTML += `
                <div class="question">
                    <div class="question-header">
                        <span class="question-number">Question 13</span>
                        <span class="question-marks">${q13Score}/4 Marks</span>
                    </div>
                    <div class="feedback ${q13Score === 4 ? 'correct' : q13Score > 0 ? 'partial' : 'incorrect'}">
                        <div class="feedback-title">${q13Score === 4 ? '‚úì Excellent!' : q13Score > 0 ? '‚ö† Partial Credit' : '‚úó Needs Improvement'}</div>
                        <p><strong>Your Answer:</strong> ${document.querySelector('textarea[name="q13"]').value || 'No answer provided'}</p>
                        <p><strong>Keywords Found:</strong> <span class="keywords-found">${q13Found.join(', ') || 'None'}</span></p>
                        <p><strong>Keywords Missing:</strong> <span class="keywords-missing">${q13Missing.join(', ') || 'None'}</span></p>
                        <p><strong>Model Answer:</strong> ${q13Data.mockAnswer}</p>
                    </div>
                </div>
            `;
            
            // Question 14 (4 marks)
            const q14Answer = document.querySelector('textarea[name="q14"]').value.toLowerCase();
            const q14Data = writtenQuestionKeywords.q14;
            let q14Keywords = 0;
            let q14Found = [];
            let q14Missing = [];
            
            q14Data.keywords.forEach(keyword => {
                if (q14Answer.includes(keyword.toLowerCase())) {
                    q14Keywords++;
                    q14Found.push(keyword);
                } else {
                    q14Missing.push(keyword);
                }
            });
            
            const q14Score = Math.min(4, Math.round((q14Keywords / q14Data.keywords.length) * 4));
            writtenScore += q14Score;
            
            resultsHTML += `
                <div class="question">
                    <div class="question-header">
                        <span class="question-number">Question 14</span>
                        <span class="question-marks">${q14Score}/4 Marks</span>
                    </div>
                    <div class="feedback ${q14Score === 4 ? 'correct' : q14Score > 0 ? 'partial' : 'incorrect'}">
                        <div class="feedback-title">${q14Score === 4 ? '‚úì Excellent!' : q14Score > 0 ? '‚ö† Partial Credit' : '‚úó Needs Improvement'}</div>
                        <p><strong>Your Answer:</strong> ${document.querySelector('textarea[name="q14"]').value || 'No answer provided'}</p>
                        <p><strong>Keywords Found:</strong> <span class="keywords-found">${q14Found.join(', ') || 'None'}</span></p>
                        <p><strong>Keywords Missing:</strong> <span class="keywords-missing">${q14Missing.join(', ') || 'None'}</span></p>
                        <p><strong>Model Answer:</strong> ${q14Data.mockAnswer}</p>
                    </div>
                </div>
            `;
            
            totalScore += writtenScore;
            
            // Question 15 - Manual grading note (15 marks)
            const q15Answer = document.querySelector('textarea[name="q15"]').value;
            resultsHTML += `
                <div class="question">
                    <div class="question-header">
                        <span class="question-number">Question 15 (Problem Solving)</span>
                        <span class="question-marks">Manual Grading Required</span>
                    </div>
                    <div class="feedback partial">
                        <div class="feedback-title">‚ö† Manual Grading Required (15 marks)</div>
                        <p><strong>Your Answer:</strong> ${q15Answer || 'No answer provided'}</p>
                        <p><strong>Grading Criteria:</strong></p>
                        <ul style="margin-left: 20px; margin-top: 10px;">
                            <li>Gantt charts for FCFS and SJF: 5 marks</li>
                            <li>Average waiting time calculations: 5 marks</li>
                            <li>Average turnaround time calculations: 5 marks</li>
                        </ul>
                        <p><strong>Expected Solution:</strong></p>
                        <p><strong>FCFS:</strong> P1(0-4), P2(4-7), P3(7-15), P4(15-22), P5(22-27)</p>
                        <p>Waiting times: P1=0, P2=4, P3=7, P4=15, P5=22 ‚Üí Average = 9.6ms</p>
                        <p>Turnaround times: P1=4, P2=7, P3=15, P4=22, P5=27 ‚Üí Average = 15ms</p>
                        <p><strong>SJF:</strong> P2(0-3), P1(3-7), P5(7-12), P4(12-19), P3(19-27)</p>
                        <p>Waiting times: P1=3, P2=0, P3=19, P4=12, P5=7 ‚Üí Average = 8.2ms</p>
                        <p>Turnaround times: P1=7, P2=3, P3=27, P4=19, P5=12 ‚Üí Average = 13.6ms</p>
                    </div>
                </div>
            `;
            
            // Display final score
            const percentage = ((totalScore / (maxScore - 15)) * 100).toFixed(1);
            let grade = '';
            if (percentage >= 90) grade = 'A';
            else if (percentage >= 80) grade = 'B';
            else if (percentage >= 70) grade = 'C';
            else if (percentage >= 60) grade = 'D';
            else grade = 'F';
            
            resultsHTML = `
                <div class="score-display">
                    <div>Your Score (excluding Q15)</div>
                    <div class="score">${totalScore} / ${maxScore - 15}</div>
                    <div style="font-size: 0.6em; margin-top: 10px;">
                        Percentage: ${percentage}% | Grade: ${grade}
                    </div>
                    <div style="font-size: 0.5em; margin-top: 10px; color: #666;">
                        MCQs: ${mcqScore}/20 | Written: ${writtenScore}/15 | Problem: Manual/15
                    </div>
                </div>
            ` + resultsHTML;
            
            document.getElementById('results').innerHTML = resultsHTML;
            document.getElementById('results').classList.add('show');
            document.getElementById('results').scrollIntoView({ behavior: 'smooth' });
        });
    </script>
</body>
</html>