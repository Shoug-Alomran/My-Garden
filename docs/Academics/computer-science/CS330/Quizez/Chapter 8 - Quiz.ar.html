<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CS330 Chapter 8 Exam</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2em;
            margin-bottom: 10px;
        }
        
        .header p {
            opacity: 0.9;
            font-size: 1.1em;
        }
        
        .exam-info {
            background: #f8f9fa;
            padding: 20px 30px;
            border-bottom: 3px solid #4facfe;
        }
        
        .exam-info div {
            display: inline-block;
            margin-right: 30px;
            font-weight: 600;
        }
        
        .content {
            padding: 30px;
        }
        
        .section {
            margin-bottom: 40px;
        }
        
        .section-header {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 15px 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            font-size: 1.3em;
            font-weight: 600;
        }
        
        .question {
            background: #f8f9fa;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 10px;
            border-left: 4px solid #4facfe;
        }
        
        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }
        
        .question-number {
            font-weight: 700;
            color: #00f2fe;
            font-size: 1.1em;
        }
        
        .question-marks {
            background: #00f2fe;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.9em;
        }
        
        .past-exam-tag {
            background: #28a745;
            color: white;
            padding: 3px 10px;
            border-radius: 15px;
            font-size: 0.8em;
            margin-left: 10px;
        }
        
        .question-text {
            margin-bottom: 15px;
            line-height: 1.6;
            color: #333;
        }
        
        .options {
            margin-left: 0;
        }
        
        .option {
            margin: 10px 0;
            padding: 12px 15px;
            background: white;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            border: 2px solid transparent;
        }
        
        .option:hover {
            background: #e3f5ff;
            border-color: #4facfe;
        }
        
        .option input[type="radio"] {
            margin-right: 12px;
            cursor: pointer;
            width: 18px;
            height: 18px;
            flex-shrink: 0;
        }
        
        .option-text {
            flex: 1;
            line-height: 1.5;
        }
        
        .answer-input {
            width: 100%;
            padding: 15px;
            border: 2px solid #dee2e6;
            border-radius: 8px;
            font-family: inherit;
            font-size: 1em;
            transition: border-color 0.3s;
        }
        
        .answer-input:focus {
            outline: none;
            border-color: #4facfe;
        }
        
        textarea.answer-input {
            min-height: 120px;
            resize: vertical;
        }
        
        .data-table {
            width: 100%;
            margin: 15px 0;
            border-collapse: collapse;
        }
        
        .data-table th {
            background: #4facfe;
            color: white;
            border: 1px solid #dee2e6;
            padding: 10px;
        }
        
        .data-table td {
            border: 1px solid #dee2e6;
            padding: 8px;
            text-align: center;
            background: white;
        }
        
        .submit-btn {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 15px 40px;
            border: none;
            border-radius: 25px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            display: block;
            margin: 30px auto;
            transition: transform 0.3s;
        }
        
        .submit-btn:hover {
            transform: scale(1.05);
        }
        
        .result-box {
            display: none;
            margin-top: 20px;
            padding: 15px;
            border-radius: 8px;
            animation: slideDown 0.3s ease-out;
        }
        
        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .result-box.show {
            display: block;
        }
        
        .result-box.correct {
            background: #d4edda;
            border-left: 4px solid #28a745;
        }
        
        .result-box.incorrect {
            background: #f8d7da;
            border-left: 4px solid #dc3545;
        }
        
        .result-box.partial {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
        }
        
        .result-title {
            font-weight: 700;
            margin-bottom: 10px;
            font-size: 1.1em;
        }
        
        .score-summary {
            display: none;
            background: white;
            padding: 30px;
            border-radius: 15px;
            margin-top: 30px;
            text-align: center;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .score-summary.show {
            display: block;
        }
        
        .final-score {
            font-size: 3em;
            color: #4facfe;
            font-weight: 700;
            margin: 20px 0;
        }
        
        .grade-badge {
            display: inline-block;
            padding: 10px 30px;
            border-radius: 25px;
            font-size: 1.5em;
            font-weight: 700;
            margin-top: 10px;
        }
        
        .keywords-found {
            color: #28a745;
            font-weight: 600;
        }
        
        .keywords-missing {
            color: #dc3545;
            font-weight: 600;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üíæ CS330: Operating Systems</h1>
            <p>Chapter 8: Memory Management - Comprehensive Exam</p>
        </div>
        
        <div class="exam-info">
            <div>‚è±Ô∏è Duration: 90 minutes</div>
            <div>üìä Total Marks: 50</div>
            <div>üìù Questions: 15</div>
        </div>
        
        <div class="content">
            <form id="examForm">
                <!-- Section 1: Multiple Choice Questions -->
                <div class="section">
                    <div class="section-header">Section 1: Multiple Choice Questions (20 Marks)</div>
                    
                    <!-- Question 1 -->
                    <div class="question" data-question="q1">
                        <div class="question-header">
                            <span class="question-number">Question 1 <span class="past-exam-tag">Past Exam</span></span>
                            <span class="question-marks">2 Marks</span>
                        </div>
                        <div class="question-text">
                            What is the primary purpose of using a magnetic disk in a computer system by the operating system?
                        </div>
                        <div class="options">
                            <label class="option">
                                <input type="radio" name="q1" value="a">
                                <span class="option-text">a) Fast access to frequently used data</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q1" value="b">
                                <span class="option-text">b) Long-term storage of programs and data</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q1" value="c">
                                <span class="option-text">c) Quick retrieval of data for processing</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q1" value="d">
                                <span class="option-text">d) Temporary storage for the CPU</span>
                            </label>
                        </div>
                        <div class="result-box" id="result-q1"></div>
                    </div>
                    
                    <!-- Question 2 -->
                    <div class="question" data-question="q2">
                        <div class="question-header">
                            <span class="question-number">Question 2 <span class="past-exam-tag">Past Exam</span></span>
                            <span class="question-marks">2 Marks</span>
                        </div>
                        <div class="question-text">
                            What is a common challenge addressed by both paging and segmentation in memory management?
                        </div>
                        <div class="options">
                            <label class="option">
                                <input type="radio" name="q2" value="a">
                                <span class="option-text">a) Simplification of memory access</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q2" value="b">
                                <span class="option-text">b) Contiguous allocation of memory</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q2" value="c">
                                <span class="option-text">c) Efficient use of memory</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q2" value="d">
                                <span class="option-text">d) Elimination of fragmentation</span>
                            </label>
                        </div>
                        <div class="result-box" id="result-q2"></div>
                    </div>
                    
                    <!-- Question 3 -->
                    <div class="question" data-question="q3">
                        <div class="question-header">
                            <span class="question-number">Question 3 <span class="past-exam-tag">Past Exam</span></span>
                            <span class="question-marks">2 Marks</span>
                        </div>
                        <div class="question-text">
                            In a computer system, which component ensures that a process cannot access memory beyond its allocated boundaries?
                        </div>
                        <div class="options">
                            <label class="option">
                                <input type="radio" name="q3" value="a">
                                <span class="option-text">a) Program Counter</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q3" value="b">
                                <span class="option-text">b) Translation Look Aside Buffer</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q3" value="c">
                                <span class="option-text">c) Memory Data Register</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q3" value="d">
                                <span class="option-text">d) Combination of Base and Limit register</span>
                            </label>
                        </div>
                        <div class="result-box" id="result-q3"></div>
                    </div>
                    
                    <!-- Question 4 -->
                    <div class="question" data-question="q4">
                        <div class="question-header">
                            <span class="question-number">Question 4 <span class="past-exam-tag">Past Exam</span></span>
                            <span class="question-marks">2 Marks</span>
                        </div>
                        <div class="question-text">
                            What does the physical address space represent in the context of operating systems?
                        </div>
                        <div class="options">
                            <label class="option">
                                <input type="radio" name="q4" value="a">
                                <span class="option-text">a) The location of files on secondary storage</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q4" value="b">
                                <span class="option-text">b) The address generated by the CPU during program execution</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q4" value="c">
                                <span class="option-text">c) The address assigned by the user to a file</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q4" value="d">
                                <span class="option-text">d) The actual location of data in the main memory</span>
                            </label>
                        </div>
                        <div class="result-box" id="result-q4"></div>
                    </div>
                    
                    <!-- Question 5 -->
                    <div class="question" data-question="q5">
                        <div class="question-header">
                            <span class="question-number">Question 5 <span class="past-exam-tag">Past Exam</span></span>
                            <span class="question-marks">2 Marks</span>
                        </div>
                        <div class="question-text">
                            In which aspect do paging and segmentation differ?
                        </div>
                        <div class="options">
                            <label class="option">
                                <input type="radio" name="q5" value="a">
                                <span class="option-text">a) The type of processes they support</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q5" value="b">
                                <span class="option-text">b) The handling of internal fragmentation</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q5" value="c">
                                <span class="option-text">c) The size of the memory blocks</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q5" value="d">
                                <span class="option-text">d) The need for a page table</span>
                            </label>
                        </div>
                        <div class="result-box" id="result-q5"></div>
                    </div>
                    
                    <!-- Question 6 -->
                    <div class="question" data-question="q6">
                        <div class="question-header">
                            <span class="question-number">Question 6 <span class="past-exam-tag">Past Exam</span></span>
                            <span class="question-marks">2 Marks</span>
                        </div>
                        <div class="question-text">
                            How does paging handle memory allocation compared to segmentation?
                        </div>
                        <div class="options">
                            <label class="option">
                                <input type="radio" name="q6" value="a">
                                <span class="option-text">a) Pages are fixed size, while segments are of variable size</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q6" value="b">
                                <span class="option-text">b) Pages are of variable size, while segments are of fixed size</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q6" value="c">
                                <span class="option-text">c) Both pages and segments are of variable size</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q6" value="d">
                                <span class="option-text">d) Both pages and segments are of fixed size</span>
                            </label>
                        </div>
                        <div class="result-box" id="result-q6"></div>
                    </div>
                    
                    <!-- Question 7 -->
                    <div class="question" data-question="q7">
                        <div class="question-header">
                            <span class="question-number">Question 7 <span class="past-exam-tag">Past Exam</span></span>
                            <span class="question-marks">2 Marks</span>
                        </div>
                        <div class="question-text">
                            What is the primary advantage of using paging in memory management?
                        </div>
                        <div class="options">
                            <label class="option">
                                <input type="radio" name="q7" value="a">
                                <span class="option-text">a) No need for virtual memory</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q7" value="b">
                                <span class="option-text">b) Fixed-size partitions that can be always placed contiguously</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q7" value="c">
                                <span class="option-text">c) Efficient use of memory by breaking the processes into equal sized partitions</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q7" value="d">
                                <span class="option-text">d) Simple implementation</span>
                            </label>
                        </div>
                        <div class="result-box" id="result-q7"></div>
                    </div>
                    
                    <!-- Question 8 -->
                    <div class="question" data-question="q8">
                        <div class="question-header">
                            <span class="question-number">Question 8 <span class="past-exam-tag">Past Exam</span></span>
                            <span class="question-marks">2 Marks</span>
                        </div>
                        <div class="question-text">
                            What is the function of the page table in paging?
                        </div>
                        <div class="options">
                            <label class="option">
                                <input type="radio" name="q8" value="a">
                                <span class="option-text">a) It maps logical addresses to physical addresses</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q8" value="b">
                                <span class="option-text">b) It stores pages on the disk</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q8" value="c">
                                <span class="option-text">c) It tracks the time each page was last accessed</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q8" value="d">
                                <span class="option-text">d) It holds data from cache memory</span>
                            </label>
                        </div>
                        <div class="result-box" id="result-q8"></div>
                    </div>
                    
                    <!-- Question 9 -->
                    <div class="question" data-question="q9">
                        <div class="question-header">
                            <span class="question-number">Question 9 <span class="past-exam-tag">Past Exam</span></span>
                            <span class="question-marks">2 Marks</span>
                        </div>
                        <div class="question-text">
                            Which of the following is true about external fragmentation?
                        </div>
                        <div class="options">
                            <label class="option">
                                <input type="radio" name="q9" value="a">
                                <span class="option-text">a) It occurs when free memory is split into small blocks scattered throughout</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q9" value="b">
                                <span class="option-text">b) It occurs due to inefficient CPU scheduling</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q9" value="c">
                                <span class="option-text">c) It can be solved by using fixed partitioning</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q9" value="d">
                                <span class="option-text">d) It only affects virtual memory</span>
                            </label>
                        </div>
                        <div class="result-box" id="result-q9"></div>
                    </div>
                    
                    <!-- Question 10 -->
                    <div class="question" data-question="q10">
                        <div class="question-header">
                            <span class="question-number">Question 10 <span class="past-exam-tag">Past Exam</span></span>
                            <span class="question-marks">2 Marks</span>
                        </div>
                        <div class="question-text">
                            What is the difference between internal and external fragmentation?
                        </div>
                        <div class="options">
                            <label class="option">
                                <input type="radio" name="q10" value="a">
                                <span class="option-text">a) Internal fragmentation happens inside allocated memory blocks; external fragmentation happens in free memory outside allocated blocks</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q10" value="b">
                                <span class="option-text">b) External fragmentation occurs inside memory blocks</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q10" value="c">
                                <span class="option-text">c) Internal fragmentation is easier to fix</span>
                            </label>
                            <label class="option">
                                <input type="radio" name="q10" value="d">
                                <span class="option-text">d) Both are the same</span>
                            </label>
                        </div>
                        <div class="result-box" id="result-q10"></div>
                    </div>
                </div>
                
                <!-- Section 2: Short Answer Questions -->
                <div class="section">
                    <div class="section-header">Section 2: Short Answer Questions (18 Marks)</div>
                    
                    <!-- Question 11 -->
                    <div class="question" data-question="q11">
                        <div class="question-header">
                            <span class="question-number">Question 11 <span class="past-exam-tag">Past Exam</span></span>
                            <span class="question-marks">4 Marks</span>
                        </div>
                        <div class="question-text">
                            Name two differences between logical and physical addresses. Explain each difference clearly.
                        </div>
                        <textarea class="answer-input" name="q11" placeholder="Enter your answer here..."></textarea>
                        <div class="result-box" id="result-q11"></div>
                    </div>
                    
                    <!-- Question 12 -->
                    <div class="question" data-question="q12">
                        <div class="question-header">
                            <span class="question-number">Question 12 <span class="past-exam-tag">Past Exam</span></span>
                            <span class="question-marks">5 Marks</span>
                        </div>
                        <div class="question-text">
                            What are the dis-advantages of contiguous allocation scheme of disk blocks? List and explain at least three disadvantages.
                        </div>
                        <textarea class="answer-input" name="q12" placeholder="Enter your answer here..."></textarea>
                        <div class="result-box" id="result-q12"></div>
                    </div>
                    
                    <!-- Question 13 -->
                    <div class="question" data-question="q13">
                        <div class="question-header">
                            <span class="question-number">Question 13</span>
                            <span class="question-marks">5 Marks</span>
                        </div>
                        <div class="question-text">
                            Explain the concept of segmentation in memory management. What is the main problem that segmentation addresses, and what is its disadvantage?
                        </div>
                        <textarea class="answer-input" name="q13" placeholder="Enter your answer here..."></textarea>
                        <div class="result-box" id="result-q13"></div>
                    </div>
                    
                    <!-- Question 14 -->
                    <div class="question" data-question="q14">
                        <div class="question-header">
                            <span class="question-number">Question 14</span>
                            <span class="question-marks">4 Marks</span>
                        </div>
                        <div class="question-text">
                            What is a Translation Lookaside Buffer (TLB)? Why is it needed in paging systems, and how does it improve system performance?
                        </div>
                        <textarea class="answer-input" name="q14" placeholder="Enter your answer here..."></textarea>
                        <div class="result-box" id="result-q14"></div>
                    </div>
                </div>
                
                <!-- Section 3: Problem Solving -->
                <div class="section">
                    <div class="section-header">Section 3: Problem Solving (12 Marks)</div>
                    
                    <!-- Question 15 -->
                    <div class="question" data-question="q15">
                        <div class="question-header">
                            <span class="question-number">Question 15 <span class="past-exam-tag">Past Exam</span></span>
                            <span class="question-marks">12 Marks</span>
                        </div>
                        <div class="question-text">
                            <p>Consider a logical address space of 256 pages with a 4-KB page size, mapped onto a physical memory of 64 frames.</p>
                            <p><strong>a)</strong> How many bits are required in the logical address? (4 marks)</p>
                            <p><strong>b)</strong> How many bits are required in the physical address? (4 marks)</p>
                            <p><strong>c)</strong> If the logical address is 5000 (decimal), what is the page number and page offset? (4 marks)</p>
                            <p style="margin-top: 10px;"><em>Show all your calculations and explain your reasoning.</em></p>
                        </div>
                        <textarea class="answer-input" name="q15" placeholder="Show your work here..." rows="10"></textarea>
                        <div class="result-box" id="result-q15"></div>
                    </div>
                </div>
                
                <button type="submit" class="submit-btn">Submit Exam</button>
            </form>
            
            <div class="score-summary" id="scoreSummary"></div>
        </div>
    </div>

    <script>
        const correctAnswers = {
            q1: 'b',
            q2: 'c',
            q3: 'd',
            q4: 'd',
            q5: 'b',
            q6: 'a',
            q7: 'c',
            q8: 'a',
            q9: 'a',
            q10: 'a'
        };

       const explanations = {
            q1: "Magnetic disks are primarily used for long-term storage of programs and data in computer systems. They provide non-volatile storage that persists even when power is turned off, making them ideal for storing the operating system, applications, and user data.",
            q2: "Both paging and segmentation address the challenge of efficient use of memory. They allow processes to be divided into smaller units that can be allocated non-contiguously, improving memory utilization and reducing wasted space.",
            q3: "The combination of Base and Limit registers ensures memory protection. The base register contains the smallest physical address, and the limit register contains the range of logical addresses. Together, they prevent a process from accessing memory outside its allocated boundaries.",
            q4: "The physical address space represents the actual location of data in the main memory (RAM). It's the real address that the memory unit uses to access data, as opposed to the logical address which is generated by the CPU.",
            q5: "Paging and segmentation differ in their handling of internal fragmentation. Paging can have internal fragmentation (unused space within a page), while segmentation typically has external fragmentation (unused space between segments). Pages are fixed-size, segments are variable-size.",
            q6: "The key difference is that pages are fixed size (all pages are the same size), while segments are of variable size (each segment can be a different size based on the logical unit it represents, like a function or array).",
            q7: "The primary advantage of paging is efficient use of memory by breaking processes into equal-sized partitions (pages). This eliminates external fragmentation and allows any available frame to be allocated to any page, improving memory utilization.",
            q8: "The page table maps logical addresses to physical addresses. When the CPU generates a logical address, the page table is used to find the corresponding frame number in physical memory, which is then combined with the page offset to form the physical address.",
            q9: "External fragmentation occurs when free memory is split into small, non-contiguous blocks scattered throughout memory. Even though the total free memory may be sufficient for a process, it cannot be allocated because it's not contiguous. This is common in variable partitioning schemes.",
            q10: "Internal fragmentation happens inside allocated memory blocks when a process doesn't use all the memory in its allocated block (e.g., last page partially filled). External fragmentation happens in free memory outside allocated blocks when free space is scattered in small pieces throughout memory."
        };

        const writtenQuestionKeywords = {
            q11: {
                keywords: ['logical', 'physical', 'cpu', 'memory', 'generated', 'virtual', 'mmu', 'translation'],
                keyPhrases: ['logical address', 'physical address', 'generated by cpu', 'seen by memory', 'memory management unit'],
                minKeywords: 5,
                mockAnswer: "Two key differences between logical and physical addresses:\n\n1. Source: Logical addresses are generated by the CPU during program execution (also called virtual addresses), while physical addresses are the actual addresses seen by the memory unit (RAM). The CPU never directly sees physical addresses.\n\n2. Address Space: The logical address space is the set of all logical addresses generated by a program, while the physical address space is the set of all physical addresses corresponding to these logical addresses. The logical address space can be larger than physical address space with virtual memory.\n\n3. Translation: Logical addresses must be translated to physical addresses by the Memory Management Unit (MMU) before memory can be accessed. This translation happens at runtime using techniques like paging or segmentation."
            },
            q12: {
                keywords: ['contiguous', 'fragmentation', 'external', 'space', 'finding', 'file', 'size', 'compaction'],
                keyPhrases: ['external fragmentation', 'finding space', 'file size', 'contiguous blocks'],
                minKeywords: 5,
                mockAnswer: "The disadvantages of contiguous allocation are:\n\n1. Finding Space for New Files: It's difficult to find contiguous free space for a new file. The system must search for a hole large enough to hold the entire file, which becomes increasingly difficult as files are created and deleted.\n\n2. External Fragmentation: As files are allocated and deleted, free space becomes fragmented into small, non-contiguous pieces. Even if total free space is sufficient, a file may not fit because the space isn't contiguous. Compaction is needed to solve this but is expensive.\n\n3. File Size Determination: The system must know or estimate the file's size in advance. If a file grows beyond its initial allocation, it must be moved to a larger contiguous area, which is expensive. If overestimated, space is wasted (internal fragmentation)."
            },
            q13: {
                keywords: ['segmentation', 'logical', 'variable', 'segment', 'external', 'fragmentation', 'table', 'address'],
                keyPhrases: ['variable size', 'logical units', 'external fragmentation', 'segment table'],
                minKeywords: 5,
                mockAnswer: "Segmentation is a memory management scheme that divides a process's address space into logical units called segments. Each segment represents a logical grouping such as code, data, stack, heap, or individual functions and arrays. Unlike paging, segments are of variable size.\n\nMain Problem Addressed: Segmentation addresses the problem of representing the programmer's view of memory. Programmers think in terms of logical units (functions, arrays, objects), not fixed-size pages. Segmentation supports this logical view and allows sharing and protection at a meaningful level.\n\nDisadvantage: The main disadvantage of segmentation is external fragmentation. Since segments are variable-sized, free memory becomes fragmented into non-contiguous pieces as segments are allocated and deallocated. This makes it difficult to find space for new segments and may require expensive compaction to consolidate free space."
            },
            q14: {
                keywords: ['tlb', 'translation', 'cache', 'page', 'table', 'fast', 'memory', 'performance'],
                keyPhrases: ['translation lookaside buffer', 'page table', 'cache memory', 'faster access'],
                minKeywords: 5,
                mockAnswer: "A Translation Lookaside Buffer (TLB) is a small, fast cache memory that stores recent page table entries. It's part of the Memory Management Unit (MMU).\n\nWhy It's Needed: In paging systems, every memory access requires two physical memory accesses: one to access the page table and one to access the actual data. This doubles memory access time. Since the page table is stored in main memory, accessing it is slow.\n\nPerformance Improvement: The TLB dramatically improves performance by caching frequently used page table entries. When the CPU generates a logical address, the TLB is checked first (TLB hit). If the page number is found, the frame number is retrieved immediately without accessing main memory. Only on a TLB miss does the system access the page table in memory. Since programs exhibit locality of reference, TLB hit rates are typically 90-99%, resulting in near-single-memory-access performance."
            }
        };

        // Add event listeners to radio buttons for immediate feedback
        document.querySelectorAll('input[type="radio"]').forEach(radio => {
            radio.addEventListener('change', function() {
                const questionName = this.name;
                const questionDiv = document.querySelector(`[data-question="${questionName}"]`);
                const resultBox = questionDiv.querySelector('.result-box');
                const selectedValue = this.value;
                
                if (correctAnswers[questionName] === selectedValue) {
                    resultBox.className = 'result-box correct show';
                    resultBox.innerHTML = `
                        <div class="result-title">‚úì Correct! (2 marks)</div>
                        <p><strong>Explanation:</strong> ${explanations[questionName]}</p>
                    `;
                } else {
                    resultBox.className = 'result-box incorrect show';
                    resultBox.innerHTML = `
                        <div class="result-title">‚úó Incorrect (0 marks)</div>
                        <p><strong>Your answer:</strong> ${selectedValue.toUpperCase()}</p>
                        <p><strong>Correct answer:</strong> ${correctAnswers[questionName].toUpperCase()}</p>
                        <p><strong>Explanation:</strong> ${explanations[questionName]}</p>
                    `;
                }
            });
        });

        document.getElementById('examForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            let totalScore = 0;
            const maxScore = 50;
            
            // Grade MCQs (20 marks total)
            let mcqScore = 0;
            for (let i = 1; i <= 10; i++) {
                const questionName = `q${i}`;
                const selectedAnswer = document.querySelector(`input[name="${questionName}"]:checked`);
                
                if (selectedAnswer && selectedAnswer.value === correctAnswers[questionName]) {
                    mcqScore += 2;
                }
            }
            totalScore += mcqScore;
            
            // Grade Written Questions (18 marks total)
            let writtenScore = 0;
            
            // Question 11 (4 marks)
            const q11Answer = document.querySelector('textarea[name="q11"]').value.toLowerCase();
            const q11Data = writtenQuestionKeywords.q11;
            let q11Keywords = 0;
            let q11Found = [];
            let q11Missing = [];
            
            q11Data.keywords.forEach(keyword => {
                if (q11Answer.includes(keyword.toLowerCase())) {
                    q11Keywords++;
                    q11Found.push(keyword);
                } else {
                    q11Missing.push(keyword);
                }
            });
            
            q11Data.keyPhrases.forEach(phrase => {
                if (q11Answer.includes(phrase.toLowerCase())) {
                    q11Keywords += 0.5;
                }
            });
            
            const q11Score = Math.min(4, Math.round((q11Keywords / q11Data.keywords.length) * 4));
            writtenScore += q11Score;
            
            const q11ResultBox = document.getElementById('result-q11');
            q11ResultBox.className = `result-box ${q11Score === 4 ? 'correct' : q11Score > 0 ? 'partial' : 'incorrect'} show`;
            q11ResultBox.innerHTML = `
                <div class="result-title">${q11Score === 4 ? '‚úì Excellent!' : q11Score > 0 ? '‚ö† Partial Credit' : '‚úó Needs Improvement'} (${q11Score}/4 marks)</div>
                <p><strong>Your Answer:</strong> ${document.querySelector('textarea[name="q11"]').value || 'No answer provided'}</p>
                <p><strong>Keywords Found:</strong> <span class="keywords-found">${q11Found.join(', ') || 'None'}</span></p>
                <p><strong>Keywords Missing:</strong> <span class="keywords-missing">${q11Missing.join(', ') || 'None'}</span></p>
                <p><strong>Model Answer:</strong> ${q11Data.mockAnswer}</p>
            `;
            
            // Question 12 (5 marks)
            const q12Answer = document.querySelector('textarea[name="q12"]').value.toLowerCase();
            const q12Data = writtenQuestionKeywords.q12;
            let q12Keywords = 0;
            let q12Found = [];
            let q12Missing = [];
            
            q12Data.keywords.forEach(keyword => {
                if (q12Answer.includes(keyword.toLowerCase())) {
                    q12Keywords++;
                    q12Found.push(keyword);
                } else {
                    q12Missing.push(keyword);
                }
            });
            
            const q12Score = Math.min(5, Math.round((q12Keywords / q12Data.keywords.length) * 5));
            writtenScore += q12Score;
            
            const q12ResultBox = document.getElementById('result-q12');
            q12ResultBox.className = `result-box ${q12Score === 5 ? 'correct' : q12Score > 0 ? 'partial' : 'incorrect'} show`;
            q12ResultBox.innerHTML = `
                <div class="result-title">${q12Score === 5 ? '‚úì Excellent!' : q12Score > 0 ? '‚ö† Partial Credit' : '‚úó Needs Improvement'} (${q12Score}/5 marks)</div>
                <p><strong>Your Answer:</strong> ${document.querySelector('textarea[name="q12"]').value || 'No answer provided'}</p>
                <p><strong>Keywords Found:</strong> <span class="keywords-found">${q12Found.join(', ') || 'None'}</span></p>
                <p><strong>Keywords Missing:</strong> <span class="keywords-missing">${q12Missing.join(', ') || 'None'}</span></p>
                <p><strong>Model Answer:</strong> ${q12Data.mockAnswer}</p>
            `;
            
            // Question 13 (5 marks)
            const q13Answer = document.querySelector('textarea[name="q13"]').value.toLowerCase();
            const q13Data = writtenQuestionKeywords.q13;
            let q13Keywords = 0;
            let q13Found = [];
            let q13Missing = [];
            
            q13Data.keywords.forEach(keyword => {
                if (q13Answer.includes(keyword.toLowerCase())) {
                    q13Keywords++;
                    q13Found.push(keyword);
                } else {
                    q13Missing.push(keyword);
                }
            });
            
            const q13Score = Math.min(5, Math.round((q13Keywords / q13Data.keywords.length) * 5));
            writtenScore += q13Score;
            
            const q13ResultBox = document.getElementById('result-q13');
            q13ResultBox.className = `result-box ${q13Score === 5 ? 'correct' : q13Score > 0 ? 'partial' : 'incorrect'} show`;
            q13ResultBox.innerHTML = `
                <div class="result-title">${q13Score === 5 ? '‚úì Excellent!' : q13Score > 0 ? '‚ö† Partial Credit' : '‚úó Needs Improvement'} (${q13Score}/5 marks)</div>
                <p><strong>Your Answer:</strong> ${document.querySelector('textarea[name="q13"]').value || 'No answer provided'}</p>
                <p><strong>Keywords Found:</strong> <span class="keywords-found">${q13Found.join(', ') || 'None'}</span></p>
                <p><strong>Keywords Missing:</strong> <span class="keywords-missing">${q13Missing.join(', ') || 'None'}</span></p>
                <p><strong>Model Answer:</strong> ${q13Data.mockAnswer}</p>
            `;
            
            // Question 14 (4 marks)
            const q14Answer = document.querySelector('textarea[name="q14"]').value.toLowerCase();
            const q14Data = writtenQuestionKeywords.q14;
            let q14Keywords = 0;
            let q14Found = [];
            let q14Missing = [];
            
            q14Data.keywords.forEach(keyword => {
                if (q14Answer.includes(keyword.toLowerCase())) {
                    q14Keywords++;
                    q14Found.push(keyword);
                } else {
                    q14Missing.push(keyword);
                }
            });
            
            const q14Score = Math.min(4, Math.round((q14Keywords / q14Data.keywords.length) * 4));
            writtenScore += q14Score;
            
            const q14ResultBox = document.getElementById('result-q14');
            q14ResultBox.className = `result-box ${q14Score === 4 ? 'correct' : q14Score > 0 ? 'partial' : 'incorrect'} show`;
            q14ResultBox.innerHTML = `
                <div class="result-title">${q14Score === 4 ? '‚úì Excellent!' : q14Score > 0 ? '‚ö† Partial Credit' : '‚úó Needs Improvement'} (${q14Score}/4 marks)</div>
                <p><strong>Your Answer:</strong> ${document.querySelector('textarea[name="q14"]').value || 'No answer provided'}</p>
                <p><strong>Keywords Found:</strong> <span class="keywords-found">${q14Found.join(', ') || 'None'}</span></p>
                <p><strong>Keywords Missing:</strong> <span class="keywords-missing">${q14Missing.join(', ') || 'None'}</span></p>
                <p><strong>Model Answer:</strong> ${q14Data.mockAnswer}</p>
            `;
            
            totalScore += writtenScore;
            
            // Question 15 - Problem Solving (12 marks)
            const q15Answer = document.querySelector('textarea[name="q15"]').value.toLowerCase();
            let q15Score = 0;
            let q15Feedback = '';
            
            // Check for part a) - logical address bits
            if (q15Answer.includes('20') && (q15Answer.includes('log') || q15Answer.includes('bit'))) {
                q15Score += 4;
                q15Feedback += '<p>‚úì Part (a): Correct - 20 bits required (4 marks)</p>';
            } else if (q15Answer.includes('256') || q15Answer.includes('4096') || q15Answer.includes('4kb')) {
                q15Score += 2;
                q15Feedback += '<p>‚ö† Part (a): Partial - shows understanding but incomplete (2 marks)</p>';
            } else {
                q15Feedback += '<p>‚úó Part (a): Incorrect or missing (0 marks)</p>';
            }
            
            // Check for part b) - physical address bits
            if (q15Answer.includes('18') && (q15Answer.includes('bit') || q15Answer.includes('physical'))) {
                q15Score += 4;
                q15Feedback += '<p>‚úì Part (b): Correct - 18 bits required (4 marks)</p>';
            } else if (q15Answer.includes('64') || q15Answer.includes('frame')) {
                q15Score += 2;
                q15Feedback += '<p>‚ö† Part (b): Partial - shows understanding but incomplete (2 marks)</p>';
            } else {
                q15Feedback += '<p>‚úó Part (b): Incorrect or missing (0 marks)</p>';
            }
            
            // Check for part c) - page number and offset calculation
            if ((q15Answer.includes('page') && q15Answer.includes('1')) && 
                (q15Answer.includes('offset') && q15Answer.includes('904'))) {
                q15Score += 4;
                q15Feedback += '<p>‚úì Part (c): Correct - Page 1, Offset 904 (4 marks)</p>';
            } else if (q15Answer.includes('5000') && (q15Answer.includes('4096') || q15Answer.includes('divide'))) {
                q15Score += 2;
                q15Feedback += '<p>‚ö† Part (c): Partial - shows calculation approach (2 marks)</p>';
            } else {
                q15Feedback += '<p>‚úó Part (c): Incorrect or missing (0 marks)</p>';
            }
            
            totalScore += q15Score;
            
            const q15ResultBox = document.getElementById('result-q15');
            q15ResultBox.className = `result-box ${q15Score >= 10 ? 'correct' : q15Score >= 6 ? 'partial' : 'incorrect'} show`;
            q15ResultBox.innerHTML = `
                <div class="result-title">${q15Score >= 10 ? '‚úì Excellent!' : q15Score >= 6 ? '‚ö† Partial Credit' : '‚úó Needs Improvement'} (${q15Score}/12 marks)</div>
                <p><strong>Your Answer:</strong> ${document.querySelector('textarea[name="q15"]').value || 'No answer provided'}</p>
                ${q15Feedback}
                <p><strong>Model Answer:</strong></p>
                <p><strong>a)</strong> Logical address bits = log‚ÇÇ(256 √ó 4096) = log‚ÇÇ(1,048,576) = 20 bits</p>
                <p>Calculation: 256 pages √ó 4KB page size = 256 √ó 4096 bytes = 1,048,576 bytes = 2¬≤‚Å∞ bytes</p>
                <p><strong>b)</strong> Physical address bits = log‚ÇÇ(64 √ó 4096) = log‚ÇÇ(262,144) = 18 bits</p>
                <p>Calculation: 64 frames √ó 4KB frame size = 64 √ó 4096 bytes = 262,144 bytes = 2¬π‚Å∏ bytes</p>
                <p><strong>c)</strong> For logical address 5000:</p>
                <p>Page number = 5000 √∑ 4096 = 1 (integer division)</p>
                <p>Page offset = 5000 mod 4096 = 904</p>
                <p>Verification: (1 √ó 4096) + 904 = 5000 ‚úì</p>
            `;
            
            // Display final score summary
            const percentage = ((totalScore / maxScore) * 100).toFixed(1);
            let grade = '';
            let gradeBadgeColor = '';
            
            if (percentage >= 90) {
                grade = 'A';
                gradeBadgeColor = 'background: #28a745; color: white;';
            } else if (percentage >= 80) {
                grade = 'B';
                gradeBadgeColor = 'background: #17a2b8; color: white;';
            } else if (percentage >= 70) {
                grade = 'C';
                gradeBadgeColor = 'background: #ffc107; color: #333;';
            } else if (percentage >= 60) {
                grade = 'D';
                gradeBadgeColor = 'background: #fd7e14; color: white;';
            } else {
                grade = 'F';
                gradeBadgeColor = 'background: #dc3545; color: white;';
            }
            
            const scoreSummary = document.getElementById('scoreSummary');
            scoreSummary.innerHTML = `
                <h2>üìä Exam Complete!</h2>
                <div class="final-score">${totalScore} / ${maxScore}</div>
                <div style="font-size: 1.2em; margin: 15px 0;">
                    Percentage: <strong>${percentage}%</strong>
                </div>
                <div class="grade-badge" style="${gradeBadgeColor}">Grade: ${grade}</div>
                <div style="margin-top: 30px; padding-top: 20px; border-top: 2px solid #dee2e6;">
                    <h3 style="margin-bottom: 15px;">Score Breakdown:</h3>
                    <div style="text-align: left; max-width: 400px; margin: 0 auto;">
                        <p><strong>Section 1 (MCQs):</strong> ${mcqScore}/20 marks</p>
                        <p><strong>Section 2 (Written):</strong> ${writtenScore}/18 marks</p>
                        <p><strong>Section 3 (Problem):</strong> ${q15Score}/12 marks</p>
                    </div>
                </div>
                <div style="margin-top: 20px; font-size: 0.9em; color: #666;">
                    <p>Review your answers above to see detailed feedback for each question.</p>
                </div>
            `;
            scoreSummary.classList.add('show');
            scoreSummary.scrollIntoView({ behavior: 'smooth', block: 'center' });
        });
    </script>
</body>
</html>