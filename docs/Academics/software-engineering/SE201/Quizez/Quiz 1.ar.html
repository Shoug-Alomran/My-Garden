<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SE201 Quiz 1 - Chapters 1 & 2</title>
  <style>
    *{box-sizing:border-box;margin:0;padding:0}
    body{
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      background:linear-gradient(135deg,#eff6ff 0%,#eef2ff 45%,#faf5ff 100%);
      min-height:100vh;
      padding:32px 16px;
      color:#111827;
    }
    .wrap{max-width:960px;margin:0 auto}
    .card{
      background:#fff;border-radius:18px;box-shadow:0 20px 60px rgba(0,0,0,.10);
      padding:28px;margin-bottom:20px;
    }
    .header{text-align:center}
    .h1{font-size:32px;font-weight:800;margin-bottom:6px}
    .h2{font-size:20px;font-weight:700;color:#4f46e5;margin-bottom:10px}
    .sub{color:#6b7280}
    .scoreBox{
      margin-top:18px;
      padding:18px;
      border-radius:14px;
      background:linear-gradient(90deg,#4f46e5,#7c3aed);
      color:#fff;
      display:none;
    }
    .scoreRow{display:flex;align-items:center;justify-content:center;gap:12px}
    .scoreTitle{font-weight:700}
    .scorePct{font-size:38px;font-weight:900;line-height:1.1}
    .pill{display:inline-flex;align-items:center;font-size:12px;font-weight:700;padding:6px 10px;border-radius:999px;border:1px solid}
    .pill.past{background:#fef3c7;color:#92400e;border-color:#fcd34d}
    .pill.gen{background:#dcfce7;color:#166534;border-color:#86efac}
    .qCard{background:#fff;border-radius:16px;box-shadow:0 12px 30px rgba(0,0,0,.08);padding:22px}
    .space{display:flex;flex-direction:column;gap:16px}
    .qHead{display:flex;gap:12px;align-items:flex-start}
    .num{
      width:34px;height:34px;border-radius:999px;
      background:#e0e7ff;color:#4338ca;font-weight:800;
      display:flex;align-items:center;justify-content:center;flex:0 0 auto;
    }
    .qTextRow{display:flex;gap:10px;align-items:flex-start;justify-content:space-between}
    .qText{font-size:17px;font-weight:650;line-height:1.35;flex:1}
    .options{margin-top:14px;display:flex;flex-direction:column;gap:10px}
    .opt{
      display:flex;gap:10px;align-items:center;
      border:2px solid #e5e7eb;border-radius:12px;
      padding:12px 12px;cursor:pointer;transition:.15s ease;
      background:#fff;
    }
    .opt:hover{border-color:#c7d2fe;background:#eef2ff}
    .opt input{width:18px;height:18px}
    .opt.disabled{cursor:not-allowed;opacity:.95}
    .opt.correct{border-color:#22c55e;background:#f0fdf4}
    .opt.wrong{border-color:#ef4444;background:#fef2f2}
    textarea{
      width:100%;min-height:140px;resize:vertical;
      border:2px solid #e5e7eb;border-radius:12px;
      padding:12px 12px;font-size:15px;line-height:1.4;
      outline:none;
    }
    textarea:focus{border-color:#6366f1}
    textarea:disabled{background:#f9fafb}
    .explain{
      margin-top:12px;padding:12px;border-radius:12px;background:#f9fafb;color:#374151;
      font-size:13.5px;line-height:1.45
    }
    .essayPanel{margin-top:12px;display:flex;flex-direction:column;gap:12px}
    .essayScore{
      border:2px solid;border-radius:12px;padding:14px;
      background:#fff;
    }
    .essayScore.good{border-color:#86efac;background:#f0fdf4}
    .essayScore.mid{border-color:#fde68a;background:#fffbeb}
    .essayScore.bad{border-color:#fecaca;background:#fef2f2}
    .kv{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}
    .kv .label{font-weight:700;color:#374151}
    .kv .val{font-weight:900;font-size:24px}
    .kwRow{display:flex;flex-wrap:wrap;gap:8px;margin-top:8px}
    .kw{
      font-size:12px;font-weight:700;padding:6px 10px;border-radius:10px;border:1px solid;
      display:inline-flex;gap:6px;align-items:center;
    }
    .kw.found{background:#dcfce7;color:#166534;border-color:#86efac}
    .kw.miss{background:#e5e7eb;color:#374151;border-color:#9ca3af}
    .model{
      padding:14px;border-radius:12px;background:#eff6ff;border-left:4px solid #3b82f6;
      color:#1e3a8a;font-size:13.5px;line-height:1.45
    }
    .feedback{
      padding:12px;border-radius:12px;background:#f9fafb;color:#374151;font-size:13.5px
    }
    .btn{
      width:100%;
      border:none;border-radius:14px;padding:14px 18px;
      font-weight:900;font-size:16px;color:#fff;cursor:pointer;
      background:linear-gradient(90deg,#4f46e5,#7c3aed);
      box-shadow:0 10px 24px rgba(79,70,229,.25);
      transition:.15s ease;
    }
    .btn:hover{filter:brightness(.97);transform:translateY(-1px)}
    .btn.secondary{
      background:#fff;color:#4f46e5;border:1px solid rgba(255,255,255,.35);
      box-shadow:none;
      width:auto;
      padding:10px 14px;
      border-radius:12px;
      font-weight:800;
    }
    .footer{text-align:center;color:#6b7280;font-size:13px;margin-top:18px}
    .rowCenter{display:flex;justify-content:center}
    @media (max-width:600px){
      .h1{font-size:26px}
      .h2{font-size:18px}
      .qText{font-size:16px}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card header">
      <div class="h1">SE201: Introduction to Software Engineering</div>
      <div class="h2">Quiz 1 - Chapters 1 &amp; 2</div>
      <div class="sub">Software Engineering Practices, Ethics &amp; Software Processes</div>

      <div id="scoreBox" class="scoreBox">
        <div class="scoreRow">
          <div>
            <div class="scoreTitle">Your Score</div>
            <div id="scorePct" class="scorePct">0%</div>
            <div id="scoreLabel" style="font-size:12px;opacity:.95;margin-top:2px;">—</div>
          </div>
        </div>
        <div class="rowCenter" style="margin-top:12px;">
          <button id="retakeBtn" class="btn secondary" type="button">Retake Quiz</button>
        </div>
      </div>
    </div>

    <div id="questions" class="space"></div>

    <div id="submitWrap" class="card">
      <button id="submitBtn" class="btn" type="button">Submit Quiz</button>
    </div>

    <div class="footer">
      <div>Prince Sultan University - College of Computer and Information Sciences</div>
      <div style="margin-top:4px;">Software Engineering Department</div>
    </div>
  </div>

  <script>
    (function () {
      var questions = [
        { id:"q1", type:"mcq", tag:"generated", question:"It is practically possible to derive a complete set of stable software requirements in a changing environment.", options:["True","False"], correct:1, explanation:"Requirements change frequently in modern environments, making it impractical to derive a complete stable set." },
        { id:"q2", type:"mcq", tag:"generated", question:"Software does not deteriorate over time; it wears out.", options:["True","False"], correct:1, explanation:"Software doesn't physically wear out, but it deteriorates as changes accumulate and the environment evolves." },
        { id:"q3", type:"mcq", tag:"past exam", question:"In generic products, the specification of what the software should do is owned by the customer of the software and they make decisions on required software changes.", options:["True","False"], correct:1, explanation:"In generic products, the specification is owned by the software developer, not the customer." },
        { id:"q4", type:"mcq", tag:"past exam", question:"In the Unified Process model, requirements are determined iteratively and may span more than one phase of the process.", options:["True","False"], correct:0, explanation:"The Unified Process is iterative and requirements are refined across multiple phases." },
        { id:"q5", type:"mcq", tag:"past exam", question:"The Incremental model combines the elements of linear and parallel process flow.", options:["True","False"], correct:0, explanation:"The Incremental model does combine linear progression with parallel development of increments." },
        { id:"q6", type:"mcq", tag:"generated", question:"Scaling up is concerned with using agile methods for large systems that cannot be developed by a small team.", options:["True","False"], correct:0, explanation:"Scaling agile methods for large, complex systems is indeed a significant challenge." },

        { id:"q7", type:"mcq", tag:"past exam", question:"What is the primary focus of software engineering?", options:["Network management","Hardware development","Software production and maintenance","Database Administration"], correct:2, explanation:"Software engineering focuses on all aspects of software production from specification to maintenance." },
        { id:"q8", type:"mcq", tag:"past exam", question:"Which of the following is NOT considered an attribute of good software?", options:["Maintainability","Unpredictability","Efficiency","Dependability"], correct:1, explanation:"Good software should be predictable and reliable. Unpredictability is a negative attribute." },
        { id:"q9", type:"mcq", tag:"past exam", question:"What percentage of software costs are typically attributed to development?", options:["70%","40%","50%","60%"], correct:3, explanation:"Roughly 60% of software costs are development costs, 40% are testing costs." },
        { id:"q10", type:"mcq", tag:"past exam", question:"Which of the following best describes customized products in software engineering?", options:["Software developed for mass market distribution","Open-source software","Free software available for public use","Software commissioned by a specific customer to meet their needs"], correct:3, explanation:"Customized products are commissioned by specific customers for their particular needs." },
        { id:"q11", type:"mcq", tag:"past exam", question:"What is one of the key challenges faced by software engineering?", options:["Limited availability of programming languages","Decreased demand for software","Increasing simplicity of systems","Coping with increasing diversity in systems"], correct:3, explanation:"Software engineers must cope with increasing diversity, reduced delivery times, and developing trustworthy software." },
        { id:"q12", type:"mcq", tag:"past exam", question:"Which principle is NOT part of professional ethical responsibilities in software engineering?", options:["Honesty","Competence","Profit maximization at all costs","Confidentiality"], correct:2, explanation:"Professional ethics prioritize honesty, competence, and confidentiality over pure profit maximization." },
        { id:"q13", type:"mcq", tag:"past exam", question:"Which of the following is NOT one of the main activities in a software process?", options:["Marketing","Communication","Specification","Validation"], correct:0, explanation:"The fundamental software engineering activities are specification, development, validation, and evolution." },

        { id:"q51", type:"essay", tag:"generated", question:"Define a software process and list its four fundamental activities.", keywords:["specification","development","validation","evolution","structured","activities"], modelAnswer:"A software process is a structured set of activities required to develop a software system. The four fundamental activities are: (1) Software specification - defining what the system should do; (2) Software development - designing and implementing the system; (3) Software validation - checking that it does what the customer wants; (4) Software evolution - changing the system in response to changing customer needs." }
      ];

      var state = { answers:{}, submitted:false, essayScores:{}, scorePct:0 };

      var elQuestions = document.getElementById("questions");
      var elSubmitBtn = document.getElementById("submitBtn");
      var elSubmitWrap = document.getElementById("submitWrap");
      var elScoreBox = document.getElementById("scoreBox");
      var elScorePct = document.getElementById("scorePct");
      var elScoreLabel = document.getElementById("scoreLabel");
      var elRetake = document.getElementById("retakeBtn");

      function esc(s){
        return String(s).replace(/[&<>"']/g, function(m){
          return ({ "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;" })[m];
        });
      }

      function pill(tag){
        if(!tag) return "";
        var cls = (tag === "past exam") ? "pill past" : "pill gen";
        return '<span class="'+cls+'">'+esc(tag)+'</span>';
      }

      function render(){
        var html = "";
        for(var i=0;i<questions.length;i++){
          var q = questions[i];
          var userVal = state.answers[q.id];

          html += '<div class="qCard">';
          html +=   '<div class="qHead">';
          html +=     '<div class="num">'+(i+1)+'</div>';
          html +=     '<div style="flex:1;">';
          html +=       '<div class="qTextRow">';
          html +=         '<div class="qText">'+esc(q.question)+'</div>';
          html +=         pill(q.tag);
          html +=       '</div>';

          if(q.type === "mcq"){
            html += '<div class="options">';
            for(var j=0;j<q.options.length;j++){
              var opt = q.options[j];
              var checked = (userVal === j) ? " checked" : "";
              var disabled = state.submitted ? " disabled" : "";

              var cls = "opt";
              if(state.submitted){
                cls += " disabled";
                if(j === q.correct) cls += " correct";
                else if(userVal === j && j !== q.correct) cls += " wrong";
              }

              html += '<label class="'+cls+'">';
              html +=   '<input type="radio" name="'+q.id+'" value="'+j+'"'+checked+disabled+'>';
              html +=   '<span style="flex:1;">'+esc(opt)+'</span>';
              html += '</label>';
            }
            html += '</div>';
          }

          if(q.type === "essay"){
            var tDisabled = state.submitted ? " disabled" : "";
            var val = (state.answers[q.id] || "");
            html += '<div style="margin-top:14px;">';
            html +=   '<textarea data-essay="'+q.id+'" placeholder="Type your answer here..."'+tDisabled+'>'+esc(val)+'</textarea>';
            html += '</div>';

            if(state.submitted){
              var es = state.essayScores[q.id];
              if(es){
                var pct = Number(es.percentage);
                var scoreCls = (pct >= 70) ? "good" : (pct >= 50) ? "mid" : "bad";
                html += '<div class="essayPanel">';
                html +=   '<div class="essayScore '+scoreCls+'">';
                html +=     '<div class="kv"><div class="label">Your Score:</div><div class="val">'+esc(es.percentage)+'%</div></div>';
                html +=     '<div style="font-size:13px;color:#4b5563;">Keywords found: '+es.matchedKeywords.length+' / '+es.totalKeywords+'</div>';
                html +=     '<div style="margin-top:10px;padding-top:10px;border-top:1px solid rgba(0,0,0,.12);">';
                html +=       '<div style="font-size:12px;font-weight:800;color:#374151;margin-bottom:8px;">Keyword Analysis:</div>';
                html +=       '<div class="kwRow">';
                for(var k=0;k<q.keywords.length;k++){
                  var kw = q.keywords[k];
                  var found = (es.matchedKeywords.indexOf(kw) !== -1);
                  html += '<span class="kw '+(found ? "found" : "miss")+'">'+(found ? "✓" : "✗")+' '+esc(kw)+'</span>';
                }
                html +=       '</div>';
                html +=       '<div style="font-size:12px;color:#6b7280;margin-top:8px;">✓ = Found | ✗ = Missing</div>';
                html +=     '</div>';
                html +=   '</div>';
                html +=   '<div class="model"><div style="font-weight:900;margin-bottom:6px;">Model Answer:</div><div>'+esc(q.modelAnswer)+'</div></div>';
                html += '</div>';
              }
            }
          }

          if(state.submitted && q.explanation){
            html += '<div class="explain"><span style="font-weight:800;">Explanation: </span>'+esc(q.explanation)+'</div>';
          }

          html +=     '</div>';
          html +=   '</div>';
          html += '</div>';
        }

        elQuestions.innerHTML = html;

        elSubmitWrap.style.display = state.submitted ? "none" : "block";
        elScoreBox.style.display = state.submitted ? "block" : "none";

        // Attach listeners for MCQ radios
        var radios = elQuestions.querySelectorAll('input[type="radio"]');
        for(var r=0;r<radios.length;r++){
          radios[r].addEventListener("change", function(e){
            if(state.submitted) return;
            var qid = e.target.name;
            var idx = parseInt(e.target.value, 10);
            state.answers[qid] = idx;
          });
        }

        // Attach listeners for essays
        var essays = elQuestions.querySelectorAll("textarea[data-essay]");
        for(var t=0;t<essays.length;t++){
          essays[t].addEventListener("input", function(e){
            if(state.submitted) return;
            var qid2 = e.target.getAttribute("data-essay");
            state.answers[qid2] = e.target.value;
          });
        }
      }

      function getEssayScore(qid){
        var q = null;
        for(var i=0;i<questions.length;i++){
          if(questions[i].id === qid){ q = questions[i]; break; }
        }
        if(!q || q.type !== "essay") return null;

        var ans = String(state.answers[qid] || "").toLowerCase();
        var matched = [];
        for(var k=0;k<q.keywords.length;k++){
          var kw = String(q.keywords[k]).toLowerCase();
          if(ans.indexOf(kw) !== -1) matched.push(q.keywords[k]);
        }
        var score = matched.length / q.keywords.length;
        return {
          score: score,
          percentage: String(Math.round(score * 100)),
          matchedKeywords: matched,
          totalKeywords: q.keywords.length
        };
      }

      function calculateScore(){
        var total = 0;
        var max = questions.length;
        var essayScores = {};

        for(var i=0;i<questions.length;i++){
          var q = questions[i];
          if(q.type === "mcq"){
            if(state.answers[q.id] === q.correct) total += 1;
          } else {
            var es = getEssayScore(q.id);
            essayScores[q.id] = es;
            total += es.score;
          }
        }
        return { total: total, max: max, essayScores: essayScores };
      }

      function labelFor(p){
        if(p >= 90) return "Excellent!";
        if(p >= 80) return "Very Good!";
        if(p >= 70) return "Good";
        if(p >= 60) return "Pass";
        return "Need Improvement";
      }

      function submit(){
        var res = calculateScore();
        state.essayScores = res.essayScores;
        state.scorePct = (res.total / res.max) * 100;
        state.submitted = true;

        elScorePct.textContent = state.scorePct.toFixed(1) + "%";
        elScoreLabel.textContent = labelFor(state.scorePct);

        render();
        window.scrollTo({ top: 0, behavior: "smooth" });
      }

      function reset(){
        state.answers = {};
        state.submitted = false;
        state.essayScores = {};
        state.scorePct = 0;
        render();
        window.scrollTo({ top: 0, behavior: "smooth" });
      }

      elSubmitBtn.addEventListener("click", submit);
      elRetake.addEventListener("click", reset);

      render();
    })();
  </script>
</body>
</html>
