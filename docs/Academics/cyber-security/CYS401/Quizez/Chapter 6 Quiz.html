<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CYS401 ‚Äî Chapter 6 Quiz</title>
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;600&family=Cormorant+Garamond:wght@600;700&display=swap" rel="stylesheet">
<style>
/* ‚ïê‚ïê‚ïê THEME ‚ïê‚ïê‚ïê */
[data-theme="dark"] {
  --bg:    #07090f; --bg2: #0c1018; --bg3: #111827;
  --surf:  rgba(255,255,255,0.04); --surf2: rgba(255,255,255,0.07);
  --bdr:   rgba(255,255,255,0.07); --bdr2: rgba(255,255,255,0.14);
  --tx:    #e2e8f0; --tx2: #8892a4; --tx3: #4b5563; --head: #f1f5f9;
  --cbg:   rgba(255,255,255,0.05); --shad: rgba(0,0,0,0.6);
  --togbg: rgba(255,255,255,0.07);
}
[data-theme="light"] {
  --bg:    #eef2ff; --bg2: #e0e7ff; --bg3: #c7d2fe;
  --surf:  rgba(255,255,255,0.75); --surf2: rgba(255,255,255,0.96);
  --bdr:   rgba(99,102,241,0.12); --bdr2: rgba(99,102,241,0.25);
  --tx:    #1e1b4b; --tx2: #4338ca; --tx3: #818cf8; --head: #0f0a2e;
  --cbg:   rgba(99,102,241,0.07); --shad: rgba(99,102,241,0.12);
  --togbg: rgba(99,102,241,0.1);
}
:root {
  --v1:#818cf8; --v2:#38bdf8; --v3:#fb7185;
  --v4:#4ade80; --v5:#fbbf24; --v6:#c084fc;
}

*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
html{scroll-behavior:smooth}
body{font-family:'Outfit',sans-serif;background:var(--bg);color:var(--tx);line-height:1.7;overflow-x:hidden;transition:background .4s,color .4s}

/* ‚ïê‚ïê‚ïê TOGGLE ‚ïê‚ïê‚ïê */
.toggle{
  position:fixed;top:1.25rem;right:1.5rem;z-index:1000;
  background:var(--togbg);border:1px solid var(--bdr2);border-radius:100px;
  padding:.4rem 1rem;cursor:pointer;display:flex;align-items:center;gap:.5rem;
  font-size:.78rem;font-weight:600;color:var(--tx2);
  backdrop-filter:blur(14px);transition:all .3s;user-select:none;
}
.toggle:hover{border-color:var(--v1);color:var(--v1);transform:scale(1.04)}

/* ‚ïê‚ïê‚ïê HERO ‚ïê‚ïê‚ïê */
.hero{
  min-height:60vh;display:flex;flex-direction:column;
  justify-content:center;align-items:center;text-align:center;
  padding:5rem 2rem 3rem;position:relative;overflow:hidden;
}
[data-theme="dark"] .hero{
  background:radial-gradient(ellipse 70% 60% at 20% 20%,rgba(129,140,248,.15) 0%,transparent 65%),
             radial-gradient(ellipse 60% 50% at 80% 75%,rgba(192,132,252,.12) 0%,transparent 60%),
             radial-gradient(ellipse 50% 40% at 55% 55%,rgba(251,113,133,.07) 0%,transparent 60%),var(--bg);
}
[data-theme="light"] .hero{
  background:radial-gradient(ellipse 70% 60% at 20% 20%,rgba(129,140,248,.2) 0%,transparent 65%),
             radial-gradient(ellipse 60% 50% at 80% 75%,rgba(192,132,252,.18) 0%,transparent 60%),
             radial-gradient(ellipse 50% 40% at 55% 55%,rgba(251,113,133,.12) 0%,transparent 60%),var(--bg);
}
.hero-grid{
  position:absolute;inset:0;
  background-image:linear-gradient(var(--bdr) 1px,transparent 1px),linear-gradient(90deg,var(--bdr) 1px,transparent 1px);
  background-size:55px 55px;opacity:.7;
}
.hero-badge{
  display:inline-flex;align-items:center;gap:.5rem;
  background:var(--surf2);border:1px solid var(--bdr2);border-radius:100px;
  padding:.4rem 1.1rem;font-size:.7rem;font-weight:700;letter-spacing:.18em;
  text-transform:uppercase;color:var(--v1);margin-bottom:1.5rem;
  position:relative;z-index:1;animation:fadeUp .7s ease both;
}
.bp{width:6px;height:6px;border-radius:50%;background:var(--v1);animation:pulse 2s infinite}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:.3}}
.hero h1{
  font-family:'Cormorant Garamond',serif;font-size:clamp(2.4rem,5.5vw,5rem);
  font-weight:700;color:var(--head);position:relative;z-index:1;
  animation:fadeUp .85s ease both;
}
.gw{background:linear-gradient(130deg,var(--v1),var(--v6),var(--v3));
    -webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.hero-sub{font-size:.95rem;color:var(--tx2);margin-top:1rem;max-width:480px;
          position:relative;z-index:1;animation:fadeUp 1s ease both}
@keyframes fadeUp{from{opacity:0;transform:translateY(22px)}to{opacity:1;transform:translateY(0)}}

/* ‚ïê‚ïê‚ïê SCOREBOARD ‚ïê‚ïê‚ïê */
.scoreboard{
  display:flex;gap:1.5rem;justify-content:center;flex-wrap:wrap;
  margin-top:2rem;position:relative;z-index:1;animation:fadeUp 1.1s ease both;
}
.score-pill{
  background:var(--surf);border:1px solid var(--bdr2);border-radius:14px;
  padding:.7rem 1.4rem;text-align:center;min-width:90px;
}
.score-pill .num{font-family:'JetBrains Mono',monospace;font-size:1.6rem;font-weight:700;line-height:1}
.score-pill .lbl{font-size:.7rem;color:var(--tx3);text-transform:uppercase;letter-spacing:.1em;margin-top:.2rem}
.s-correct .num{color:var(--v4)} .s-wrong .num{color:var(--v3)} .s-total .num{color:var(--v1)}

/* ‚ïê‚ïê‚ïê MAIN LAYOUT ‚ïê‚ïê‚ïê */
main{max-width:900px;margin:0 auto;padding:3rem 2rem 5rem}

/* ‚ïê‚ïê‚ïê SECTION HEADERS ‚ïê‚ïê‚ïê */
.sec-hdr{
  display:flex;align-items:center;gap:1rem;margin:3rem 0 1.5rem;
}
.sec-num{font-family:'JetBrains Mono',monospace;font-size:.67rem;font-weight:600;
         letter-spacing:.2em;text-transform:uppercase;color:var(--tx3);white-space:nowrap}
.sec-line{flex:1;height:1px;background:linear-gradient(90deg,var(--bdr2),transparent)}
.sec-title{font-family:'Cormorant Garamond',serif;font-size:1.5rem;font-weight:700;color:var(--head);
           margin-bottom:0;margin-top:.3rem}

/* ‚ïê‚ïê‚ïê QUESTION CARD ‚ïê‚ïê‚ïê */
.q-card{
  background:var(--surf);border:1px solid var(--bdr);border-radius:18px;
  padding:1.75rem;margin-bottom:1.25rem;transition:border-color .3s;position:relative;
}
.q-card.answered-correct{border-color:rgba(74,222,128,.5)!important}
.q-card.answered-wrong{border-color:rgba(251,113,133,.5)!important}

.q-meta{
  display:flex;align-items:center;gap:.75rem;margin-bottom:1rem;
}
.q-num{
  font-family:'JetBrains Mono',monospace;font-size:.72rem;font-weight:600;
  background:var(--cbg);border:1px solid var(--bdr2);border-radius:8px;
  padding:.2rem .6rem;color:var(--tx3);
}
.q-type{
  font-size:.68rem;font-weight:700;letter-spacing:.12em;text-transform:uppercase;
  padding:.2rem .6rem;border-radius:100px;border:1px solid;
}
.qt-mc{color:var(--v1);border-color:rgba(129,140,248,.4);background:rgba(129,140,248,.08)}
.qt-tf{color:var(--v5);border-color:rgba(251,191,36,.4);background:rgba(251,191,36,.08)}
.qt-sa{color:var(--v2);border-color:rgba(56,189,248,.4);background:rgba(56,189,248,.08)}
.qt-calc{color:var(--v4);border-color:rgba(74,222,128,.4);background:rgba(74,222,128,.08)}

.q-text{font-size:1rem;font-weight:600;color:var(--head);line-height:1.5;margin-bottom:1.25rem}
.q-sub{font-size:.85rem;color:var(--tx2);margin-bottom:1.25rem;
       background:var(--cbg);border:1px solid var(--bdr);border-radius:10px;padding:.75rem 1rem;
       font-family:'JetBrains Mono',monospace}

/* ‚ïê‚ïê‚ïê MCQ OPTIONS ‚ïê‚ïê‚ïê */
.options{display:flex;flex-direction:column;gap:.6rem}
.opt{
  display:flex;align-items:center;gap:.85rem;
  padding:.85rem 1.1rem;border-radius:12px;border:1px solid var(--bdr);
  background:var(--surf2);cursor:pointer;transition:all .25s;
  font-size:.92rem;color:var(--tx);user-select:none;
}
.opt:hover:not(.locked){border-color:var(--bdr2);background:var(--surf);transform:translateX(3px)}
.opt .opt-letter{
  width:28px;height:28px;border-radius:8px;border:1px solid var(--bdr2);
  background:var(--cbg);display:flex;align-items:center;justify-content:center;
  font-family:'JetBrains Mono',monospace;font-size:.76rem;font-weight:700;
  flex-shrink:0;color:var(--tx3);transition:all .25s;
}
.opt.selected{border-color:var(--v1);background:rgba(129,140,248,.07)}
.opt.selected .opt-letter{background:var(--v1);color:#fff;border-color:var(--v1)}
.opt.correct-ans{border-color:var(--v4)!important;background:rgba(74,222,128,.08)!important}
.opt.correct-ans .opt-letter{background:var(--v4)!important;color:#000!important;border-color:var(--v4)!important}
.opt.wrong-ans{border-color:var(--v3)!important;background:rgba(251,113,133,.08)!important}
.opt.wrong-ans .opt-letter{background:var(--v3)!important;color:#fff!important;border-color:var(--v3)!important}
.opt.locked{cursor:default}

/* ‚ïê‚ïê‚ïê TRUE / FALSE ‚ïê‚ïê‚ïê */
.tf-btns{display:flex;gap:.75rem}
.tf-btn{
  flex:1;padding:.85rem;border-radius:12px;border:1px solid var(--bdr);
  background:var(--surf2);cursor:pointer;font-size:.95rem;font-weight:700;
  color:var(--tx2);transition:all .25s;text-align:center;
}
.tf-btn:hover:not(.locked){border-color:var(--bdr2);transform:scale(1.02)}
.tf-btn.selected{border-color:var(--v1);background:rgba(129,140,248,.1);color:var(--v1)}
.tf-btn.correct-ans{border-color:var(--v4)!important;background:rgba(74,222,128,.1)!important;color:var(--v4)!important}
.tf-btn.wrong-ans{border-color:var(--v3)!important;background:rgba(251,113,133,.1)!important;color:var(--v3)!important}
.tf-btn.locked{cursor:default}

/* ‚ïê‚ïê‚ïê SHORT ANSWER ‚ïê‚ïê‚ïê */
.sa-wrap{position:relative}
.sa-input{
  width:100%;padding:.85rem 1.1rem;border-radius:12px;
  border:1px solid var(--bdr2);background:var(--cbg);
  color:var(--tx);font-family:'Outfit',sans-serif;font-size:.92rem;
  outline:none;transition:all .3s;resize:none;min-height:52px;
}
.sa-input:focus{border-color:var(--v1);box-shadow:0 0 0 3px rgba(129,140,248,.12)}
.sa-input.correct{border-color:var(--v4)!important;background:rgba(74,222,128,.06)!important}
.sa-input.wrong{border-color:var(--v3)!important;background:rgba(251,113,133,.06)!important}
.sa-input:disabled{cursor:not-allowed;opacity:.8}

/* ‚ïê‚ïê‚ïê SUBMIT BUTTON ‚ïê‚ïê‚ïê */
.submit-btn{
  margin-top:1rem;padding:.65rem 1.35rem;
  background:linear-gradient(135deg,var(--v1),var(--v6));
  border:none;border-radius:10px;color:#fff;font-family:'Outfit',sans-serif;
  font-size:.88rem;font-weight:700;cursor:pointer;transition:all .3s;
  display:inline-flex;align-items:center;gap:.5rem;
}
.submit-btn:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 20px rgba(129,140,248,.35)}
.submit-btn:disabled{opacity:.45;cursor:not-allowed;transform:none}

/* ‚ïê‚ïê‚ïê FEEDBACK ‚ïê‚ïê‚ïê */
.feedback{
  margin-top:1rem;padding:1.1rem 1.25rem;border-radius:12px;
  display:none;border:1px solid;animation:feedIn .35s ease;
}
@keyframes feedIn{from{opacity:0;transform:translateY(6px)}to{opacity:1;transform:translateY(0)}}
.feedback.show{display:block}
.fb-correct{background:rgba(74,222,128,.07);border-color:rgba(74,222,128,.3)}
.fb-wrong{background:rgba(251,113,133,.07);border-color:rgba(251,113,133,.3)}
.fb-header{display:flex;align-items:center;gap:.6rem;font-weight:700;font-size:.9rem;margin-bottom:.5rem}
.fb-icon{font-size:1.1rem}
.fb-correct .fb-header{color:var(--v4)} .fb-wrong .fb-header{color:var(--v3)}
.fb-body{font-size:.87rem;color:var(--tx2);line-height:1.6}
.fb-correct-answer{
  margin-top:.6rem;padding:.6rem .9rem;border-radius:8px;
  background:rgba(129,140,248,.1);border:1px solid rgba(129,140,248,.25);
  font-family:'JetBrains Mono',monospace;font-size:.82rem;color:var(--v1);
}

/* ‚ïê‚ïê‚ïê STATUS ICON (corner of card) ‚ïê‚ïê‚ïê */
.q-status{
  position:absolute;top:1.2rem;right:1.2rem;
  font-size:1.1rem;opacity:0;transition:opacity .3s;
}
.q-card.answered-correct .q-status{opacity:1}
.q-card.answered-wrong .q-status{opacity:1}

/* ‚ïê‚ïê‚ïê FINAL RESULTS PANEL ‚ïê‚ïê‚ïê */
.results-panel{
  background:var(--surf);border:1px solid var(--bdr2);border-radius:20px;
  padding:2.5rem;text-align:center;margin:3rem 0;display:none;
  animation:fadeUp .5s ease;
}
.results-panel.show{display:block}
.results-emoji{font-size:3.5rem;margin-bottom:1rem}
.results-title{font-family:'Cormorant Garamond',serif;font-size:2rem;font-weight:700;color:var(--head);margin-bottom:.5rem}
.results-score{font-family:'JetBrains Mono',monospace;font-size:3rem;font-weight:700;margin:.75rem 0}
.results-bar-wrap{height:10px;background:var(--bdr);border-radius:100px;overflow:hidden;margin:.75rem auto;max-width:400px}
.results-bar{height:100%;border-radius:100px;background:linear-gradient(90deg,var(--v1),var(--v4));transition:width 1s ease}
.results-msg{font-size:1rem;color:var(--tx2);margin-bottom:1.5rem}
.retry-btn{
  padding:.8rem 2rem;background:linear-gradient(135deg,var(--v1),var(--v6));
  border:none;border-radius:12px;color:#fff;font-family:'Outfit',sans-serif;
  font-size:1rem;font-weight:700;cursor:pointer;transition:all .3s;
}
.retry-btn:hover{transform:translateY(-2px);box-shadow:0 8px 24px rgba(129,140,248,.4)}

/* ‚ïê‚ïê‚ïê SUBMIT ALL ‚ïê‚ïê‚ïê */
.submit-all-wrap{text-align:center;margin:2rem 0}
.submit-all-btn{
  padding:1rem 3rem;background:linear-gradient(135deg,var(--v1),var(--v6),var(--v3));
  border:none;border-radius:14px;color:#fff;font-family:'Outfit',sans-serif;
  font-size:1.05rem;font-weight:700;cursor:pointer;transition:all .3s;letter-spacing:.03em;
}
.submit-all-btn:hover{transform:translateY(-3px);box-shadow:0 10px 28px rgba(129,140,248,.4)}

/* ‚ïê‚ïê‚ïê PROGRESS BAR ‚ïê‚ïê‚ïê */
.progress-wrap{
  position:sticky;top:0;z-index:500;
  background:var(--bg);border-bottom:1px solid var(--bdr);
  padding:.6rem 2rem;display:flex;align-items:center;gap:1rem;
}
.prog-bar-bg{flex:1;height:5px;background:var(--bdr);border-radius:100px;overflow:hidden}
.prog-bar-fill{height:100%;border-radius:100px;background:linear-gradient(90deg,var(--v1),var(--v4));transition:width .4s ease;width:0%}
.prog-text{font-family:'JetBrains Mono',monospace;font-size:.72rem;color:var(--tx3);white-space:nowrap}

/* ‚ïê‚ïê‚ïê FOOTER ‚ïê‚ïê‚ïê */
footer{text-align:center;padding:2.5rem 2rem 3.5rem;position:relative}
footer::before{content:'';position:absolute;top:0;left:10%;right:10%;height:1px;
               background:linear-gradient(90deg,transparent,var(--bdr2),transparent)}
.fname{font-family:'Cormorant Garamond',serif;font-size:1rem;font-weight:700;
       background:linear-gradient(135deg,var(--v1),var(--v6),var(--v2));
       -webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.fsub{font-size:.77rem;color:var(--tx3);margin-top:.3rem}

@media(max-width:600px){
  .tf-btns{flex-direction:column}
  .scoreboard{gap:.75rem}
  .score-pill{min-width:70px}
}
</style>
  <script src="/javascripts/standalone-theme.js"></script>
</head>
<body>

<button class="toggle" onclick="toggleTheme()">
  <span id="ticon">‚òÄÔ∏è</span><span id="tlabel">Light Mode</span>
</button>

<!-- HERO -->
<div class="hero">
  <div class="hero-grid"></div>
  <div class="hero-badge"><span class="bp"></span>CYS 401 ¬∑ Chapter 6</div>
  <h1>Knowledge <span class="gw">Quiz</span></h1>
  <p class="hero-sub">Asymmetric Cryptography, RSA, Hash Functions, Digital Signatures &amp; PKI ‚Äî 25 questions across 5 categories</p>
  <div class="scoreboard">
    <div class="score-pill s-correct"><div class="num" id="sc-correct">0</div><div class="lbl">Correct</div></div>
    <div class="score-pill s-wrong"><div class="num" id="sc-wrong">0</div><div class="lbl">Wrong</div></div>
    <div class="score-pill s-total"><div class="num" id="sc-total">0/25</div><div class="lbl">Answered</div></div>
  </div>
</div>

<!-- PROGRESS BAR -->
<div class="progress-wrap">
  <div class="prog-bar-bg"><div class="prog-bar-fill" id="prog-fill"></div></div>
  <div class="prog-text" id="prog-text">0 / 25 answered</div>
</div>

<main>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     SECTION A: MULTIPLE CHOICE
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="sec-hdr"><span class="sec-num">Section A</span><div class="sec-line"></div></div>
<div class="sec-title">Multiple Choice</div>
<p style="font-size:.88rem;color:var(--tx2);margin:.4rem 0 1.5rem">Select the best answer for each question.</p>

<!-- Q1 -->
<div class="q-card" id="qc-1">
  <div class="q-status" id="qs-1"></div>
  <div class="q-meta"><span class="q-num">Q1</span><span class="q-type qt-mc">Multiple Choice</span></div>
  <div class="q-text">What is RSA named after?</div>
  <div class="options">
    <div class="opt" onclick="selectMC(1,'A')"><span class="opt-letter">A</span>Random Secure Algorithm</div>
    <div class="opt" onclick="selectMC(1,'B')"><span class="opt-letter">B</span>Rivest, Shamir, and Adleman</div>
    <div class="opt" onclick="selectMC(1,'C')"><span class="opt-letter">C</span>Robust Symmetric Architecture</div>
    <div class="opt" onclick="selectMC(1,'D')"><span class="opt-letter">D</span>Root Security Authority</div>
  </div>
  <button class="submit-btn" onclick="gradeQ(1)" id="btn-1" disabled>Check Answer</button>
  <div class="feedback" id="fb-1"></div>
</div>

<!-- Q2 -->
<div class="q-card" id="qc-2">
  <div class="q-status" id="qs-2"></div>
  <div class="q-meta"><span class="q-num">Q2</span><span class="q-type qt-mc">Multiple Choice</span></div>
  <div class="q-text">In RSA, which component is shared between both the public key and the private key?</div>
  <div class="options">
    <div class="opt" onclick="selectMC(2,'A')"><span class="opt-letter">A</span>The private exponent d</div>
    <div class="opt" onclick="selectMC(2,'B')"><span class="opt-letter">B</span>The public exponent e</div>
    <div class="opt" onclick="selectMC(2,'C')"><span class="opt-letter">C</span>The modulus n</div>
    <div class="opt" onclick="selectMC(2,'D')"><span class="opt-letter">D</span>The Euler totient œÜ(n)</div>
  </div>
  <button class="submit-btn" onclick="gradeQ(2)" id="btn-2" disabled>Check Answer</button>
  <div class="feedback" id="fb-2"></div>
</div>

<!-- Q3 -->
<div class="q-card" id="qc-3">
  <div class="q-status" id="qs-3"></div>
  <div class="q-meta"><span class="q-num">Q3</span><span class="q-type qt-mc">Multiple Choice</span></div>
  <div class="q-text">To encrypt a message for Bob using RSA, Alice should use:</div>
  <div class="options">
    <div class="opt" onclick="selectMC(3,'A')"><span class="opt-letter">A</span>Alice's private key</div>
    <div class="opt" onclick="selectMC(3,'B')"><span class="opt-letter">B</span>Bob's private key</div>
    <div class="opt" onclick="selectMC(3,'C')"><span class="opt-letter">C</span>Bob's public key</div>
    <div class="opt" onclick="selectMC(3,'D')"><span class="opt-letter">D</span>Alice's public key</div>
  </div>
  <button class="submit-btn" onclick="gradeQ(3)" id="btn-3" disabled>Check Answer</button>
  <div class="feedback" id="fb-3"></div>
</div>

<!-- Q4 -->
<div class="q-card" id="qc-4">
  <div class="q-status" id="qs-4"></div>
  <div class="q-meta"><span class="q-num">Q4</span><span class="q-type qt-mc">Multiple Choice</span></div>
  <div class="q-text">To create a digital signature, the sender uses:</div>
  <div class="options">
    <div class="opt" onclick="selectMC(4,'A')"><span class="opt-letter">A</span>Receiver's public key</div>
    <div class="opt" onclick="selectMC(4,'B')"><span class="opt-letter">B</span>Sender's public key</div>
    <div class="opt" onclick="selectMC(4,'C')"><span class="opt-letter">C</span>Receiver's private key</div>
    <div class="opt" onclick="selectMC(4,'D')"><span class="opt-letter">D</span>Sender's private key</div>
  </div>
  <button class="submit-btn" onclick="gradeQ(4)" id="btn-4" disabled>Check Answer</button>
  <div class="feedback" id="fb-4"></div>
</div>

<!-- Q5 -->
<div class="q-card" id="qc-5">
  <div class="q-status" id="qs-5"></div>
  <div class="q-meta"><span class="q-num">Q5</span><span class="q-type qt-mc">Multiple Choice</span></div>
  <div class="q-text">Why would a Certification Authority (CA) revoke a digital certificate?</div>
  <div class="options">
    <div class="opt" onclick="selectMC(5,'A')"><span class="opt-letter">A</span>The user's public key has been compromised</div>
    <div class="opt" onclick="selectMC(5,'B')"><span class="opt-letter">B</span>The user moved to a new location</div>
    <div class="opt" onclick="selectMC(5,'C')"><span class="opt-letter">C</span>The user's private key has been compromised</div>
    <div class="opt" onclick="selectMC(5,'D')"><span class="opt-letter">D</span>The certificate's hash algorithm is outdated</div>
  </div>
  <button class="submit-btn" onclick="gradeQ(5)" id="btn-5" disabled>Check Answer</button>
  <div class="feedback" id="fb-5"></div>
</div>

<!-- Q6 -->
<div class="q-card" id="qc-6">
  <div class="q-status" id="qs-6"></div>
  <div class="q-meta"><span class="q-num">Q6</span><span class="q-type qt-mc">Multiple Choice</span></div>
  <div class="q-text">Which best describes a Certification Authority (CA)?</div>
  <div class="options">
    <div class="opt" onclick="selectMC(6,'A')"><span class="opt-letter">A</span>An organization that issues private keys and corresponding algorithms</div>
    <div class="opt" onclick="selectMC(6,'B')"><span class="opt-letter">B</span>An organization that validates encryption processes</div>
    <div class="opt" onclick="selectMC(6,'C')"><span class="opt-letter">C</span>An organization that verifies encryption keys</div>
    <div class="opt" onclick="selectMC(6,'D')"><span class="opt-letter">D</span>An organization that issues certificates</div>
  </div>
  <button class="submit-btn" onclick="gradeQ(6)" id="btn-6" disabled>Check Answer</button>
  <div class="feedback" id="fb-6"></div>
</div>

<!-- Q7 -->
<div class="q-card" id="qc-7">
  <div class="q-status" id="qs-7"></div>
  <div class="q-meta"><span class="q-num">Q7</span><span class="q-type qt-mc">Multiple Choice</span></div>
  <div class="q-text">The security of RSA is based on the computational difficulty of:</div>
  <div class="options">
    <div class="opt" onclick="selectMC(7,'A')"><span class="opt-letter">A</span>Solving discrete logarithms</div>
    <div class="opt" onclick="selectMC(7,'B')"><span class="opt-letter">B</span>Factoring large numbers into their prime components</div>
    <div class="opt" onclick="selectMC(7,'C')"><span class="opt-letter">C</span>Reversing SHA-256 hashes</div>
    <div class="opt" onclick="selectMC(7,'D')"><span class="opt-letter">D</span>Breaking symmetric encryption keys</div>
  </div>
  <button class="submit-btn" onclick="gradeQ(7)" id="btn-7" disabled>Check Answer</button>
  <div class="feedback" id="fb-7"></div>
</div>

<!-- Q8 -->
<div class="q-card" id="qc-8">
  <div class="q-status" id="qs-8"></div>
  <div class="q-meta"><span class="q-num">Q8</span><span class="q-type qt-mc">Multiple Choice</span></div>
  <div class="q-text">Which of the following provides non-repudiation?</div>
  <div class="options">
    <div class="opt" onclick="selectMC(8,'A')"><span class="opt-letter">A</span>Hash function alone</div>
    <div class="opt" onclick="selectMC(8,'B')"><span class="opt-letter">B</span>Message Authentication Code (MAC)</div>
    <div class="opt" onclick="selectMC(8,'C')"><span class="opt-letter">C</span>Digital Signature</div>
    <div class="opt" onclick="selectMC(8,'D')"><span class="opt-letter">D</span>Symmetric encryption</div>
  </div>
  <button class="submit-btn" onclick="gradeQ(8)" id="btn-8" disabled>Check Answer</button>
  <div class="feedback" id="fb-8"></div>
</div>

<!-- Q9 -->
<div class="q-card" id="qc-9">
  <div class="q-status" id="qs-9"></div>
  <div class="q-meta"><span class="q-num">Q9</span><span class="q-type qt-mc">Multiple Choice</span></div>
  <div class="q-text">In the first step of RSA key generation, what are p and q?</div>
  <div class="options">
    <div class="opt" onclick="selectMC(9,'A')"><span class="opt-letter">A</span>Random integers greater than 1000</div>
    <div class="opt" onclick="selectMC(9,'B')"><span class="opt-letter">B</span>Two distinct prime numbers</div>
    <div class="opt" onclick="selectMC(9,'C')"><span class="opt-letter">C</span>The public and private exponents</div>
    <div class="opt" onclick="selectMC(9,'D')"><span class="opt-letter">D</span>Hash values of the message</div>
  </div>
  <button class="submit-btn" onclick="gradeQ(9)" id="btn-9" disabled>Check Answer</button>
  <div class="feedback" id="fb-9"></div>
</div>

<!-- Q10 -->
<div class="q-card" id="qc-10">
  <div class="q-status" id="qs-10"></div>
  <div class="q-meta"><span class="q-num">Q10</span><span class="q-type qt-mc">Multiple Choice</span></div>
  <div class="q-text">In PKI, which component stores certificates and Certificate Revocation Lists (CRLs) in a publicly accessible database?</div>
  <div class="options">
    <div class="opt" onclick="selectMC(10,'A')"><span class="opt-letter">A</span>Certification Authority (CA)</div>
    <div class="opt" onclick="selectMC(10,'B')"><span class="opt-letter">B</span>Registration Authority (RA)</div>
    <div class="opt" onclick="selectMC(10,'C')"><span class="opt-letter">C</span>Repository</div>
    <div class="opt" onclick="selectMC(10,'D')"><span class="opt-letter">D</span>Digital Certificate</div>
  </div>
  <button class="submit-btn" onclick="gradeQ(10)" id="btn-10" disabled>Check Answer</button>
  <div class="feedback" id="fb-10"></div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     SECTION B: TRUE / FALSE
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="sec-hdr" style="margin-top:3.5rem"><span class="sec-num">Section B</span><div class="sec-line"></div></div>
<div class="sec-title">True or False</div>
<p style="font-size:.88rem;color:var(--tx2);margin:.4rem 0 1.5rem">Decide whether each statement is TRUE or FALSE.</p>

<!-- Q11 -->
<div class="q-card" id="qc-11">
  <div class="q-status" id="qs-11"></div>
  <div class="q-meta"><span class="q-num">Q11</span><span class="q-type qt-tf">True / False</span></div>
  <div class="q-text">Asymmetric key cryptography uses the same key for both encryption and decryption.</div>
  <div class="tf-btns">
    <div class="tf-btn" onclick="selectTF(11,'T')">‚úÖ True</div>
    <div class="tf-btn" onclick="selectTF(11,'F')">‚ùå False</div>
  </div>
  <button class="submit-btn" onclick="gradeQ(11)" id="btn-11" disabled>Check Answer</button>
  <div class="feedback" id="fb-11"></div>
</div>

<!-- Q12 -->
<div class="q-card" id="qc-12">
  <div class="q-status" id="qs-12"></div>
  <div class="q-meta"><span class="q-num">Q12</span><span class="q-type qt-tf">True / False</span></div>
  <div class="q-text">A digital signature provides non-repudiation, meaning the sender cannot deny having signed the message.</div>
  <div class="tf-btns">
    <div class="tf-btn" onclick="selectTF(12,'T')">‚úÖ True</div>
    <div class="tf-btn" onclick="selectTF(12,'F')">‚ùå False</div>
  </div>
  <button class="submit-btn" onclick="gradeQ(12)" id="btn-12" disabled>Check Answer</button>
  <div class="feedback" id="fb-12"></div>
</div>

<!-- Q13 -->
<div class="q-card" id="qc-13">
  <div class="q-status" id="qs-13"></div>
  <div class="q-meta"><span class="q-num">Q13</span><span class="q-type qt-tf">True / False</span></div>
  <div class="q-text">SHA-1 is currently the recommended hashing algorithm for security-critical applications because it produces a 512-bit digest.</div>
  <div class="tf-btns">
    <div class="tf-btn" onclick="selectTF(13,'T')">‚úÖ True</div>
    <div class="tf-btn" onclick="selectTF(13,'F')">‚ùå False</div>
  </div>
  <button class="submit-btn" onclick="gradeQ(13)" id="btn-13" disabled>Check Answer</button>
  <div class="feedback" id="fb-13"></div>
</div>

<!-- Q14 -->
<div class="q-card" id="qc-14">
  <div class="q-status" id="qs-14"></div>
  <div class="q-meta"><span class="q-num">Q14</span><span class="q-type qt-tf">True / False</span></div>
  <div class="q-text">The modulus n appears in both the RSA public key and the RSA private key.</div>
  <div class="tf-btns">
    <div class="tf-btn" onclick="selectTF(14,'T')">‚úÖ True</div>
    <div class="tf-btn" onclick="selectTF(14,'F')">‚ùå False</div>
  </div>
  <button class="submit-btn" onclick="gradeQ(14)" id="btn-14" disabled>Check Answer</button>
  <div class="feedback" id="fb-14"></div>
</div>

<!-- Q15 -->
<div class="q-card" id="qc-15">
  <div class="q-status" id="qs-15"></div>
  <div class="q-meta"><span class="q-num">Q15</span><span class="q-type qt-tf">True / False</span></div>
  <div class="q-text">A Message Authentication Code (MAC) provides non-repudiation because it proves exactly who sent the message.</div>
  <div class="tf-btns">
    <div class="tf-btn" onclick="selectTF(15,'T')">‚úÖ True</div>
    <div class="tf-btn" onclick="selectTF(15,'F')">‚ùå False</div>
  </div>
  <button class="submit-btn" onclick="gradeQ(15)" id="btn-15" disabled>Check Answer</button>
  <div class="feedback" id="fb-15"></div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     SECTION C: SHORT ANSWER (KEYWORD GRADED)
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="sec-hdr" style="margin-top:3.5rem"><span class="sec-num">Section C</span><div class="sec-line"></div></div>
<div class="sec-title">Short Answer</div>
<p style="font-size:.88rem;color:var(--tx2);margin:.4rem 0 1.5rem">Type your answer. Smart keyword detection will grade your response ‚Äî no need to be word-perfect, but include the key concepts.</p>

<!-- Q16 -->
<div class="q-card" id="qc-16">
  <div class="q-status" id="qs-16"></div>
  <div class="q-meta"><span class="q-num">Q16</span><span class="q-type qt-sa">Short Answer</span></div>
  <div class="q-text">What is the main idea behind asymmetric-key cryptography? What mathematical concept does it rely on?</div>
  <div class="sa-wrap">
    <textarea class="sa-input" id="sa-16" placeholder="Type your answer here‚Ä¶" rows="3" oninput="enableBtn(16)"></textarea>
  </div>
  <button class="submit-btn" onclick="gradeQ(16)" id="btn-16" disabled>Check Answer</button>
  <div class="feedback" id="fb-16"></div>
</div>

<!-- Q17 -->
<div class="q-card" id="qc-17">
  <div class="q-status" id="qs-17"></div>
  <div class="q-meta"><span class="q-num">Q17</span><span class="q-type qt-sa">Short Answer</span></div>
  <div class="q-text">What is a Digital Certificate? Who creates it, and what problem does it solve?</div>
  <div class="sa-wrap">
    <textarea class="sa-input" id="sa-17" placeholder="Type your answer here‚Ä¶" rows="3" oninput="enableBtn(17)"></textarea>
  </div>
  <button class="submit-btn" onclick="gradeQ(17)" id="btn-17" disabled>Check Answer</button>
  <div class="feedback" id="fb-17"></div>
</div>

<!-- Q18 -->
<div class="q-card" id="qc-18">
  <div class="q-status" id="qs-18"></div>
  <div class="q-meta"><span class="q-num">Q18</span><span class="q-type qt-sa">Short Answer</span></div>
  <div class="q-text">What is a Certificate Revocation List (CRL) and how are revoked certificates identified within it?</div>
  <div class="sa-wrap">
    <textarea class="sa-input" id="sa-18" placeholder="Type your answer here‚Ä¶" rows="3" oninput="enableBtn(18)"></textarea>
  </div>
  <button class="submit-btn" onclick="gradeQ(18)" id="btn-18" disabled>Check Answer</button>
  <div class="feedback" id="fb-18"></div>
</div>

<!-- Q19 -->
<div class="q-card" id="qc-19">
  <div class="q-status" id="qs-19"></div>
  <div class="q-meta"><span class="q-num">Q19</span><span class="q-type qt-sa">Short Answer</span></div>
  <div class="q-text">Explain the difference between a hash function and a MAC (Message Authentication Code). What extra security does MAC provide?</div>
  <div class="sa-wrap">
    <textarea class="sa-input" id="sa-19" placeholder="Type your answer here‚Ä¶" rows="3" oninput="enableBtn(19)"></textarea>
  </div>
  <button class="submit-btn" onclick="gradeQ(19)" id="btn-19" disabled>Check Answer</button>
  <div class="feedback" id="fb-19"></div>
</div>

<!-- Q20 -->
<div class="q-card" id="qc-20">
  <div class="q-status" id="qs-20"></div>
  <div class="q-meta"><span class="q-num">Q20</span><span class="q-type qt-sa">Short Answer</span></div>
  <div class="q-text">Describe the role of the Registration Authority (RA) in a PKI system. How does it differ from the Certification Authority (CA)?</div>
  <div class="sa-wrap">
    <textarea class="sa-input" id="sa-20" placeholder="Type your answer here‚Ä¶" rows="3" oninput="enableBtn(20)"></textarea>
  </div>
  <button class="submit-btn" onclick="gradeQ(20)" id="btn-20" disabled>Check Answer</button>
  <div class="feedback" id="fb-20"></div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     SECTION D: RSA CALCULATION
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="sec-hdr" style="margin-top:3.5rem"><span class="sec-num">Section D</span><div class="sec-line"></div></div>
<div class="sec-title">RSA Calculation</div>
<p style="font-size:.88rem;color:var(--tx2);margin:.4rem 0 1.5rem">Work through RSA calculations step by step. Enter numerical answers.</p>

<!-- Q21 -->
<div class="q-card" id="qc-21">
  <div class="q-status" id="qs-21"></div>
  <div class="q-meta"><span class="q-num">Q21</span><span class="q-type qt-calc">Calculation</span></div>
  <div class="q-text">Given p = 3 and q = 11, calculate n and œÜ(n).</div>
  <div class="q-sub">p = 3, q = 11
n = p √ó q = ?
œÜ(n) = (p‚àí1)(q‚àí1) = ?</div>
  <div class="sa-wrap">
    <textarea class="sa-input" id="sa-21" placeholder="e.g. n = 33, œÜ(n) = 20" rows="2" oninput="enableBtn(21)"></textarea>
  </div>
  <button class="submit-btn" onclick="gradeQ(21)" id="btn-21" disabled>Check Answer</button>
  <div class="feedback" id="fb-21"></div>
</div>

<!-- Q22 -->
<div class="q-card" id="qc-22">
  <div class="q-status" id="qs-22"></div>
  <div class="q-meta"><span class="q-num">Q22</span><span class="q-type qt-calc">Calculation</span></div>
  <div class="q-text">Using the RSA setup where p=3, q=11, e=7, d=3, n=33: encrypt the message M=2.</div>
  <div class="q-sub">Encryption formula: C = M^e mod n
C = 2^7 mod 33 = ?</div>
  <div class="sa-wrap">
    <textarea class="sa-input" id="sa-22" placeholder="Enter the ciphertext C = ?" rows="2" oninput="enableBtn(22)"></textarea>
  </div>
  <button class="submit-btn" onclick="gradeQ(22)" id="btn-22" disabled>Check Answer</button>
  <div class="feedback" id="fb-22"></div>
</div>

<!-- Q23 -->
<div class="q-card" id="qc-23">
  <div class="q-status" id="qs-23"></div>
  <div class="q-meta"><span class="q-num">Q23</span><span class="q-type qt-calc">Calculation</span></div>
  <div class="q-text">Using the same RSA setup (d=3, n=33), decrypt the ciphertext C=29.</div>
  <div class="q-sub">Decryption formula: M = C^d mod n
M = 29^3 mod 33 = ?</div>
  <div class="sa-wrap">
    <textarea class="sa-input" id="sa-23" placeholder="Enter the plaintext M = ?" rows="2" oninput="enableBtn(23)"></textarea>
  </div>
  <button class="submit-btn" onclick="gradeQ(23)" id="btn-23" disabled>Check Answer</button>
  <div class="feedback" id="fb-23"></div>
</div>

<!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
     SECTION E: CONCEPT APPLICATION
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
<div class="sec-hdr" style="margin-top:3.5rem"><span class="sec-num">Section E</span><div class="sec-line"></div></div>
<div class="sec-title">Concept Application</div>
<p style="font-size:.88rem;color:var(--tx2);margin:.4rem 0 1.5rem">Apply your knowledge to real-world scenarios.</p>

<!-- Q24 -->
<div class="q-card" id="qc-24">
  <div class="q-status" id="qs-24"></div>
  <div class="q-meta"><span class="q-num">Q24</span><span class="q-type qt-sa">Short Answer</span></div>
  <div class="q-text">Alice wants to send Bob a message that is both encrypted (confidential) AND digitally signed. Describe step by step which keys she uses and in what order.</div>
  <div class="sa-wrap">
    <textarea class="sa-input" id="sa-24" placeholder="Type your answer here‚Ä¶" rows="4" oninput="enableBtn(24)"></textarea>
  </div>
  <button class="submit-btn" onclick="gradeQ(24)" id="btn-24" disabled>Check Answer</button>
  <div class="feedback" id="fb-24"></div>
</div>

<!-- Q25 -->
<div class="q-card" id="qc-25">
  <div class="q-status" id="qs-25"></div>
  <div class="q-meta"><span class="q-num">Q25</span><span class="q-type qt-sa">Short Answer</span></div>
  <div class="q-text">Bob receives a digitally signed document from Alice. Explain how Bob verifies the signature and what it proves if the verification succeeds.</div>
  <div class="sa-wrap">
    <textarea class="sa-input" id="sa-25" placeholder="Type your answer here‚Ä¶" rows="4" oninput="enableBtn(25)"></textarea>
  </div>
  <button class="submit-btn" onclick="gradeQ(25)" id="btn-25" disabled>Check Answer</button>
  <div class="feedback" id="fb-25"></div>
</div>

<!-- FINAL SUBMIT -->
<div class="submit-all-wrap">
  <button class="submit-all-btn" onclick="showResults()">üéØ View Final Results</button>
</div>

<!-- RESULTS PANEL -->
<div class="results-panel" id="results-panel">
  <div class="results-emoji" id="res-emoji">üèÜ</div>
  <div class="results-title">Quiz Complete!</div>
  <div class="results-score" id="res-score" style="background:linear-gradient(135deg,var(--v1),var(--v4));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text"></div>
  <div class="results-bar-wrap"><div class="results-bar" id="res-bar"></div></div>
  <div class="results-msg" id="res-msg"></div>
  <button class="retry-btn" onclick="retryQuiz()">üîÑ Retry Quiz</button>
</div>

</main>

<footer>
  <div class="fname">Shoug Alomran</div>
  <div class="fsub">CYS 401 ¬∑ Chapter 6: Asymmetric Cryptography &amp; PKI ¬∑ Quiz</div>
</footer>

<script>
/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   QUESTION DATA ‚Äî answers + keywords + feedback
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
const QUESTIONS = {
  // MCQ: correct = option letter
  1:  { type:'mc', correct:'B', explanation:'RSA stands for Rivest, Shamir, and Adleman ‚Äî the three MIT researchers who invented it in 1977. It is the most widely used public-key cryptosystem.' },
  2:  { type:'mc', correct:'C', explanation:'The modulus n (= p √ó q) is common to both keys. The public key is the pair {e, n} and the private key is the pair {d, n}. Only d is kept secret; n and e are public.' },
  3:  { type:'mc', correct:'C', explanation:"To encrypt a message FOR someone, you use the RECEIVER'S public key. Bob's public key is openly available. Only Bob can decrypt because only he has the corresponding private key." },
  4:  { type:'mc', correct:'D', explanation:"To CREATE a digital signature, you use the SENDER'S private key. This proves the message came from you because only you possess your private key. Verification uses your public key." },
  5:  { type:'mc', correct:'C', explanation:"A CA revokes a certificate when the owner's PRIVATE KEY is compromised. If the private key leaks, anyone can impersonate the owner, so the certificate is no longer trustworthy. Moving locations or compromising the public key are not revocation reasons." },
  6:  { type:'mc', correct:'D', explanation:'A CA is an organization that issues digital certificates ‚Äî this is its primary function. It is a trusted third party, but its core role is issuing and managing certificates, not validating encryption processes or verifying keys directly.' },
  7:  { type:'mc', correct:'B', explanation:'RSA security relies on the Integer Factorization Problem: it is easy to multiply two large primes (p √ó q = n) but computationally infeasible to reverse ‚Äî i.e., to factor n back into p and q. This asymmetry is what makes RSA secure.' },
  8:  { type:'mc', correct:'C', explanation:"Digital Signatures provide non-repudiation because they use the sender's private key ‚Äî only one person possesses it. A hash alone has no key, so anyone could compute it. A MAC uses a shared secret key, so either party could have created it ‚Äî no non-repudiation." },
  9:  { type:'mc', correct:'B', explanation:'In RSA key generation, p and q must be two DISTINCT PRIME NUMBERS. Their product n = p √ó q forms the modulus. The security relies on the difficulty of factoring n back into these primes.' },
  10: { type:'mc', correct:'C', explanation:'The Repository is a publicly accessible database that stores issued certificates and Certificate Revocation Lists (CRLs). The CA issues them; the RA validates identities; the repository stores and distributes them.' },

  // TF: correct = 'T' or 'F'
  11: { type:'tf', correct:'F', explanation:"FALSE. Asymmetric cryptography uses TWO DIFFERENT keys ‚Äî a public key and a private key. Using the same key for both encryption and decryption describes SYMMETRIC cryptography. The key distinction between the two types is precisely this." },
  12: { type:'tf', correct:'T', explanation:"TRUE. Non-repudiation is a key property of digital signatures. Because the sender's PRIVATE key is used to sign, and only they possess it, they cannot later deny having signed the message. This is one of the four security services PKI provides." },
  13: { type:'tf', correct:'F', explanation:'FALSE ‚Äî for two reasons: (1) SHA-1 produces a 160-bit digest, NOT 512-bit. SHA-512 produces 512 bits. (2) SHA-1 is DEPRECATED and vulnerable to collision attacks. The recommended standards today are SHA-256 (from SHA-2) or SHA-3.' },
  14: { type:'tf', correct:'T', explanation:'TRUE. The modulus n is computed as p √ó q and is included in BOTH keys. Public key = {e, n}. Private key = {d, n}. Because n is part of the public key, it is known to everyone. The secrecy comes from keeping d hidden.' },
  15: { type:'tf', correct:'F', explanation:"FALSE. A MAC does NOT provide non-repudiation. A MAC uses a SHARED SECRET key, meaning both the sender and receiver know the key ‚Äî either party could have created the MAC. Non-repudiation requires asymmetric keys (digital signatures) so only one party could have signed." },

  // Short Answer: keywords required to pass
  16: { type:'sa',
        keywords:[['trapdoor','one-way','one way','owf'],['asymmetric','public key','public-key'],['easy','compute','forward'],['hard','difficult','infeasible','reverse','factor']],
        minMatch: 2,
        correctAnswer: 'The main idea is the trapdoor one-way function. It is a function that is easy to compute in one direction (e.g., multiply two primes p √ó q = n) but computationally infeasible to reverse (factor n back to p and q) without knowing a secret "trapdoor" (the private key).',
        explanation: 'The trapdoor one-way function is what makes asymmetric cryptography possible. "One-way" means easy to compute forward but hard to reverse. The "trapdoor" is the private key ‚Äî it makes the reverse easy for the key holder but impossible for everyone else. RSA uses prime factorization as its trapdoor.' },
  17: { type:'sa',
        keywords:[['certificate','cert'],['public key','public-key'],['ca','certification authority','trusted third party','trusted'],['identity','authenticate','authentication','proof','belong']],
        minMatch: 2,
        correctAnswer: 'A Digital Certificate is an X.509 data structure that binds a public key to an identity (name). It is created and signed by a Certification Authority (CA) ‚Äî a trusted third party. It solves the problem of knowing whether a public key truly belongs to who you think it does, preventing man-in-the-middle impersonation.',
        explanation: 'The key problem: anyone can generate a public/private key pair and claim to be Alice. A digital certificate solves this by having a trusted CA verify Alice\'s identity and sign a document containing "Alice\'s name + Alice\'s public key." Since the CA is trusted, anyone who trusts the CA now trusts that the key belongs to Alice.' },
  18: { type:'sa',
        keywords:[['crl','revocation list','revoked','revoke'],['serial','serial number'],['ca','certification authority'],['published','distributed','database']],
        minMatch: 2,
        correctAnswer: 'A Certificate Revocation List (CRL) is a list periodically published by the CA containing certificates that have been revoked before their expiry date. Revoked certificates are identified by their unique serial number. The CRL is distributed via a known web URL or from the CA\'s X.500 directory.',
        explanation: 'Think of a CRL like a blacklist of certificates. If a private key is compromised, the corresponding certificate is added to the CRL. Anyone verifying a certificate must check the CRL first. Each revoked entry is identified by serial number (not the certificate\'s content) as defined in the X.509 standard.' },
  19: { type:'sa',
        keywords:[['hash','hashing','one-way'],['mac','message authentication','secret key','shared key'],['integrity'],['authenticity','authentic','authentication','key']],
        minMatch: 2,
        correctAnswer: 'A hash function is a one-way mathematical function that produces a fixed-length digest from any input ‚Äî it verifies integrity only (message not tampered). A MAC (Message Authentication Code) is a hash combined with a SECRET KEY. The secret key adds authenticity ‚Äî proving the message came from someone with the key. However, MAC does NOT provide non-repudiation because the key is shared.',
        explanation: 'The critical difference: Hash = no key (anyone can compute it ‚Üí integrity only). MAC = shared secret key (proves who has the key ‚Üí integrity + authenticity, but NOT non-repudiation since both parties share the key). Digital Signature = asymmetric keys (only sender has private key ‚Üí integrity + authenticity + non-repudiation).' },
  20: { type:'sa',
        keywords:[['ra','registration authority'],['validate','validat','verify','identity','enroll'],['ca','certification authority','issues','issue'],['approve','certificate application','request']],
        minMatch: 2,
        correctAnswer: 'The RA (Registration Authority) proves the user\'s identity and approves policies before certificates are issued. It validates certificate applications, authorizes key-pair generation, and handles revocation requests. The RA differs from the CA in that the CA actually ISSUES the certificates and CRLs, while the RA handles the front-end identity verification ‚Äî essentially the RA is the gatekeeper that checks identities before handing off to the CA.',
        explanation: 'Think of it as: RA = security guard who checks your ID. CA = the bank vault manager who actually issues your certificate. The RA validates WHO you are; the CA formally creates and signs the certificate. They work together: the RA approves requests; the CA fulfills them.' },

  // Calculation questions
  21: { type:'sa',
        keywords:[['33'],['20']],
        minMatch: 2,
        correctAnswer: 'n = p √ó q = 3 √ó 11 = 33. œÜ(n) = (p‚àí1)(q‚àí1) = (3‚àí1)(11‚àí1) = 2 √ó 10 = 20.',
        explanation: 'n is the modulus: always p √ó q. œÜ(n) is Euler\'s totient: always (p‚àí1)(q‚àí1). These are the first two steps in RSA key generation. Here: n=33, œÜ(n)=20. These values are then used to choose e and compute d.' },
  22: { type:'sa',
        keywords:[['29']],
        minMatch: 1,
        correctAnswer: 'C = 2^7 mod 33 = 128 mod 33 = 29. (128 = 3√ó33 + 29 ‚Üí remainder is 29).',
        explanation: '2^7 = 128. Now compute 128 mod 33: 33√ó3 = 99, 33√ó4 = 132 (too big). So 128 ‚àí 99 = 29. The ciphertext C = 29. This is the RSA encryption formula: C = M^e mod n.' },
  23: { type:'sa',
        keywords:[['2']],
        minMatch: 1,
        correctAnswer: 'M = 29^3 mod 33 = 24389 mod 33 = 2. (29^3 = 24389; 24389 √∑ 33 = 739 remainder 2).',
        explanation: '29^3 = 29 √ó 29 √ó 29 = 841 √ó 29 = 24389. 24389 mod 33 = 2 (since 33 √ó 739 = 24387, remainder = 2). The decrypted message M = 2, which matches the original! This demonstrates that RSA encryption and decryption are inverse operations: M = (M^e mod n)^d mod n = M.' },

  // Application
  24: { type:'sa',
        keywords:[['hash','hashing','digest'],['private key','private'],['public key','public'],['encrypt','sign']],
        minMatch: 3,
        correctAnswer: 'Step 1 ‚Äî Sign: Alice hashes the message (SHA-256), then encrypts the hash using her OWN PRIVATE KEY ‚Üí this is the digital signature. Step 2 ‚Äî Encrypt: Alice encrypts the entire message using BOB\'S PUBLIC KEY ‚Üí this ensures confidentiality. She sends both the encrypted message and the signature. Bob decrypts with his private key, then verifies the signature using Alice\'s public key.',
        explanation: 'The key insight: signing uses the SENDER\'s private key (Alice\'s private key). Encrypting uses the RECEIVER\'s public key (Bob\'s public key). Both operations happen independently. Signing first (then encrypt) is the standard "sign-then-encrypt" approach. Keys used: Alice\'s private (sign) + Bob\'s public (encrypt).' },
  25: { type:'sa',
        keywords:[['public key','alice\'s public key','sender\'s public key'],['hash','digest'],['compare','match','equal','same'],['authentic','integrity','non-repudiation','verify','verified']],
        minMatch: 2,
        correctAnswer: 'Bob: (1) Hashes the received document using the same hash function (SHA-256) ‚Üí produces a new digest. (2) Decrypts the signature using Alice\'s PUBLIC KEY ‚Üí reveals the original hash Alice signed. (3) Compares both hashes ‚Äî if they match, the verification succeeds. This proves: (a) The message came from Alice (only she has her private key), (b) The message was not tampered with (hashes match), and (c) Alice cannot deny signing (non-repudiation).',
        explanation: 'Verification works because: if the decrypted hash (from the signature) matches the freshly computed hash of the document, two things are confirmed: (1) Authenticity ‚Äî only Alice\'s private key could create a signature that opens with Alice\'s public key. (2) Integrity ‚Äî the hash would differ if even one character was changed in transit. Both conditions together also establish non-repudiation.' }
};

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   STATE
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
const state = { answers:{}, results:{}, answered:0, correct:0, wrong:0 };
const TOTAL = 25;

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   MC SELECTION
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function selectMC(qn, letter) {
  if(state.results[qn]) return; // already graded
  state.answers[qn] = letter;
  const card = document.getElementById(`qc-${qn}`);
  card.querySelectorAll('.opt').forEach((opt,i) => {
    opt.classList.remove('selected');
    if(['A','B','C','D'][i] === letter) opt.classList.add('selected');
  });
  document.getElementById(`btn-${qn}`).disabled = false;
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   TF SELECTION
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function selectTF(qn, val) {
  if(state.results[qn]) return;
  state.answers[qn] = val;
  const card = document.getElementById(`qc-${qn}`);
  card.querySelectorAll('.tf-btn').forEach(btn => btn.classList.remove('selected'));
  const tfMap = {T:0, F:1};
  card.querySelectorAll('.tf-btn')[tfMap[val]].classList.add('selected');
  document.getElementById(`btn-${qn}`).disabled = false;
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   SA ENABLE
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function enableBtn(qn) {
  const inp = document.getElementById(`sa-${qn}`);
  document.getElementById(`btn-${qn}`).disabled = inp.value.trim().length < 2;
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   KEYWORD MATCHING
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function matchKeywords(answer, question) {
  const a = answer.toLowerCase();
  let matched = 0;
  for(const group of question.keywords) {
    if(group.some(kw => a.includes(kw.toLowerCase()))) matched++;
  }
  return matched >= question.minMatch;
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   GRADING ENGINE
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function gradeQ(qn) {
  if(state.results[qn]) return;
  const q = QUESTIONS[qn];
  const card = document.getElementById(`qc-${qn}`);
  const fbEl = document.getElementById(`fb-${qn}`);
  const btnEl = document.getElementById(`btn-${qn}`);
  const statusEl = document.getElementById(`qs-${qn}`);
  let isCorrect = false;

  if(q.type === 'mc') {
    const chosen = state.answers[qn];
    if(!chosen) return;
    isCorrect = chosen === q.correct;
    const letters = ['A','B','C','D'];
    card.querySelectorAll('.opt').forEach((opt,i) => {
      opt.classList.add('locked');
      if(letters[i] === q.correct) opt.classList.add('correct-ans');
      else if(letters[i] === chosen && !isCorrect) opt.classList.add('wrong-ans');
    });

  } else if(q.type === 'tf') {
    const chosen = state.answers[qn];
    if(!chosen) return;
    isCorrect = chosen === q.correct;
    const tfMap = {T:0, F:1};
    card.querySelectorAll('.tf-btn').forEach((btn,i) => {
      btn.classList.add('locked');
      if(i === tfMap[q.correct]) btn.classList.add('correct-ans');
      else if(i === tfMap[chosen] && !isCorrect) btn.classList.add('wrong-ans');
    });

  } else if(q.type === 'sa') {
    const inp = document.getElementById(`sa-${qn}`);
    const answer = inp.value.trim();
    if(!answer) return;
    isCorrect = matchKeywords(answer, q);
    inp.disabled = true;
    inp.classList.add(isCorrect ? 'correct' : 'wrong');
  }

  // Update state
  state.results[qn] = isCorrect;
  state.answered++;
  if(isCorrect) state.correct++; else state.wrong++;

  // Card border
  card.classList.add(isCorrect ? 'answered-correct' : 'answered-wrong');
  statusEl.textContent = isCorrect ? '‚úÖ' : '‚ùå';

  // Disable button
  btnEl.disabled = true;
  btnEl.textContent = isCorrect ? '‚úÖ Correct!' : '‚ùå Incorrect';
  btnEl.style.background = isCorrect
    ? 'linear-gradient(135deg,#4ade80,#22c55e)'
    : 'linear-gradient(135deg,#fb7185,#ef4444)';

  // Feedback
  fbEl.className = `feedback show ${isCorrect ? 'fb-correct' : 'fb-wrong'}`;
  let fbHTML = `<div class="fb-header"><span class="fb-icon">${isCorrect ? 'üéâ' : 'üí°'}</span>${isCorrect ? 'Correct!' : 'Not quite ‚Äî here\'s why:'}</div>`;
  fbHTML += `<div class="fb-body">${q.explanation}</div>`;
  if(!isCorrect && q.correctAnswer) {
    fbHTML += `<div class="fb-correct-answer">‚úÖ Correct answer: ${q.correctAnswer}</div>`;
  }
  fbEl.innerHTML = fbHTML;

  // Scoreboard
  updateScore();
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   SCORE UPDATE
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function updateScore() {
  document.getElementById('sc-correct').textContent = state.correct;
  document.getElementById('sc-wrong').textContent = state.wrong;
  document.getElementById('sc-total').textContent = `${state.answered}/${TOTAL}`;
  document.getElementById('prog-fill').style.width = `${(state.answered/TOTAL)*100}%`;
  document.getElementById('prog-text').textContent = `${state.answered} / ${TOTAL} answered`;
}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   FINAL RESULTS
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
function showResults() {
  const panel = document.getElementById('results-panel');
  panel.classList.add('show');
  panel.scrollIntoView({behavior:'smooth', block:'center'});

  const pct = Math.round((state.correct / TOTAL) * 100);
  document.getElementById('res-score').textContent = `${state.correct} / ${TOTAL}`;

  setTimeout(() => {
    document.getElementById('res-bar').style.width = `${pct}%`;
  }, 200);

  let emoji, msg;
  if(pct >= 90)     { emoji='üèÜ'; msg="Outstanding! You've mastered Chapter 6. Excellent work!" }
  else if(pct >= 75){ emoji='‚≠ê'; msg="Great job! Solid understanding ‚Äî review the ones you missed." }
  else if(pct >= 60){ emoji='üìö'; msg="Good effort! Go back over RSA key directions and PKI components." }
  else if(pct >= 40){ emoji='üí™'; msg="Keep practicing! Focus on the key direction rules and RSA formulas." }
  else              { emoji='üîÑ'; msg="Don't give up! Re-read the study guide and try again." }

  document.getElementById('res-emoji').textContent = emoji;
  document.getElementById('res-msg').textContent = `${pct}% score ‚Äî ${msg}`;
}

function retryQuiz() {
  location.reload();
}

(function(){
  const d = window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
  document.documentElement.setAttribute('data-theme', d);
  updateThemeUI(d);
})();
window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', e => {
  const t = e.matches ? 'dark' : 'light';
  document.documentElement.setAttribute('data-theme', t);
  updateThemeUI(t);
});
function toggleTheme(){
  const cur = document.documentElement.getAttribute('data-theme');
  const nxt = cur === 'dark' ? 'light' : 'dark';
  document.documentElement.setAttribute('data-theme', nxt);
  updateThemeUI(nxt);
}
function updateThemeUI(t){
  document.getElementById('ticon').textContent  = t==='dark' ? '‚òÄÔ∏è' : 'üåô';
  document.getElementById('tlabel').textContent = t==='dark' ? 'Light Mode' : 'Dark Mode';
}
</script>
</body>
</html>