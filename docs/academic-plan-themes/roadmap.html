<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PSU Â· SE-CYS Degree Roadmap</title>
    <link
        href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800;900&family=Nunito+Sans:ital,wght@0,400;0,600;0,700;1,400&display=swap"
        rel="stylesheet">
    <style>
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TOKENS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        :root {
            --bg: #f4f1ff;
            --bg2: #ebe6ff;
            --surface: #ffffff;
            --surface2: #f9f8ff;
            --ink: #1a1433;
            --ink2: #5b5278;
            --ink3: #9890b8;
            --ink4: #cec8e8;

            --purple: #7c3aed;
            --purple-l: #ede9fe;
            --blue: #2563eb;
            --blue-l: #dbeafe;
            --teal: #0d9488;
            --teal-l: #ccfbf1;
            --green: #16a34a;
            --green-l: #dcfce7;
            --orange: #ea580c;
            --orange-l: #ffedd5;
            --pink: #db2777;
            --pink-l: #fce7f3;
            --yellow: #d97706;
            --yellow-l: #fef3c7;
            --red: #dc2626;
            --red-l: #fee2e2;

            /* Level colors (8 levels) */
            --l1: #f472b6;
            --l1b: #fdf2f8;
            --l2: #fb923c;
            --l2b: #fff7ed;
            --l3: #facc15;
            --l3b: #fefce8;
            --l4: #4ade80;
            --l4b: #f0fdf4;
            --l5: #38bdf8;
            --l5b: #f0f9ff;
            --l6: #a78bfa;
            --l6b: #f5f3ff;
            --l7: #f87171;
            --l7b: #fff1f2;
            --l8: #34d399;
            --l8b: #ecfdf5;

            --radius-xl: 20px;
            --radius-lg: 14px;
            --radius-md: 10px;
            --radius-sm: 7px;
            --font: 'Nunito', sans-serif;
            --font2: 'Nunito Sans', sans-serif;
            --shadow: 0 2px 0 rgba(0, 0, 0, 0.10);
            --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.08);
            --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.12);
        }

        .dark {
            --bg: #0f0b1e;
            --bg2: #18132e;
            --surface: #1e1838;
            --surface2: #241e40;
            --ink: #ede9ff;
            --ink2: #9d94c4;
            --ink3: #5a5280;
            --ink4: #2e2850;
            --purple-l: #2d1b69;
            --blue-l: #1e3a8a;
            --teal-l: #134e4a;
            --green-l: #14532d;
            --orange-l: #431407;
            --pink-l: #500724;
            --yellow-l: #451a03;
            --red-l: #450a0a;
            --l1b: #2d1022;
            --l2b: #2c1600;
            --l3b: #2c2200;
            --l4b: #052e16;
            --l5b: #082030;
            --l6b: #1e1545;
            --l7b: #2d0a0a;
            --l8b: #022c1e;
            --shadow: 0 2px 0 rgba(0, 0, 0, 0.4);
            --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.35);
            --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.5);
        }

        *,
        *::before,
        *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            background: var(--bg);
            color: var(--ink);
            font-family: var(--font);
            min-height: 100vh;
            transition: background 0.3s, color 0.3s;
            font-size: 13px;
        }

        /* Dot grid bg */
        body::before {
            content: '';
            position: fixed;
            inset: 0;
            z-index: 0;
            pointer-events: none;
            background-image: radial-gradient(circle, var(--ink4) 1.2px, transparent 1.2px);
            background-size: 28px 28px;
            opacity: 0.5;
        }

        .wrap {
            position: relative;
            z-index: 1;
            max-width: 1180px;
            margin: 0 auto;
            padding: 0 20px 100px;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TOP NAV
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .topnav {
            position: sticky;
            top: 0;
            z-index: 200;
            background: rgba(244, 241, 255, 0.88);
            backdrop-filter: blur(16px);
            border-bottom: 1.5px solid var(--ink4);
            padding: 10px 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 12px;
            flex-wrap: wrap;
            margin: 0 -20px 0;
        }

        .dark .topnav {
            background: rgba(15, 11, 30, 0.88);
        }

        .nav-brand {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .nav-logo {
            width: 36px;
            height: 36px;
            background: linear-gradient(135deg, var(--purple), var(--blue));
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            box-shadow: var(--shadow);
        }

        .nav-title {
            font-size: 16px;
            font-weight: 900;
            color: var(--ink);
        }

        .nav-sub {
            font-size: 10px;
            font-weight: 700;
            color: var(--ink3);
            letter-spacing: 1px;
            text-transform: uppercase;
        }

        .nav-center {
            display: flex;
            align-items: center;
            gap: 8px;
            flex: 1;
            max-width: 320px;
        }

        .nav-search {
            flex: 1;
            position: relative;
        }

        .nav-search input {
            width: 100%;
            padding: 8px 12px 8px 34px;
            border-radius: 10px;
            border: 2px solid var(--ink4);
            background: var(--surface);
            color: var(--ink);
            font-family: var(--font);
            font-size: 12px;
            font-weight: 700;
            outline: none;
            transition: border-color 0.2s;
        }

        .nav-search input:focus {
            border-color: var(--purple);
        }

        .nav-search input::placeholder {
            color: var(--ink3);
        }

        .nav-search-icon {
            position: absolute;
            left: 10px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 14px;
        }

        .nav-right {
            display: flex;
            gap: 6px;
            align-items: center;
            flex-wrap: wrap;
        }

        /* Pill buttons */
        .pill {
            font-family: var(--font);
            font-weight: 800;
            font-size: 11px;
            padding: 7px 14px;
            border-radius: 100px;
            border: none;
            cursor: pointer;
            transition: transform 0.12s, box-shadow 0.12s, filter 0.12s;
            white-space: nowrap;
            box-shadow: 0 2px 0 rgba(0, 0, 0, 0.18);
            line-height: 1;
        }

        .pill:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 0 rgba(0, 0, 0, 0.18);
        }

        .pill:active {
            transform: translateY(1px);
            box-shadow: 0 1px 0 rgba(0, 0, 0, 0.18);
        }

        .pill-purple {
            background: var(--purple);
            color: #fff;
        }

        .pill-green {
            background: var(--green);
            color: #fff;
        }

        .pill-red {
            background: var(--red);
            color: #fff;
        }

        .pill-ghost {
            background: var(--surface2);
            color: var(--ink2);
            box-shadow: 0 2px 0 var(--ink4);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   HERO PROGRESS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .hero {
            margin: 24px 0 20px;
            background: linear-gradient(135deg, #7c3aed 0%, #2563eb 55%, #0d9488 100%);
            border-radius: var(--radius-xl);
            padding: 24px 28px 20px;
            color: #fff;
            box-shadow: var(--shadow-lg);
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            inset: 0;
            background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='60' height='60'%3E%3Ccircle cx='30' cy='30' r='20' fill='none' stroke='rgba(255,255,255,0.06)' stroke-width='1'/%3E%3Ccircle cx='30' cy='30' r='10' fill='none' stroke='rgba(255,255,255,0.04)' stroke-width='1'/%3E%3C/svg%3E") repeat;
            pointer-events: none;
        }

        .hero-top {
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            gap: 16px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .hero-greeting {
            font-size: clamp(18px, 3vw, 26px);
            font-weight: 900;
            opacity: 0.95;
        }

        .hero-sub {
            font-size: 12px;
            opacity: 0.7;
            font-weight: 600;
            margin-top: 2px;
        }

        .hero-stats {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }

        .hero-stat {
            text-align: right;
        }

        .hero-val {
            font-size: 28px;
            font-weight: 900;
            line-height: 1;
        }

        .hero-label {
            font-size: 10px;
            font-weight: 700;
            opacity: 0.7;
            letter-spacing: 1px;
            text-transform: uppercase;
        }

        .hero-bar-row {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .hero-bar-track {
            flex: 1;
            height: 10px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 100px;
            overflow: hidden;
            position: relative;
        }

        .hero-bar-fill {
            height: 100%;
            background: #fff;
            border-radius: 100px;
            transition: width 0.7s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .hero-bar-fill::after {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.5) 50%, transparent);
            animation: shimmer 2.5s infinite;
        }

        @keyframes shimmer {
            0% {
                transform: translateX(-100%);
            }

            100% {
                transform: translateX(100%);
            }
        }

        .hero-pct {
            font-size: 15px;
            font-weight: 900;
            white-space: nowrap;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CHOICE GROUPS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .choice-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 20px;
        }

        @media (max-width: 600px) {
            .choice-row {
                grid-template-columns: 1fr;
            }
        }

        .choice-card {
            background: var(--surface);
            border-radius: var(--radius-lg);
            padding: 14px 16px;
            border: 2px solid var(--ink4);
            box-shadow: var(--shadow);
        }

        .choice-head {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 10px;
        }

        .choice-tag {
            font-size: 9px;
            font-weight: 900;
            letter-spacing: 1.5px;
            text-transform: uppercase;
            padding: 3px 9px;
            border-radius: 100px;
            background: linear-gradient(135deg, #7c3aed, #2563eb);
            color: #fff;
        }

        .choice-name {
            font-size: 11px;
            font-weight: 700;
            color: var(--ink2);
        }

        .choice-opts {
            display: flex;
            gap: 6px;
            flex-wrap: wrap;
        }

        .choice-btn {
            font-family: var(--font);
            font-size: 11px;
            font-weight: 800;
            padding: 6px 12px;
            border-radius: 8px;
            border: 2px solid var(--ink4);
            background: var(--surface2);
            color: var(--ink2);
            cursor: pointer;
            transition: all 0.15s;
        }

        .choice-btn.on {
            border-color: var(--purple);
            background: var(--purple-l);
            color: var(--purple);
        }

        .choice-btn:not(.on):hover {
            border-color: var(--ink2);
            color: var(--ink);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   FILTER STRIP
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .filter-strip {
            display: flex;
            gap: 6px;
            align-items: center;
            margin-bottom: 24px;
            flex-wrap: wrap;
        }

        .fchip {
            font-family: var(--font);
            font-size: 11px;
            font-weight: 800;
            padding: 6px 14px;
            border-radius: 100px;
            border: 2px solid var(--ink4);
            background: var(--surface);
            color: var(--ink2);
            cursor: pointer;
            transition: all 0.15s;
        }

        .fchip.on {
            background: var(--ink);
            color: var(--bg);
            border-color: var(--ink);
        }

        .fchip:not(.on):hover {
            border-color: var(--ink2);
            color: var(--ink);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ROADMAP
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .roadmap {
            display: flex;
            flex-direction: column;
            gap: 0;
            position: relative;
        }

        /* Vertical spine */
        .roadmap::before {
            content: '';
            position: absolute;
            left: 52px;
            top: 0;
            bottom: 0;
            width: 3px;
            background: linear-gradient(180deg, var(--l1), var(--l2), var(--l3), var(--l4), var(--l5), var(--l6), var(--l7), var(--l8));
            border-radius: 3px;
            z-index: 0;
        }

        @media (max-width: 580px) {
            .roadmap::before {
                left: 34px;
            }
        }

        /* â”€â”€ LEVEL BLOCK â”€â”€ */
        .level-block {
            display: flex;
            gap: 0;
            position: relative;
            margin-bottom: 24px;
        }

        .level-block.hidden {
            display: none;
        }

        /* Level node (circle on spine) */
        .level-node {
            width: 108px;
            flex-shrink: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            padding-top: 4px;
            position: relative;
            z-index: 1;
        }

        @media (max-width: 580px) {
            .level-node {
                width: 72px;
            }
        }

        .level-bubble {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 15px;
            font-weight: 900;
            border: 3px solid var(--bg);
            box-shadow: 0 0 0 3px var(--lc, #ccc), var(--shadow-md);
            background: var(--lcb, #fff);
            color: var(--lc, #333);
            transition: transform 0.2s;
            cursor: pointer;
            user-select: none;
        }

        .level-bubble:hover {
            transform: scale(1.1);
        }

        .level-meta {
            text-align: center;
        }

        .level-num-label {
            font-size: 9px;
            font-weight: 900;
            letter-spacing: 1px;
            text-transform: uppercase;
            color: var(--ink3);
        }

        .level-done-frac {
            font-size: 10px;
            font-weight: 800;
            color: var(--ink2);
        }

        /* Connector line from bubble to cards */
        .level-connector {
            position: absolute;
            left: 54px;
            top: 22px;
            height: 2px;
            width: 54px;
            background: var(--lc, #ccc);
            opacity: 0.5;
            z-index: 0;
        }

        @media (max-width: 580px) {
            .level-connector {
                left: 36px;
                width: 36px;
            }
        }

        /* Level cards area */
        .level-cards {
            flex: 1;
            min-width: 0;
            padding-top: 0;
        }

        .level-label-row {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
            cursor: pointer;
            user-select: none;
        }

        .level-title {
            font-size: 14px;
            font-weight: 900;
            color: var(--ink);
        }

        .level-hrs-badge {
            font-size: 10px;
            font-weight: 800;
            padding: 2px 10px;
            border-radius: 100px;
            background: var(--lcb, #eee);
            color: var(--lc, #333);
        }

        .level-caret {
            margin-left: auto;
            color: var(--ink3);
            font-size: 12px;
            transition: transform 0.2s;
        }

        .level-block.collapsed .level-caret {
            transform: rotate(-90deg);
        }

        .level-block.collapsed .level-cards-grid {
            display: none;
        }

        /* Grid of course cards */
        .level-cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 8px;
        }

        /* â”€â”€ COURSE CARD â”€â”€ */
        .ccard {
            background: var(--surface);
            border-radius: var(--radius-lg);
            padding: 12px 14px;
            border: 2px solid var(--ink4);
            cursor: pointer;
            transition: transform 0.15s, box-shadow 0.15s, border-color 0.15s;
            box-shadow: var(--shadow);
            position: relative;
            overflow: hidden;
            user-select: none;
        }

        .ccard::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 4px;
            background: var(--lc, var(--ink4));
            border-radius: 4px 0 0 4px;
        }

        .ccard:hover:not(.st-locked) {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.12);
            border-color: var(--lc, var(--ink4));
        }

        .ccard:active:not(.st-locked) {
            transform: translateY(0);
        }

        .ccard.st-locked {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .ccard.st-avail {
            border-color: var(--lc, var(--purple));
        }

        .ccard.st-done {
            border-color: var(--green);
            background: var(--green-l);
        }

        .ccard.st-done::before {
            background: var(--green);
        }

        .ccard.highlighted {
            border-color: var(--yellow) !important;
            background: var(--yellow-l) !important;
        }

        /* Card top row */
        .cc-top {
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            gap: 6px;
            margin-bottom: 6px;
        }

        .cc-code {
            font-size: 10px;
            font-weight: 900;
            letter-spacing: 0.8px;
            padding: 2px 8px;
            border-radius: 6px;
            background: var(--lcb, #eee);
            color: var(--lc, #333);
        }

        .cc-check {
            width: 20px;
            height: 20px;
            flex-shrink: 0;
            border-radius: 6px;
            border: 2px solid var(--ink4);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            color: transparent;
            transition: all 0.15s;
        }

        .ccard.st-done .cc-check {
            background: var(--green);
            border-color: var(--green);
            color: #fff;
            animation: checkPop 0.25s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .ccard.st-locked .cc-check {
            border-style: dashed;
        }

        @keyframes checkPop {
            0% {
                transform: scale(1.5) rotate(-15deg);
                opacity: 0;
            }

            70% {
                transform: scale(0.9) rotate(3deg);
                opacity: 1;
            }

            100% {
                transform: scale(1) rotate(0);
                opacity: 1;
            }
        }

        .cc-name {
            font-size: 12px;
            font-weight: 700;
            color: var(--ink);
            line-height: 1.35;
            margin-bottom: 6px;
        }

        .cc-footer {
            display: flex;
            align-items: center;
            gap: 6px;
            flex-wrap: wrap;
        }

        .cc-hrs {
            font-size: 10px;
            font-weight: 800;
            color: var(--ink3);
        }

        .cc-prereqs {
            display: flex;
            gap: 3px;
            flex-wrap: wrap;
            flex: 1;
        }

        .pr-chip {
            font-size: 9px;
            font-weight: 800;
            letter-spacing: 0.3px;
            padding: 1px 6px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.12s;
            white-space: nowrap;
        }

        .pr-chip.met {
            background: var(--green-l);
            color: var(--green);
        }

        .pr-chip.unmet {
            background: var(--red-l);
            color: var(--red);
        }

        .pr-chip:hover {
            filter: brightness(0.88);
            transform: scale(1.06);
        }

        .cc-status {
            font-size: 9px;
            font-weight: 900;
            letter-spacing: 0.8px;
            text-transform: uppercase;
            padding: 2px 7px;
            border-radius: 100px;
            white-space: nowrap;
            flex-shrink: 0;
        }

        .cc-status.s-done {
            background: var(--green-l);
            color: var(--green);
        }

        .cc-status.s-avail {
            background: var(--blue-l);
            color: var(--blue);
        }

        .cc-status.s-locked {
            background: var(--surface2);
            color: var(--ink3);
        }

        .cc-group-tag {
            font-size: 9px;
            font-weight: 900;
            letter-spacing: 0.5px;
            padding: 1px 6px;
            border-radius: 5px;
            background: var(--purple-l);
            color: var(--purple);
        }

        /* Inactive choice */
        .ccard.inactive {
            opacity: 0.3;
            cursor: default;
        }

        .ccard.inactive::before {
            background: var(--ink4);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   EMPTY
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .roadmap-empty {
            text-align: center;
            padding: 60px 20px;
            font-size: 14px;
            font-weight: 700;
            color: var(--ink3);
        }

        .roadmap-empty .e-icon {
            font-size: 40px;
            display: block;
            margin-bottom: 10px;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CONFETTI
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .conf-piece {
            position: fixed;
            top: -16px;
            pointer-events: none;
            z-index: 9999;
            animation: confFall linear forwards;
            border-radius: 3px;
        }

        @keyframes confFall {
            0% {
                opacity: 1;
                transform: translateY(0) rotate(0deg) scale(1);
            }

            80% {
                opacity: 1;
            }

            100% {
                opacity: 0;
                transform: translateY(105vh) rotate(720deg) scale(0.5);
            }
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TOAST
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        #toasts {
            position: fixed;
            bottom: 28px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 9999;
            display: flex;
            flex-direction: column;
            gap: 8px;
            align-items: center;
            pointer-events: none;
        }

        .t-toast {
            font-family: var(--font);
            font-size: 13px;
            font-weight: 800;
            padding: 11px 22px;
            border-radius: 100px;
            color: #fff;
            box-shadow: var(--shadow-lg);
            white-space: nowrap;
            animation: tIn 0.22s cubic-bezier(0.4, 0, 0.2, 1);
            pointer-events: auto;
        }

        .t-toast.ok {
            background: linear-gradient(135deg, #16a34a, #0d9488);
        }

        .t-toast.err {
            background: linear-gradient(135deg, #dc2626, #ea580c);
        }

        .t-toast.inf {
            background: linear-gradient(135deg, #7c3aed, #2563eb);
        }

        @keyframes tIn {
            from {
                opacity: 0;
                transform: translateY(10px) scale(0.9);
            }

            to {
                opacity: 1;
                transform: none;
            }
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MODAL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .modal-ov {
            position: fixed;
            inset: 0;
            z-index: 1000;
            background: rgba(0, 0, 0, 0.55);
            display: flex;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(6px);
            animation: fadeIn 0.15s;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        .modal-box {
            background: var(--surface);
            border-radius: 20px;
            max-width: 400px;
            width: 90%;
            overflow: hidden;
            box-shadow: var(--shadow-lg);
            animation: mPop 0.22s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes mPop {
            from {
                transform: scale(0.93) translateY(12px);
                opacity: 0;
            }

            to {
                transform: none;
                opacity: 1;
            }
        }

        .modal-head {
            background: linear-gradient(135deg, #7c3aed, #2563eb);
            padding: 18px 22px;
            color: #fff;
        }

        .modal-head h3 {
            font-size: 17px;
            font-weight: 900;
        }

        .modal-head p {
            font-size: 11px;
            opacity: 0.75;
            font-weight: 600;
            margin-top: 2px;
        }

        .modal-body {
            padding: 18px 22px;
        }

        .modal-body p {
            font-size: 12px;
            font-weight: 600;
            color: var(--ink2);
            line-height: 1.6;
            margin-bottom: 12px;
        }

        .modal-list {
            list-style: none;
            display: flex;
            flex-direction: column;
            gap: 5px;
            margin-bottom: 18px;
        }

        .modal-list li {
            font-size: 11px;
            font-weight: 800;
            padding: 6px 12px;
            border-radius: 8px;
            background: var(--red-l);
            color: var(--red);
            border-left: 3px solid var(--red);
        }

        .modal-acts {
            display: flex;
            gap: 8px;
            justify-content: flex-end;
        }

        @media (max-width: 700px) {
            .level-cards-grid {
                grid-template-columns: 1fr 1fr;
            }
        }

        @media (max-width: 420px) {
            .level-cards-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
  <script src="/javascripts/standalone-theme.js"></script>
</head>

<body>

    <!-- TOP NAV -->
    <nav class="topnav">
        <div class="nav-brand">
            <div class="nav-logo">ğŸ“</div>
            <div>
                <div class="nav-title">Degree Roadmap</div>
                <div class="nav-sub">PSU Â· SE-CYS Â· 134 hrs</div>
            </div>
        </div>
        <div class="nav-center">
            <div class="nav-search">
                <span class="nav-search-icon">ğŸ”</span>
                <input type="text" id="searchInput" placeholder="Search coursesâ€¦">
            </div>
        </div>
        <div class="nav-right">
            <button class="pill pill-green" id="mark13Btn">âš¡ L1â€“3 Done</button>
            <button class="pill pill-purple" id="markAllBtn">ğŸ‰ All Done</button>
            <button class="pill pill-red" id="resetBtn">â†º Reset</button>
            <button class="pill pill-ghost" id="themeBtn">â—</button>
        </div>
    </nav>

    <div class="wrap">

        <!-- HERO -->
        <div class="hero">
            <div class="hero-top">
                <div>
                    <div class="hero-greeting" id="heroGreeting">Keep going! ğŸ’ª</div>
                    <div class="hero-sub">Software Engineering (Cybersecurity) â€” Bachelor's Plan</div>
                </div>
                <div class="hero-stats">
                    <div class="hero-stat">
                        <div class="hero-val" id="heroH">0 / â€”</div>
                        <div class="hero-label">Credit Hours</div>
                    </div>
                    <div class="hero-stat">
                        <div class="hero-val" id="heroC">0 / â€”</div>
                        <div class="hero-label">Courses</div>
                    </div>
                </div>
            </div>
            <div class="hero-bar-row">
                <div class="hero-bar-track">
                    <div class="hero-bar-fill" id="heroBar" style="width:0%"></div>
                </div>
                <div class="hero-pct" id="heroPct">0%</div>
            </div>
        </div>

        <!-- CHOICE GROUPS -->
        <div class="choice-row">
            <div class="choice-card">
                <div class="choice-head">
                    <span class="choice-tag">GROUP A</span>
                    <span class="choice-name">Math Elective â€” choose 1</span>
                </div>
                <div class="choice-opts">
                    <button class="choice-btn on" data-group="A" data-val="MATH223">MATH223 Â· Linear Algebra</button>
                    <button class="choice-btn" data-group="A" data-val="CS223">CS223 Â· Computational Linear
                        Algebra</button>
                </div>
            </div>
            <div class="choice-card">
                <div class="choice-head">
                    <span class="choice-tag">GROUP B</span>
                    <span class="choice-name">CYS Elective â€” choose 1</span>
                </div>
                <div class="choice-opts">
                    <button class="choice-btn on" data-group="B" data-val="CYS406">CYS406 Â· Data & Network
                        Security</button>
                    <button class="choice-btn" data-group="B" data-val="CYS404">CYS404 Â· Cyber-Physical Systems</button>
                </div>
            </div>
        </div>

        <!-- FILTER STRIP -->
        <div class="filter-strip">
            <button class="fchip on" data-f="all">All</button>
            <button class="fchip" data-f="avail">âœ¨ Available</button>
            <button class="fchip" data-f="locked">ğŸ”’ Locked</button>
            <button class="fchip" data-f="done">âœ… Completed</button>
        </div>

        <!-- ROADMAP -->
        <div class="roadmap" id="roadmap"></div>

    </div>

    <div id="toasts"></div>

    <script>
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           DATA  (from official PSU PDF, 134 hrs)
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        const COURSES = [
            // Level 1
            { id: 'ARAB101', name: 'Arabic Writing', hours: 2, level: 1, prereqs: [] },
            { id: 'ENG101', name: 'Intensive Writing', hours: 3, level: 1, prereqs: [] },
            { id: 'ISC101', name: 'Islamic Ethics', hours: 2, level: 1, prereqs: [] },
            { id: 'CS101', name: 'Computer Programming I', hours: 4, level: 1, prereqs: [] },
            { id: 'MATH111', name: 'Calculus I', hours: 3, level: 1, prereqs: [] },
            { id: 'CHM101', name: 'General Chemistry', hours: 4, level: 1, prereqs: [] },
            // Level 2
            { id: 'CS102', name: 'Computer Programming II', hours: 3, level: 2, prereqs: ['CS101'] },
            { id: 'CS175', name: 'Digital Logic & Computer Organization', hours: 3, level: 2, prereqs: ['CS101'] },
            { id: 'ENG103', name: 'Research Writing Techniques', hours: 3, level: 2, prereqs: ['ENG101'] },
            { id: 'STAT101', name: 'Intro to Statistics & Probability', hours: 3, level: 2, prereqs: ['MATH111'] },
            { id: 'MATH113', name: 'Calculus II', hours: 3, level: 2, prereqs: ['MATH111'] },
            { id: 'ISC103', name: 'Islamic Economic System', hours: 2, level: 2, prereqs: [] },
            // Level 3
            { id: 'SE201', name: 'Intro to Software Engineering', hours: 3, level: 3, prereqs: ['CS102', 'ENG103'] },
            { id: 'PHY105', name: 'Physics I', hours: 4, level: 3, prereqs: ['MATH111'] },
            { id: 'CS210', name: 'Data Structures & Algorithms', hours: 3, level: 3, prereqs: ['CS102'] },
            { id: 'CS285', name: 'Discrete Math for Computing', hours: 3, level: 3, prereqs: ['CS210'] },
            { id: 'ISC105', name: 'Holy Quran Sciences', hours: 2, level: 3, prereqs: [] },
            { id: 'COM201', name: 'Communication Skills', hours: 3, level: 3, prereqs: [] },
            // Level 4
            { id: 'SE365', name: 'Humanâ€“Computer Interaction', hours: 3, level: 4, prereqs: ['CS210'] },
            { id: 'SE311', name: 'Software Requirements Engineering', hours: 3, level: 4, prereqs: ['SE201'] },
            { id: 'PHY205', name: 'Physics II', hours: 4, level: 4, prereqs: ['PHY105'] },
            { id: 'CS330', name: 'Intro to Operating Systems', hours: 3, level: 4, prereqs: ['CS175', 'CS210'] },
            { id: 'PSY101', name: 'Intro to Psychology', hours: 3, level: 4, prereqs: [] },
            // Level 5
            { id: 'SE322', name: 'Software Design & Architecture', hours: 3, level: 5, prereqs: ['SE311'] },
            { id: 'CYS401', name: 'Fundamentals of Cybersecurity', hours: 3, level: 5, prereqs: ['CS210'] },
            { id: 'CS340', name: 'Intro to Database Systems', hours: 3, level: 5, prereqs: ['CS210'] },
            { id: 'CS331', name: 'Data Communications & Networks', hours: 3, level: 5, prereqs: ['CS175', 'CS210'] },
            { id: 'ISC203', name: 'Contemporary Financial Transactions', hours: 2, level: 5, prereqs: [] },
            { id: 'ARAB103', name: 'Professional & Literary Writing', hours: 2, level: 5, prereqs: [] },
            // Level 6
            { id: 'CYS403', name: 'Cybersecurity Risk, Governance & Compliance', hours: 3, level: 6, prereqs: ['CYS401'] },
            { id: 'CYS402', name: 'Secure Software Development', hours: 3, level: 6, prereqs: ['CYS401'] },
            { id: 'SE401', name: 'Software Testing & Quality Assurance', hours: 3, level: 6, prereqs: ['SE322'] },
            { id: 'SE371', name: 'Web Engineering', hours: 3, level: 6, prereqs: ['CS210'] },
            { id: 'MATH221', name: 'Numerical Analysis', hours: 3, level: 6, prereqs: ['MATH113'] },
            { id: 'ETHC303', name: 'Ethical & Social Aspects of Computing', hours: 3, level: 6, prereqs: [] },
            // Level 7
            { id: 'CYS405', name: 'Penetration Testing & Ethical Hacking', hours: 3, level: 7, prereqs: ['CS331', 'CYS401'] },
            { id: 'SE499', name: 'Senior Project', hours: 3, level: 7, prereqs: ['SE423'] },
            { id: 'SE423', name: 'SE Project Management', hours: 3, level: 7, prereqs: ['SE401'] },
            { id: 'SE411', name: 'Software Construction', hours: 3, level: 7, prereqs: ['SE401'] },
            { id: 'ARAB203', name: 'Arabic Grammar', hours: 2, level: 7, prereqs: [] },
            // Level 8
            { id: 'SE492', name: 'Cooperative Training', hours: 10, level: 8, prereqs: ['SE499'] },
            // Choice Group A
            { id: 'MATH223', name: 'Linear Algebra', hours: 3, level: 6, prereqs: ['MATH113'], group: 'A' },
            { id: 'CS223', name: 'Computational Linear Algebra', hours: 3, level: 6, prereqs: ['CS101', 'MATH113'], group: 'A' },
            // Choice Group B
            { id: 'CYS406', name: 'Data & Network Security', hours: 3, level: 7, prereqs: ['CS331', 'CYS401'], group: 'B' },
            { id: 'CYS404', name: 'Cyber-Physical Systems Security', hours: 3, level: 7, prereqs: ['CS331', 'CYS401'], group: 'B' },
        ];

        const LEVEL_META = {
            1: { name: 'Freshman â€” Semester 1', emoji: 'ğŸŒ±' },
            2: { name: 'Freshman â€” Semester 2', emoji: 'ğŸš€' },
            3: { name: 'Sophomore â€” Semester 1', emoji: 'âš™ï¸' },
            4: { name: 'Sophomore â€” Semester 2', emoji: 'ğŸ”§' },
            5: { name: 'Junior â€” Semester 1', emoji: 'ğŸ”' },
            6: { name: 'Junior â€” Semester 2', emoji: 'ğŸ›¡ï¸' },
            7: { name: 'Senior â€” Semester 1', emoji: 'âš”ï¸' },
            8: { name: 'Senior â€” Semester 2', emoji: 'ğŸ“' },
        };

        const LEVEL_COLORS = {
            1: { c: '#f472b6', bg: '#fdf2f8' },
            2: { c: '#fb923c', bg: '#fff7ed' },
            3: { c: '#eab308', bg: '#fefce8' },
            4: { c: '#22c55e', bg: '#f0fdf4' },
            5: { c: '#38bdf8', bg: '#f0f9ff' },
            6: { c: '#a78bfa', bg: '#f5f3ff' },
            7: { c: '#f87171', bg: '#fff1f2' },
            8: { c: '#34d399', bg: '#ecfdf5' },
        };

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           STATE
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        let completed = new Set();
        let choices = { A: 'MATH223', B: 'CYS406' };
        let filter = 'all';
        let searchQ = '';
        let highlighted = null;
        let dark = false;

        function save() {
            localStorage.setItem('psu4_done', JSON.stringify([...completed]));
            localStorage.setItem('psu4_choices', JSON.stringify(choices));
            localStorage.setItem('psu4_dark', dark ? '1' : '0');
        }
        function load() {
            try {
                const d = localStorage.getItem('psu4_done'); if (d) completed = new Set(JSON.parse(d));
                const c = localStorage.getItem('psu4_choices'); if (c) choices = JSON.parse(c);
                const t = localStorage.getItem('psu4_dark'); if (t != null) dark = t === '1';
            } catch (e) { }
        }

        function active() {
            return COURSES.filter(c => !c.group || c.id === choices[c.group]);
        }
        function status(c) {
            if (completed.has(c.id)) return 'done';
            return c.prereqs.every(p => completed.has(p)) ? 'avail' : 'locked';
        }
        function allDeps(id) {
            const res = new Set(), q = [id];
            while (q.length) {
                const cur = q.shift();
                active().forEach(c => { if (c.prereqs.includes(cur) && !res.has(c.id)) { res.add(c.id); q.push(c.id); } });
            }
            return [...res];
        }
        function topoSort(ids) {
            const map = {}; ids.forEach(id => { const c = COURSES.find(x => x.id === id); map[id] = c ? c.prereqs.filter(p => ids.includes(p)) : []; });
            const vis = new Set(), res = [];
            function v(id) { if (vis.has(id)) return; vis.add(id); (map[id] || []).forEach(v); res.push(id); }
            ids.forEach(v); return res;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           GREETINGS
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        function greeting(pct) {
            if (pct === 0) return "Let's start your journey! ğŸŒŸ";
            if (pct < 20) return "Great start! Keep going! ğŸ’ª";
            if (pct < 40) return "You're building momentum! ğŸ”¥";
            if (pct < 60) return "Halfway there â€” don't stop! âš¡";
            if (pct < 80) return "So close! Almost there! ğŸš€";
            if (pct < 100) return "Final stretch â€” you've got this! ğŸ";
            return "You did it!! Graduate! ğŸ“ğŸ‰";
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           STATS UPDATE
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        function updateStats() {
            const act = active();
            const th = act.reduce((s, c) => s + c.hours, 0);
            const ch = act.filter(c => completed.has(c.id)).reduce((s, c) => s + c.hours, 0);
            const tc = act.length;
            const cc = act.filter(c => completed.has(c.id)).length;
            const pct = th > 0 ? Math.round(ch / th * 100) : 0;
            document.getElementById('heroH').textContent = `${ch} / ${th}`;
            document.getElementById('heroC').textContent = `${cc} / ${tc}`;
            document.getElementById('heroPct').textContent = `${pct}%`;
            document.getElementById('heroBar').style.width = pct + '%';
            document.getElementById('heroGreeting').textContent = greeting(pct);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           RENDER
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        function render() {
            updateStats();
            const act = active();
            const levels = [...new Set(act.map(c => c.level))].sort((a, b) => a - b);
            const rm = document.getElementById('roadmap');
            rm.innerHTML = '';

            const q = searchQ.toLowerCase();
            let anyVisible = false;

            levels.forEach(lv => {
                const lc = LEVEL_COLORS[lv];
                const lm = LEVEL_META[lv] || { name: `Level ${lv}`, emoji: 'ğŸ“š' };

                // all courses for this level, sorted by id
                let lvCourses = act.filter(c => c.level === lv).sort((a, b) => a.id.localeCompare(b.id));

                // also include inactive choices at their level
                const inactiveHere = COURSES.filter(c => c.group && c.id !== choices[c.group] && c.level === lv);

                // Apply search
                const searchFiltered = [...lvCourses, ...inactiveHere].filter(c => {
                    if (!q) return true;
                    return c.id.toLowerCase().includes(q) || c.name.toLowerCase().includes(q);
                });

                // Apply status filter (inactive always hidden under locked)
                const statusFiltered = searchFiltered.filter(c => {
                    const inactive = !!(c.group && c.id !== choices[c.group]);
                    if (inactive) return filter === 'all' || filter === 'locked';
                    const st = status(c);
                    if (filter === 'avail' && st !== 'avail') return false;
                    if (filter === 'locked' && st !== 'locked') return false;
                    if (filter === 'done' && st !== 'done') return false;
                    return true;
                });

                if (!statusFiltered.length) return;
                anyVisible = true;

                const doneCount = lvCourses.filter(c => completed.has(c.id)).length;
                const totalCount = lvCourses.length;
                const totalHrs = lvCourses.reduce((s, c) => s + c.hours, 0);

                const block = document.createElement('div');
                block.className = 'level-block';
                block.dataset.level = lv;

                block.innerHTML = `
      <div class="level-node">
        <div class="level-bubble" style="--lc:${lc.c};--lcb:${lc.bg};">${lm.emoji}</div>
        <div class="level-meta">
          <div class="level-num-label">Level ${lv}</div>
          <div class="level-done-frac">${doneCount}/${totalCount}</div>
        </div>
        <div class="level-connector" style="background:${lc.c}"></div>
      </div>
      <div class="level-cards">
        <div class="level-label-row">
          <span class="level-title">${lm.name}</span>
          <span class="level-hrs-badge" style="--lc:${lc.c};--lcb:${lc.bg};">${totalHrs} hrs</span>
          <span class="level-caret">â–¼</span>
        </div>
        <div class="level-cards-grid"></div>
      </div>
    `;

                // Collapse toggle
                block.querySelector('.level-label-row').addEventListener('click', () => {
                    block.classList.toggle('collapsed');
                });
                block.querySelector('.level-bubble').addEventListener('click', () => {
                    block.classList.toggle('collapsed');
                });

                const grid = block.querySelector('.level-cards-grid');

                statusFiltered.forEach(course => {
                    const inactive = !!(course.group && course.id !== choices[course.group]);
                    const st = inactive ? 'locked' : status(course);

                    const card = document.createElement('div');
                    card.className = `ccard st-${st}${inactive ? ' inactive' : ''}${highlighted === course.id ? ' highlighted' : ''}`;
                    card.dataset.id = course.id;
                    card.style.setProperty('--lc', inactive ? 'var(--ink4)' : lc.c);
                    card.style.setProperty('--lcb', inactive ? 'var(--surface2)' : lc.bg);

                    const prereqHtml = course.prereqs.map(p => {
                        const met = completed.has(p);
                        return `<span class="pr-chip ${met ? 'met' : 'unmet'}" data-prereq="${p}">${p}</span>`;
                    }).join('');

                    const statusLabel = inactive ? 'Not Selected'
                        : st === 'done' ? 'Done'
                            : st === 'avail' ? 'Available'
                                : 'Locked';
                    const statusCls = inactive ? 's-locked'
                        : `s-${st}`;

                    card.innerHTML = `
        <div class="cc-top">
          <span class="cc-code">${course.id}${course.group ? ` <span style="font-size:8px;opacity:.7">GRP ${course.group}</span>` : ''}</span>
          <div class="cc-check">${st === 'done' ? 'âœ“' : (st === 'locked' ? 'âŠ˜' : '')}</div>
        </div>
        <div class="cc-name">${course.name}</div>
        <div class="cc-footer">
          <span class="cc-hrs">${course.hours} hrs</span>
          <div class="cc-prereqs">${prereqHtml}</div>
          <span class="cc-status ${statusCls}">${statusLabel}</span>
        </div>
      `;

                    if (!inactive) {
                        card.addEventListener('click', e => {
                            if (e.target.closest('.pr-chip')) return;
                            toggleCourse(course.id);
                        });
                    }
                    card.querySelectorAll('.pr-chip').forEach(chip => {
                        chip.addEventListener('click', e => {
                            e.stopPropagation();
                            const pid = chip.dataset.prereq;
                            highlighted = highlighted === pid ? null : pid;
                            render();
                            const el = document.querySelector(`.ccard[data-id="${pid}"]`);
                            if (el) el.scrollIntoView({ behavior: 'smooth', block: 'center' });
                        });
                    });

                    grid.appendChild(card);
                });

                rm.appendChild(block);
            });

            if (!anyVisible) {
                rm.innerHTML = '<div class="roadmap-empty"><span class="e-icon">ğŸ”</span>No courses match.</div>';
            }

            // Update choice buttons
            ['A', 'B'].forEach(g => {
                document.querySelectorAll(`.choice-btn[data-group="${g}"]`).forEach(b => {
                    b.classList.toggle('on', b.dataset.val === choices[g]);
                });
            });
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           TOGGLE COURSE
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        function toggleCourse(id) {
            const course = COURSES.find(c => c.id === id);
            if (!course) return;
            if (completed.has(id)) {
                const deps = allDeps(id).filter(d => completed.has(d));
                if (deps.length) {
                    showModal('Remove dependents?',
                        `Unchecking <b>${id}</b> will also uncheck:`, deps,
                        () => { completed.delete(id); deps.forEach(d => completed.delete(d)); save(); render(); toast(`${id} + ${deps.length} removed`, 'err'); }
                    );
                } else {
                    completed.delete(id); save(); render();
                    toast(`${id} unchecked`, 'err');
                }
            } else {
                const missing = course.prereqs.filter(p => !completed.has(p));
                if (missing.length) { toast(`Need ${missing.join(', ')} first ğŸ”’`, 'err'); return; }
                completed.add(id); save(); render();
                confetti(); toast(`${course.id} done! ğŸ‰`, 'ok');
            }
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           CONFETTI
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        function confetti() {
            const colors = ['#a78bfa', '#60a5fa', '#34d399', '#fbbf24', '#f472b6', '#fb923c', '#f87171', '#4ade80'];
            for (let i = 0; i < 22; i++) {
                const el = document.createElement('div');
                el.className = 'conf-piece';
                const sz = 6 + Math.random() * 10;
                el.style.cssText = `
      left:${Math.random() * 100}vw;
      width:${sz}px; height:${sz * 1.4}px;
      background:${colors[Math.floor(Math.random() * colors.length)]};
      animation-duration:${0.9 + Math.random() * 0.7}s;
      animation-delay:${Math.random() * 0.25}s;
      border-radius:${Math.random() > .5 ? '50%' : '3px'};
      transform:rotate(${Math.random() * 360}deg);
    `;
                document.body.appendChild(el);
                el.addEventListener('animationend', () => el.remove());
            }
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           MODAL
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        function showModal(title, msg, items, onOk) {
            const ov = document.createElement('div');
            ov.className = 'modal-ov';
            ov.innerHTML = `
    <div class="modal-box">
      <div class="modal-head"><h3>${title}</h3><p>This affects your progress</p></div>
      <div class="modal-body">
        <p>${msg}</p>
        <ul class="modal-list">${items.map(i => `<li>${i}</li>`).join('')}</ul>
        <div class="modal-acts">
          <button class="pill pill-ghost" id="mCx">Cancel</button>
          <button class="pill pill-red"   id="mOk">Confirm</button>
        </div>
      </div>
    </div>`;
            document.body.appendChild(ov);
            ov.querySelector('#mCx').addEventListener('click', () => ov.remove());
            ov.querySelector('#mOk').addEventListener('click', () => { ov.remove(); onOk(); });
            ov.addEventListener('click', e => { if (e.target === ov) ov.remove(); });
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           TOAST
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        function toast(msg, type = 'inf') {
            const r = document.getElementById('toasts');
            const t = document.createElement('div');
            t.className = `t-toast ${type}`; t.textContent = msg;
            r.appendChild(t);
            setTimeout(() => { t.style.transition = 'all .3s'; t.style.opacity = '0'; t.style.transform = 'translateY(8px) scale(0.9)'; setTimeout(() => t.remove(), 300); }, 2800);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           EVENT WIRING
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        // Choice buttons
        document.querySelectorAll('.choice-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                const g = btn.dataset.group, val = btn.dataset.val;
                if (choices[g] === val) return;
                const old = choices[g];
                const aff = completed.has(old) ? [old, ...allDeps(old).filter(d => completed.has(d))] : [];
                const doSwitch = () => { aff.forEach(d => completed.delete(d)); choices[g] = val; save(); render(); toast(`Group ${g}: ${val} selected âœ“`, 'ok'); };
                if (aff.length) showModal(`Switch Group ${g}?`, `Will remove:`, aff, doSwitch);
                else doSwitch();
            });
        });

        // Filter chips
        document.querySelectorAll('.fchip').forEach(btn => {
            btn.addEventListener('click', () => {
                filter = btn.dataset.f;
                document.querySelectorAll('.fchip').forEach(b => b.classList.remove('on'));
                btn.classList.add('on');
                render();
            });
        });

        // Search
        document.getElementById('searchInput').addEventListener('input', e => { searchQ = e.target.value; render(); });

        // Quick marks
        document.getElementById('mark13Btn').addEventListener('click', () => {
            const ids = topoSort(active().filter(c => c.level <= 3).map(c => c.id));
            ids.forEach(id => completed.add(id)); save(); render(); confetti();
            toast('Levels 1â€“3 complete! ğŸš€', 'ok');
        });
        document.getElementById('markAllBtn').addEventListener('click', () => {
            showModal('Mark everything done?', 'Mark all active courses as completed?', [], () => {
                topoSort(active().map(c => c.id)).forEach(id => completed.add(id));
                save(); render(); confetti(); toast('You graduated!! ğŸ“ğŸ‰', 'ok');
            });
        });
        document.getElementById('resetBtn').addEventListener('click', () => {
            showModal('Reset all progress?', 'Clear all completed courses?', [], () => {
                completed.clear(); save(); render(); toast('Progress reset', 'err');
            });
        });
        document.getElementById('themeBtn').addEventListener('click', () => {
            dark = !dark;
            document.body.classList.toggle('dark', dark);
            save();
        });

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           INIT
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        load();
        document.body.classList.toggle('dark', dark);
        render();
    </script>
</body>

</html>