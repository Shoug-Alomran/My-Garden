<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø¬Ø§Ù…Ø¹Ø© Ø§Ù„Ø£Ù…ÙŠØ± Ø³Ù„Ø·Ø§Ù† Â· Ø®Ø±ÙŠØ·Ø© Ø·Ø±ÙŠÙ‚ Ù‡Ù†Ø¯Ø³Ø© Ø¨Ø±Ù…Ø¬ÙŠØ§Øª ÙˆØ£Ù…Ù† Ø³ÙŠØ¨Ø±Ø§Ù†ÙŠ</title>
    <link
        href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800;900&family=Nunito+Sans:ital,wght@0,400;0,600;0,700;1,400&family=Tajawal:wght@400;500;700;800;900&display=swap"
        rel="stylesheet">
    <style>
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        :root {
            --bg: #f4f1ff;
            --bg2: #ebe6ff;
            --surface: #ffffff;
            --surface2: #f9f8ff;
            --ink: #1a1433;
            --ink2: #5b5278;
            --ink3: #9890b8;
            --ink4: #cec8e8;

            --purple: #7c3aed;
            --purple-l: #ede9fe;
            --blue: #2563eb;
            --blue-l: #dbeafe;
            --teal: #0d9488;
            --teal-l: #ccfbf1;
            --green: #16a34a;
            --green-l: #dcfce7;
            --orange: #ea580c;
            --orange-l: #ffedd5;
            --pink: #db2777;
            --pink-l: #fce7f3;
            --yellow: #d97706;
            --yellow-l: #fef3c7;
            --red: #dc2626;
            --red-l: #fee2e2;

            /* Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª Ø§Ù„Ø«Ù…Ø§Ù†ÙŠØ© */
            --l1: #f472b6;
            --l1b: #fdf2f8;
            --l2: #fb923c;
            --l2b: #fff7ed;
            --l3: #facc15;
            --l3b: #fefce8;
            --l4: #4ade80;
            --l4b: #f0fdf4;
            --l5: #38bdf8;
            --l5b: #f0f9ff;
            --l6: #a78bfa;
            --l6b: #f5f3ff;
            --l7: #f87171;
            --l7b: #fff1f2;
            --l8: #34d399;
            --l8b: #ecfdf5;

            --radius-xl: 20px;
            --radius-lg: 14px;
            --radius-md: 10px;
            --radius-sm: 7px;
            --font: 'Tajawal', 'Nunito', sans-serif;
            --font2: 'Tajawal', 'Nunito Sans', sans-serif;
            --shadow: 0 2px 0 rgba(0, 0, 0, 0.10);
            --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.08);
            --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.12);
        }

        .dark {
            --bg: #0f0b1e;
            --bg2: #18132e;
            --surface: #1e1838;
            --surface2: #241e40;
            --ink: #ede9ff;
            --ink2: #9d94c4;
            --ink3: #5a5280;
            --ink4: #2e2850;
            --purple-l: #2d1b69;
            --blue-l: #1e3a8a;
            --teal-l: #134e4a;
            --green-l: #14532d;
            --orange-l: #431407;
            --pink-l: #500724;
            --yellow-l: #451a03;
            --red-l: #450a0a;
            --l1b: #2d1022;
            --l2b: #2c1600;
            --l3b: #2c2200;
            --l4b: #052e16;
            --l5b: #082030;
            --l6b: #1e1545;
            --l7b: #2d0a0a;
            --l8b: #022c1e;
            --shadow: 0 2px 0 rgba(0, 0, 0, 0.4);
            --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.35);
            --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.5);
        }

        *,
        *::before,
        *::after {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        html {
            scroll-behavior: smooth;
        }

        body {
            background: var(--bg);
            color: var(--ink);
            font-family: var(--font);
            min-height: 100vh;
            transition: background 0.3s, color 0.3s;
            font-size: 13px;
        }

        /* Ø®Ù„ÙÙŠØ© Ù…Ù†Ù‚Ø·Ø© */
        body::before {
            content: '';
            position: fixed;
            inset: 0;
            z-index: 0;
            pointer-events: none;
            background-image: radial-gradient(circle, var(--ink4) 1.2px, transparent 1.2px);
            background-size: 28px 28px;
            opacity: 0.5;
        }

        .wrap {
            position: relative;
            z-index: 1;
            max-width: 1180px;
            margin: 0 auto;
            padding: 0 20px 100px;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ù„ÙˆÙŠ
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .topnav {
            position: sticky;
            top: 0;
            z-index: 200;
            background: rgba(244, 241, 255, 0.88);
            backdrop-filter: blur(16px);
            border-bottom: 1.5px solid var(--ink4);
            padding: 10px 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 12px;
            flex-wrap: wrap;
            margin: 0 -20px 0;
        }

        .dark .topnav {
            background: rgba(15, 11, 30, 0.88);
        }

        .nav-brand {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .nav-logo {
            width: 36px;
            height: 36px;
            background: linear-gradient(135deg, var(--purple), var(--blue));
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            box-shadow: var(--shadow);
        }

        .nav-title {
            font-size: 16px;
            font-weight: 900;
            color: var(--ink);
        }

        .nav-sub {
            font-size: 10px;
            font-weight: 700;
            color: var(--ink3);
            letter-spacing: 1px;
            text-transform: uppercase;
        }

        .nav-center {
            display: flex;
            align-items: center;
            gap: 8px;
            flex: 1;
            max-width: 320px;
        }

        .nav-search {
            flex: 1;
            position: relative;
        }

        .nav-search input {
            width: 100%;
            padding: 8px 34px 8px 12px;
            border-radius: 10px;
            border: 2px solid var(--ink4);
            background: var(--surface);
            color: var(--ink);
            font-family: var(--font);
            font-size: 12px;
            font-weight: 700;
            outline: none;
            transition: border-color 0.2s;
        }

        .nav-search input:focus {
            border-color: var(--purple);
        }

        .nav-search input::placeholder {
            color: var(--ink3);
        }

        .nav-search-icon {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 14px;
        }

        .nav-right {
            display: flex;
            gap: 6px;
            align-items: center;
            flex-wrap: wrap;
        }

        /* Ø£Ø²Ø±Ø§Ø± Ø¯Ø§Ø¦Ø±ÙŠØ© */
        .pill {
            font-family: var(--font);
            font-weight: 800;
            font-size: 11px;
            padding: 7px 14px;
            border-radius: 100px;
            border: none;
            cursor: pointer;
            transition: transform 0.12s, box-shadow 0.12s, filter 0.12s;
            white-space: nowrap;
            box-shadow: 0 2px 0 rgba(0, 0, 0, 0.18);
            line-height: 1;
        }

        .pill:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 0 rgba(0, 0, 0, 0.18);
        }

        .pill:active {
            transform: translateY(1px);
            box-shadow: 0 1px 0 rgba(0, 0, 0, 0.18);
        }

        .pill-purple {
            background: var(--purple);
            color: #fff;
        }

        .pill-green {
            background: var(--green);
            color: #fff;
        }

        .pill-red {
            background: var(--red);
            color: #fff;
        }

        .pill-ghost {
            background: var(--surface2);
            color: var(--ink2);
            box-shadow: 0 2px 0 var(--ink4);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù…
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .hero {
            margin: 24px 0 20px;
            background: linear-gradient(135deg, #7c3aed 0%, #2563eb 55%, #0d9488 100%);
            border-radius: var(--radius-xl);
            padding: 24px 28px 20px;
            color: #fff;
            box-shadow: var(--shadow-lg);
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            inset: 0;
            background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='60' height='60'%3E%3Ccircle cx='30' cy='30' r='20' fill='none' stroke='rgba(255,255,255,0.06)' stroke-width='1'/%3E%3Ccircle cx='30' cy='30' r='10' fill='none' stroke='rgba(255,255,255,0.04)' stroke-width='1'/%3E%3C/svg%3E") repeat;
            pointer-events: none;
        }

        .hero-top {
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            gap: 16px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .hero-greeting {
            font-size: clamp(18px, 3vw, 26px);
            font-weight: 900;
            opacity: 0.95;
        }

        .hero-sub {
            font-size: 12px;
            opacity: 0.7;
            font-weight: 600;
            margin-top: 2px;
        }

        .hero-stats {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }

        .hero-stat {
            text-align: left;
        }

        .hero-val {
            font-size: 28px;
            font-weight: 900;
            line-height: 1;
        }

        .hero-label {
            font-size: 10px;
            font-weight: 700;
            opacity: 0.7;
            letter-spacing: 1px;
            text-transform: uppercase;
        }

        .hero-bar-row {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .hero-bar-track {
            flex: 1;
            height: 10px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 100px;
            overflow: hidden;
            position: relative;
        }

        .hero-bar-fill {
            height: 100%;
            background: #fff;
            border-radius: 100px;
            transition: width 0.7s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .hero-bar-fill::after {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.5) 50%, transparent);
            animation: shimmer 2.5s infinite;
        }

        @keyframes shimmer {
            0% {
                transform: translateX(-100%);
            }

            100% {
                transform: translateX(100%);
            }
        }

        .hero-pct {
            font-size: 15px;
            font-weight: 900;
            white-space: nowrap;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   Ù…Ø¬Ù…ÙˆØ¹Ø§Øª Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .choice-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 20px;
        }

        @media (max-width: 600px) {
            .choice-row {
                grid-template-columns: 1fr;
            }
        }

        .choice-card {
            background: var(--surface);
            border-radius: var(--radius-lg);
            padding: 14px 16px;
            border: 2px solid var(--ink4);
            box-shadow: var(--shadow);
        }

        .choice-head {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 10px;
        }

        .choice-tag {
            font-size: 9px;
            font-weight: 900;
            letter-spacing: 1.5px;
            text-transform: uppercase;
            padding: 3px 9px;
            border-radius: 100px;
            background: linear-gradient(135deg, #7c3aed, #2563eb);
            color: #fff;
        }

        .choice-name {
            font-size: 11px;
            font-weight: 700;
            color: var(--ink2);
        }

        .choice-opts {
            display: flex;
            gap: 6px;
            flex-wrap: wrap;
        }

        .choice-btn {
            font-family: var(--font);
            font-size: 11px;
            font-weight: 800;
            padding: 6px 12px;
            border-radius: 8px;
            border: 2px solid var(--ink4);
            background: var(--surface2);
            color: var(--ink2);
            cursor: pointer;
            transition: all 0.15s;
        }

        .choice-btn.on {
            border-color: var(--purple);
            background: var(--purple-l);
            color: var(--purple);
        }

        .choice-btn:not(.on):hover {
            border-color: var(--ink2);
            color: var(--ink);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   Ø´Ø±ÙŠØ· Ø§Ù„ØªØµÙÙŠØ©
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .filter-strip {
            display: flex;
            gap: 6px;
            align-items: center;
            margin-bottom: 24px;
            flex-wrap: wrap;
        }

        .fchip {
            font-family: var(--font);
            font-size: 11px;
            font-weight: 800;
            padding: 6px 14px;
            border-radius: 100px;
            border: 2px solid var(--ink4);
            background: var(--surface);
            color: var(--ink2);
            cursor: pointer;
            transition: all 0.15s;
        }

        .fchip.on {
            background: var(--ink);
            color: var(--bg);
            border-color: var(--ink);
        }

        .fchip:not(.on):hover {
            border-color: var(--ink2);
            color: var(--ink);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   Ø§Ù„Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ©
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .roadmap {
            display: flex;
            flex-direction: column;
            gap: 0;
            position: relative;
        }

        /* Ø§Ù„Ø¹Ù…ÙˆØ¯ Ø§Ù„ÙÙ‚Ø±ÙŠ Ø§Ù„Ø±Ø£Ø³ÙŠ */
        .roadmap::before {
            content: '';
            position: absolute;
            right: 52px;
            top: 0;
            bottom: 0;
            width: 3px;
            background: linear-gradient(180deg, var(--l1), var(--l2), var(--l3), var(--l4), var(--l5), var(--l6), var(--l7), var(--l8));
            border-radius: 3px;
            z-index: 0;
        }

        @media (max-width: 580px) {
            .roadmap::before {
                right: 34px;
            }
        }

        /* â”€â”€ ÙƒØªÙ„Ø© Ø§Ù„Ù…Ø³ØªÙˆÙ‰ â”€â”€ */
        .level-block {
            display: flex;
            gap: 0;
            position: relative;
            margin-bottom: 24px;
        }

        .level-block.hidden {
            display: none;
        }

        /* Ù†Ù‚Ø·Ø© Ø§Ù„Ù…Ø³ØªÙˆÙ‰ (Ø§Ù„Ø¯Ø§Ø¦Ø±Ø© Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ù…ÙˆØ¯ Ø§Ù„ÙÙ‚Ø±ÙŠ) */
        .level-node {
            width: 108px;
            flex-shrink: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            padding-top: 4px;
            position: relative;
            z-index: 1;
        }

        @media (max-width: 580px) {
            .level-node {
                width: 72px;
            }
        }

        .level-bubble {
            width: 44px;
            height: 44px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 15px;
            font-weight: 900;
            border: 3px solid var(--bg);
            box-shadow: 0 0 0 3px var(--lc, #ccc), var(--shadow-md);
            background: var(--lcb, #fff);
            color: var(--lc, #333);
            transition: transform 0.2s;
            cursor: pointer;
            user-select: none;
        }

        .level-bubble:hover {
            transform: scale(1.1);
        }

        .level-meta {
            text-align: center;
        }

        .level-num-label {
            font-size: 9px;
            font-weight: 900;
            letter-spacing: 1px;
            text-transform: uppercase;
            color: var(--ink3);
        }

        .level-done-frac {
            font-size: 10px;
            font-weight: 800;
            color: var(--ink2);
        }

        /* Ø®Ø· Ø§Ù„ÙˆØµÙ„ Ù…Ù† Ø§Ù„Ù†Ù‚Ø·Ø© Ø¥Ù„Ù‰ Ø§Ù„Ø¨Ø·Ø§Ù‚Ø§Øª */
        .level-connector {
            position: absolute;
            right: 54px;
            top: 22px;
            height: 2px;
            width: 54px;
            background: var(--lc, #ccc);
            opacity: 0.5;
            z-index: 0;
        }

        @media (max-width: 580px) {
            .level-connector {
                right: 36px;
                width: 36px;
            }
        }

        /* Ù…Ù†Ø·Ù‚Ø© Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ù…Ø³ØªÙˆÙ‰ */
        .level-cards {
            flex: 1;
            min-width: 0;
            padding-top: 0;
        }

        .level-label-row {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
            cursor: pointer;
            user-select: none;
        }

        .level-title {
            font-size: 14px;
            font-weight: 900;
            color: var(--ink);
        }

        .level-hrs-badge {
            font-size: 10px;
            font-weight: 800;
            padding: 2px 10px;
            border-radius: 100px;
            background: var(--lcb, #eee);
            color: var(--lc, #333);
        }

        .level-caret {
            margin-right: auto;
            color: var(--ink3);
            font-size: 12px;
            transition: transform 0.2s;
        }

        .level-block.collapsed .level-caret {
            transform: rotate(90deg);
        }

        .level-block.collapsed .level-cards-grid {
            display: none;
        }

        /* Ø´Ø¨ÙƒØ© Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ù…Ù‚Ø±Ø±Ø§Øª */
        .level-cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 8px;
        }

        /* â”€â”€ Ø¨Ø·Ø§Ù‚Ø© Ø§Ù„Ù…Ù‚Ø±Ø± â”€â”€ */
        .ccard {
            background: var(--surface);
            border-radius: var(--radius-lg);
            padding: 12px 14px;
            border: 2px solid var(--ink4);
            cursor: pointer;
            transition: transform 0.15s, box-shadow 0.15s, border-color 0.15s;
            box-shadow: var(--shadow);
            position: relative;
            overflow: hidden;
            user-select: none;
        }

        .ccard::before {
            content: '';
            position: absolute;
            right: 0;
            top: 0;
            bottom: 0;
            width: 4px;
            background: var(--lc, var(--ink4));
            border-radius: 0 4px 4px 0;
        }

        .ccard:hover:not(.st-locked) {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.12);
            border-color: var(--lc, var(--ink4));
        }

        .ccard:active:not(.st-locked) {
            transform: translateY(0);
        }

        .ccard.st-locked {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .ccard.st-avail {
            border-color: var(--lc, var(--purple));
        }

        .ccard.st-done {
            border-color: var(--green);
            background: var(--green-l);
        }

        .ccard.st-done::before {
            background: var(--green);
        }

        .ccard.highlighted {
            border-color: var(--yellow) !important;
            background: var(--yellow-l) !important;
        }

        /* Ø§Ù„ØµÙ Ø§Ù„Ø¹Ù„ÙˆÙŠ Ù„Ù„Ø¨Ø·Ø§Ù‚Ø© */
        .cc-top {
            display: flex;
            align-items: flex-start;
            justify-content: space-between;
            gap: 6px;
            margin-bottom: 6px;
        }

        .cc-code {
            font-size: 10px;
            font-weight: 900;
            letter-spacing: 0.8px;
            padding: 2px 8px;
            border-radius: 6px;
            background: var(--lcb, #eee);
            color: var(--lc, #333);
        }

        .cc-check {
            width: 20px;
            height: 20px;
            flex-shrink: 0;
            border-radius: 6px;
            border: 2px solid var(--ink4);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            color: transparent;
            transition: all 0.15s;
        }

        .ccard.st-done .cc-check {
            background: var(--green);
            border-color: var(--green);
            color: #fff;
            animation: checkPop 0.25s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .ccard.st-locked .cc-check {
            border-style: dashed;
        }

        @keyframes checkPop {
            0% {
                transform: scale(1.5) rotate(-15deg);
                opacity: 0;
            }

            70% {
                transform: scale(0.9) rotate(3deg);
                opacity: 1;
            }

            100% {
                transform: scale(1) rotate(0);
                opacity: 1;
            }
        }

        .cc-name {
            font-size: 12px;
            font-weight: 700;
            color: var(--ink);
            line-height: 1.35;
            margin-bottom: 6px;
        }

        .cc-footer {
            display: flex;
            align-items: center;
            gap: 6px;
            flex-wrap: wrap;
        }

        .cc-hrs {
            font-size: 10px;
            font-weight: 800;
            color: var(--ink3);
        }

        .cc-prereqs {
            display: flex;
            gap: 3px;
            flex-wrap: wrap;
            flex: 1;
        }

        .pr-chip {
            font-size: 9px;
            font-weight: 800;
            letter-spacing: 0.3px;
            padding: 1px 6px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.12s;
            white-space: nowrap;
        }

        .pr-chip.met {
            background: var(--green-l);
            color: var(--green);
        }

        .pr-chip.unmet {
            background: var(--red-l);
            color: var(--red);
        }

        .pr-chip:hover {
            filter: brightness(0.88);
            transform: scale(1.06);
        }

        .cc-status {
            font-size: 9px;
            font-weight: 900;
            letter-spacing: 0.8px;
            text-transform: uppercase;
            padding: 2px 7px;
            border-radius: 100px;
            white-space: nowrap;
            flex-shrink: 0;
        }

        .cc-status.s-done {
            background: var(--green-l);
            color: var(--green);
        }

        .cc-status.s-avail {
            background: var(--blue-l);
            color: var(--blue);
        }

        .cc-status.s-locked {
            background: var(--surface2);
            color: var(--ink3);
        }

        .cc-group-tag {
            font-size: 9px;
            font-weight: 900;
            letter-spacing: 0.5px;
            padding: 1px 6px;
            border-radius: 5px;
            background: var(--purple-l);
            color: var(--purple);
        }

        /* Ø®ÙŠØ§Ø± ØºÙŠØ± Ù†Ø´Ø· */
        .ccard.inactive {
            opacity: 0.3;
            cursor: default;
        }

        .ccard.inactive::before {
            background: var(--ink4);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   Ø­Ø§Ù„Ø© ÙØ§Ø±ØºØ©
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .roadmap-empty {
            text-align: center;
            padding: 60px 20px;
            font-size: 14px;
            font-weight: 700;
            color: var(--ink3);
        }

        .roadmap-empty .e-icon {
            font-size: 40px;
            display: block;
            margin-bottom: 10px;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   Ù‚ØµØ§ØµØ§Øª Ù…Ù„ÙˆÙ†Ø©
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .conf-piece {
            position: fixed;
            top: -16px;
            pointer-events: none;
            z-index: 9999;
            animation: confFall linear forwards;
            border-radius: 3px;
        }

        @keyframes confFall {
            0% {
                opacity: 1;
                transform: translateY(0) rotate(0deg) scale(1);
            }

            80% {
                opacity: 1;
            }

            100% {
                opacity: 0;
                transform: translateY(105vh) rotate(720deg) scale(0.5);
            }
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   Ø¥Ø´Ø¹Ø§Ø±Ø§Øª
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        #toasts {
            position: fixed;
            bottom: 28px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 9999;
            display: flex;
            flex-direction: column;
            gap: 8px;
            align-items: center;
            pointer-events: none;
        }

        .t-toast {
            font-family: var(--font);
            font-size: 13px;
            font-weight: 800;
            padding: 11px 22px;
            border-radius: 100px;
            color: #fff;
            box-shadow: var(--shadow-lg);
            white-space: nowrap;
            animation: tIn 0.22s cubic-bezier(0.4, 0, 0.2, 1);
            pointer-events: auto;
        }

        .t-toast.ok {
            background: linear-gradient(135deg, #16a34a, #0d9488);
        }

        .t-toast.err {
            background: linear-gradient(135deg, #dc2626, #ea580c);
        }

        .t-toast.inf {
            background: linear-gradient(135deg, #7c3aed, #2563eb);
        }

        @keyframes tIn {
            from {
                opacity: 0;
                transform: translateY(10px) scale(0.9);
            }

            to {
                opacity: 1;
                transform: none;
            }
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   Ù†Ø§ÙØ°Ø© Ù…Ù†Ø¨Ø«Ù‚Ø©
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        .modal-ov {
            position: fixed;
            inset: 0;
            z-index: 1000;
            background: rgba(0, 0, 0, 0.55);
            display: flex;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(6px);
            animation: fadeIn 0.15s;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
            }

            to {
                opacity: 1;
            }
        }

        .modal-box {
            background: var(--surface);
            border-radius: 20px;
            max-width: 400px;
            width: 90%;
            overflow: hidden;
            box-shadow: var(--shadow-lg);
            animation: mPop 0.22s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes mPop {
            from {
                transform: scale(0.93) translateY(12px);
                opacity: 0;
            }

            to {
                transform: none;
                opacity: 1;
            }
        }

        .modal-head {
            background: linear-gradient(135deg, #7c3aed, #2563eb);
            padding: 18px 22px;
            color: #fff;
        }

        .modal-head h3 {
            font-size: 17px;
            font-weight: 900;
        }

        .modal-head p {
            font-size: 11px;
            opacity: 0.75;
            font-weight: 600;
            margin-top: 2px;
        }

        .modal-body {
            padding: 18px 22px;
        }

        .modal-body p {
            font-size: 12px;
            font-weight: 600;
            color: var(--ink2);
            line-height: 1.6;
            margin-bottom: 12px;
        }

        .modal-list {
            list-style: none;
            display: flex;
            flex-direction: column;
            gap: 5px;
            margin-bottom: 18px;
        }

        .modal-list li {
            font-size: 11px;
            font-weight: 800;
            padding: 6px 12px;
            border-radius: 8px;
            background: var(--red-l);
            color: var(--red);
            border-right: 3px solid var(--red);
        }

        .modal-acts {
            display: flex;
            gap: 8px;
            justify-content: flex-end;
        }

        @media (max-width: 700px) {
            .level-cards-grid {
                grid-template-columns: 1fr 1fr;
            }
        }

        @media (max-width: 420px) {
            .level-cards-grid {
                grid-template-columns: 1fr;}}</style>  <script src="/javascripts/standalone-theme.js"></script>
</head>

<body>

    <!-- Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ù„ÙˆÙŠ -->
    <nav class="topnav">
        <div class="nav-brand">
            <div class="nav-logo">ğŸ“</div>
            <div>
                <div class="nav-title">Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ø·Ø±ÙŠÙ‚</div>
                <div class="nav-sub">Ø¬Ø§Ù…Ø¹Ø© Ø§Ù„Ø£Ù…ÙŠØ± Ø³Ù„Ø·Ø§Ù† Â· Ù‡Ù†Ø¯Ø³Ø© Ø¨Ø±Ù…Ø¬ÙŠØ§Øª ÙˆØ£Ù…Ù† Ø³ÙŠØ¨Ø±Ø§Ù†ÙŠ Â· Ù¡Ù£Ù¤ Ø³Ø§Ø¹Ø©</div>
            </div>
        </div>
        <div class="nav-center">
            <div class="nav-search">
                <span class="nav-search-icon">ğŸ”</span>
                <input type="text" id="searchInput" placeholder="Ø§Ø¨Ø­Ø« Ø¹Ù† Ù…Ù‚Ø±Ø±â€¦">
            </div>
        </div>
        <div class="nav-right">
            <button class="pill pill-green" id="mark13Btn">âš¡ Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª Ù¡-Ù£</button>
            <button class="pill pill-purple" id="markAllBtn">ğŸ‰ Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„ÙƒÙ„</button>
            <button class="pill pill-red" id="resetBtn">â†º Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†</button>
            <button class="pill pill-ghost" id="themeBtn">â—</button>
        </div>
    </nav>

    <div class="wrap">

        <!-- Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù… -->
        <div class="hero">
            <div class="hero-top">
                <div>
                    <div class="hero-greeting" id="heroGreeting">Ø§Ø³ØªÙ…Ø±ØŒ Ø£Ù†Øª Ù‚Ø§Ø¯Ø±! ğŸ’ª</div>
                    <div class="hero-sub">Ù‡Ù†Ø¯Ø³Ø© Ø¨Ø±Ù…Ø¬ÙŠØ§Øª (Ø£Ù…Ù† Ø³ÙŠØ¨Ø±Ø§Ù†ÙŠ) â€” Ø®Ø·Ø© Ø§Ù„Ø¨ÙƒØ§Ù„ÙˆØ±ÙŠÙˆØ³</div>
                </div>
                <div class="hero-stats">
                    <div class="hero-stat">
                        <div class="hero-val" id="heroH">Ù  / Ù¡Ù£Ù¤</div>
                        <div class="hero-label">Ø§Ù„Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ù…Ø¹ØªÙ…Ø¯Ø©</div>
                    </div>
                    <div class="hero-stat">
                        <div class="hero-val" id="heroC">Ù  / Ù¤Ù¥</div>
                        <div class="hero-label">Ø§Ù„Ù…Ù‚Ø±Ø±Ø§Øª</div>
                    </div>
                </div>
            </div>
            <div class="hero-bar-row">
                <div class="hero-bar-track">
                    <div class="hero-bar-fill" id="heroBar" style="width:0%"></div>
                </div>
                <div class="hero-pct" id="heroPct">Ù %</div>
            </div>
        </div>

        <!-- Ù…Ø¬Ù…ÙˆØ¹Ø§Øª Ø§Ù„Ø§Ø®ØªÙŠØ§Ø± -->
        <div class="choice-row">
            <div class="choice-card">
                <div class="choice-head">
                    <span class="choice-tag">Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© Ø£</span>
                    <span class="choice-name">Ù…Ù‚Ø±Ø± Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±ÙŠ â€” Ø§Ø®ØªØ± Ù¡</span>
                </div>
                <div class="choice-opts">
                    <button class="choice-btn on" data-group="A" data-val="MATH223">MATH223 Â· Ø¬Ø¨Ø± Ø®Ø·ÙŠ</button>
                    <button class="choice-btn" data-group="A" data-val="CS223">CS223 Â· Ø¬Ø¨Ø± Ø®Ø·ÙŠ Ø­Ø³Ø§Ø¨ÙŠ</button>
                </div>
            </div>
            <div class="choice-card">
                <div class="choice-head">
                    <span class="choice-tag">Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© Ø¨</span>
                    <span class="choice-name">Ù…Ù‚Ø±Ø± Ø§Ù„Ø£Ù…Ù† Ø§Ù„Ø³ÙŠØ¨Ø±Ø§Ù†ÙŠ Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±ÙŠ â€” Ø§Ø®ØªØ± Ù¡</span>
                </div>
                <div class="choice-opts">
                    <button class="choice-btn on" data-group="B" data-val="CYS406">CYS406 Â· Ø£Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ§Ù„Ø´Ø¨ÙƒØ§Øª</button>
                    <button class="choice-btn" data-group="B" data-val="CYS404">CYS404 Â· Ø£Ù…Ù† Ø§Ù„Ø£Ù†Ø¸Ù…Ø© Ø§Ù„Ø³ÙŠØ¨Ø±Ø§Ù†ÙŠØ©-Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¦ÙŠØ©</button>
                </div>
            </div>
        </div>

        <!-- Ø´Ø±ÙŠØ· Ø§Ù„ØªØµÙÙŠØ© -->
        <div class="filter-strip">
            <button class="fchip on" data-f="all">Ø§Ù„ÙƒÙ„</button>
            <button class="fchip" data-f="avail">âœ¨ Ù…ØªØ§Ø­Ø©</button>
            <button class="fchip" data-f="locked">ğŸ”’ Ù…Ù‚ÙÙ„Ø©</button>
            <button class="fchip" data-f="done">âœ… Ù…ÙƒØªÙ…Ù„Ø©</button>
        </div>

        <!-- Ø§Ù„Ø®Ø±ÙŠØ·Ø© Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ© -->
        <div class="roadmap" id="roadmap"></div>

    </div>

    <div id="toasts"></div>

    <script>
        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª (Ù…Ù† Ø§Ù„Ø®Ø·Ø© Ø§Ù„Ø±Ø³Ù…ÙŠØ© Ù„Ø¬Ø§Ù…Ø¹Ø© Ø§Ù„Ø£Ù…ÙŠØ± Ø³Ù„Ø·Ø§Ù†ØŒ Ù¡Ù£Ù¤ Ø³Ø§Ø¹Ø©)
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        const COURSES = [
            // Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ù¡
            { id: 'ARAB101', name: 'ØªØ¹Ø¨ÙŠØ± Ø¹Ø±Ø¨ÙŠ', hours: 2, level: 1, prereqs: [] },
            { id: 'ENG101', name: 'ÙƒØªØ§Ø¨Ø© Ù…ÙƒØ«ÙØ©', hours: 3, level: 1, prereqs: [] },
            { id: 'ISC101', name: 'Ø£Ø®Ù„Ø§Ù‚ Ø¥Ø³Ù„Ø§Ù…ÙŠØ©', hours: 2, level: 1, prereqs: [] },
            { id: 'CS101', name: 'Ø¨Ø±Ù…Ø¬Ø© Ø­Ø§Ø³ÙˆØ¨ Ù¡', hours: 4, level: 1, prereqs: [] },
            { id: 'MATH111', name: 'ØªÙØ§Ø¶Ù„ ÙˆØªÙƒØ§Ù…Ù„ Ù¡', hours: 3, level: 1, prereqs: [] },
            { id: 'CHM101', name: 'ÙƒÙŠÙ…ÙŠØ§Ø¡ Ø¹Ø§Ù…Ø©', hours: 4, level: 1, prereqs: [] },
            // Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ù¢
            { id: 'CS102', name: 'Ø¨Ø±Ù…Ø¬Ø© Ø­Ø§Ø³ÙˆØ¨ Ù¢', hours: 3, level: 2, prereqs: ['CS101'] },
            { id: 'CS175', name: 'Ù…Ù†Ø·Ù‚ Ø±Ù‚Ù…ÙŠ ÙˆØªÙ†Ø¸ÙŠÙ… Ø­Ø§Ø³ÙˆØ¨', hours: 3, level: 2, prereqs: ['CS101'] },
            { id: 'ENG103', name: 'ØªÙ‚Ù†ÙŠØ§Øª Ø§Ù„ÙƒØªØ§Ø¨Ø© Ø§Ù„Ø¨Ø­Ø«ÙŠØ©', hours: 3, level: 2, prereqs: ['ENG101'] },
            { id: 'STAT101', name: 'Ù…Ù‚Ø¯Ù…Ø© ÙÙŠ Ø§Ù„Ø¥Ø­ØµØ§Ø¡ ÙˆØ§Ù„Ø§Ø­ØªÙ…Ø§Ù„Ø§Øª', hours: 3, level: 2, prereqs: ['MATH111'] },
            { id: 'MATH113', name: 'ØªÙØ§Ø¶Ù„ ÙˆØªÙƒØ§Ù…Ù„ Ù¢', hours: 3, level: 2, prereqs: ['MATH111'] },
            { id: 'ISC103', name: 'Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø§Ù‚ØªØµØ§Ø¯ÙŠ Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ÙŠ', hours: 2, level: 2, prereqs: [] },
            // Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ù£
            { id: 'SE201', name: 'Ù…Ù‚Ø¯Ù…Ø© ÙÙŠ Ù‡Ù†Ø¯Ø³Ø© Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠØ§Øª', hours: 3, level: 3, prereqs: ['CS102', 'ENG103'] },
            { id: 'PHY105', name: 'ÙÙŠØ²ÙŠØ§Ø¡ Ù¡', hours: 4, level: 3, prereqs: ['MATH111'] },
            { id: 'CS210', name: 'Ù‡ÙŠØ§ÙƒÙ„ Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ®ÙˆØ§Ø±Ø²Ù…ÙŠØ§Øª', hours: 3, level: 3, prereqs: ['CS102'] },
            { id: 'CS285', name: 'Ø±ÙŠØ§Ø¶ÙŠØ§Øª Ù…ØªÙ‚Ø·Ø¹Ø© Ù„Ù„Ø­ÙˆØ³Ø¨Ø©', hours: 3, level: 3, prereqs: ['CS210'] },
            { id: 'ISC105', name: 'Ø¹Ù„ÙˆÙ… Ø§Ù„Ù‚Ø±Ø¢Ù† Ø§Ù„ÙƒØ±ÙŠÙ…', hours: 2, level: 3, prereqs: [] },
            { id: 'COM201', name: 'Ù…Ù‡Ø§Ø±Ø§Øª ØªÙˆØ§ØµÙ„', hours: 3, level: 3, prereqs: [] },
            // Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ù¤
            { id: 'SE365', name: 'ØªÙØ§Ø¹Ù„ Ø¥Ù†Ø³Ø§Ù†-Ø­Ø§Ø³ÙˆØ¨', hours: 3, level: 4, prereqs: ['CS210'] },
            { id: 'SE311', name: 'Ù‡Ù†Ø¯Ø³Ø© Ù…ØªØ·Ù„Ø¨Ø§Øª Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠØ§Øª', hours: 3, level: 4, prereqs: ['SE201'] },
            { id: 'PHY205', name: 'ÙÙŠØ²ÙŠØ§Ø¡ Ù¢', hours: 4, level: 4, prereqs: ['PHY105'] },
            { id: 'CS330', name: 'Ù…Ù‚Ø¯Ù…Ø© ÙÙŠ Ø£Ù†Ø¸Ù…Ø© Ø§Ù„ØªØ´ØºÙŠÙ„', hours: 3, level: 4, prereqs: ['CS175', 'CS210'] },
            { id: 'PSY101', name: 'Ù…Ù‚Ø¯Ù…Ø© ÙÙŠ Ø¹Ù„Ù… Ø§Ù„Ù†ÙØ³', hours: 3, level: 4, prereqs: [] },
            // Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ù¥
            { id: 'SE322', name: 'ØªØµÙ…ÙŠÙ… ÙˆÙ…Ø¹Ù…Ø§Ø±ÙŠØ© Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠØ§Øª', hours: 3, level: 5, prereqs: ['SE311'] },
            { id: 'CYS401', name: 'Ø£Ø³Ø§Ø³ÙŠØ§Øª Ø§Ù„Ø£Ù…Ù† Ø§Ù„Ø³ÙŠØ¨Ø±Ø§Ù†ÙŠ', hours: 3, level: 5, prereqs: ['CS210'] },
            { id: 'CS340', name: 'Ù…Ù‚Ø¯Ù…Ø© ÙÙŠ Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª', hours: 3, level: 5, prereqs: ['CS210'] },
            { id: 'CS331', name: 'Ø§ØªØµØ§Ù„Ø§Øª Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ´Ø¨ÙƒØ§Øª Ø­Ø§Ø³ÙˆØ¨', hours: 3, level: 5, prereqs: ['CS175', 'CS210'] },
            { id: 'ISC203', name: 'Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ© Ø§Ù„Ù…Ø¹Ø§ØµØ±Ø©', hours: 2, level: 5, prereqs: [] },
            { id: 'ARAB103', name: 'ÙƒØªØ§Ø¨Ø© Ù…Ù‡Ù†ÙŠØ© ÙˆØ£Ø¯Ø¨ÙŠØ©', hours: 2, level: 5, prereqs: [] },
            // Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ù¦
            { id: 'CYS403', name: 'Ù…Ø®Ø§Ø·Ø± Ø§Ù„Ø£Ù…Ù† Ø§Ù„Ø³ÙŠØ¨Ø±Ø§Ù†ÙŠ ÙˆØ§Ù„Ø­ÙˆÙƒÙ…Ø© ÙˆØ§Ù„Ø§Ù…ØªØ«Ø§Ù„', hours: 3, level: 6, prereqs: ['CYS401'] },
            { id: 'CYS402', name: 'ØªØ·ÙˆÙŠØ± Ø¨Ø±Ù…Ø¬ÙŠØ§Øª Ø¢Ù…Ù†Ø©', hours: 3, level: 6, prereqs: ['CYS401'] },
            { id: 'SE401', name: 'Ø§Ø®ØªØ¨Ø§Ø± ÙˆØ¶Ù…Ø§Ù† Ø¬ÙˆØ¯Ø© Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠØ§Øª', hours: 3, level: 6, prereqs: ['SE322'] },
            { id: 'SE371', name: 'Ù‡Ù†Ø¯Ø³Ø© Ø§Ù„ÙˆÙŠØ¨', hours: 3, level: 6, prereqs: ['CS210'] },
            { id: 'MATH221', name: 'ØªØ­Ù„ÙŠÙ„ Ø¹Ø¯Ø¯ÙŠ', hours: 3, level: 6, prereqs: ['MATH113'] },
            { id: 'ETHC303', name: 'Ø§Ù„Ø¬ÙˆØ§Ù†Ø¨ Ø§Ù„Ø£Ø®Ù„Ø§Ù‚ÙŠØ© ÙˆØ§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹ÙŠØ© Ù„Ù„Ø­ÙˆØ³Ø¨Ø©', hours: 3, level: 6, prereqs: [] },
            // Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ù§
            { id: 'CYS405', name: 'Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø§Ø®ØªØ±Ø§Ù‚ ÙˆØ§Ù„Ù‚Ø±ØµÙ†Ø© Ø§Ù„Ø£Ø®Ù„Ø§Ù‚ÙŠØ©', hours: 3, level: 7, prereqs: ['CS331', 'CYS401'] },
            { id: 'SE499', name: 'Ù…Ø´Ø±ÙˆØ¹ Ø§Ù„ØªØ®Ø±Ø¬', hours: 3, level: 7, prereqs: ['SE423'] },
            { id: 'SE423', name: 'Ø¥Ø¯Ø§Ø±Ø© Ù…Ø´Ø§Ø±ÙŠØ¹ Ù‡Ù†Ø¯Ø³Ø© Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠØ§Øª', hours: 3, level: 7, prereqs: ['SE401'] },
            { id: 'SE411', name: 'Ø¨Ù†Ø§Ø¡ Ø§Ù„Ø¨Ø±Ù…Ø¬ÙŠØ§Øª', hours: 3, level: 7, prereqs: ['SE401'] },
            { id: 'ARAB203', name: 'Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©', hours: 2, level: 7, prereqs: [] },
            // Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ù¨
            { id: 'SE492', name: 'ØªØ¯Ø±ÙŠØ¨ ØªØ¹Ø§ÙˆÙ†ÙŠ', hours: 10, level: 8, prereqs: ['SE499'] },
            // Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„Ø§Ø®ØªÙŠØ§Ø± Ø£
            { id: 'MATH223', name: 'Ø¬Ø¨Ø± Ø®Ø·ÙŠ', hours: 3, level: 6, prereqs: ['MATH113'], group: 'A' },
            { id: 'CS223', name: 'Ø¬Ø¨Ø± Ø®Ø·ÙŠ Ø­Ø³Ø§Ø¨ÙŠ', hours: 3, level: 6, prereqs: ['CS101', 'MATH113'], group: 'A' },
            // Ù…Ø¬Ù…ÙˆØ¹Ø© Ø§Ù„Ø§Ø®ØªÙŠØ§Ø± Ø¨
            { id: 'CYS406', name: 'Ø£Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØ§Ù„Ø´Ø¨ÙƒØ§Øª', hours: 3, level: 7, prereqs: ['CS331', 'CYS401'], group: 'B' },
            { id: 'CYS404', name: 'Ø£Ù…Ù† Ø§Ù„Ø£Ù†Ø¸Ù…Ø© Ø§Ù„Ø³ÙŠØ¨Ø±Ø§Ù†ÙŠØ©-Ø§Ù„ÙÙŠØ²ÙŠØ§Ø¦ÙŠØ©', hours: 3, level: 7, prereqs: ['CS331', 'CYS401'], group: 'B' },
        ];

        const LEVEL_META = {
            1: { name: 'Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø£ÙˆÙ„ â€” Ø§Ù„ÙØµÙ„ Ø§Ù„Ø£ÙˆÙ„', emoji: 'ğŸŒ±' },
            2: { name: 'Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø«Ø§Ù†ÙŠ â€” Ø§Ù„ÙØµÙ„ Ø§Ù„Ø«Ø§Ù†ÙŠ', emoji: 'ğŸš€' },
            3: { name: 'Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø«Ø§Ù„Ø« â€” Ø§Ù„ÙØµÙ„ Ø§Ù„Ø£ÙˆÙ„', emoji: 'âš™ï¸' },
            4: { name: 'Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø±Ø§Ø¨Ø¹ â€” Ø§Ù„ÙØµÙ„ Ø§Ù„Ø«Ø§Ù†ÙŠ', emoji: 'ğŸ”§' },
            5: { name: 'Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø®Ø§Ù…Ø³ â€” Ø§Ù„ÙØµÙ„ Ø§Ù„Ø£ÙˆÙ„', emoji: 'ğŸ”' },
            6: { name: 'Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø³Ø§Ø¯Ø³ â€” Ø§Ù„ÙØµÙ„ Ø§Ù„Ø«Ø§Ù†ÙŠ', emoji: 'ğŸ›¡ï¸' },
            7: { name: 'Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø³Ø§Ø¨Ø¹ â€” Ø§Ù„ÙØµÙ„ Ø§Ù„Ø£ÙˆÙ„', emoji: 'âš”ï¸' },
            8: { name: 'Ø§Ù„Ù…Ø³ØªÙˆÙ‰ Ø§Ù„Ø«Ø§Ù…Ù† â€” Ø§Ù„ÙØµÙ„ Ø§Ù„Ø«Ø§Ù†ÙŠ', emoji: 'ğŸ“' },
        };

        const LEVEL_COLORS = {
            1: { c: '#f472b6', bg: '#fdf2f8' },
            2: { c: '#fb923c', bg: '#fff7ed' },
            3: { c: '#eab308', bg: '#fefce8' },
            4: { c: '#22c55e', bg: '#f0fdf4' },
            5: { c: '#38bdf8', bg: '#f0f9ff' },
            6: { c: '#a78bfa', bg: '#f5f3ff' },
            7: { c: '#f87171', bg: '#fff1f2' },
            8: { c: '#34d399', bg: '#ecfdf5' },
        };

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           Ø§Ù„Ø­Ø§Ù„Ø©
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        let completed = new Set();
        let choices = { A: 'MATH223', B: 'CYS406' };
        let filter = 'all';
        let searchQ = '';
        let highlighted = null;
        let dark = false;

        function prefersDark() {
            return window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
        }

        function hasStoredTheme() {
            return localStorage.getItem('psu4_dark') !== null;
        }

        function save() {
            localStorage.setItem('psu4_done', JSON.stringify([...completed]));
            localStorage.setItem('psu4_choices', JSON.stringify(choices));
            localStorage.setItem('psu4_dark', dark ? '1' : '0');
        }
        function load() {
            try {
                const d = localStorage.getItem('psu4_done'); if (d) completed = new Set(JSON.parse(d));
                const c = localStorage.getItem('psu4_choices'); if (c) choices = JSON.parse(c);
                const t = localStorage.getItem('psu4_dark'); if (t != null) dark = t === '1';
                if (t === null) dark = prefersDark();
            } catch (e) { }
        }

        function active() {
            return COURSES.filter(c => !c.group || c.id === choices[c.group]);
        }
        function status(c) {
            if (completed.has(c.id)) return 'done';
            return c.prereqs.every(p => completed.has(p)) ? 'avail' : 'locked';
        }
        function allDeps(id) {
            const res = new Set(), q = [id];
            while (q.length) {
                const cur = q.shift();
                active().forEach(c => { if (c.prereqs.includes(cur) && !res.has(c.id)) { res.add(c.id); q.push(c.id); } });
            }
            return [...res];
        }
        function topoSort(ids) {
            const map = {}; ids.forEach(id => { const c = COURSES.find(x => x.id === id); map[id] = c ? c.prereqs.filter(p => ids.includes(p)) : []; });
            const vis = new Set(), res = [];
            function v(id) { if (vis.has(id)) return; vis.add(id); (map[id] || []).forEach(v); res.push(id); }
            ids.forEach(v); return res;
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           Ø¹Ø¨Ø§Ø±Ø§Øª Ø§Ù„ØªØ­ÙÙŠØ²
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        function greeting(pct) {
            if (pct === 0) return "Ù„Ù†Ø¨Ø¯Ø£ Ø±Ø­Ù„ØªÙƒ! ğŸŒŸ";
            if (pct < 20) return "Ø¨Ø¯Ø§ÙŠØ© Ø±Ø§Ø¦Ø¹Ø©! Ø§Ø³ØªÙ…Ø±! ğŸ’ª";
            if (pct < 40) return "Ø£Ù†Øª ØªØ¨Ù†ÙŠ Ø²Ø®Ù…Ø§Ù‹! ğŸ”¥";
            if (pct < 60) return "Ù†ØµÙ Ø§Ù„Ø·Ø±ÙŠÙ‚ â€” Ù„Ø§ ØªØªÙˆÙ‚Ù! âš¡";
            if (pct < 80) return "Ù‚Ø±ÙŠØ¨ Ø¬Ø¯Ø§Ù‹! Ø£Ù†Øª Ø¹Ù„Ù‰ ÙˆØ´Ùƒ! ğŸš€";
            if (pct < 100) return "Ø§Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„Ø£Ø®ÙŠØ±Ø© â€” Ø£Ù†Øª Ù‚Ø§Ø¯Ø±! ğŸ";
            return "Ø£Ø­Ø³Ù†Øª!! ØªØ®Ø±Ø¬Øª! ğŸ“ğŸ‰";
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        function updateStats() {
            const act = active();
            const th = act.reduce((s, c) => s + c.hours, 0);
            const ch = act.filter(c => completed.has(c.id)).reduce((s, c) => s + c.hours, 0);
            const tc = act.length;
            const cc = act.filter(c => completed.has(c.id)).length;
            const pct = th > 0 ? Math.round(ch / th * 100) : 0;
            document.getElementById('heroH').textContent = `${ch} / ${th}`;
            document.getElementById('heroC').textContent = `${cc} / ${tc}`;
            document.getElementById('heroPct').textContent = `${pct}%`;
            document.getElementById('heroBar').style.width = pct + '%';
            document.getElementById('heroGreeting').textContent = greeting(pct);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           Ø¹Ø±Ø¶ Ø§Ù„Ø®Ø±ÙŠØ·Ø©
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        function render() {
            updateStats();
            const act = active();
            const levels = [...new Set(act.map(c => c.level))].sort((a, b) => a - b);
            const rm = document.getElementById('roadmap');
            rm.innerHTML = '';

            const q = searchQ.toLowerCase();
            let anyVisible = false;

            levels.forEach(lv => {
                const lc = LEVEL_COLORS[lv];
                const lm = LEVEL_META[lv] || { name: `Ø§Ù„Ù…Ø³ØªÙˆÙ‰ ${lv}`, emoji: 'ğŸ“š' };

                // Ø¬Ù…ÙŠØ¹ Ù…Ù‚Ø±Ø±Ø§Øª Ù‡Ø°Ø§ Ø§Ù„Ù…Ø³ØªÙˆÙ‰ØŒ Ù…Ø±ØªØ¨Ø© Ø­Ø³Ø¨ Ø§Ù„Ø±Ù…Ø²
                let lvCourses = act.filter(c => c.level === lv).sort((a, b) => a.id.localeCompare(b.id));

                // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª ØºÙŠØ± Ø§Ù„Ù†Ø´Ø·Ø© ÙÙŠ Ù…Ø³ØªÙˆØ§Ù‡Ø§
                const inactiveHere = COURSES.filter(c => c.group && c.id !== choices[c.group] && c.level === lv);

                // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø¨Ø­Ø«
                const searchFiltered = [...lvCourses, ...inactiveHere].filter(c => {
                    if (!q) return true;
                    return c.id.toLowerCase().includes(q) || c.name.toLowerCase().includes(q);
                });

                // ØªØ·Ø¨ÙŠÙ‚ ØªØµÙÙŠØ© Ø§Ù„Ø­Ø§Ù„Ø©
                const statusFiltered = searchFiltered.filter(c => {
                    const inactive = !!(c.group && c.id !== choices[c.group]);
                    if (inactive) return filter === 'all' || filter === 'locked';
                    const st = status(c);
                    if (filter === 'avail' && st !== 'avail') return false;
                    if (filter === 'locked' && st !== 'locked') return false;
                    if (filter === 'done' && st !== 'done') return false;
                    return true;
                });

                if (!statusFiltered.length) return;
                anyVisible = true;

                const doneCount = lvCourses.filter(c => completed.has(c.id)).length;
                const totalCount = lvCourses.length;
                const totalHrs = lvCourses.reduce((s, c) => s + c.hours, 0);

                const block = document.createElement('div');
                block.className = 'level-block';
                block.dataset.level = lv;

                block.innerHTML = `
      <div class="level-node">
        <div class="level-bubble" style="--lc:${lc.c};--lcb:${lc.bg};">${lm.emoji}</div>
        <div class="level-meta">
          <div class="level-num-label">Ø§Ù„Ù…Ø³ØªÙˆÙ‰ ${lv}</div>
          <div class="level-done-frac">${doneCount}/${totalCount}</div>
        </div>
        <div class="level-connector" style="background:${lc.c}"></div>
      </div>
      <div class="level-cards">
        <div class="level-label-row">
          <span class="level-title">${lm.name}</span>
          <span class="level-hrs-badge" style="--lc:${lc.c};--lcb:${lc.bg};">${totalHrs} Ø³Ø§Ø¹Ø©</span>
          <span class="level-caret">â–¼</span>
        </div>
        <div class="level-cards-grid"></div>
      </div>
    `;

                // Ø·ÙŠ/ØªÙˆØ³ÙŠØ¹
                block.querySelector('.level-label-row').addEventListener('click', () => {
                    block.classList.toggle('collapsed');
                });
                block.querySelector('.level-bubble').addEventListener('click', () => {
                    block.classList.toggle('collapsed');
                });

                const grid = block.querySelector('.level-cards-grid');

                statusFiltered.forEach(course => {
                    const inactive = !!(course.group && course.id !== choices[course.group]);
                    const st = inactive ? 'locked' : status(course);

                    const card = document.createElement('div');
                    card.className = `ccard st-${st}${inactive ? ' inactive' : ''}${highlighted === course.id ? ' highlighted' : ''}`;
                    card.dataset.id = course.id;
                    card.style.setProperty('--lc', inactive ? 'var(--ink4)' : lc.c);
                    card.style.setProperty('--lcb', inactive ? 'var(--surface2)' : lc.bg);

                    const prereqHtml = course.prereqs.map(p => {
                        const met = completed.has(p);
                        return `<span class="pr-chip ${met ? 'met' : 'unmet'}" data-prereq="${p}">${p}</span>`;
                    }).join('');

                    const statusLabel = inactive ? 'ØºÙŠØ± Ù…ÙØ®ØªØ§Ø±'
                        : st === 'done' ? 'Ù…ÙƒØªÙ…Ù„'
                            : st === 'avail' ? 'Ù…ØªØ§Ø­'
                                : 'Ù…Ù‚ÙÙ„';
                    const statusCls = inactive ? 's-locked'
                        : `s-${st}`;

                    card.innerHTML = `
        <div class="cc-top">
          <span class="cc-code">${course.id}${course.group ? ` <span style="font-size:8px;opacity:.7">Ù…Ø¬Ù…ÙˆØ¹Ø© ${course.group}</span>` : ''}</span>
          <div class="cc-check">${st === 'done' ? 'âœ“' : (st === 'locked' ? 'âŠ˜' : '')}</div>
        </div>
        <div class="cc-name">${course.name}</div>
        <div class="cc-footer">
          <span class="cc-hrs">${course.hours} Ø³Ø§Ø¹Ø©</span>
          <div class="cc-prereqs">${prereqHtml}</div>
          <span class="cc-status ${statusCls}">${statusLabel}</span>
        </div>
      `;

                    if (!inactive) {
                        card.addEventListener('click', e => {
                            if (e.target.closest('.pr-chip')) return;
                            toggleCourse(course.id);
                        });
                    }
                    card.querySelectorAll('.pr-chip').forEach(chip => {
                        chip.addEventListener('click', e => {
                            e.stopPropagation();
                            const pid = chip.dataset.prereq;
                            highlighted = highlighted === pid ? null : pid;
                            render();
                            const el = document.querySelector(`.ccard[data-id="${pid}"]`);
                            if (el) el.scrollIntoView({ behavior: 'smooth', block: 'center' });
                        });
                    });

                    grid.appendChild(card);
                });

                rm.appendChild(block);
            });

            if (!anyVisible) {
                rm.innerHTML = '<div class="roadmap-empty"><span class="e-icon">ğŸ”</span>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù‚Ø±Ø±Ø§Øª Ù…Ø·Ø§Ø¨Ù‚Ø©.</div>';
            }

            // ØªØ­Ø¯ÙŠØ« Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±
            ['A', 'B'].forEach(g => {
                document.querySelectorAll(`.choice-btn[data-group="${g}"]`).forEach(b => {
                    b.classList.toggle('on', b.dataset.val === choices[g]);
                });
            });
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           ØªØ¨Ø¯ÙŠÙ„ Ø­Ø§Ù„Ø© Ø§Ù„Ù…Ù‚Ø±Ø±
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        function toggleCourse(id) {
            const course = COURSES.find(c => c.id === id);
            if (!course) return;
            if (completed.has(id)) {
                const deps = allDeps(id).filter(d => completed.has(d));
                if (deps.length) {
                    showModal('Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù…Ù‚Ø±Ø±Ø§Øª Ø§Ù„Ù…Ø±ØªØ¨Ø·Ø©ØŸ',
                        `Ø¥Ù„ØºØ§Ø¡ ØªØ­Ø¯ÙŠØ¯ <b>${id}</b> Ø³ÙŠÙ„ØºÙŠ Ø£ÙŠØ¶Ø§Ù‹:`, deps,
                        () => { completed.delete(id); deps.forEach(d => completed.delete(d)); save(); render(); toast(`ØªÙ… Ø¥Ø²Ø§Ù„Ø© ${id} Ùˆ ${deps.length} Ù…Ù‚Ø±Ø±Ø§Øª Ù…Ø±ØªØ¨Ø·Ø©`, 'err'); }
                    );
                } else {
                    completed.delete(id); save(); render();
                    toast(`ØªÙ… Ø¥Ù„ØºØ§Ø¡ ${id}`, 'err');
                }
            } else {
                const missing = course.prereqs.filter(p => !completed.has(p));
                if (missing.length) { toast(`ØªØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ ${missing.join(', ')} Ø£ÙˆÙ„Ø§Ù‹ ğŸ”’`, 'err'); return; }
                completed.add(id); save(); render();
                confetti(); toast(`ØªÙ… Ø¥ÙƒÙ…Ø§Ù„ ${course.id}! ğŸ‰`, 'ok');
            }
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           Ù‚ØµØ§ØµØ§Øª Ù…Ù„ÙˆÙ†Ø©
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        function confetti() {
            const colors = ['#a78bfa', '#60a5fa', '#34d399', '#fbbf24', '#f472b6', '#fb923c', '#f87171', '#4ade80'];
            for (let i = 0; i < 22; i++) {
                const el = document.createElement('div');
                el.className = 'conf-piece';
                const sz = 6 + Math.random() * 10;
                el.style.cssText = `
      left:${Math.random() * 100}vw;
      width:${sz}px; height:${sz * 1.4}px;
      background:${colors[Math.floor(Math.random() * colors.length)]};
      animation-duration:${0.9 + Math.random() * 0.7}s;
      animation-delay:${Math.random() * 0.25}s;
      border-radius:${Math.random() > .5 ? '50%' : '3px'};
      transform:rotate(${Math.random() * 360}deg);
    `;
                document.body.appendChild(el);
                el.addEventListener('animationend', () => el.remove());
            }
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           Ù†Ø§ÙØ°Ø© Ù…Ù†Ø¨Ø«Ù‚Ø©
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        function showModal(title, msg, items, onOk) {
            const ov = document.createElement('div');
            ov.className = 'modal-ov';
            ov.innerHTML = `
    <div class="modal-box">
      <div class="modal-head"><h3>${title}</h3><p>Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ ÙŠØ¤Ø«Ø± Ø¹Ù„Ù‰ ØªÙ‚Ø¯Ù…Ùƒ</p></div>
      <div class="modal-body">
        <p>${msg}</p>
        <ul class="modal-list">${items.map(i => `<li>${i}</li>`).join('')}</ul>
        <div class="modal-acts">
          <button class="pill pill-ghost" id="mCx">Ø¥Ù„ØºØ§Ø¡</button>
          <button class="pill pill-red"   id="mOk">ØªØ£ÙƒÙŠØ¯</button>
        </div>
      </div>
    </div>`;
            document.body.appendChild(ov);
            ov.querySelector('#mCx').addEventListener('click', () => ov.remove());
            ov.querySelector('#mOk').addEventListener('click', () => { ov.remove(); onOk(); });
            ov.addEventListener('click', e => { if (e.target === ov) ov.remove(); });
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           Ø¥Ø´Ø¹Ø§Ø±
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        function toast(msg, type = 'inf') {
            const r = document.getElementById('toasts');
            const t = document.createElement('div');
            t.className = `t-toast ${type}`; t.textContent = msg;
            r.appendChild(t);
            setTimeout(() => { t.style.transition = 'all .3s'; t.style.opacity = '0'; t.style.transform = 'translateY(8px) scale(0.9)'; setTimeout(() => t.remove(), 300); }, 2800);
        }

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           Ø±Ø¨Ø· Ø§Ù„Ø£Ø­Ø¯Ø§Ø«
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        // Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø§Ø®ØªÙŠØ§Ø±
        document.querySelectorAll('.choice-btn').forEach(btn => {
            btn.addEventListener('click', () => {
                const g = btn.dataset.group, val = btn.dataset.val;
                if (choices[g] === val) return;
                const old = choices[g];
                const aff = completed.has(old) ? [old, ...allDeps(old).filter(d => completed.has(d))] : [];
                const doSwitch = () => { aff.forEach(d => completed.delete(d)); choices[g] = val; save(); render(); toast(`Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© ${g}: ØªÙ… Ø§Ø®ØªÙŠØ§Ø± ${val} âœ“`, 'ok'); };
                if (aff.length) showModal(`ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ù…Ø¬Ù…ÙˆØ¹Ø© ${g}?`, `Ø³ÙŠØªÙ… Ø¥Ø²Ø§Ù„Ø©:`, aff, doSwitch);
                else doSwitch();
            });
        });

        // Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØµÙÙŠØ©
        document.querySelectorAll('.fchip').forEach(btn => {
            btn.addEventListener('click', () => {
                filter = btn.dataset.f;
                document.querySelectorAll('.fchip').forEach(b => b.classList.remove('on'));
                btn.classList.add('on');
                render();
            });
        });

        // Ø§Ù„Ø¨Ø­Ø«
        document.getElementById('searchInput').addEventListener('input', e => { searchQ = e.target.value; render(); });

        // Ø§Ù„Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„Ø³Ø±ÙŠØ¹
        document.getElementById('mark13Btn').addEventListener('click', () => {
            const ids = topoSort(active().filter(c => c.level <= 3).map(c => c.id));
            ids.forEach(id => completed.add(id)); save(); render(); confetti();
            toast('ØªÙ… Ø¥ÙƒÙ…Ø§Ù„ Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª Ù¡-Ù£! ğŸš€', 'ok');
        });
        document.getElementById('markAllBtn').addEventListener('click', () => {
            showModal('ØªØ­Ø¯ÙŠØ¯ Ø§Ù„ÙƒÙ„ ÙƒÙ…ÙƒØªÙ…Ù„ØŸ', 'ØªØ­Ø¯ÙŠØ¯ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù‚Ø±Ø±Ø§Øª Ø§Ù„Ù†Ø´Ø·Ø© ÙƒÙ…ÙƒØªÙ…Ù„Ø©ØŸ', [], () => {
                topoSort(active().map(c => c.id)).forEach(id => completed.add(id));
                save(); render(); confetti(); toast('ØªÙ‡Ø§Ù†ÙŠÙ†Ø§ Ø¹Ù„Ù‰ Ø§Ù„ØªØ®Ø±Ø¬!! ğŸ“ğŸ‰', 'ok');
            });
        });
        document.getElementById('resetBtn').addEventListener('click', () => {
            showModal('Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„ØªÙ‚Ø¯Ù…ØŸ', 'Ù…Ø³Ø­ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù‚Ø±Ø±Ø§Øª Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø©ØŸ', [], () => {
                completed.clear(); save(); render(); toast('ØªÙ… Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† Ø§Ù„ØªÙ‚Ø¯Ù…', 'err');
            });
        });
        document.getElementById('themeBtn').addEventListener('click', () => {
            dark = !dark;
            document.body.classList.toggle('dark', dark);
            save();
        });

        /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           Ø§Ù„ØªÙ‡ÙŠØ¦Ø©
        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
        load();
        document.body.classList.toggle('dark', dark);
        const media = window.matchMedia ? window.matchMedia('(prefers-color-scheme: dark)') : null;
        if (media) {
            const syncWithSystem = (e) => {
                if (hasStoredTheme()) return;
                dark = e.matches;
                document.body.classList.toggle('dark', dark);
            };
            if (media.addEventListener) media.addEventListener('change', syncWithSystem);
            else if (media.addListener) media.addListener(syncWithSystem);
        }
        render();
    </script>
</body>

</html>
