<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CS340 Database Systems - Complete Exam</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #2563eb;
            --primary-dark: #1e40af;
            --success: #10b981;
            --danger: #ef4444;
            --warning: #f59e0b;
            --bg: #f8fafc;
            --card-bg: #ffffff;
            --text: #1e293b;
            --text-light: #64748b;
            --border: #e2e8f0;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
            padding: 20px;
        }

        .dark-mode {
            --bg: #0f172a;
            --card-bg: #1e293b;
            --text: #f1f5f9;
            --text-light: #94a3b8;
            --border: #334155;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header-info {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .info-item {
            background: rgba(255, 255, 255, 0.2);
            padding: 10px 20px;
            border-radius: 8px;
        }

        .controls {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        button {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: all 0.3s;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3);
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-success:hover {
            background: #059669;
            transform: translateY(-2px);
        }

        .progress-bar {
            background: var(--card-bg);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 30px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .progress-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-weight: 600;
        }

        .progress {
            height: 20px;
            background: var(--border);
            border-radius: 10px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--success), var(--primary));
            transition: width 0.3s;
        }

        .section {
            background: var(--card-bg);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--border);
            cursor: pointer;
        }

        .section-header h2 {
            font-size: 1.8em;
            color: var(--primary);
        }

        .toggle-icon {
            font-size: 1.5em;
            transition: transform 0.3s;
        }

        .section.collapsed .section-content {
            display: none;
        }

        .section.collapsed .toggle-icon {
            transform: rotate(-90deg);
        }

        .question {
            margin-bottom: 30px;
            padding: 20px;
            border-left: 4px solid var(--primary);
            background: var(--bg);
            border-radius: 8px;
        }

        .question-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 15px;
        }

        .question-number {
            background: var(--primary);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-weight: 600;
        }

        .question-points {
            color: var(--text-light);
            font-size: 0.9em;
        }

        .question-text {
            font-size: 1.1em;
            margin-bottom: 15px;
            font-weight: 500;
        }

        .options {
            margin-left: 20px;
        }

        .option {
            margin: 10px 0;
            padding: 12px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .option:hover {
            background: var(--border);
        }

        .option input[type="radio"] {
            margin-right: 10px;
            cursor: pointer;
        }

        .option label {
            cursor: pointer;
        }

        textarea {
            width: 100%;
            min-height: 150px;
            padding: 15px;
            border: 2px solid var(--border);
            border-radius: 8px;
            font-family: inherit;
            font-size: 1em;
            background: var(--card-bg);
            color: var(--text);
            resize: vertical;
        }

        textarea:focus {
            outline: none;
            border-color: var(--primary);
        }

        .code-block {
            background: #1e293b;
            color: #f1f5f9;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
        }

        .feedback {
            margin-top: 15px;
            padding: 15px;
            border-radius: 8px;
            display: none;
        }

        .feedback.show {
            display: block;
        }

        .feedback.correct {
            background: #d1fae5;
            border-left: 4px solid var(--success);
            color: #065f46;
        }

        .feedback.incorrect {
            background: #fee2e2;
            border-left: 4px solid var(--danger);
            color: #991b1b;
        }

        .feedback.partial {
            background: #fef3c7;
            border-left: 4px solid var(--warning);
            color: #92400e;
        }

        .model-answer {
            background: var(--card-bg);
            border: 2px solid var(--primary);
            padding: 15px;
            border-radius: 8px;
            margin-top: 10px;
        }

        .model-answer-title {
            font-weight: 600;
            color: var(--primary);
            margin-bottom: 10px;
        }

        .explanation {
            background: #eff6ff;
            padding: 15px;
            border-radius: 8px;
            margin-top: 10px;
            border-left: 4px solid var(--primary);
        }

        .dark-mode .explanation {
            background: #1e3a5f;
        }

        .keywords {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }

        .keyword {
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: 500;
        }

        .keyword.found {
            background: #d1fae5;
            color: #065f46;
        }

        .keyword.missing {
            background: #fee2e2;
            color: #991b1b;
        }

        .score-card {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            margin-top: 30px;
            display: none;
        }

        .score-card.show {
            display: block;
        }

        .score-number {
            font-size: 4em;
            font-weight: bold;
            margin: 20px 0;
        }

        .score-breakdown {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .score-item {
            background: rgba(255, 255, 255, 0.2);
            padding: 15px;
            border-radius: 8px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }

        th, td {
            padding: 12px;
            text-align: left;
            border: 1px solid var(--border);
        }

        th {
            background: var(--primary);
            color: white;
            font-weight: 600;
        }

        tr:nth-child(even) {
            background: var(--bg);
        }

        .timer {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--card-bg);
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            font-size: 1.2em;
            font-weight: 600;
            z-index: 1000;
        }

        .dark-mode-toggle {
            position: fixed;
            top: 80px;
            right: 20px;
            z-index: 1000;
        }

        @media print {
            .controls, .timer, .dark-mode-toggle {
                display: none;
            }
            
            .section {
                page-break-inside: avoid;
            }
        }

        @media (max-width: 768px) {
            h1 {
                font-size: 1.8em;
            }

            .header-info {
                flex-direction: column;
            }

            .timer {
                position: static;
                margin-bottom: 20px;
            }

            .dark-mode-toggle {
                position: static;
                margin-bottom: 20px;
            }
        }
    </style>
</head>
<body>
    <div class="timer" id="timer">Time: 00:00:00</div>
    
    <div class="container">
        <header>
            <h1>üéì CS340 Database Systems</h1>
            <p>Comprehensive Final Examination</p>
            <div class="header-info">
                <div class="info-item">
                    <strong>Course:</strong> Introduction to Database Systems
                </div>
                <div class="info-item">
                    <strong>Total Points:</strong> <span id="totalPoints">100</span>
                </div>
                <div class="info-item">
                    <strong>Duration:</strong> 180 minutes
                </div>
            </div>
        </header>

        <div class="controls">
            <button class="btn-primary dark-mode-toggle" onclick="toggleDarkMode()">üåô Dark Mode</button>
            <button class="btn-primary" onclick="submitAll()">üìù Submit All Answers</button>
            <button class="btn-success" onclick="showAllAnswers()">üëÅÔ∏è Show All Model Answers</button>
            <button class="btn-primary" onclick="resetExam()">üîÑ Reset Exam</button>
        </div>

        <div class="progress-bar">
            <div class="progress-label">
                <span>Progress</span>
                <span id="progressText">0/0 answered</span>
            </div>
            <div class="progress">
                <div class="progress-fill" id="progressFill" style="width: 0%"></div>
            </div>
        </div>

        <!-- Section 1: Multiple Choice Questions -->
        <div class="section" id="section1">
            <div class="section-header" onclick="toggleSection('section1')">
                <h2>üìã Section 1: Multiple Choice Questions (25 marks)</h2>
                <span class="toggle-icon">‚ñº</span>
            </div>
            <div class="section-content">
                <!-- Question 1 -->
                <div class="question" data-type="mcq" data-answer="b" data-points="2.5">
                    <div class="question-header">
                        <span class="question-number">Q1</span>
                        <span class="question-points">2.5 marks</span>
                    </div>
                    <div class="question-text">
                        Choose the steps for designing and implementing a database in the correct order:
                        <ol>
                            <li>Create your own application</li>
                            <li>Decide how to query</li>
                            <li>Logical modeling</li>
                            <li>Conceptual modeling</li>
                            <li>Optimize the design</li>
                        </ol>
                    </div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q1" value="a" id="q1a">
                            <label for="q1a">III, IV, II, V, I</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q1" value="b" id="q1b">
                            <label for="q1b">IV, III, V, II, I</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q1" value="c" id="q1c">
                            <label for="q1c">IV, III, V, II, I</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q1" value="d" id="q1d">
                            <label for="q1d">III, IV, V, II, I</label>
                        </div>
                    </div>
                    <div class="feedback" id="feedback-q1">
                        <div class="model-answer">
                            <div class="model-answer-title">‚úì Model Answer: B</div>
                            <p>The correct order is: IV (Conceptual modeling), III (Logical modeling), V (Optimize the design), II (Decide how to query), I (Create your own application)</p>
                        </div>
                        <div class="explanation">
                            <strong>Explanation:</strong> Database design follows a systematic approach starting with conceptual design (ER diagrams), then logical design (relational schema), optimization (normalization), query design (SQL), and finally application development.
                        </div>
                    </div>
                </div>

                <!-- Question 2 -->
                <div class="question" data-type="mcq" data-answer="b" data-points="2.5">
                    <div class="question-header">
                        <span class="question-number">Q2</span>
                        <span class="question-points">2.5 marks</span>
                    </div>
                    <div class="question-text">
                        Storing the same data in many places is called:
                    </div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q2" value="a" id="q2a">
                            <label for="q2a">Iteration</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q2" value="b" id="q2b">
                            <label for="q2b">Redundancy</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q2" value="c" id="q2c">
                            <label for="q2c">Concurrency</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q2" value="d" id="q2d">
                            <label for="q2d">Multiplication</label>
                        </div>
                    </div>
                    <div class="feedback" id="feedback-q2">
                        <div class="model-answer">
                            <div class="model-answer-title">‚úì Model Answer: B - Redundancy</div>
                        </div>
                        <div class="explanation">
                            <strong>Explanation:</strong> Redundancy refers to storing duplicate copies of the same data in multiple locations. This can lead to data inconsistency and wasted storage space.
                        </div>
                    </div>
                </div>

                <!-- Question 3 -->
                <div class="question" data-type="mcq" data-answer="a" data-points="2.5">
                    <div class="question-header">
                        <span class="question-number">Q3</span>
                        <span class="question-points">2.5 marks</span>
                    </div>
                    <div class="question-text">
                        Which of the following enables the user to modify data structures without affecting existing programs that use them?
                    </div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q3" value="a" id="q3a">
                            <label for="q3a">Data independence</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q3" value="b" id="q3b">
                            <label for="q3b">Data dependence</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q3" value="c" id="q3c">
                            <label for="q3c">Data relationships</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q3" value="d" id="q3d">
                            <label for="q3d">Data Integration</label>
                        </div>
                    </div>
                    <div class="feedback" id="feedback-q3">
                        <div class="model-answer">
                            <div class="model-answer-title">‚úì Model Answer: A - Data Independence</div>
                        </div>
                        <div class="explanation">
                            <strong>Explanation:</strong> Data independence is the capacity to change the schema at one level without affecting the schema at the next higher level. It allows modifications to data structures without impacting application programs.
                        </div>
                    </div>
                </div>

                <!-- Question 4 -->
                <div class="question" data-type="mcq" data-answer="d" data-points="2.5">
                    <div class="question-header">
                        <span class="question-number">Q4</span>
                        <span class="question-points">2.5 marks</span>
                    </div>
                    <div class="question-text">
                        What is TRUE about the Conceptual level?
                    </div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q4" value="a" id="q4a">
                            <label for="q4a">Describes how the entire database is structured conceptually</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q4" value="b" id="q4b">
                            <label for="q4b">Conceptually, a database describes what data will be stored and relationships</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q4" value="c" id="q4c">
                            <label for="q4c">Details of internal implementation are hidden at the conceptual level</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q4" value="d" id="q4d">
                            <label for="q4d">All of the above</label>
                        </div>
                    </div>
                    <div class="feedback" id="feedback-q4">
                        <div class="model-answer">
                            <div class="model-answer-title">‚úì Model Answer: D - All of the above</div>
                        </div>
                        <div class="explanation">
                            <strong>Explanation:</strong> The conceptual level describes the entire database structure, what data is stored, relationships between data, and hides physical implementation details.
                        </div>
                    </div>
                </div>

                <!-- Question 5 -->
                <div class="question" data-type="mcq" data-answer="c" data-points="2.5">
                    <div class="question-header">
                        <span class="question-number">Q5</span>
                        <span class="question-points">2.5 marks</span>
                    </div>
                    <div class="question-text">
                        Which architectures are common for web applications?
                    </div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q5" value="a" id="q5a">
                            <label for="q5a">One tier</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q5" value="b" id="q5b">
                            <label for="q5b">Two tiers</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q5" value="c" id="q5c">
                            <label for="q5c">Three tiers</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q5" value="d" id="q5d">
                            <label for="q5d">Centralized</label>
                        </div>
                    </div>
                    <div class="feedback" id="feedback-q5">
                        <div class="model-answer">
                            <div class="model-answer-title">‚úì Model Answer: C - Three tiers</div>
                        </div>
                        <div class="explanation">
                            <strong>Explanation:</strong> Three-tier architecture is the most common for web applications, consisting of: presentation layer (client), application layer (business logic), and data layer (database).
                        </div>
                    </div>
                </div>

                <!-- Question 6 -->
                <div class="question" data-type="mcq" data-answer="c" data-points="2.5">
                    <div class="question-header">
                        <span class="question-number">Q6</span>
                        <span class="question-points">2.5 marks</span>
                    </div>
                    <div class="question-text">
                        Who determines the requirements of end-users and develops specifications for those requirements?
                    </div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q6" value="a" id="q6a">
                            <label for="q6a">Database administrators</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q6" value="b" id="q6b">
                            <label for="q6b">Application programmers</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q6" value="c" id="q6c">
                            <label for="q6c">System analyst</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q6" value="d" id="q6d">
                            <label for="q6d">Auditors</label>
                        </div>
                    </div>
                    <div class="feedback" id="feedback-q6">
                        <div class="model-answer">
                            <div class="model-answer-title">‚úì Model Answer: C - System analyst</div>
                        </div>
                        <div class="explanation">
                            <strong>Explanation:</strong> System analysts are responsible for understanding user requirements and developing specifications that guide database design and implementation.
                        </div>
                    </div>
                </div>

                <!-- Question 7 -->
                <div class="question" data-type="mcq" data-answer="d" data-points="2.5">
                    <div class="question-header">
                        <span class="question-number">Q7</span>
                        <span class="question-points">2.5 marks</span>
                    </div>
                    <div class="question-text">
                        Which offers the ability to query the data and insert, alter, and delete tuples?
                    </div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q7" value="a" id="q7a">
                            <label for="q7a">Transaction Control Language (TCL)</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q7" value="b" id="q7b">
                            <label for="q7b">Data Control Language (DCL)</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q7" value="c" id="q7c">
                            <label for="q7c">Data Definition Language (DDL)</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q7" value="d" id="q7d">
                            <label for="q7d">Data Manipulation Language (DML)</label>
                        </div>
                    </div>
                    <div class="feedback" id="feedback-q7">
                        <div class="model-answer">
                            <div class="model-answer-title">‚úì Model Answer: D - Data Manipulation Language (DML)</div>
                        </div>
                        <div class="explanation">
                            <strong>Explanation:</strong> DML includes commands like SELECT, INSERT, UPDATE, and DELETE that allow users to manipulate data in the database.
                        </div>
                    </div>
                </div>

                <!-- Question 8 -->
                <div class="question" data-type="mcq" data-answer="d" data-points="2.5">
                    <div class="question-header">
                        <span class="question-number">Q8</span>
                        <span class="question-points">2.5 marks</span>
                    </div>
                    <div class="question-text">
                        What is the primary function of a 'foreign key' in a relational database?
                    </div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q8" value="a" id="q8a">
                            <label for="q8a">To uniquely identify a tuple in its own relation</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q8" value="b" id="q8b">
                            <label for="q8b">To enforce domain constraints</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q8" value="c" id="q8c">
                            <label for="q8c">To prevent null values</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q8" value="d" id="q8d">
                            <label for="q8d">To link tuples from one relation to tuples in another relation</label>
                        </div>
                    </div>
                    <div class="feedback" id="feedback-q8">
                        <div class="model-answer">
                            <div class="model-answer-title">‚úì Model Answer: D</div>
                        </div>
                        <div class="explanation">
                            <strong>Explanation:</strong> A foreign key establishes and enforces a link between data in two tables, maintaining referential integrity by ensuring that values in one table correspond to valid values in another table.
                        </div>
                    </div>
                </div>

                <!-- Question 9 -->
                <div class="question" data-type="mcq" data-answer="d" data-points="2.5">
                    <div class="question-header">
                        <span class="question-number">Q9</span>
                        <span class="question-points">2.5 marks</span>
                    </div>
                    <div class="question-text">
                        Which ACID property ensures that once a transaction is committed, its changes remain permanently, unaffected by system failures?
                    </div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q9" value="a" id="q9a">
                            <label for="q9a">Atomicity</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q9" value="b" id="q9b">
                            <label for="q9b">Consistency</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q9" value="c" id="q9c">
                            <label for="q9c">Isolation</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q9" value="d" id="q9d">
                            <label for="q9d">Durability</label>
                        </div>
                    </div>
                    <div class="feedback" id="feedback-q9">
                        <div class="model-answer">
                            <div class="model-answer-title">‚úì Model Answer: D - Durability</div>
                        </div>
                        <div class="explanation">
                            <strong>Explanation:</strong> Durability guarantees that once a transaction has been committed, it will remain so, even in the event of power loss, crashes, or errors. The transaction's updates are permanently recorded in the database.
                        </div>
                    </div>
                </div>

                <!-- Question 10 -->
                <div class="question" data-type="mcq" data-answer="b" data-points="2.5">
                    <div class="question-header">
                        <span class="question-number">Q10</span>
                        <span class="question-points">2.5 marks</span>
                    </div>
                    <div class="question-text">
                        A weak entity type always has a _______ participation constraint with respect to its identifying relationships.
                    </div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q10" value="a" id="q10a">
                            <label for="q10a">Partial</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q10" value="b" id="q10b">
                            <label for="q10b">Total</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q10" value="c" id="q10c">
                            <label for="q10c">Overlap</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q10" value="d" id="q10d">
                            <label for="q10d">Disjoint</label>
                        </div>
                    </div>
                    <div class="feedback" id="feedback-q10">
                        <div class="model-answer">
                            <div class="model-answer-title">‚úì Model Answer: B - Total</div>
                        </div>
                        <div class="explanation">
                            <strong>Explanation:</strong> A weak entity cannot exist without its owner entity, therefore it must have total participation (every entity must participate) in its identifying relationship.
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Section 2: True/False Questions -->
        <div class="section" id="section2">
            <div class="section-header" onclick="toggleSection('section2')">
                <h2>‚úì Section 2: True/False Questions (15 marks)</h2>
                <span class="toggle-icon">‚ñº</span>
            </div>
            <div class="section-content">
                <!-- Question 11 -->
                <div class="question" data-type="mcq" data-answer="true" data-points="1.5">
                    <div class="question-header">
                        <span class="question-number">Q11</span>
                        <span class="question-points">1.5 marks</span>
                    </div>
                    <div class="question-text">
                        Entity Integrity constraint ensures that no primary key attribute can be null.
                    </div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q11" value="true" id="q11t">
                            <label for="q11t">True</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q11" value="false" id="q11f">
                            <label for="q11f">False</label>
                        </div>
                    </div>
                    <div class="feedback" id="feedback-q11">
                        <div class="model-answer">
                            <div class="model-answer-title">‚úì Model Answer: TRUE</div>
                        </div>
                        <div class="explanation">
                            <strong>Explanation:</strong> Entity integrity requires that primary key attributes cannot contain NULL values because they must uniquely identify each tuple in a relation.
                        </div>
                    </div>
                </div>

                <!-- Question 12 -->
                <div class="question" data-type="mcq" data-answer="true" data-points="1.5">
                    <div class="question-header">
                        <span class="question-number">Q12</span>
                        <span class="question-points">1.5 marks</span>
                    </div>
                    <div class="question-text">
                        Referential integrity constraints can prevent the deletion of a tuple in one relation if it is referenced by tuples in another relation.
                    </div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q12" value="true" id="q12t">
                            <label for="q12t">True</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q12" value="false" id="q12f">
                            <label for="q12f">False</label>
                        </div>
                    </div>
                    <div class="feedback" id="feedback-q12">
                        <div class="model-answer">
                            <div class="model-answer-title">‚úì Model Answer: TRUE</div>
                        </div>
                        <div class="explanation">
                            <strong>Explanation:</strong> Referential integrity ensures that foreign key values must match existing primary key values. Deleting a referenced tuple would violate this constraint (unless CASCADE is specified).
                        </div>
                    </div>
                </div>

                <!-- Question 13 -->
                <div class="question" data-type="mcq" data-answer="false" data-points="1.5">
                    <div class="question-header">
                        <span class="question-number">Q13</span>
                        <span class="question-points">1.5 marks</span>
                    </div>
                    <div class="question-text">
                        The Data Definition Language (DDL) is used to manipulate data in the database, such as inserting and updating records.
                    </div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q13" value="true" id="q13t">
                            <label for="q13t">True</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q13" value="false" id="q13f">
                            <label for="q13f">False</label>
                        </div>
                    </div>
                    <div class="feedback" id="feedback-q13">
                        <div class="model-answer">
                            <div class="model-answer-title">‚úì Model Answer: FALSE</div>
                            <p><strong>Correction:</strong> Data Manipulation Language (DML) is used to manipulate data. DDL is used to define database structures (CREATE, ALTER, DROP).</p>
                        </div>
                        <div class="explanation">
                            <strong>Explanation:</strong> DDL defines schema and structure, while DML (SELECT, INSERT, UPDATE, DELETE) manipulates the actual data.
                        </div>
                    </div>
                </div>

                <!-- Question 14 -->
                <div class="question" data-type="mcq" data-answer="false" data-points="1.5">
                    <div class="question-header">
                        <span class="question-number">Q14</span>
                        <span class="question-points">1.5 marks</span>
                    </div>
                    <div class="question-text">
                        The presentation layer in a three-tier architecture is responsible for directly handling database queries.
                    </div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q14" value="true" id="q14t">
                            <label for="q14t">True</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q14" value="false" id="q14f">
                            <label for="q14f">False</label>
                        </div>
                    </div>
                    <div class="feedback" id="feedback-q14">
                        <div class="model-answer">
                            <div class="model-answer-title">‚úì Model Answer: FALSE</div>
                            <p><strong>Correction:</strong> The presentation layer handles user interface. The data layer handles database queries.</p>
                        </div>
                        <div class="explanation">
                            <strong>Explanation:</strong> Three-tier architecture: Presentation (UI) ‚Üí Application/Business Logic ‚Üí Data/Database layer.
                        </div>
                    </div>
                </div>

                <!-- Question 15 -->
                <div class="question" data-type="mcq" data-answer="false" data-points="1.5">
                    <div class="question-header">
                        <span class="question-number">Q15</span>
                        <span class="question-points">1.5 marks</span>
                    </div>
                    <div class="question-text">
                        A database schema changes every time new data is added to the database.
                    </div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q15" value="true" id="q15t">
                            <label for="q15t">True</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q15" value="false" id="q15f">
                            <label for="q15f">False</label>
                        </div>
                    </div>
                    <div class="feedback" id="feedback-q15">
                        <div class="model-answer">
                            <div class="model-answer-title">‚úì Model Answer: FALSE</div>
                            <p><strong>Correction:</strong> The database instance (data) changes, but the schema (structure) remains the same unless explicitly modified.</p>
                        </div>
                        <div class="explanation">
                            <strong>Explanation:</strong> Schema is the structure/blueprint, instance is the actual data at a point in time.
                        </div>
                    </div>
                </div>

                <!-- Question 16 -->
                <div class="question" data-type="mcq" data-answer="false" data-points="1.5">
                    <div class="question-header">
                        <span class="question-number">Q16</span>
                        <span class="question-points">1.5 marks</span>
                    </div>
                    <div class="question-text">
                        Data abstraction in databases means focusing on how data is arranged and saved on disk.
                    </div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q16" value="true" id="q16t">
                            <label for="q16t">True</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q16" value="false" id="q16f">
                            <label for="q16f">False</label>
                        </div>
                    </div>
                    <div class="feedback" id="feedback-q16">
                        <div class="model-answer">
                            <div class="model-answer-title">‚úì Model Answer: FALSE</div>
                            <p><strong>Correction:</strong> Data abstraction means hiding storage details and providing a simplified view of data to users.</p>
                        </div>
                        <div class="explanation">
                            <strong>Explanation:</strong> Abstraction hides complexity and implementation details, allowing users to work with data without knowing how it's physically stored.
                        </div>
                    </div>
                </div>

                <!-- Question 17 -->
                <div class="question" data-type="mcq" data-answer="false" data-points="1.5">
                    <div class="question-header">
                        <span class="question-number">Q17</span>
                        <span class="question-points">1.5 marks</span>
                    </div>
                    <div class="question-text">
                        The disjoint constraint in the EER model specifies that an entity can be a member of more than one subclass.
                    </div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q17" value="true" id="q17t">
                            <label for="q17t">True</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q17" value="false" id="q17f">
                            <label for="q17f">False</label>
                        </div>
                    </div>
                    <div class="feedback" id="feedback-q17">
                        <div class="model-answer">
                            <div class="model-answer-title">‚úì Model Answer: FALSE</div>
                            <p><strong>Correction:</strong> Disjoint constraint means an entity can be a member of at most ONE subclass. Overlapping constraint allows membership in multiple subclasses.</p>
                        </div>
                        <div class="explanation">
                            <strong>Explanation:</strong> Disjoint (d) = mutually exclusive subclasses. Overlapping (o) = can belong to multiple subclasses.
                        </div>
                    </div>
                </div>

                <!-- Question 18 -->
                <div class="question" data-type="mcq" data-answer="true" data-points="1.5">
                    <div class="question-header">
                        <span class="question-number">Q18</span>
                        <span class="question-points">1.5 marks</span>
                    </div>
                    <div class="question-text">
                        A complete definition or description of a particular database, known as meta-data, is stored in a system catalog.
                    </div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q18" value="true" id="q18t">
                            <label for="q18t">True</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q18" value="false" id="q18f">
                            <label for="q18f">False</label>
                        </div>
                    </div>
                    <div class="feedback" id="feedback-q18">
                        <div class="model-answer">
                            <div class="model-answer-title">‚úì Model Answer: TRUE</div>
                        </div>
                        <div class="explanation">
                            <strong>Explanation:</strong> The system catalog (data dictionary) stores metadata about the database structure, including table definitions, column types, constraints, and relationships.
                        </div>
                    </div>
                </div>

                <!-- Question 19 -->
                <div class="question" data-type="mcq" data-answer="true" data-points="1.5">
                    <div class="question-header">
                        <span class="question-number">Q19</span>
                        <span class="question-points">1.5 marks</span>
                    </div>
                    <div class="question-text">
                        Data mining applications analyze large amounts of data to identify patterns.
                    </div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q19" value="true" id="q19t">
                            <label for="q19t">True</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q19" value="false" id="q19f">
                            <label for="q19f">False</label>
                        </div>
                    </div>
                    <div class="feedback" id="feedback-q19">
                        <div class="model-answer">
                            <div class="model-answer-title">‚úì Model Answer: TRUE</div>
                        </div>
                        <div class="explanation">
                            <strong>Explanation:</strong> Data mining involves discovering patterns, correlations, and insights from large datasets using statistical and machine learning techniques.
                        </div>
                    </div>
                </div>

                <!-- Question 20 -->
                <div class="question" data-type="mcq" data-answer="false" data-points="1.5">
                    <div class="question-header">
                        <span class="question-number">Q20</span>
                        <span class="question-points">1.5 marks</span>
                    </div>
                    <div class="question-text">
                        The query optimizer controls access to DBMS information that is stored on disk.
                    </div>
                    <div class="options">
                        <div class="option">
                            <input type="radio" name="q20" value="true" id="q20t">
                            <label for="q20t">True</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q20" value="false" id="q20f">
                            <label for="q20f">False</label>
                        </div>
                    </div>
                    <div class="feedback" id="feedback-q20">
                        <div class="model-answer">
                            <div class="model-answer-title">‚úì Model Answer: FALSE</div>
                            <p><strong>Correction:</strong> The query optimizer optimizes query execution plans. The Storage Manager or Access Control Manager controls disk access.</p>
                        </div>
                        <div class="explanation">
                            <strong>Explanation:</strong> Query optimizer determines the most efficient way to execute queries, but doesn't control disk access.
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Section 3: Written Questions with Keyword Detection -->
        <div class="section" id="section3">
            <div class="section-header" onclick="toggleSection('section3')">
                <h2>‚úçÔ∏è Section 3: Written Questions (30 marks)</h2>
                <span class="toggle-icon">‚ñº</span>
            </div>
            <div class="section-content">
                <!-- Question 21 -->
                <div class="question" data-type="written" data-points="5" 
                     data-keywords='["foreign key", "customer_id", "restaurant_id", "reservation", "referential integrity"]'>
                    <div class="question-header">
                        <span class="question-number">Q21</span>
                        <span class="question-points">5 marks</span>
                    </div>
                    <div class="question-text">
                        Given the following relations, identify the foreign keys and explain their role in maintaining referential integrity:
                        <br><br>
                        Restaurant (restaurantId, restaurantName, restaurantAddress, restaurantCity)<br>
                        Customer (customerId, customerName, customerAddress, customerCity)<br>
                        Reservation (customer_id, restaurant_id, reservationDate, reservationYear, noOfPersons)
                    </div>
                    <textarea id="answer-q21" placeholder="Write your answer here..."></textarea>
                    <button class="btn-primary" onclick="checkWritten('q21')">Check Answer</button>
                    <div class="feedback" id="feedback-q21">
                        <div class="model-answer">
                            <div class="model-answer-title">‚úì Model Answer</div>
                            <p>The foreign keys in this schema are:</p>
                            <ul>
                                <li><strong>customer_id</strong> in Reservation table references customerId in Customer table</li>
                                <li><strong>restaurant_id</strong> in Reservation table references restaurantId in Restaurant table</li>
                            </ul>
                            <p><strong>Role in Referential Integrity:</strong></p>
                            <ul>
                                <li>Foreign keys ensure that every reservation must reference a valid customer and restaurant</li>
                                <li>Prevents orphaned records (reservations without valid customers/restaurants)</li>
                                <li>Enforces relationships between tables</li>
                                <li>Can cascade updates/deletes or restrict them based on constraints</li>
                            </ul>
                        </div>
                        <div class="explanation">
                            <strong>Keywords Found:</strong>
                            <div class="keywords" id="keywords-q21"></div>
                        </div>
                    </div>
                </div>

                <!-- Question 22 -->
                <div class="question" data-type="written" data-points="5" 
                     data-keywords='["1NF", "first normal form", "atomic", "multivalued", "repeating groups", "composite"]'>
                    <div class="question-header">
                        <span class="question-number">Q22</span>
                        <span class="question-points">5 marks</span>
                    </div>
                    <div class="question-text">
                        Explain what First Normal Form (1NF) is and describe what violations would prevent a relation from being in 1NF.
                    </div>
                    <textarea id="answer-q22" placeholder="Write your answer here..."></textarea>
                    <button class="btn-primary" onclick="checkWritten('q22')">Check Answer</button>
                    <div class="feedback" id="feedback-q22">
                        <div class="model-answer">
                            <div class="model-answer-title">‚úì Model Answer</div>
                            <p><strong>First Normal Form (1NF):</strong></p>
                            <p>A relation is in 1NF if all attributes contain only atomic (indivisible) values. Each attribute must contain a single value from its domain for each tuple.</p>
                            <p><strong>Violations that prevent 1NF:</strong></p>
                            <ul>
                                <li><strong>Multivalued attributes:</strong> An attribute containing multiple values (e.g., a phone numbers column with multiple phone numbers)</li>
                                <li><strong>Composite attributes:</strong> Attributes that can be divided into smaller sub-attributes (e.g., Address containing street, city, state)</li>
                                <li><strong>Repeating groups:</strong> Multiple columns for the same type of data (e.g., Phone1, Phone2, Phone3)</li>
                                <li><strong>Nested relations:</strong> Tables within tables</li>
                            </ul>
                        </div>
                        <div class="explanation">
                            <strong>Keywords Found:</strong>
                            <div class="keywords" id="keywords-q22"></div>
                        </div>
                    </div>
                </div>

                <!-- Question 23 -->
                <div class="question" data-type="written" data-points="5" 
                     data-keywords='["partial dependency", "2NF", "second normal form", "prime attribute", "non-prime", "candidate key"]'>
                    <div class="question-header">
                        <span class="question-number">Q23</span>
                        <span class="question-points">5 marks</span>
                    </div>
                    <div class="question-text">
                        Explain Second Normal Form (2NF) and what type of functional dependency must be eliminated to achieve 2NF.
                    </div>
                    <textarea id="answer-q23" placeholder="Write your answer here..."></textarea>
                    <button class="btn-primary" onclick="checkWritten('q23')">Check Answer</button>
                    <div class="feedback" id="feedback-q23">
                        <div class="model-answer">
                            <div class="model-answer-title">‚úì Model Answer</div>
                            <p><strong>Second Normal Form (2NF):</strong></p>
                            <p>A relation is in 2NF if:</p>
                            <ul>
                                <li>It is in 1NF</li>
                                <li>Every non-prime attribute is fully functionally dependent on the entire primary key</li>
                            </ul>
                            <p><strong>Functional dependency to eliminate:</strong></p>
                            <p><strong>Partial dependency</strong> must be eliminated. This occurs when a non-prime attribute depends on only part of a composite primary key rather than the entire key.</p>
                            <p><strong>Example:</strong> If (StudentID, CourseID) is the primary key, but StudentName depends only on StudentID (not the full key), this is a partial dependency that violates 2NF.</p>
                            <p><strong>Solution:</strong> Decompose the relation to remove partial dependencies by creating separate relations where each non-prime attribute depends on the full candidate key.</p>
                        </div>
                        <div class="explanation">
                            <strong>Keywords Found:</strong>
                            <div class="keywords" id="keywords-q23"></div>
                        </div>
                    </div>
                </div>

                <!-- Question 24 -->
                <div class="question" data-type="written" data-points="5" 
                     data-keywords='["transitive dependency", "3NF", "third normal form", "non-prime", "superkey", "candidate key"]'>
                    <div class="question-header">
                        <span class="question-number">Q24</span>
                        <span class="question-points">5 marks</span>
                    </div>
                    <div class="question-text">
                        Explain Third Normal Form (3NF) and describe what type of functional dependency must be eliminated to achieve 3NF.
                    </div>
                    <textarea id="answer-q24" placeholder="Write your answer here..."></textarea>
                    <button class="btn-primary" onclick="checkWritten('q24')">Check Answer</button>
                    <div class="feedback" id="feedback-q24">
                        <div class="model-answer">
                            <div class="model-answer-title">‚úì Model Answer</div>
                            <p><strong>Third Normal Form (3NF):</strong></p>
                            <p>A relation is in 3NF if:</p>
                            <ul>
                                <li>It is in 2NF</li>
                                <li>No non-prime attribute is transitively dependent on the primary key</li>
                                <li>Alternatively: For every functional dependency X ‚Üí A, either X is a superkey OR A is a prime attribute</li>
                            </ul>
                            <p><strong>Functional dependency to eliminate:</strong></p>
                            <p><strong>Transitive dependency</strong> must be eliminated. This occurs when a non-prime attribute depends on another non-prime attribute, which in turn depends on the primary key.</p>
                            <p><strong>Example:</strong> StudentID ‚Üí DepartmentID ‚Üí DepartmentName creates a transitive dependency because DepartmentName depends on StudentID through DepartmentID.</p>
                            <p><strong>Solution:</strong> Decompose to remove transitive dependencies by creating separate relations.</p>
                        </div>
                        <div class="explanation">
                            <strong>Keywords Found:</strong>
                            <div class="keywords" id="keywords-q24"></div>
                        </div>
                    </div>
                </div>

                <!-- Question 25 -->
                <div class="question" data-type="written" data-points="5" 
                     data-keywords='["BCNF", "Boyce-Codd", "determinant", "superkey", "anomaly", "decomposition"]'>
                    <div class="question-header">
                        <span class="question-number">Q25</span>
                        <span class="question-points">5 marks</span>
                    </div>
                    <div class="question-text">
                        Explain Boyce-Codd Normal Form (BCNF) and how it differs from 3NF.
                    </div>
                    <textarea id="answer-q25" placeholder="Write your answer here..."></textarea>
                    <button class="btn-primary" onclick="checkWritten('q25')">Check Answer</button>
                    <div class="feedback" id="feedback-q25">
                        <div class="model-answer">
                            <div class="model-answer-title">‚úì Model Answer</div>
                            <p><strong>Boyce-Codd Normal Form (BCNF):</strong></p>
                            <p>A relation is in BCNF if for every non-trivial functional dependency X ‚Üí Y, X must be a superkey. In other words, every determinant must be a candidate key.</p>
                            <p><strong>Difference from 3NF:</strong></p>
                            <ul>
                                <li><strong>3NF:</strong> Allows non-prime attributes to depend on other attributes as long as the dependent attribute is prime or the determinant is a superkey</li>
                                <li><strong>BCNF:</strong> Stricter - ALL dependencies must have a superkey as the determinant, even if the dependent is a prime attribute</li>
                                <li>BCNF eliminates all redundancy based on functional dependencies, while 3NF may still have some anomalies</li>
                                <li>Every BCNF relation is in 3NF, but not every 3NF relation is in BCNF</li>
                            </ul>
                            <p><strong>When to use:</strong> BCNF is preferred when possible, but sometimes achieving BCNF requires decomposition that loses dependency preservation, so 3NF is accepted instead.</p>
                        </div>
                        <div class="explanation">
                            <strong>Keywords Found:</strong>
                            <div class="keywords" id="keywords-q25"></div>
                        </div>
                    </div>
                </div>

                <!-- Question 26 -->
                <div class="question" data-type="written" data-points="5" 
                     data-keywords='["INSERT", "UPDATE", "DELETE", "SELECT", "WHERE", "JOIN", "GROUP BY", "HAVING"]'>
                    <div class="question-header">
                        <span class="question-number">Q26</span>
                        <span class="question-points">5 marks</span>
                    </div>
                    <div class="question-text">
                        Write a SQL query to find all customers who have placed orders totaling more than $500. Show customer name and total order amount. Use the following schema:
                        <br><br>
                        Customers (CustomerID, Name, Email)<br>
                        Orders (OrderID, CustomerID, TotalAmount, OrderDate)
                    </div>
                    <textarea id="answer-q26" placeholder="Write your SQL query here..."></textarea>
                    <button class="btn-primary" onclick="checkWritten('q26')">Check Answer</button>
                    <div class="feedback" id="feedback-q26">
                        <div class="model-answer">
                            <div class="model-answer-title">‚úì Model Answer</div>
                            <div class="code-block">
SELECT C.Name, SUM(O.TotalAmount) AS TotalOrders
FROM Customers C
JOIN Orders O ON C.CustomerID = O.CustomerID
GROUP BY C.CustomerID, C.Name
HAVING SUM(O.TotalAmount) > 500;
                            </div>
                            <p><strong>Alternative using subquery:</strong></p>
                            <div class="code-block">
SELECT C.Name, 
       (SELECT SUM(TotalAmount) 
        FROM Orders O 
        WHERE O.CustomerID = C.CustomerID) AS TotalOrders
FROM Customers C
WHERE (SELECT SUM(TotalAmount) 
       FROM Orders O 
       WHERE O.CustomerID = C.CustomerID) > 500;
                            </div>
                        </div>
                        <div class="explanation">
                            <strong>Keywords Found:</strong>
                            <div class="keywords" id="keywords-q26"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Section 4: EER Diagram Questions -->
        <div class="section" id="section4">
            <div class="section-header" onclick="toggleSection('section4')">
                <h2>üé® Section 4: EER Diagram Design (15 marks)</h2>
                <span class="toggle-icon">‚ñº</span>
            </div>
            <div class="section-content">
                <!-- Question 27 -->
                <div class="question" data-type="written" data-points="7" 
                     data-keywords='["entity", "relationship", "cardinality", "participation", "weak entity", "attribute", "primary key"]'>
                    <div class="question-header">
                        <span class="question-number">Q27</span>
                        <span class="question-points">7 marks</span>
                    </div>
                    <div class="question-text">
                        <strong>Wildlife Conservation Park Database Design</strong>
                        <p>Design an EER diagram for a Wildlife Conservation Park with the following requirements:</p>
                        <ol>
                            <li>The park wants animals and park staff under one entity "Living Beings" with attributes: ID, Name, DateOfBirth</li>
                            <li>Habitats have: HabitatID, Name, Type (Aquatic/Terrestrial), Climate. Animals inhabit one habitat; habitats can house multiple animals</li>
                            <li>Animals are categorized into: Mammals (Reproductive Behaviour), Birds (Migration Patterns), Reptiles (Skin Color), Amphibians (Water Requirements)</li>
                            <li>Some animals can be mascots for events (store current event)</li>
                            <li>Park staff participate in Conservation Programs (ID, Name) with Role, StartDate, EndDate</li>
                        </ol>
                        <p>Describe your EER diagram including entities, relationships, cardinalities, and specialization/generalization.</p>
                    </div>
                    <textarea id="answer-q27" placeholder="Describe your EER diagram design..."></textarea>
                    <button class="btn-primary" onclick="checkWritten('q27')">Check Answer</button>
                    <div class="feedback" id="feedback-q27">
                        <div class="model-answer">
                            <div class="model-answer-title">‚úì Model Answer</div>
                            <p><strong>EER Diagram Components:</strong></p>
                            <ol>
                                <li><strong>Superclass:</strong> Living_Beings (ID, Name, DateOfBirth)
                                    <ul>
                                        <li>Specialization into: Animal_Species and Park_Staff (disjoint, total)</li>
                                    </ul>
                                </li>
                                <li><strong>Entity:</strong> Habitat (HabitatID, Name, Type, Climate)</li>
                                <li><strong>Relationship:</strong> Inhabit (Animal_Species ‚Üî Habitat)
                                    <ul>
                                        <li>Cardinality: N:1 (many animals, one habitat per animal)</li>
                                        <li>Participation: Total from Animal, Partial from Habitat</li>
                                    </ul>
                                </li>
                                <li><strong>Specialization of Animal_Species:</strong>
                                    <ul>
                                        <li>Mammals (ReproductiveBehaviour)</li>
                                        <li>Birds (MigrationPatterns)</li>
                                        <li>Reptiles (SkinColor)</li>
                                        <li>Amphibians (WaterRequirements)</li>
                                        <li>Constraint: Overlapping, Partial</li>
                                    </ul>
                                </li>
                                <li><strong>Category/Union:</strong> Mascot (CurrentEvent) - subset of Animals</li>
                                <li><strong>Entity:</strong> Conservation_Program (ProgramID, Name)</li>
                                <li><strong>Relationship:</strong> Participates_In (Park_Staff ‚Üî Conservation_Program)
                                    <ul>
                                        <li>Cardinality: M:N</li>
                                        <li>Attributes: Role, StartDate, EndDate</li>
                                    </ul>
                                </li>
                            </ol>
                        </div>
                        <div class="explanation">
                            <strong>Keywords Found:</strong>
                            <div class="keywords" id="keywords-q27"></div>
                        </div>
                    </div>
                </div>

                <!-- Question 28 -->
                <div class="question" data-type="written" data-points="8" 
                     data-keywords='["player", "team", "game", "injury", "weak entity", "captain", "N:M", "1:N"]'>
                    <div class="question-header">
                        <span class="question-number">Q28</span>
                        <span class="question-points">8 marks</span>
                    </div>
                    <div class="question-text">
                        <strong>Saudi Football League Database Design</strong>
                        <p>Design an EER diagram for the Saudi Football League with these requirements:</p>
                        <ul>
                            <li>Teams have: name (unique), city, coach</li>
                            <li>Players have: name (identifier), position, skill level. Each player belongs to only one team</li>
                            <li>Some players are team captains. Each team has only one captain</li>
                            <li>Players log injury records (InjuryID, description). Records exist only if player exists</li>
                            <li>Games are played between two teams (host and guest) with date and score</li>
                        </ul>
                        <p>Describe your complete EER diagram.</p>
                    </div>
                    <textarea id="answer-q28" placeholder="Describe your EER diagram design..."></textarea>
                    <button class="btn-primary" onclick="checkWritten('q28')">Check Answer</button>
                    <div class="feedback" id="feedback-q28">
                        <div class="model-answer">
                            <div class="model-answer-title">‚úì Model Answer</div>
                            <p><strong>EER Diagram Components:</strong></p>
                            <ol>
                                <li><strong>Entity:</strong> Team (TeamName(PK), City, Coach)</li>
                                <li><strong>Entity:</strong> Player (PlayerName(PK), Position, SkillLevel, TeamName(FK))
                                    <ul>
                                        <li>IsCaptain (boolean attribute)</li>
                                    </ul>
                                </li>
                                <li><strong>Relationship:</strong> Plays_For (Player ‚Üî Team)
                                    <ul>
                                        <li>Cardinality: N:1 (many players to one team)</li>
                                        <li>Participation: Total from Player, Partial from Team</li>
                                    </ul>
                                </li>
                                <li><strong>Relationship:</strong> Captains (Player ‚Üî Team)
                                    <ul>
                                        <li>Cardinality: 1:1</li>
                                        <li>Participation: Partial from both</li>
                                    </ul>
                                </li>
                                <li><strong>Weak Entity:</strong> Injury_Record (InjuryID(partial key), Description)
                                    <ul>
                                        <li>Identifying Relationship: Has_Injury (Player ‚Üî Injury_Record)</li>
                                        <li>Full key: (PlayerName, InjuryID)</li>
                                    </ul>
                                </li>
                                <li><strong>Entity:</strong> Game (GameID(PK), Date, Score)</li>
                                <li><strong>Relationship:</strong> Plays_In
                                    <ul>
                                        <li>Team ‚Üî Game (M:N)</li>
                                        <li>Role attributes: HostTeam, GuestTeam</li>
                                    </ul>
                                </li>
                            </ol>
                        </div>
                        <div class="explanation">
                            <strong>Keywords Found:</strong>
                            <div class="keywords" id="keywords-q28"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Section 5: Normalization Problems -->
        <div class="section" id="section5">
            <div class="section-header" onclick="toggleSection('section5')">
                <h2>üìê Section 5: Normalization (15 marks)</h2>
                <span class="toggle-icon">‚ñº</span>
            </div>
            <div class="section-content">
                <!-- Question 29 -->
                <div class="question" data-type="written" data-points="9" 
                     data-keywords='["2NF", "3NF", "partial dependency", "transitive dependency", "decompose", "functional dependency"]'>
                    <div class="question-header">
                        <span class="question-number">Q29</span>
                        <span class="question-points">9 marks</span>
                    </div>
                    <div class="question-text">
                        <strong>LIBRARY Database Normalization</strong>
                        <p>Given: LIBRARY (Branch#, Branch_Addr, ISBN, Title, Author, Pub_ID, Pub_Name, Pub_Address, Num_copies)</p>
                        <p><strong>Functional Dependencies:</strong></p>
                        <ul>
                            <li>FD1: Branch# ‚Üí Branch_Addr</li>
                            <li>FD2: ISBN ‚Üí Title, Author, Pub_ID, Pub_Name, Pub_Address</li>
                            <li>FD3: ISBN, Branch# ‚Üí Num_copies</li>
                            <li>FD4: Pub_ID ‚Üí Pub_Name, Pub_Address</li>
                        </ul>
                        <p>Primary Key: (ISBN, Branch#)</p>
                        <p><strong>Tasks:</strong></p>
                        <ol>
                            <li>Is this relation in 2NF? Why or why not?</li>
                            <li>Normalize to 2NF if needed</li>
                            <li>Is the result in 3NF? Why or why not?</li>
                            <li>Normalize to 3NF if needed</li>
                        </ol>
                    </div>
                    <textarea id="answer-q29" placeholder="Provide your normalization steps and final relations..."></textarea>
                    <button class="btn-primary" onclick="checkWritten('q29')">Check Answer</button>
                    <div class="feedback" id="feedback-q29">
                        <div class="model-answer">
                            <div class="model-answer-title">‚úì Model Answer</div>
                            <p><strong>Step 1: Check 2NF</strong></p>
                            <p>The relation is NOT in 2NF because:</p>
                            <ul>
                                <li>Branch_Addr depends only on Branch# (partial dependency)</li>
                                <li>Title, Author, Pub_ID, Pub_Name, Pub_Address depend only on ISBN (partial dependency)</li>
                            </ul>
                            
                            <p><strong>Step 2: Normalize to 2NF</strong></p>
                            <ul>
                                <li><strong>BRANCH</strong> (Branch#, Branch_Addr)</li>
                                <li><strong>BOOK</strong> (ISBN, Title, Author, Pub_ID, Pub_Name, Pub_Address)</li>
                                <li><strong>INVENTORY</strong> (ISBN, Branch#, Num_copies)</li>
                            </ul>
                            
                            <p><strong>Step 3: Check 3NF</strong></p>
                            <p>BOOK relation is NOT in 3NF because:</p>
                            <ul>
                                <li>Pub_Name and Pub_Address depend on Pub_ID (transitive dependency)</li>
                                <li>ISBN ‚Üí Pub_ID ‚Üí Pub_Name, Pub_Address</li>
                            </ul>
                            
                            <p><strong>Step 4: Normalize to 3NF</strong></p>
                            <ul>
                                <li><strong>BRANCH</strong> (Branch#, Branch_Addr)</li>
                                <li><strong>PUBLISHER</strong> (Pub_ID, Pub_Name, Pub_Address)</li>
                                <li><strong>BOOK</strong> (ISBN, Title, Author, Pub_ID)</li>
                                <li><strong>INVENTORY</strong> (ISBN, Branch#, Num_copies)</li>
                            </ul>
                            
                            <p><strong>Foreign Keys:</strong></p>
                            <ul>
                                <li>BOOK.Pub_ID references PUBLISHER.Pub_ID</li>
                                <li>INVENTORY.ISBN references BOOK.ISBN</li>
                                <li>INVENTORY.Branch# references BRANCH.Branch#</li>
                            </ul>
                        </div>
                        <div class="explanation">
                            <strong>Keywords Found:</strong>
                            <div class="keywords" id="keywords-q29"></div>
                        </div>
                    </div>
                </div>

                <!-- Question 30 -->
                <div class="question" data-type="written" data-points="6" 
                     data-keywords='["closure", "superkey", "candidate key", "functional dependency", "minimal"]'>
                    <div class="question-header">
                        <span class="question-number">Q30</span>
                        <span class="question-points">6 marks</span>
                    </div>
                    <div class="question-text">
                        <strong>Functional Dependency Analysis</strong>
                        <p>Given relation R(A, B, C, D) with functional dependencies:</p>
                        <ul>
                            <li>A ‚Üí B</li>
                            <li>B ‚Üí C</li>
                            <li>C ‚Üí D</li>
                        </ul>
                        <p><strong>Questions:</strong></p>
                        <ol>
                            <li>Find the closure of A (A+)</li>
                            <li>Is A a superkey? Why?</li>
                            <li>Is A a candidate key? Why?</li>
                            <li>List all superkeys of R</li>
                        </ol>
                    </div>
                    <textarea id="answer-q30" placeholder="Provide your analysis..."></textarea>
                    <button class="btn-primary" onclick="checkWritten('q30')">Check Answer</button>
                    <div class="feedback" id="feedback-q30">
                        <div class="model-answer">
                            <div class="model-answer-title">‚úì Model Answer</div>
                            <p><strong>1. Closure of A (A+):</strong></p>
                            <ul>
                                <li>Start: A+ = {A}</li>
                                <li>From A ‚Üí B: A+ = {A, B}</li>
                                <li>From B ‚Üí C: A+ = {A, B, C}</li>
                                <li>From C ‚Üí D: A+ = {A, B, C, D}</li>
                                <li><strong>Final: A+ = {A, B, C, D}</strong></li>
                            </ul>
                            
                            <p><strong>2. Is A a superkey?</strong></p>
                            <p><strong>YES.</strong> A is a superkey because A+ contains all attributes of R. A superkey is any set of attributes that uniquely determines all attributes in the relation.</p>
                            
                            <p><strong>3. Is A a candidate key?</strong></p>
                            <p><strong>YES.</strong> A is a candidate key because:</p>
                            <ul>
                                <li>A is a superkey (determines all attributes)</li>
                                <li>A is minimal (no proper subset of A can determine all attributes)</li>
                                <li>Since A is a single attribute, removing it would result in an empty set</li>
                            </ul>
                            
                            <p><strong>4. All superkeys of R:</strong></p>
                            <ul>
                                <li>{A} - candidate key</li>
                                <li>{A, B}</li>
                                <li>{A, C}</li>
                                <li>{A, D}</li>
                                <li>{A, B, C}</li>
                                <li>{A, B, D}</li>
                                <li>{A, C, D}</li>
                                <li>{A, B, C, D}</li>
                            </ul>
                            <p>Any set of attributes that includes A is a superkey because A alone determines everything.</p>
                        </div>
                        <div class="explanation">
                            <strong>Keywords Found:</strong>
                            <div class="keywords" id="keywords-q30"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Score Card -->
        <div class="score-card" id="scoreCard">
            <h2>üìä Your Exam Results</h2>
            <div class="score-number" id="finalScore">0/100</div>
            <div class="score-breakdown">
                <div class="score-item">
                    <div>Multiple Choice</div>
                    <div id="mcqScore">0/0</div>
                </div>
                <div class="score-item">
                    <div>True/False</div>
                    <div id="tfScore">0/0</div>
                </div>
                <div class="score-item">
                    <div>Written Questions</div>
                    <div id="writtenScore">0/0</div>
                </div>
                <div class="score-item">
                    <div>Percentage</div>
                    <div id="percentage">0%</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Timer functionality
        let startTime = Date.now();
        function updateTimer() {
            const elapsed = Date.now() - startTime;
            const hours = Math.floor(elapsed / 3600000);
            const minutes = Math.floor((elapsed % 3600000) / 60000);
            const seconds = Math.floor((elapsed % 60000) / 1000);
            document.getElementById('timer').textContent = 
                `Time: ${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
        }
        setInterval(updateTimer, 1000);

        // Dark mode toggle
        function toggleDarkMode() {
            document.body.classList.toggle('dark-mode');
            const btn = document.querySelector('.dark-mode-toggle');
            btn.textContent = document.body.classList.contains('dark-mode') ? '‚òÄÔ∏è Light Mode' : 'üåô Dark Mode';
        }

        // Section collapse/expand
        function toggleSection(sectionId) {
            const section = document.getElementById(sectionId);
            section.classList.toggle('collapsed');
        }

        // Check MCQ answer
        function checkMCQ(questionId) {
            const question = document.querySelector(`[data-type="mcq"][id*="${questionId}"]`);
            if (!question) return;
            
            const selected = document.querySelector(`input[name="${questionId}"]:checked`);
            if (!selected) {
                alert('Please select an answer first!');
                return;
            }

            const correctAnswer = question.dataset.answer;
            const feedback = document.getElementById(`feedback-${questionId}`);
            
            if (selected.value === correctAnswer) {
                feedback.className = 'feedback correct show';
            } else {
                feedback.className = 'feedback incorrect show';
            }
            
            updateProgress();
        }

        // Check written answer with keyword detection
        function checkWritten(questionId) {
            const answer = document.getElementById(`answer-${questionId}`).value.toLowerCase();
            const question = document.querySelector(`#answer-${questionId}`).closest('.question');
            const keywords = JSON.parse(question.dataset.keywords);
            const feedback = document.getElementById(`feedback-${questionId}`);
            
            if (!answer.trim()) {
                alert('Please write an answer first!');
                return;
            }

            let foundKeywords = [];
            let missingKeywords = [];
            
            keywords.forEach(keyword => {
                if (answer.includes(keyword.toLowerCase())) {
                    foundKeywords.push(keyword);
                } else {
                    missingKeywords.push(keyword);
                }
            });

            const score = (foundKeywords.length / keywords.length) * 100;
            const keywordsDiv = document.getElementById(`keywords-${questionId}`);
            
            keywordsDiv.innerHTML = '';
            foundKeywords.forEach(kw => {
                keywordsDiv.innerHTML += `<span class="keyword found">‚úì ${kw}</span>`;
            });
            missingKeywords.forEach(kw => {
                keywordsDiv.innerHTML += `<span class="keyword missing">‚úó ${kw}</span>`;
            });

            if (score === 100) {
                feedback.className = 'feedback correct show';
            } else if (score >= 50) {
                feedback.className = 'feedback partial show';
            } else {
                feedback.className = 'feedback incorrect show';
            }
            
            updateProgress();
        }

        // Update progress bar
        function updateProgress() {
            const allQuestions = document.querySelectorAll('.question');
            const answeredQuestions = document.querySelectorAll('.feedback.show').length;
            const percentage = (answeredQuestions / allQuestions.length) * 100;
            
            document.getElementById('progressFill').style.width = percentage + '%';
            document.getElementById('progressText').textContent = 
                `${answeredQuestions}/${allQuestions.length} answered`;
        }

        // Submit all answers
        function submitAll() {
            const allQuestions = document.querySelectorAll('.question');
            let totalScore = 0;
            let maxScore = 0;
            let mcqScore = 0, mcqMax = 0;
            let tfScore = 0, tfMax = 0;
            let writtenScore = 0, writtenMax = 0;

            allQuestions.forEach(question => {
                const points = parseFloat(question.dataset.points);
                maxScore += points;
                
                if (question.dataset.type === 'mcq') {
                    mcqMax += points;
                    const questionId = question.querySelector('input[type="radio"]').name;
                    const selected = document.querySelector(`input[name="${questionId}"]:checked`);
                    if (selected && selected.value === question.dataset.answer) {
                        mcqScore += points;
                        totalScore += points;
                    }
                } else if (question.dataset.type === 'written') {
                    writtenMax += points;
                    const textarea = question.querySelector('textarea');
                    if (textarea && textarea.value.trim()) {
                        const answer = textarea.value.toLowerCase();
                        const keywords = JSON.parse(question.dataset.keywords);
                        const foundCount = keywords.filter(kw => 
                            answer.includes(kw.toLowerCase())
                        ).length;
                        const score = (foundCount / keywords.length) * points;
                        writtenScore += score;
                        totalScore += score;
                    }
                }
            });

            // Calculate True/False separately (they're also MCQ type)
            const tfQuestions = Array.from(allQuestions).slice(10, 20);
            tfQuestions.forEach(q => {
                const points = parseFloat(q.dataset.points);
                tfMax += points;
            });
            tfScore = mcqScore - (mcqMax - tfMax); // Adjust calculation

            document.getElementById('finalScore').textContent = 
                `${totalScore.toFixed(1)}/${maxScore}`;
            document.getElementById('mcqScore').textContent = 
                `${mcqScore.toFixed(1)}/${mcqMax}`;
            document.getElementById('tfScore').textContent = 
                `${tfScore.toFixed(1)}/${tfMax}`;
            document.getElementById('writtenScore').textContent = 
                `${writtenScore.toFixed(1)}/${writtenMax}`;
            document.getElementById('percentage').textContent = 
                `${((totalScore/maxScore) * 100).toFixed(1)}%`;
            
            document.getElementById('scoreCard').classList.add('show');
            document.getElementById('scoreCard').scrollIntoView({ behavior: 'smooth' });
        }

        // Show all model answers
        function showAllAnswers() {
            const allFeedbacks = document.querySelectorAll('.feedback');
            allFeedbacks.forEach(fb => fb.classList.add('show'));
        }

        // Reset exam
        function resetExam() {
            if (confirm('Are you sure you want to reset the exam? All answers will be cleared.')) {
                location.reload();
            }
        }

        // Auto-save answers to localStorage
        function saveAnswer(questionId, answer) {
            localStorage.setItem(`cs340_${questionId}`, answer);
        }

        function loadAnswers() {
            document.querySelectorAll('textarea').forEach(textarea => {
                const saved = localStorage.getItem(`cs340_${textarea.id}`);
                if (saved) textarea.value = saved;
            });
        }

        // Initialize
        window.addEventListener('load', () => {
            loadAnswers();
            
            // Add auto-save listeners
            document.querySelectorAll('textarea').forEach(textarea => {
                textarea.addEventListener('input', (e) => {
                    saveAnswer(e.target.id, e.target.value);
                });
            });

            // Add check buttons for MCQ questions
            document.querySelectorAll('.question[data-type="mcq"]').forEach(question => {
                const questionId = question.querySelector('input[type="radio"]').name;
                const button = document.createElement('button');
                button.className = 'btn-primary';
                button.textContent = 'Check Answer';
                button.onclick = () => checkMCQ(questionId);
                question.querySelector('.options').appendChild(button);
            });
        });
    </script>
</body>
</html>