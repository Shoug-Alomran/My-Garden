<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter 7: Deadlocks - CS330</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f4f4f4;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: white;
        }

        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            margin-bottom: 30px;
            text-align: center;
            border-radius: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        h2 {
            color: #667eea;
            font-size: 1.8em;
            margin: 35px 0 20px 0;
            padding-bottom: 10px;
            border-bottom: 3px solid #764ba2;
        }

        h3 {
            color: #7c3aed;
            font-size: 1.4em;
            margin: 25px 0 15px 0;
        }

        /* Deadlock Conditions Grid */
        .conditions-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .condition-card {
            background: white;
            border: 2px solid #667eea;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .condition-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(102,126,234,0.3);
        }

        .condition-card h4 {
            color: #667eea;
            margin-bottom: 10px;
            font-size: 1.2em;
        }

        .condition-number {
            background: #764ba2;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-weight: bold;
        }

        /* Resource Allocation Graph */
        .rag-container {
            background: #f8f9ff;
            border: 2px solid #667eea;
            border-radius: 10px;
            padding: 30px;
            margin: 30px 0;
            text-align: center;
        }

        .rag-visualization {
            display: flex;
            justify-content: space-around;
            align-items: center;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .process-node {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: #667eea;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2em;
            margin: 10px;
        }

        .resource-node {
            width: 80px;
            height: 80px;
            background: #764ba2;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 1.2em;
            margin: 10px;
        }

        /* Arrow styles */
        .edge {
            border-top: 3px solid #333;
            width: 100px;
            position: relative;
            margin: 0 10px;
        }

        .edge::after {
            content: '‚ñ∂';
            position: absolute;
            right: -10px;
            top: -11px;
            color: #333;
        }

        /* Banker's Algorithm */
        .banker-container {
            background: #f0f8ff;
            border: 2px solid #3498db;
            border-radius: 10px;
            padding: 25px;
            margin: 30px 0;
        }

        /* Tables */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        th {
            background: #667eea;
            color: white;
            padding: 15px;
            text-align: left;
        }

        td {
            padding: 12px 15px;
            border: 1px solid #ddd;
        }

        tr:nth-child(even) {
            background: #f8f9ff;
        }

        /* Code blocks */
        .code-block {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            font-family: 'Courier New', monospace;
            overflow-x: auto;
        }

        .code-comment {
            color: #95a5a6;
        }

        .code-keyword {
            color: #3498db;
        }

        /* Concept Box */
        .concept-box {
            background: #e8f5e9;
            border-left: 4px solid #4caf50;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }

        .warning-box {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 20px 0;
        }

        .danger-box {
            background: #ffebee;
            border-left: 4px solid #f44336;
            padding: 15px;
            margin: 20px 0;
        }

        /* Prevention Methods */
        .prevention-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .prevention-card {
            background: linear-gradient(135deg, #667eea15, #764ba215);
            border: 2px solid #667eea;
            border-radius: 10px;
            padding: 20px;
        }

        .prevention-card h4 {
            color: #667eea;
            margin-bottom: 15px;
        }

        /* Safe Sequence Visualization */
        .safe-sequence {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .sequence-step {
            background: #4caf50;
            color: white;
            padding: 10px 20px;
            margin: 5px;
            border-radius: 25px;
            font-weight: bold;
        }

        .sequence-arrow {
            font-size: 24px;
            color: #667eea;
            margin: 0 10px;
        }

        /* Matrix Display */
        .matrix-container {
            display: inline-block;
            margin: 10px;
            padding: 15px;
            background: white;
            border: 2px solid #667eea;
            border-radius: 8px;
        }

        .matrix-title {
            font-weight: bold;
            color: #667eea;
            margin-bottom: 10px;
            text-align: center;
        }

        .matrix {
            font-family: 'Courier New', monospace;
        }

        .matrix-row {
            display: flex;
            justify-content: center;
            margin: 5px 0;
        }

        .matrix-cell {
            width: 30px;
            text-align: center;
            margin: 0 5px;
        }

        /* Deadlock Detection Visualization */
        .detection-visual {
            background: #fff8dc;
            border: 2px solid #ffd700;
            padding: 20px;
            margin: 20px 0;
            border-radius: 10px;
        }

        .cycle-indicator {
            background: #ff6b6b;
            color: white;
            padding: 10px;
            border-radius: 5px;
            display: inline-block;
            margin: 10px 0;
            font-weight: bold;
        }

        /* Recovery Methods */
        .recovery-methods {
            background: #f5f5f5;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }

        .recovery-option {
            background: white;
            padding: 15px;
            margin: 10px 0;
            border-left: 4px solid #667eea;
            border-radius: 5px;
        }

        /* Example Box */
        .example-box {
            background: #e8f8f5;
            border: 2px solid #27ae60;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
        }

        /* Exam Section */
        .exam-section {
            background: #fff8dc;
            border: 2px solid #ffd700;
            padding: 25px;
            margin: 30px 0;
            border-radius: 10px;
        }

        .exam-question {
            background: white;
            padding: 20px;
            margin: 15px 0;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .mcq-options {
            list-style: none;
            margin-top: 15px;
        }

        .mcq-options li {
            background: #f8f9ff;
            padding: 10px;
            margin: 8px 0;
            border-radius: 5px;
            border-left: 3px solid transparent;
        }

        .correct-answer {
            background: #d4edda !important;
            border-left: 3px solid #28a745 !important;
        }

        /* State Diagram */
        .state-diagram {
            display: flex;
            justify-content: space-around;
            align-items: center;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .state-box {
            background: white;
            border: 2px solid #667eea;
            padding: 20px;
            margin: 10px;
            border-radius: 10px;
            min-width: 150px;
            text-align: center;
        }

        .state-box.safe {
            background: #d4edda;
            border-color: #28a745;
        }

        .state-box.unsafe {
            background: #fff3cd;
            border-color: #ffc107;
        }

        .state-box.deadlock {
            background: #f8d7da;
            border-color: #dc3545;
        }

        /* Image Placeholder */
        .image-placeholder {
            background: #95a5a6;
            color: white;
            padding: 60px 20px;
            text-align: center;
            border-radius: 10px;
            margin: 20px 0;
            border: 2px dashed #7f8c8d;
        }

        .highlight {
            background: #ffd700;
            padding: 2px 6px;
            border-radius: 3px;
            font-weight: bold;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .conditions-grid,
            .prevention-grid {
                grid-template-columns: 1fr;
            }
            
            .rag-visualization {
                flex-direction: column;
            }
        }

        footer {
            background: #667eea;
            color: white;
            text-align: center;
            padding: 25px;
            margin-top: 40px;
            border-radius: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Chapter 7: Deadlocks</h1>
            <p style="font-size: 1.2em;">CS330 - Operating Systems</p>
            <p>System Deadlocks, Prevention, Avoidance, Detection & Recovery</p>
        </header>

        <!-- Section 1: Introduction -->
        <section>
            <h2>7.1 System Model</h2>
            
            <div class="concept-box">
                <p>A <span class="highlight">deadlock</span> is a situation where a set of processes are blocked because each process is holding a resource and waiting for another resource acquired by some other process.</p>
            </div>

            <h3>Resource Types</h3>
            <ul style="margin-left: 40px;">
                <li><strong>R1, R2, ..., Rm:</strong> Different resource types</li>
                <li><strong>CPU cycles, memory space, I/O devices</strong></li>
                <li>Each resource type Ri has <strong>Wi instances</strong></li>
            </ul>

            <h3>Process Resource Utilization</h3>
            <div class="code-block">
<span class="code-comment">// Normal process resource usage sequence:</span>
1. <span class="code-keyword">Request</span> - Process requests resource
2. <span class="code-keyword">Use</span> - Process uses resource
3. <span class="code-keyword">Release</span> - Process releases resource
            </div>

            <div class="danger-box">
                <h4>‚ö†Ô∏è Deadlock Example:</h4>
                <p>Process P1 holds Resource R1 and waits for Resource R2</p>
                <p>Process P2 holds Resource R2 and waits for Resource R1</p>
                <p>Result: <strong>Both processes wait forever!</strong></p>
            </div>
        </section>

        <!-- Section 2: Deadlock Characterization -->
        <section>
            <h2>7.2 Deadlock Characterization</h2>
            
            <h3>Four Necessary Conditions for Deadlock</h3>
            <p>Deadlock can arise if <strong>ALL FOUR</strong> conditions hold simultaneously:</p>
            
            <div class="conditions-grid">
                <div class="condition-card">
                    <h4><span class="condition-number">1</span>Mutual Exclusion</h4>
                    <p>At least one resource must be held in a non-sharable mode. Only one process at a time can use the resource.</p>
                </div>
                
                <div class="condition-card">
                    <h4><span class="condition-number">2</span>Hold and Wait</h4>
                    <p>A process must be holding at least one resource and waiting to acquire additional resources held by other processes.</p>
                </div>
                
                <div class="condition-card">
                    <h4><span class="condition-number">3</span>No Preemption</h4>
                    <p>Resources cannot be preempted; a resource can be released only voluntarily by the process holding it.</p>
                </div>
                
                <div class="condition-card">
                    <h4><span class="condition-number">4</span>Circular Wait</h4>
                    <p>A set {P0, P1, ..., Pn} of waiting processes must exist such that P0 waits for P1, P1 waits for P2, ..., and Pn waits for P0.</p>
                </div>
            </div>

            <div class="warning-box">
                <h4>üí° Important:</h4>
                <p>All four conditions must be present for a deadlock to occur. If we can prevent ANY ONE of these conditions, we can prevent deadlock!</p>
            </div>
        </section>

        <!-- Section 3: Resource Allocation Graph -->
        <section>
            <h2>7.3 Resource-Allocation Graph (RAG)</h2>
            
            <div class="rag-container">
                <h3>Resource Allocation Graph Components</h3>
                <p>A directed graph used to describe deadlocks</p>
                
                <div class="rag-visualization">
                    <div class="process-node">P1</div>
                    <span class="edge"></span>
                    <div class="resource-node">R1</div>
                    <span class="edge"></span>
                    <div class="process-node">P2</div>
                </div>
                
                <h4>Graph Elements:</h4>
                <ul style="text-align: left; margin-left: 40px;">
                    <li><strong>Vertices:</strong>
                        <ul>
                            <li>Process nodes (circles): P = {P1, P2, ..., Pn}</li>
                            <li>Resource nodes (rectangles): R = {R1, R2, ..., Rm}</li>
                        </ul>
                    </li>
                    <li><strong>Edges:</strong>
                        <ul>
                            <li>Request edge: Pi ‚Üí Rj (process requests resource)</li>
                            <li>Assignment edge: Rj ‚Üí Pi (resource assigned to process)</li>
                        </ul>
                    </li>
                </ul>
            </div>

            <div class="example-box">
                <h4>RAG Analysis Rules:</h4>
                <ul>
                    <li>If graph has <strong>no cycles</strong> ‚Üí <strong>No deadlock</strong></li>
                    <li>If graph has a cycle:
                        <ul>
                            <li>If only <strong>one instance</strong> per resource type ‚Üí <strong>Deadlock</strong></li>
                            <li>If <strong>several instances</strong> per resource type ‚Üí <strong>Possibility of deadlock</strong></li>
                        </ul>
                    </li>
                </ul>
            </div>

            <div class="image-placeholder">
                <h4>üìä Resource Allocation Graph Examples</h4>
                <p>[Insert RAG diagrams showing deadlock and no-deadlock scenarios]</p>
            </div>
        </section>

        <!-- Section 4: Handling Deadlocks -->
        <section>
            <h2>7.4 Methods for Handling Deadlocks</h2>
            
            <div class="prevention-grid">
                <div class="prevention-card">
                    <h4>1Ô∏è‚É£ Deadlock Prevention</h4>
                    <p>Ensure that at least one of the four necessary conditions cannot hold.</p>
                    <ul>
                        <li>Structural approach</li>
                        <li>Prevents deadlocks by design</li>
                        <li>May lead to low device utilization</li>
                    </ul>
                </div>
                
                <div class="prevention-card">
                    <h4>2Ô∏è‚É£ Deadlock Avoidance</h4>
                    <p>Requires advance knowledge of resource needs. System decides if request should wait.</p>
                    <ul>
                        <li>Dynamic approach</li>
                        <li>Uses Banker's Algorithm</li>
                        <li>Maintains safe state</li>
                    </ul>
                </div>
                
                <div class="prevention-card">
                    <h4>3Ô∏è‚É£ Deadlock Detection</h4>
                    <p>Allow deadlocks to occur, then detect and recover.</p>
                    <ul>
                        <li>Periodic checking</li>
                        <li>Detection algorithm</li>
                        <li>Recovery procedures</li>
                    </ul>
                </div>
                
                <div class="prevention-card">
                    <h4>4Ô∏è‚É£ Ignore the Problem</h4>
                    <p>Ostrich Algorithm - pretend deadlocks never occur.</p>
                    <ul>
                        <li>Used by most OS</li>
                        <li>Manual intervention</li>
                        <li>Cost-effective for rare deadlocks</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Section 5: Deadlock Prevention -->
        <section>
            <h2>7.5 Deadlock Prevention</h2>
            
            <p>Restrain the ways resource requests can be made to ensure at least one condition cannot occur:</p>
            
            <h3>Preventing Each Condition:</h3>
            
            <div class="concept-box">
                <h4>1. Mutual Exclusion</h4>
                <p><strong>Prevention:</strong> Not practical for most resources. Some resources are inherently non-sharable (e.g., printer).</p>
                <p><strong>Solution:</strong> Use spooling for some resources (printer queues).</p>
            </div>

            <div class="concept-box">
                <h4>2. Hold and Wait</h4>
                <p><strong>Prevention:</strong> Guarantee that when a process requests a resource, it doesn't hold any other resources.</p>
                <p><strong>Solutions:</strong></p>
                <ul>
                    <li>Request all resources at beginning (low resource utilization)</li>
                    <li>Release all resources before requesting new ones</li>
                </ul>
            </div>

            <div class="concept-box">
                <h4>3. No Preemption</h4>
                <p><strong>Prevention:</strong> If a process holding resources requests another that cannot be immediately allocated, all currently held resources are released.</p>
                <p><strong>Limitation:</strong> Applied only to resources whose state can be saved (CPU, memory).</p>
            </div>

            <div class="concept-box">
                <h4>4. Circular Wait</h4>
                <p><strong>Prevention:</strong> Impose a total ordering of all resource types.</p>
                <p><strong>Solution:</strong> Require processes to request resources in increasing order of enumeration.</p>
                
                <div class="code-block">
<span class="code-comment">// Resource ordering example:</span>
R1 = tape drive (order = 1)
R2 = disk drive (order = 2)
R3 = printer (order = 3)

<span class="code-comment">// Process must request in order: R1 ‚Üí R2 ‚Üí R3</span>
<span class="code-comment">// Cannot request R1 after holding R2</span>
                </div>
            </div>
        </section>

        <!-- Section 6: Deadlock Avoidance -->
        <section>
            <h2>7.6 Deadlock Avoidance</h2>
            
            <h3>Safe State</h3>
            <div class="concept-box">
                <p>A state is <span class="highlight">safe</span> if the system can allocate resources to each process in some order and still avoid deadlock.</p>
                <p>A system is in a safe state if there exists a <span class="highlight">safe sequence</span> of all processes.</p>
            </div>

            <div class="state-diagram">
                <div class="state-box safe">
                    <h4>Safe State</h4>
                    <p>No Deadlock Possible</p>
                </div>
                <span style="font-size: 30px;">‚Üí</span>
                <div class="state-box unsafe">
                    <h4>Unsafe State</h4>
                    <p>May Lead to Deadlock</p>
                </div>
                <span style="font-size: 30px;">‚Üí</span>
                <div class="state-box deadlock">
                    <h4>Deadlock State</h4>
                    <p>System Stuck</p>
                </div>
            </div>

            <h3>Resource-Allocation Graph Algorithm</h3>
            <p>For single instance of each resource type:</p>
            <ul style="margin-left: 40px;">
                <li>Add <strong>claim edge</strong> Pi ‚Üí Rj (dashed line)</li>
                <li>Claim edge converts to request edge when process requests resource</li>
                <li>Request edge converts to assignment edge when resource allocated</li>
                <li>Check for cycles including claim edges</li>
            </ul>

            <h3>Banker's Algorithm</h3>
            <div class="banker-container">
                <h4>For Multiple Instances of Resources</h4>
                <p>Named after banking system that ensures bank never allocates all cash.</p>
                
                <h4>Data Structures (n processes, m resource types):</h4>
                <div style="display: flex; justify-content: space-around; flex-wrap: wrap;">
                    <div class="matrix-container">
                        <div class="matrix-title">Available[m]</div>
                        <div class="matrix">
                            <div class="matrix-row">
                                <div class="matrix-cell">3</div>
                                <div class="matrix-cell">3</div>
                                <div class="matrix-cell">2</div>
                            </div>
                        </div>
                        <p style="font-size: 0.9em; margin-top: 10px;">Available resources</p>
                    </div>
                    
                    <div class="matrix-container">
                        <div class="matrix-title">Max[n][m]</div>
                        <div class="matrix">
                            <div class="matrix-row">
                                <div class="matrix-cell">7</div>
                                <div class="matrix-cell">5</div>
                                <div class="matrix-cell">3</div>
                            </div>
                            <div class="matrix-row">
                                <div class="matrix-cell">3</div>
                                <div class="matrix-cell">2</div>
                                <div class="matrix-cell">2</div>
                            </div>
                            <div class="matrix-row">
                                <div class="matrix-cell">9</div>
                                <div class="matrix-cell">0</div>
                                <div class="matrix-cell">2</div>
                            </div>
                        </div>
                        <p style="font-size: 0.9em; margin-top: 10px;">Maximum demand</p>
                    </div>
                    
                    <div class="matrix-container">
                        <div class="matrix-title">Allocation[n][m]</div>
                        <div class="matrix">
                            <div class="matrix-row">
                                <div class="matrix-cell">0</div>
                                <div class="matrix-cell">1</div>
                                <div class="matrix-cell">0</div>
                            </div>
                            <div class="matrix-row">
                                <div class="matrix-cell">2</div>
                                <div class="matrix-cell">0</div>
                                <div class="matrix-cell">0</div>
                            </div>
                            <div class="matrix-row">
                                <div class="matrix-cell">3</div>
                                <div class="matrix-cell">0</div>
                                <div class="matrix-cell">2</div>
                            </div>
                        </div>
                        <p style="font-size: 0.9em; margin-top: 10px;">Currently allocated</p>
                    </div>
                    
                    <div class="matrix-container">
                        <div class="matrix-title">Need[n][m]</div>
                        <div class="matrix">
                            <div class="matrix-row">
                                <div class="matrix-cell">7</div>
                                <div class="matrix-cell">4</div>
                                <div class="matrix-cell">3</div>
                            </div>
                            <div class="matrix-row">
                                <div class="matrix-cell">1</div>
                                <div class="matrix-cell">2</div>
                                <div class="matrix-cell">2</div>
                            </div>
                            <div class="matrix-row">
                                <div class="matrix-cell">6</div>
                                <div class="matrix-cell">0</div>
                                <div class="matrix-cell">0</div>
                            </div>
                        </div>
                        <p style="font-size: 0.9em; margin-top: 10px;">Need = Max - Allocation</p>
                    </div>
                </div>
            </div>

            <h3>Safety Algorithm</h3>
            <div class="code-block">
<span class="code-comment">// Safety Algorithm to find safe sequence</span>
1. Let Work = Available and Finish[i] = false for all i

2. Find an i such that:
   Finish[i] == false AND Need[i] ‚â§ Work
   If no such i exists, go to step 4

3. Work = Work + Allocation[i]
   Finish[i] = true
   Go to step 2

4. If Finish[i] == true for all i, 
   then system is in safe state
            </div>

            <div class="example-box">
                <h4>Example Safe Sequence:</h4>
                <div class="safe-sequence">
                    <span class="sequence-step">P1</span>
                    <span class="sequence-arrow">‚Üí</span>
                    <span class="sequence-step">P3</span>
                    <span class="sequence-arrow">‚Üí</span>
                    <span class="sequence-step">P4</span>
                    <span class="sequence-arrow">‚Üí</span>
                    <span class="sequence-step">P2</span>
                    <span class="sequence-arrow">‚Üí</span>
                    <span class="sequence-step">P0</span>
                </div>
                <p style="text-align: center; margin-top: 10px;">System is in safe state with this execution order</p>
            </div>
        </section>

        <!-- Section 7: Deadlock Detection -->
        <section>
            <h2>7.7 Deadlock Detection</h2>
            
            <div class="detection-visual">
                <h3>Detection Algorithm</h3>
                <p>Allow system to enter deadlock state, then detect and recover.</p>
                
                <h4>Single Instance of Each Resource Type:</h4>
                <ul>
                    <li>Maintain wait-for graph</li>
                    <li>Nodes are processes</li>
                    <li>Pi ‚Üí Pj if Pi is waiting for Pj</li>
                    <li>Periodically check for cycles</li>
                </ul>
                
                <div class="cycle-indicator">
                    üîÑ Cycle in graph = Deadlock detected!
                </div>
            </div>

            <h3>Multiple Instances Detection Algorithm</h3>
            <div class="code-block">
<span class="code-comment">// Similar to Banker's algorithm but for detection</span>
1. Let Work = Available
   For i = 0 to n-1:
      if Allocation[i] ‚â† 0
         Finish[i] = false
      else
         Finish[i] = true

2. Find index i such that:
   Finish[i] == false AND Request[i] ‚â§ Work
   
3. Work = Work + Allocation[i]
   Finish[i] = true
   Go to step 2

4. If Finish[i] == false for some i,
   then system is in deadlock state
   Processes with Finish[i] == false are deadlocked
            </div>

            <h3>When to Invoke Detection Algorithm?</h3>
            <ul style="margin-left: 40px;">
                <li>How often is deadlock likely to occur?</li>
                <li>How many processes will be affected?</li>
                <li>Options:
                    <ul>
                        <li>Every time a request cannot be granted immediately</li>
                        <li>At regular time intervals</li>
                        <li>When CPU utilization drops below threshold</li>
                    </ul>
                </li>
            </ul>
        </section>

        <!-- Section 8: Recovery from Deadlock -->
        <section>
            <h2>7.8 Recovery from Deadlock</h2>
            
            <div class="recovery-methods">
                <h3>Recovery Methods</h3>
                
                <div class="recovery-option">
                    <h4>Option 1: Process Termination</h4>
                    <ul>
                        <li><strong>Abort all deadlocked processes</strong>
                            <ul>
                                <li>Clear deadlock immediately</li>
                                <li>Expensive - all work lost</li>
                            </ul>
                        </li>
                        <li><strong>Abort one process at a time</strong>
                            <ul>
                                <li>Check for deadlock after each abort</li>
                                <li>Less expensive but more overhead</li>
                            </ul>
                        </li>
                    </ul>
                </div>
                
                <div class="recovery-option">
                    <h4>Option 2: Resource Preemption</h4>
                    <ul>
                        <li><strong>Selecting a victim</strong> - Which resources and processes to preempt?</li>
                        <li><strong>Rollback</strong> - Return to safe state, restart process</li>
                        <li><strong>Starvation</strong> - Ensure same process not always victim</li>
                    </ul>
                </div>
            </div>

            <h3>Factors in Selecting Victim</h3>
            <table>
                <tr>
                    <th>Factor</th>
                    <th>Consideration</th>
                </tr>
                <tr>
                    <td>Priority</td>
                    <td>Lower priority process selected first</td>
                </tr>
                <tr>
                    <td>Time</td>
                    <td>How long process has computed and remaining time</td>
                </tr>
                <tr>
                    <td>Resources</td>
                    <td>Resources used and resources needed to complete</td>
                </tr>
                <tr>
                    <td>Rollback Cost</td>
                    <td>Number of processes that need termination</td>
                </tr>
                <tr>
                    <td>Interactive/Batch</td>
                    <td>Interactive processes may have higher priority</td>
                </tr>
            </table>
        </section>

        <!-- Section 9: Practical Examples -->
        <section>
            <h2>7.9 Practical Examples</h2>
            
            <div class="example-box">
                <h4>Example 1: Banker's Algorithm Application</h4>
                <p><strong>Given:</strong> 5 processes (P0-P4), 3 resource types (A=10, B=5, C=7)</p>
                
                <table>
                    <tr>
                        <th>Process</th>
                        <th>Allocation<br>(A B C)</th>
                        <th>Max<br>(A B C)</th>
                        <th>Need<br>(A B C)</th>
                    </tr>
                    <tr>
                        <td>P0</td>
                        <td>0 1 0</td>
                        <td>7 5 3</td>
                        <td>7 4 3</td>
                    </tr>
                    <tr>
                        <td>P1</td>
                        <td>2 0 0</td>
                        <td>3 2 2</td>
                        <td>1 2 2</td>
                    </tr>
                    <tr>
                        <td>P2</td>
                        <td>3 0 2</td>
                        <td>9 0 2</td>
                        <td>6 0 0</td>
                    </tr>
                    <tr>
                        <td>P3</td>
                        <td>2 1 1</td>
                        <td>2 2 2</td>
                        <td>0 1 1</td>
                    </tr>
                    <tr>
                        <td>P4</td>
                        <td>0 0 2</td>
                        <td>4 3 3</td>
                        <td>4 3 1</td>
                    </tr>
                </table>
                
                <p><strong>Available:</strong> A=3, B=3, C=2</p>
                <p><strong>Safe Sequence:</strong> &lt;P1, P3, P4, P2, P0&gt;</p>
                <p><strong>System State:</strong> SAFE ‚úì</p>
            </div>

            <div class="example-box">
                <h4>Example 2: Resource Request</h4>
                <p>If P1 requests (1,0,2):</p>
                <ol>
                    <li>Check: Request ‚â§ Need? (1,0,2) ‚â§ (1,2,2) ‚úì</li>
                    <li>Check: Request ‚â§ Available? (1,0,2) ‚â§ (3,3,2) ‚úì</li>
                    <li>Pretend allocation:
                        <ul>
                            <li>Available = (3,3,2) - (1,0,2) = (2,3,0)</li>
                            <li>Allocation[P1] = (2,0,0) + (1,0,2) = (3,0,2)</li>
                            <li>Need[P1] = (1,2,2) - (1,0,2) = (0,2,0)</li>
                        </ul>
                    </li>
                    <li>Run safety algorithm ‚Üí Find safe sequence</li>
                    <li>If safe, grant request; else deny</li>
                </ol>
            </div>
        </section>

        <!-- Section 10: Practice Problems -->
        <section>
            <h2>7.10 Practice Problems and Exam Questions</h2>
            
            <div class="exam-section">
                <h3>Multiple Choice Questions</h3>
                
                <div class="exam-question">
                    <p><strong>Q1.</strong> Which of the following is NOT a necessary condition for deadlock?</p>
                    <ul class="mcq-options">
                        <li>a) Mutual exclusion</li>
                        <li>b) Hold and wait</li>
                        <li>c) Preemption allowed</li>
                        <li class="correct-answer">c) Preemption allowed</li>
                    </ul>
                </div>

                <div class="exam-question">
                    <p><strong>Q2.</strong> In Resource Allocation Graph, a cycle indicates:</p>
                    <ul class="mcq-options">
                        <li>a) Always a deadlock</li>
                        <li class="correct-answer">b) Deadlock if single instance, possible deadlock if multiple</li>
                        <li>c) Never a deadlock</li>
                        <li>d) System is safe</li>
                    </ul>
                </div>

                <div class="exam-question">
                    <p><strong>Q3.</strong> Banker's algorithm is used for:</p>
                    <ul class="mcq-options">
                        <li>a) Deadlock prevention</li>
                        <li class="correct-answer">b) Deadlock avoidance</li>
                        <li>c) Deadlock detection</li>
                        <li>d) Deadlock recovery</li>
                    </ul>
                </div>

                <div class="exam-question">
                    <p><strong>Q4.</strong> A safe state means:</p>
                    <ul class="mcq-options">
                        <li>a) System is in deadlock</li>
                        <li>b) System will enter deadlock</li>
                        <li class="correct-answer">c) System can avoid deadlock</li>
                        <li>d) System has no processes</li>
                    </ul>
                </div>

                <div class="exam-question">
                    <p><strong>Q5.</strong> Which method prevents circular wait?</p>
                    <ul class="mcq-options">
                        <li class="correct-answer">a) Resource ordering</li>
                        <li>b) Resource sharing</li>
                        <li>c) Process termination</li>
                        <li>d) Resource preemption</li>
                    </ul>
                </div>

                <h3>Short Answer Questions</h3>
                
                <div class="exam-question">
                    <p><strong>Q6.</strong> Explain the difference between deadlock prevention and deadlock avoidance.</p>
                    <div class="example-box">
                        <h4>Answer:</h4>
                        <p><strong>Prevention:</strong> Structurally makes deadlock impossible by ensuring at least one necessary condition cannot occur.</p>
                        <p><strong>Avoidance:</strong> Dynamically examines resource allocation state to ensure system never enters unsafe state.</p>
                    </div>
                </div>

                <div class="exam-question">
                    <p><strong>Q7.</strong> Given 3 processes with following needs. Is the system in safe state?</p>
                    <table style="width: auto; margin: 10px auto;">
                        <tr>
                            <th>Process</th>
                            <th>Allocated</th>
                            <th>Max</th>
                        </tr>
                        <tr>
                            <td>P0</td>
                            <td>1</td>
                            <td>4</td>
                        </tr>
                        <tr>
                            <td>P1</td>
                            <td>2</td>
                            <td>3</td>
                        </tr>
                        <tr>
                            <td>P2</td>
                            <td>2</td>
                            <td>9</td>
                        </tr>
                    </table>
                    <p>Available = 2</p>
                    
                    <div class="example-box">
                        <h4>Solution:</h4>
                        <p>Need: P0=3, P1=1, P2=7</p>
                        <p>Can satisfy P1 (Need=1 ‚â§ Available=2)</p>
                        <p>After P1: Available = 2 + 2 = 4</p>
                        <p>Can satisfy P0 (Need=3 ‚â§ Available=4)</p>
                        <p>After P0: Available = 4 + 1 = 5</p>
                        <p>Cannot satisfy P2 (Need=7 > Available=5)</p>
                        <p><strong>System is NOT in safe state</strong></p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 11: Key Terms -->
        <section>
            <h2>7.11 Key Terms and Definitions</h2>
            
            <table>
                <tr>
                    <th>Term</th>
                    <th>Definition</th>
                </tr>
                <tr>
                    <td><strong>Deadlock</strong></td>
                    <td>Processes blocked forever waiting for each other</td>
                </tr>
                <tr>
                    <td><strong>Livelock</strong></td>
                    <td>Processes continuously change state but make no progress</td>
                </tr>
                <tr>
                    <td><strong>Starvation</strong></td>
                    <td>Process waits indefinitely while others proceed</td>
                </tr>
                <tr>
                    <td><strong>Safe State</strong></td>
                    <td>System can allocate resources without entering deadlock</td>
                </tr>
                <tr>
                    <td><strong>Unsafe State</strong></td>
                    <td>May lead to deadlock (not necessarily deadlocked)</td>
                </tr>
                <tr>
                    <td><strong>RAG</strong></td>
                    <td>Resource Allocation Graph for visualizing resource allocation</td>
                </tr>
                <tr>
                    <td><strong>Banker's Algorithm</strong></td>
                    <td>Deadlock avoidance algorithm for multiple resource instances</td>
                </tr>
                <tr>
                    <td><strong>Wait-for Graph</strong></td>
                    <td>Variant of RAG for deadlock detection</td>
                </tr>
                <tr>
                    <td><strong>Circular Wait</strong></td>
                    <td>Cyclic chain of processes waiting for resources</td>
                </tr>
                <tr>
                    <td><strong>Resource Ordering</strong></td>
                    <td>Prevention technique assigning order to resources</td>
                </tr>
                <tr>
                    <td><strong>Rollback</strong></td>
                    <td>Return process to previous safe state</td>
                </tr>
                <tr>
                    <td><strong>Victim Selection</strong></td>
                    <td>Choosing process to terminate or preempt</td>
                </tr>
            </table>
        </section>

        <!-- Image Placeholders -->
        <section>
            <h2>7.12 Diagrams from Slides</h2>
            
            <div class="image-placeholder">
                <h4>üìä Resource Allocation Graph</h4>
                <p>[Insert RAG diagram with processes and resources]</p>
            </div>

            <div class="image-placeholder">
                <h4>üìä Deadlock vs No Deadlock RAG</h4>
                <p>[Insert comparison of RAGs with and without cycles]</p>
            </div>

            <div class="image-placeholder">
                <h4>üìä Safe, Unsafe, and Deadlock States</h4>
                <p>[Insert state transition diagram]</p>
            </div>

            <div class="image-placeholder">
                <h4>üìä Banker's Algorithm Example</h4>
                <p>[Insert step-by-step Banker's algorithm execution]</p>
            </div>

            <div class="warning-box">
                <p><strong>Note:</strong> Please provide the actual diagrams from your course materials to replace these placeholders.</p>
            </div>
        </section>

        <footer>
            <p>CS330 - Operating Systems</p>
            <p>Chapter 7: Deadlocks</p>
            <p><strong>Created by: Shoug Alomran</strong></p>
        </footer>
    </div>
</body>
</html>