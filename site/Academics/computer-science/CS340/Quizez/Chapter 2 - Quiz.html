<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CS340 Chapter 2: EER Modeling - Comprehensive Exam</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
    }

    .container {
      max-width: 1000px;
      margin: 0 auto;
      background: white;
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      overflow: hidden;
    }

    .header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 40px;
      text-align: center;
    }

    .header h1 {
      font-size: 2.5em;
      margin-bottom: 10px;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
    }

    .header p {
      font-size: 1.1em;
      opacity: 0.9;
    }

    .exam-info {
      background: #f8f9fa;
      padding: 20px 40px;
      border-bottom: 3px solid #667eea;
    }

    .exam-info p {
      margin: 5px 0;
      color: #555;
    }

    .content {
      padding: 40px;
    }

    .question-block {
      background: #f8f9fa;
      border-left: 5px solid #667eea;
      padding: 25px;
      margin-bottom: 30px;
      border-radius: 8px;
      transition: transform 0.2s;
    }

    .question-block:hover {
      transform: translateX(5px);
    }

    .question-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }

    .question-number {
      font-weight: bold;
      color: #667eea;
      font-size: 1.2em;
    }

    .badge {
      background: #ff6b6b;
      color: white;
      padding: 5px 12px;
      border-radius: 20px;
      font-size: 0.85em;
      font-weight: bold;
    }

    .badge.past-exam {
      background: #51cf66;
    }

    .question-text {
      color: #2c3e50;
      line-height: 1.6;
      margin-bottom: 20px;
      font-size: 1.05em;
    }

    .option {
  margin: 12px 0;
  padding: 12px 16px;
  background: #ffffff;
  border-radius: 8px;
  border: 1px solid #ccc;
  display: flex;
  align-items: center;
  font-size: 1em;
  transition: background 0.3s, border-color 0.3s;
}

.option:hover {
  background: #f0f4ff;
  border-color: #667eea;
}

.option input[type="radio"],
.option input[type="checkbox"] {
  margin-right: 12px;
  transform: scale(1.2);
  cursor: pointer;
}

.options {
  margin-left: 10px;
  display: flex;
  flex-direction: column;
  gap: 10px;
}

    textarea {
      width: 100%;
      min-height: 150px;
      padding: 15px;
      border: 2px solid #ddd;
      border-radius: 8px;
      font-family: inherit;
      font-size: 1em;
      resize: vertical;
      transition: border-color 0.3s;
    }

    textarea:focus {
      outline: none;
      border-color: #667eea;
    }

    .submit-btn {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 15px 40px;
      border: none;
      border-radius: 30px;
      font-size: 1.1em;
      font-weight: bold;
      cursor: pointer;
      display: block;
      margin: 30px auto;
      box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
      transition: transform 0.2s, box-shadow 0.2s;
    }

    .submit-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
    }

    .result {
      display: none;
      margin-top: 20px;
      padding: 20px;
      border-radius: 8px;
      animation: slideIn 0.5s;
    }

    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(-20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .result.correct {
      background: #d4edda;
      border: 2px solid #28a745;
      color: #155724;
    }

    .result.incorrect {
      background: #f8d7da;
      border: 2px solid #dc3545;
      color: #721c24;
    }

    .result.partial {
      background: #fff3cd;
      border: 2px solid #ffc107;
      color: #856404;
    }

    .explanation {
      margin-top: 15px;
      padding: 15px;
      background: white;
      border-radius: 6px;
      line-height: 1.6;
    }

    .score-display {
      position: fixed;
      top: 20px;
      right: 20px;
      background: white;
      padding: 20px;
      border-radius: 15px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
      display: none;
      z-index: 1000;
    }

    .score-display.show {
      display: block;
      animation: slideIn 0.5s;
    }

    .score-number {
      font-size: 2em;
      font-weight: bold;
      color: #667eea;
      text-align: center;
    }

    .footer {
      background: #2c3e50;
      color: white;
      text-align: center;
      padding: 25px;
      margin-top: 40px;
    }

    .footer p {
      margin: 5px 0;
    }

    .mock-answer {
      background: #e8f5e9;
      border-left: 4px solid #4caf50;
      padding: 15px;
      margin-top: 10px;
      border-radius: 6px;
    }

    .mock-answer-title {
      font-weight: bold;
      color: #2e7d32;
      margin-bottom: 8px;
    }

    .keyword-feedback {
      margin-top: 10px;
      padding: 10px;
      background: #fff3e0;
      border-radius: 6px;
    }

    .keyword-item {
      margin: 5px 0;
    }

    .keyword-found {
      color: #2e7d32;
    }

    .keyword-missing {
      color: #c62828;
    }
  </style>
  <script src="/javascripts/standalone-theme.js"></script>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>ðŸ“š CS340 Chapter 2 Exam</h1>
      <p>Enhanced Entity-Relationship (EER) Modeling</p>
    </div>

    <div class="exam-info">
      <p><strong>Course:</strong> Introduction to Database Systems (CS340)</p>
      <p><strong>Chapter:</strong> 2 - Enhanced Entity-Relationship Model</p>
      <p><strong>Total Questions:</strong> 25</p>
      <p><strong>Time Limit:</strong> 90 minutes (suggested)</p>
    </div>

    <div class="content">
      <form id="examForm">

        <!-- Question 1 -->
        <div class="question-block">
          <div class="question-header">
            <span class="question-number">Question 1 (MCQ)</span>
            <span class="badge past-exam">Past Exam</span>
          </div>
          <div class="question-text">
            A weak entity type always has a _______ participation constraint with respect to its identifying relationship.
          </div>
          <div class="options">
            <label class="option">
              <input type="radio" name="q1" value="a"> a. partial
            </label>
            <label class="option">
              <input type="radio" name="q1" value="b"> b. total
            </label>
            <label class="option">
              <input type="radio" name="q1" value="c"> c. overlap
            </label>
            <label class="option">
              <input type="radio" name="q1" value="d"> d. disjoint
            </label>
          </div>
          <div class="result" id="result-q1"></div>
        </div>

        <!-- Question 2 -->
        <div class="question-block">
          <div class="question-header">
            <span class="question-number">Question 2 (MCQ)</span>
            <span class="badge past-exam">Past Exam</span>
          </div>
          <div class="question-text">
            The disjoint constraint in the EER model specifies that:
          </div>
          <div class="options">
            <label class="option">
              <input type="radio" name="q2" value="a"> a. An entity can be a member of more than one subclass
            </label>
            <label class="option">
              <input type="radio" name="q2" value="b"> b. An entity can be a member of only one subclass in a subclass relationship
            </label>
            <label class="option">
              <input type="radio" name="q2" value="c"> c. All entities must belong to at least one subclass
            </label>
            <label class="option">
              <input type="radio" name="q2" value="d"> d. Subclasses cannot have their own attributes
            </label>
          </div>
          <div class="result" id="result-q2"></div>
        </div>

        <!-- Question 3 -->
        <div class="question-block">
          <div class="question-header">
            <span class="question-number">Question 3 (MCQ)</span>
            <span class="badge">New</span>
          </div>
          <div class="question-text">
            Which of the following best describes specialization in EER diagrams?
          </div>
          <div class="options">
            <label class="option">
              <input type="radio" name="q3" value="a"> a. The process of combining several entity types into a higher-level entity type
            </label>
            <label class="option">
              <input type="radio" name="q3" value="b"> b. The process of defining a set of subclasses of an entity type
            </label>
            <label class="option">
              <input type="radio" name="q3" value="c"> c. The process of creating weak entities
            </label>
            <label class="option">
              <input type="radio" name="q3" value="d"> d. The process of normalizing relationships
            </label>
          </div>
          <div class="result" id="result-q3"></div>
        </div>

        <!-- Question 4 -->
        <div class="question-block">
          <div class="question-header">
            <span class="question-number">Question 4 (MCQ)</span>
            <span class="badge">New</span>
          </div>
          <div class="question-text">
            What symbol is used in EER diagrams to represent the subset (IS-A) relationship?
          </div>
          <div class="options">
            <label class="option">
              <input type="radio" name="q4" value="a"> a. A rectangle
            </label>
            <label class="option">
              <input type="radio" name="q4" value="b"> b. A circle with a 'U' inside
            </label>
            <label class="option">
              <input type="radio" name="q4" value="c"> c. A circle with a 'd' inside for disjoint
            </label>
            <label class="option">
              <input type="radio" name="q4" value="d"> d. A diamond
            </label>
          </div>
          <div class="result" id="result-q4"></div>
        </div>

        <!-- Question 5 -->
        <div class="question-block">
          <div class="question-header">
            <span class="question-number">Question 5 (MCQ)</span>
            <span class="badge">New</span>
          </div>
          <div class="question-text">
            In a total specialization constraint:
          </div>
          <div class="options">
            <label class="option">
              <input type="radio" name="q5" value="a"> a. Every entity in the superclass must belong to at least one subclass
            </label>
            <label class="option">
              <input type="radio" name="q5" value="b"> b. Some entities in the superclass may not belong to any subclass
            </label>
            <label class="option">
              <input type="radio" name="q5" value="c"> c. Entities can belong to multiple subclasses
            </label>
            <label class="option">
              <input type="radio" name="q5" value="d"> d. The superclass cannot have its own attributes
            </label>
          </div>
          <div class="result" id="result-q5"></div>
        </div>

        <!-- Question 6 -->
        <div class="question-block">
          <div class="question-header">
            <span class="question-number">Question 6 (MCQ)</span>
            <span class="badge">New</span>
          </div>
          <div class="question-text">
            Which of the following statements about generalization is TRUE?
          </div>
          <div class="options">
            <label class="option">
              <input type="radio" name="q6" value="a"> a. It is a bottom-up design process
            </label>
            <label class="option">
              <input type="radio" name="q6" value="b"> b. It is a top-down design process
            </label>
            <label class="option">
              <input type="radio" name="q6" value="c"> c. It always results in disjoint subclasses
            </label>
            <label class="option">
              <input type="radio" name="q6" value="d"> d. It cannot be used with weak entities
            </label>
          </div>
          <div class="result" id="result-q6"></div>
        </div>

        <!-- Question 7 -->
        <div class="question-block">
          <div class="question-header">
            <span class="question-number">Question 7 (MCQ)</span>
            <span class="badge">New</span>
          </div>
          <div class="question-text">
            A union type (category) in EER diagrams:
          </div>
          <div class="options">
            <label class="option">
              <input type="radio" name="q7" value="a"> a. Represents a single superclass with multiple subclasses
            </label>
            <label class="option">
              <input type="radio" name="q7" value="b"> b. Represents a subclass with multiple superclasses
            </label>
            <label class="option">
              <input type="radio" name="q7" value="c"> c. Is always disjoint
            </label>
            <label class="option">
              <input type="radio" name="q7" value="d"> d. Cannot have its own attributes
            </label>
          </div>
          <div class="result" id="result-q7"></div>
        </div>

        <!-- Question 8 -->
        <div class="question-block">
          <div class="question-header">
            <span class="question-number">Question 8 (MCQ)</span>
            <span class="badge">New</span>
          </div>
          <div class="question-text">
            What is the difference between overlapping and disjoint constraints?
          </div>
          <div class="options">
            <label class="option">
              <input type="radio" name="q8" value="a"> a. Overlapping allows an entity to belong to multiple subclasses; disjoint does not
            </label>
            <label class="option">
              <input type="radio" name="q8" value="b"> b. Disjoint allows an entity to belong to multiple subclasses; overlapping does not
            </label>
            <label class="option">
              <input type="radio" name="q8" value="c"> c. They are the same concept with different names
            </label>
            <label class="option">
              <input type="radio" name="q8" value="d"> d. Overlapping is used for weak entities only
            </label>
          </div>
          <div class="result" id="result-q8"></div>
        </div>

        <!-- Question 9 -->
        <div class="question-block">
          <div class="question-header">
            <span class="question-number">Question 9 (MCQ)</span>
            <span class="badge">New</span>
          </div>
          <div class="question-text">
            In an EER diagram, a subclass discriminator attribute:
          </div>
          <div class="options">
            <label class="option">
              <input type="radio" name="q9" value="a"> a. Determines which subclass an entity belongs to
            </label>
            <label class="option">
              <input type="radio" name="q9" value="b"> b. Is always required for all specializations
            </label>
            <label class="option">
              <input type="radio" name="q9" value="c"> c. Must be a composite attribute
            </label>
            <label class="option">
              <input type="radio" name="q9" value="d"> d. Cannot be used with overlapping constraints
            </label>
          </div>
          <div class="result" id="result-q9"></div>
        </div>

        <!-- Question 10 -->
        <div class="question-block">
          <div class="question-header">
            <span class="question-number">Question 10 (MCQ)</span>
            <span class="badge">New</span>
          </div>
          <div class="question-text">
            Which of the following is TRUE about attribute inheritance in EER?
          </div>
          <div class="options">
            <label class="option">
              <input type="radio" name="q10" value="a"> a. Subclasses inherit all attributes from their superclass
            </label>
            <label class="option">
              <input type="radio" name="q10" value="b"> b. Superclasses inherit attributes from subclasses
            </label>
            <label class="option">
              <input type="radio" name="q10" value="c"> c. Inheritance only applies to key attributes
            </label>
            <label class="option">
              <input type="radio" name="q10" value="d"> d. Weak entities cannot inherit attributes
            </label>
          </div>
          <div class="result" id="result-q10"></div>
        </div>

        <!-- Question 11 -->
        <div class="question-block">
          <div class="question-header">
            <span class="question-number">Question 11 (Short Answer)</span>
            <span class="badge">New</span>
          </div>
          <div class="question-text">
            Explain the difference between specialization and generalization in EER modeling. Provide an example for each.
          </div>
          <textarea name="q11" placeholder="Write your answer here..."></textarea>
          <div class="result" id="result-q11"></div>
        </div>

        <!-- Question 12 -->
        <div class="question-block">
          <div class="question-header">
            <span class="question-number">Question 12 (Short Answer)</span>
            <span class="badge">New</span>
          </div>
          <div class="question-text">
            What is a weak entity type? Describe the characteristics that distinguish it from a regular (strong) entity type.
          </div>
          <textarea name="q12" placeholder="Write your answer here..."></textarea>
          <div class="result" id="result-q12"></div>
        </div>

        <!-- Question 13 -->
        <div class="question-block">
          <div class="question-header">
            <span class="question-number">Question 13 (Scenario)</span>
            <span class="badge past-exam">Past Exam</span>
          </div>
          <div class="question-text">
            At a weekend retreat, the entity type PERSON has three subclasses: CAMPER, BIKER, and RUNNER. Describe how you would model the following scenario using EER notation:
            <br><br>
            "At a given time, a person may or may not be one of these subclasses. However, a person may be any two (or even three) of these subclasses at the same time."
            <br><br>
            What constraints would you use (disjoint/overlapping, total/partial)?
          </div>
          <textarea name="q13" placeholder="Write your answer here..."></textarea>
          <div class="result" id="result-q13"></div>
        </div>

        <!-- Question 14 -->
        <div class="question-block">
          <div class="question-header">
            <span class="question-number">Question 14 (Short Answer)</span>
            <span class="badge">New</span>
          </div>
          <div class="question-text">
            Explain what a "category" (union type) is in EER modeling and provide a real-world example where it would be appropriate to use.
          </div>
          <textarea name="q14" placeholder="Write your answer here..."></textarea>
          <div class="result" id="result-q14"></div>
        </div>

        <!-- Question 15 -->
        <div class="question-block">
          <div class="question-header">
            <span class="question-number">Question 15 (Multiple Choice)</span>
            <span class="badge">New</span>
          </div>
          <div class="question-text">
            Which of the following statements about shared subclasses is TRUE? (Select all that apply)
          </div>
          <div class="options">
            <label class="option">
              <input type="checkbox" name="q15" value="a"> a. A shared subclass can have multiple superclasses
            </label>
            <label class="option">
              <input type="checkbox" name="q15" value="b"> b. A shared subclass inherits attributes from all its superclasses
            </label>
            <label class="option">
              <input type="checkbox" name="q15" value="c"> c. Shared subclasses are also called multiple inheritance
            </label>
            <label class="option">
              <input type="checkbox" name="q15" value="d"> d. Shared subclasses can only exist in overlapping specializations
            </label>
          </div>
          <div class="result" id="result-q15"></div>
        </div>

        <!-- Question 16 -->
        <div class="question-block">
          <div class="question-header">
            <span class="question-number">Question 16 (Design Problem)</span>
            <span class="badge past-exam">Past Exam</span>
          </div>
          <div class="question-text">
            A university hospital is implementing a patient management system. Doctors are categorized into three types: General Practitioner, Surgeon, and Specialist. A doctor must belong to at least one type but can belong to multiple types at once.
            <br><br>
            Describe the EER modeling approach you would use. Specify:
            <ul style="margin-left: 30px; margin-top: 10px;">
              <li>Whether this is specialization or generalization</li>
              <li>Whether to use disjoint or overlapping constraint</li>
              <li>Whether to use total or partial participation</li>
              <li>Justify your choices</li>
            </ul>
          </div>
          <textarea name="q16" placeholder="Write your answer here..."></textarea>
          <div class="result" id="result-q16"></div>
        </div>

        <!-- Question 17 -->
        <div class="question-block">
          <div class="question-header">
            <span class="question-number">Question 17 (MCQ)</span>
            <span class="badge">New</span>
          </div>
          <div class="question-text">
            In EER diagrams, what does a double-lined rectangle represent?
          </div>
          <div class="options">
            <label class="option">
              <input type="radio" name="q17" value="a"> a. A weak entity type
            </label>
            <label class="option">
              <input type="radio" name="q17" value="b"> b. A strong entity type
            </label>
            <label class="option">
              <input type="radio" name="q17" value="c"> c. A subclass
            </label>
            <label class="option">
              <input type="radio" name="q17" value="d"> d. A category
            </label>
          </div>
          <div class="result" id="result-q17"></div>
        </div>

        <!-- Question 18 -->
        <div class="question-block">
          <div class="question-header">
            <span class="question-number">Question 18 (Short Answer)</span>
            <span class="badge">New</span>
          </div>
          <div class="question-text">
            What is the purpose of using a discriminator attribute in specialization? Give an example.
          </div>
          <textarea name="q18" placeholder="Write your answer here..."></textarea>
          <div class="result" id="result-q18"></div>
        </div>

        <!-- Question 19 -->
        <div class="question-block">
          <div class="question-header">
            <span class="question-number">Question 19 (Scenario)</span>
            <span class="badge">New</span>
          </div>
          <div class="question-text">
            Consider a library database where BOOK is an entity with subclasses HARDCOVER, PAPERBACK, and EBOOK. A book can only be one of these types. What constraints would you apply and why?
          </div>
          <textarea name="q19" placeholder="Write your answer here..."></textarea>
          <div class="result" id="result-q19"></div>
        </div>

        <!-- Question 20 -->
        <div class="question-block">
          <div class="question-header">
            <span class="question-number">Question 20 (MCQ)</span>
            <span class="badge">New</span>
          </div>
          <div class="question-text">
            Which notation is used to show total specialization in an EER diagram?
          </div>
          <div class="options">
            <label class="option">
              <input type="radio" name="q20" value="a"> a. A single line from superclass to the specialization circle
            </label>
            <label class="option">
              <input type="radio" name="q20" value="b"> b. A double line from superclass to the specialization circle
            </label>
            <label class="option">
              <input type="radio" name="q20" value="c"> c. A dashed line from superclass to the specialization circle
            </label>
            <label class="option">
              <input type="radio" name="q20" value="d"> d. No line is needed
            </label>
          </div>
          <div class="result" id="result-q20"></div>
        </div>

        <!-- Question 21 -->
        <div class="question-block">
          <div class="question-header">
            <span class="question-number">Question 21 (Short Answer)</span>
            <span class="badge">New</span>
          </div>
          <div class="question-text">
            Explain the concept of participation constraints in identifying relationships for weak entities. Why must a weak entity have total participation?
          </div>
          <textarea name="q21" placeholder="Write your answer here..."></textarea>
          <div class="result" id="result-q21"></div>
        </div>

        <!-- Question 22 -->
        <div class="question-block">
          <div class="question-header">
            <span class="question-number">Question 22 (Error Detection)</span>
            <span class="badge past-exam">Past Exam</span>
          </div>
          <div class="question-text">
            Identify at least THREE errors in the following EER design description:
            <br><br>
            <em>
              "A COPY entity is defined with its own primary key (copy_number). It does not have a total participation constraint with the BOOK entity. The LIBRARY entity is shown as a subclass of BUILDING, and the BORROWER entity has partial participation in the LOAN relationship."
            </em>
          </div>
          <textarea name="q22" placeholder="Write your answer here..."></textarea>
          <div class="result" id="result-q22"></div>
        </div>

        <!-- Question 23 -->
        <div class="question-block">
          <div class="question-header">
            <span class="question-number">Question 23 (MCQ)</span>
            <span class="badge">New</span>
          </div>
          <div class="question-text">
            Derived attributes in EER diagrams are shown using:
          </div>
          <div class="options">
            <label class="option">
              <input type="radio" name="q23" value="a"> a. Solid line oval
            </label>
            <label class="option">
              <input type="radio" name="q23" value="b"> b. Dashed line oval
            </label>
            <label class="option">
              <input type="radio" name="q23" value="c"> c. Double line oval
            </label>
            <label class="option">
              <input type="radio" name="q23" value="d"> d. Rectangle
            </label>
          </div>
          <div class="result" id="result-q23"></div>
        </div>

        <!-- Question 24 -->
        <div class="question-block">
          <div class="question-header">
            <span class="question-number">Question 24 (Design Problem)</span>
            <span class="badge">New</span>
          </div>
          <div class="question-text">
            Design an EER schema for the following scenario:
            <br><br>
            "A company tracks VEHICLES which can be CARS or TRUCKS. Some vehicles are COMPANY_OWNED and others are LEASED. A vehicle can be both a car and company-owned, or a truck and leased, etc."
            <br><br>
            Describe your design approach, including what constraints you would use and why.
          </div>
          <textarea name="q24" placeholder="Write your answer here..."></textarea>
          <div class="result" id="result-q24"></div>
        </div>

        <!-- Question 25 -->
        <div class="question-block">
          <div class="question-header">
            <span class="question-number">Question 25 (Comprehensive)</span>
            <span class="badge">New</span>
          </div>
          <div class="question-text">
            Compare and contrast the following pairs of EER concepts:
            <ul style="margin-left: 30px; margin-top: 10px;">
              <li>Specialization vs. Generalization</li>
              <li>Disjoint vs. Overlapping constraints</li>
              <li>Total vs. Partial specialization</li>
              <li>Strong vs. Weak entities</li>
            </ul>
            Provide examples for each.
          </div>
          <textarea name="q25" placeholder="Write your answer here..."></textarea>
          <div class="result" id="result-q25"></div>
        </div>

        <button type="button" class="submit-btn" onclick="gradeExam()">Submit Exam</button>
      </form>
    </div>

    <div class="footer">
      <p><strong>Prepared by: Shoug Alomran</strong></p>
      <p>CS340 - Introduction to Database Systems</p>
    </div>
  </div>

  <div class="score-display" id="scoreDisplay">
    <div style="font-size: 1.2em; margin-bottom: 10px;">Your Score</div>
    <div class="score-number" id="scoreNumber">0/25</div>
    <div style="margin-top: 10px; font-size: 0.9em;" id="scorePercentage">0%</div>
  </div>

  <script>
    const answers = {
      q1: {
        correct: 'b',
        explanation: 'A weak entity type ALWAYS has total participation in its identifying relationship because it cannot exist without the owner entity. The weak entity is existence-dependent on its owner.'
      },
      q2: {
        correct: 'b',
        explanation: 'The disjoint constraint specifies that an entity can be a member of AT MOST ONE subclass. This means subclasses are mutually exclusive. The symbol "d" in the circle represents disjoint.'
      },
      q3: {
        correct: 'b',
        explanation: 'Specialization is a top-down design process where we define a set of subclasses of an entity type. We start with an entity type and define specialized subclasses based on distinguishing characteristics.'
      },
      q4: {
        correct: 'c',
        explanation: 'A circle with "d" inside represents disjoint subclasses, while a circle with "o" represents overlapping. The circle itself represents the IS-A (subset) relationship in specialization/generalization hierarchies.'
      },
      q5: {
        correct: 'a',
        explanation: 'Total specialization (shown by a double line) means every entity in the superclass MUST belong to at least one subclass. Partial specialization allows entities to not belong to any subclass.'
      },
      q6: {
        correct: 'a',
        explanation: 'Generalization is a bottom-up design process where we combine several entity types with common features into a higher-level generic entity type (superclass). Specialization is top-down.'
      },
      q7: {
        correct: 'b',
        explanation: 'A union type (category) represents a subclass that has multiple superclasses. It is denoted by the symbol âˆª and models the union of different entity types.'
      },
      q8: {
        correct: 'a',
        explanation: 'Overlapping constraint (represented by "o") allows an entity to be a member of multiple subclasses simultaneously. Disjoint constraint (represented by "d") requires membership in at most one subclass.'
      },
      q9: {
        correct: 'a',
        explanation: 'A subclass discriminator is an attribute of the superclass that determines subclass membership. For example, "employee_type" might determine if an employee is a secretary, engineer, or technician.'
      },
      q10: {
        correct: 'a',
        explanation: 'Subclasses inherit ALL attributes and relationships from their superclass(es). This is a fundamental principle of specialization/generalization hierarchies. Subclasses can also have their own specific attributes.'
      },
      q11: {
        keywords: ['specialization', 'top-down', 'generalization', 'bottom-up', 'subclass', 'superclass', 'example'],
        mockAnswer: 'Specialization is a top-down design process where we start with an entity type and define specialized subclasses based on distinguishing characteristics. For example, EMPLOYEE can be specialized into SECRETARY, ENGINEER, and TECHNICIAN based on job type.\n\nGeneralization is a bottom-up design process where we identify common features among different entity types and create a higher-level generic superclass. For example, CAR, TRUCK, and MOTORCYCLE can be generalized into a VEHICLE superclass.\n\nThe key difference is the design direction: specialization goes from general to specific (top-down), while generalization goes from specific to general (bottom-up).',
        minLength: 100
      },
      q12: {
        keywords: ['weak entity', 'owner', 'identifying relationship', 'partial key', 'existence-dependent', 'cannot exist'],
        mockAnswer: 'A weak entity type is an entity that cannot be uniquely identified by its own attributes alone and depends on another entity (owner/parent entity) for its existence.\n\nKey characteristics:\n1. Does not have a complete primary key of its own\n2. Has a partial key (discriminator) that uniquely identifies entities within the same owner entity\n3. Must have total participation in its identifying relationship with the owner entity\n4. Cannot exist independently without the owner entity (existence-dependent)\n5. Represented by a double-lined rectangle in ER diagrams\n\nExample: DEPENDENT entity depends on EMPLOYEE - a dependent cannot exist without being associated with an employee.',
        minLength: 120
      },
      q13: {
        keywords: ['overlapping', 'partial', 'multiple subclasses', 'o', 'optional'],
        mockAnswer: 'For this scenario, I would use:\n\n1. Overlapping constraint (o): Since a person may be any two or even three of these subclasses at the same time, the subclasses are NOT mutually exclusive. The overlapping constraint allows an entity to belong to multiple subclasses simultaneously.\n\n2. Partial participation: Since a person "may or may not" be one of these subclasses, not every PERSON entity needs to belong to a subclass. This is partial (optional) specialization.\n\nThe EER notation would show:\n- PERSON as the superclass\n- A circle with "o" (overlapping) connecting to CAMPER, BIKER, and RUNNER subclasses\n- A single line (not double) from PERSON to the circle indicating partial participation',
        minLength: 100
      },
      q14: {
        keywords: ['union', 'multiple superclasses', 'subset symbol', 'different entity types', 'example'],
        mockAnswer: 'A category (union type) is a subclass that represents a collection of entities from multiple different superclasses. It is a subset of the UNION of its superclasses and is denoted by the âˆª symbol.\n\nReal-world example: OWNER entity can be a category that represents the union of PERSON, BANK, and COMPANY entities. An owner of a vehicle can be a person, a bank (for leased vehicles), or a company. The OWNER category would include entities from any of these three superclasses.\n\nKey characteristics:\n- Has multiple superclasses from different entity types\n- An entity belongs to the category by being a member of ONE OR MORE of the superclasses\n- Used when we need to model "or" relationships between different entity types',
        minLength: 100
      },
      q15: {
        correct: ['a', 'b', 'c'],
        explanation: 'A shared subclass (multiple inheritance) has multiple superclasses and inherits attributes from all of them. This is also called multiple inheritance. Option d is incorrect because shared subclasses can exist in both overlapping and disjoint specializations.'
      },
      q16: {
        keywords: ['specialization', 'overlapping', 'total', 'multiple types', 'at least one'],
        mockAnswer: 'This scenario requires:\n\n1. Specialization: This is a top-down approach where DOCTOR is the superclass and GENERAL_PRACTITIONER, SURGEON, and SPECIALIST are subclasses.\n\n2. Overlapping constraint (o): Since a doctor "can belong to multiple types at once," the subclasses are not mutually exclusive. A doctor can be both a surgeon and a specialist simultaneously.\n\n3. Total participation: Since a doctor "must belong to at least one type," every DOCTOR entity must belong to at least one subclass. This requires total (mandatory) specialization shown by a double line.\n\nJustification:\n- Overlapping is necessary because the problem explicitly states doctors can belong to multiple types\n- Total specialization is required because every doctor must be categorized into at least one type\n- The EER diagram would show DOCTOR connected to a circle with "o" via a double line, with lines extending to the three subclass rectangles',
        minLength: 120
      },
      q17: {
        correct: 'a',
        explanation: 'A double-lined rectangle represents a weak entity type. The double lines indicate that the entity is existence-dependent on another entity and cannot be uniquely identified by its own attributes alone.'
      },
      q18: {
        keywords: ['discriminator', 'attribute', 'determines', 'subclass membership', 'superclass', 'example'],
        mockAnswer: 'A discriminator attribute (or subclass discriminator) is an attribute of the superclass whose values determine which subclass an entity belongs to. It is used in attribute-defined specialization.\n\nPurpose:\n- Provides a clear, systematic way to partition entities into subclasses\n- Makes the specialization criteria explicit and understandable\n- Enables automatic classification of entities\n\nExample: In an EMPLOYEE superclass with subclasses HOURLY_EMPLOYEE and SALARIED_EMPLOYEE, the discriminator attribute might be "employment_type". When employment_type = "hourly", the employee belongs to HOURLY_EMPLOYEE subclass; when employment_type = "salaried", they belong to SALARIED_EMPLOYEE subclass.\n\nThe discriminator is shown next to the line connecting the superclass to the specialization circle.',
        minLength: 100
      },
      q19: {
        keywords: ['disjoint', 'total', 'only one', 'mutually exclusive', 'must be'],
        mockAnswer: 'For this library database scenario, I would apply:\n\n1. Disjoint constraint (d): A book can only be ONE of these types (hardcover, paperback, or ebook), not multiple types simultaneously. The physical nature of a book makes these categories mutually exclusive.\n\n2. Total specialization: Every book in the database must be one of these three types. There are no books that don\'t fall into one of these categories, so total (mandatory) participation is required.\n\nWhy these constraints:\n- Disjoint is appropriate because a single book cannot be both hardcover AND paperback at the same time - these are mutually exclusive physical formats\n- Total specialization ensures complete coverage - every book must have a format type\n- The EER diagram would show BOOK connected via a double line to a circle marked "d", with lines to HARDCOVER, PAPERBACK, and EBOOK subclasses',
        minLength: 100
      },
      q20: {
        correct: 'b',
        explanation: 'Total specialization is shown by a double line from the superclass to the specialization circle. This indicates that every entity in the superclass must belong to at least one subclass. A single line indicates partial specialization.'
      },
      q21: {
        keywords: ['weak entity', 'total participation', 'existence-dependent', 'cannot exist', 'identifying relationship', 'owner'],
        mockAnswer: 'Participation constraints specify whether the existence of an entity depends on its being related to another entity via the relationship.\n\nFor weak entities:\n- A weak entity MUST have total participation in its identifying relationship with its owner entity\n- This is because weak entities are existence-dependent - they cannot exist without being related to an owner entity\n- The identifying relationship is the relationship that connects the weak entity to its owner\n\nWhy total participation is mandatory:\n1. Weak entities don\'t have their own complete primary key\n2. Their existence is entirely dependent on the owner entity\n3. Without the relationship to an owner, a weak entity cannot be identified or exist\n4. Total participation ensures every weak entity instance is always connected to an owner\n\nExample: DEPENDENT (weak entity) must have total participation in the relationship with EMPLOYEE (owner). A dependent cannot exist in the database without being associated with an employee.',
        minLength: 120
      },
      q22: {
        keywords: ['copy', 'weak entity', 'total participation', 'loan', 'borrower', 'identifying relationship'],
        mockAnswer: 'Three main errors:\n\n1. ERROR: COPY has its own primary key (copy_number)\nCORRECT: COPY should be a weak entity with copy_number as a partial key. The full key should be (ISBN, copy_number) where ISBN comes from BOOK. A copy cannot be uniquely identified without knowing which book it is a copy of.\n\n2. ERROR: COPY does not have total participation with BOOK\nCORRECT: COPY must have total participation in its identifying relationship with BOOK because it is existence-dependent. A copy cannot exist without being a copy of a specific book.\n\n3. ERROR: BORROWER has partial participation in LOAN relationship\nCORRECT: If the requirement states "a loan cannot exist without a borrower," then LOAN is a weak entity that should have total participation with BORROWER, not the other way around. Alternatively, if LOAN is not weak, both BORROWER and COPY should have partial participation since not all borrowers/copies are currently in loans.\n\nAdditional possible error: LIBRARY should not be a subclass of BUILDING - they are separate concepts with a "located-in" relationship.',
        minLength: 150
      },
      q23: {
        correct: 'b',
        explanation: 'Derived attributes are shown using a dashed-line oval in ER/EER diagrams. Derived attributes are those whose values can be calculated from other attributes (e.g., age can be derived from date_of_birth).'
      },
      q24: {
        keywords: ['two hierarchies', 'overlapping', 'independent', 'type', 'ownership'],
        mockAnswer: 'This scenario requires TWO INDEPENDENT specialization hierarchies:\n\n1. First hierarchy - Vehicle Type:\n - VEHICLE (superclass)\n - Subclasses: CAR, TRUCK\n - Use: Disjoint (d) and Total specialization\n - Reason: A vehicle is either a car OR a truck, and every vehicle must be one of these types\n\n2. Second hierarchy - Ownership Status:\n - VEHICLE (superclass - same entity)\n - Subclasses: COMPANY_OWNED, LEASED\n - Use: Disjoint (d) and Total specialization\n - Reason: A vehicle is either company-owned OR leased, and every vehicle has an ownership status\n\nWhy this design:\n- The two specializations are independent and orthogonal - they classify vehicles based on different criteria\n- Type (car/truck) is independent of ownership (owned/leased)\n- A vehicle can be "car + company-owned" or "truck + leased" etc.\n- This creates a cross-classification where each vehicle has one value from each hierarchy\n- Both use disjoint constraints because the options within each hierarchy are mutually exclusive\n- Both use total participation because every vehicle must be classified in both dimensions',
        minLength: 150
      },
      q25: {
        keywords: ['specialization', 'generalization', 'top-down', 'bottom-up', 'disjoint', 'overlapping', 'total', 'partial', 'weak', 'strong'],
        mockAnswer: 'SPECIALIZATION vs. GENERALIZATION:\n- Specialization: Top-down process defining subclasses from a superclass\n Example: EMPLOYEE â†’ SECRETARY, ENGINEER, MANAGER\n- Generalization: Bottom-up process combining entity types into a superclass\n Example: CAR, TRUCK, MOTORCYCLE â†’ VEHICLE\n- Both result in the same IS-A hierarchy, just different design approaches\n\nDISJOINT vs. OVERLAPPING:\n- Disjoint (d): Entity can belong to AT MOST ONE subclass (mutually exclusive)\n Example: VEHICLE â†’ CAR, TRUCK (a vehicle cannot be both)\n- Overlapping (o): Entity can belong to MULTIPLE subclasses simultaneously\n Example: PERSON â†’ STUDENT, EMPLOYEE (a person can be both)\n\nTOTAL vs. PARTIAL:\n- Total (double line): Every superclass entity MUST belong to at least one subclass\n Example: ACCOUNT must be either SAVINGS or CHECKING\n- Partial (single line): Superclass entities may not belong to any subclass\n Example: EMPLOYEE may or may not be a MANAGER\n\nSTRONG vs. WEAK ENTITIES:\n- Strong: Has its own primary key, exists independently\n Example: EMPLOYEE (SSN is primary key)\n- Weak: No complete primary key, existence-dependent on owner entity, has partial key\n Example: DEPENDENT (depends on EMPLOYEE, partial key is dependent_name)',
        minLength: 200
      }
    };

    function gradeExam() {
      let score = 0;
      const totalQuestions = 25;

      // MCQ questions (single answer)
      const mcqQuestions = ['q1', 'q2', 'q3', 'q4', 'q5', 'q6', 'q7', 'q8', 'q9', 'q10', 'q17', 'q20', 'q23'];

      mcqQuestions.forEach(q => {
        const selected = document.querySelector(`input[name="${q}"]:checked`);
        const resultDiv = document.getElementById(`result-${q}`);

        if (selected) {
          if (selected.value === answers[q].correct) {
            score++;
            resultDiv.className = 'result correct';
            resultDiv.innerHTML = `<strong>âœ“ Correct!</strong><div class="explanation">${answers[q].explanation}</div>`;
          } else {
            resultDiv.className = 'result incorrect';
            resultDiv.innerHTML = `<strong>âœ— Incorrect.</strong> The correct answer is: <strong>${answers[q].correct.toUpperCase()}</strong><div class="explanation">${answers[q].explanation}</div>`;
          }
        } else {
          resultDiv.className = 'result incorrect';
          resultDiv.innerHTML = `<strong>âœ— No answer selected.</strong> The correct answer is: <strong>${answers[q].correct.toUpperCase()}</strong><div class="explanation">${answers[q].explanation}</div>`;
        }

        resultDiv.style.display = 'block';
      });

      // Question 15 (multi-select)
      const q15Selected = Array.from(document.querySelectorAll('input[name="q15"]:checked')).map(cb => cb.value);
      const q15Correct = answers.q15.correct.slice().sort();
      const resultQ15 = document.getElementById('result-q15');

      if (JSON.stringify(q15Selected.sort()) === JSON.stringify(q15Correct)) {
        score++;
        resultQ15.className = 'result correct';
        resultQ15.innerHTML = `<strong>âœ“ Correct!</strong><div class="explanation">${answers.q15.explanation}</div>`;
      } else {
        resultQ15.className = 'result incorrect';
        resultQ15.innerHTML = `<strong>âœ— Incorrect.</strong> The correct answers are: <strong>${q15Correct.join(', ').toUpperCase()}</strong><div class="explanation">${answers.q15.explanation}</div>`;
      }
      resultQ15.style.display = 'block';

      // Written questions
      const writtenQuestions = ['q11', 'q12', 'q13', 'q14', 'q16', 'q18', 'q19', 'q21', 'q22', 'q24', 'q25'];

      writtenQuestions.forEach(q => {
        const answerEl = document.querySelector(`textarea[name="${q}"]`);
        const resultDiv = document.getElementById(`result-${q}`);
        const questionData = answers[q];

        const answer = (answerEl.value || '').toLowerCase();

        if (answer.trim().length < questionData.minLength) {
          resultDiv.className = 'result incorrect';
          resultDiv.innerHTML = `<strong>âœ— Answer too short.</strong> Minimum ${questionData.minLength} characters required.
<div class="mock-answer">
  <div class="mock-answer-title">Model Answer:</div>
  ${questionData.mockAnswer.replace(/\n/g, '<br>')}
</div>`;
          resultDiv.style.display = 'block';
          return;
        }

        const foundKeywords = [];
        const missingKeywords = [];

        questionData.keywords.forEach(keyword => {
          if (answer.includes(keyword.toLowerCase())) {
            foundKeywords.push(keyword);
          } else {
            missingKeywords.push(keyword);
          }
        });

        const keywordScore = foundKeywords.length / questionData.keywords.length;

        if (keywordScore >= 0.7) {
          score++;
          resultDiv.className = 'result correct';
          resultDiv.innerHTML = `<strong>âœ“ Good answer!</strong> (${Math.round(keywordScore * 100)}% keyword match)
<div class="keyword-feedback">
  <strong>Keywords found:</strong> ${foundKeywords.join(', ')}
  ${missingKeywords.length > 0 ? `<br><strong class="keyword-missing">Consider mentioning:</strong> ${missingKeywords.join(', ')}` : ''}
</div>
<div class="mock-answer">
  <div class="mock-answer-title">Model Answer for Reference:</div>
  ${questionData.mockAnswer.replace(/\n/g, '<br>')}
</div>`;
        } else if (keywordScore >= 0.4) {
          score += 0.5;
          resultDiv.className = 'result partial';
          resultDiv.innerHTML = `<strong>âš  Partial credit (0.5/1).</strong> Your answer covers some points but is incomplete.
<div class="keyword-feedback">
  <strong class="keyword-found">Keywords found:</strong> ${foundKeywords.join(', ') || 'None'}<br>
  <strong class="keyword-missing">Missing important concepts:</strong> ${missingKeywords.join(', ')}
</div>
<div class="mock-answer">
  <div class="mock-answer-title">Model Answer:</div>
  ${questionData.mockAnswer.replace(/\n/g, '<br>')}
</div>`;
        } else {
          resultDiv.className = 'result incorrect';
          resultDiv.innerHTML = `<strong>âœ— Insufficient answer.</strong> Key concepts are missing.
<div class="keyword-feedback">
  <strong class="keyword-missing">You need to include these concepts:</strong> ${missingKeywords.join(', ')}
</div>
<div class="mock-answer">
  <div class="mock-answer-title">Model Answer:</div>
  ${questionData.mockAnswer.replace(/\n/g, '<br>')}
</div>`;
        }

        resultDiv.style.display = 'block';
      });

      // Display score
      const scoreDisplay = document.getElementById('scoreDisplay');
      const scoreNumber = document.getElementById('scoreNumber');
      const scorePercentage = document.getElementById('scorePercentage');

      scoreNumber.textContent = `${score}/${totalQuestions}`;
      scorePercentage.textContent = `${Math.round((score / totalQuestions) * 100)}%`;
      scoreDisplay.classList.add('show');

      window.scrollTo({ top: 0, behavior: 'smooth' });
    }
  </script>
</body>
</html>