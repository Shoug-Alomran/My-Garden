<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ISC 103 - Islamic Economic System Exam</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #2c3e50;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        
        header {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        header h1 {
            font-size: 2.2em;
            margin-bottom: 10px;
        }
        
        .exam-info {
            background: #f8f9fa;
            padding: 20px 30px;
            border-bottom: 3px solid #667eea;
        }
        
        .exam-info p {
            margin: 8px 0;
            font-size: 1.05em;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            font-weight: 600;
            margin-bottom: 5px;
            color: #495057;
        }
        
        .form-group input {
            width: 100%;
            padding: 10px;
            border: 2px solid #dee2e6;
            border-radius: 5px;
            font-size: 1em;
            transition: border-color 0.3s ease;
        }
        
        .form-group input:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .exam-content {
            padding: 30px;
        }
        
        .section {
            margin-bottom: 40px;
            padding: 25px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 5px solid #667eea;
        }
        
        .section-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 20px;
            margin: -25px -25px 20px -25px;
            border-radius: 10px 10px 0 0;
        }
        
        .section-header h2 {
            font-size: 1.5em;
        }
        
        .section-header .points {
            font-size: 0.9em;
            opacity: 0.9;
            margin-top: 5px;
        }
        
        .question {
            margin-bottom: 25px;
            padding: 20px;
            background: white;
            border-radius: 8px;
            border: 2px solid #e9ecef;
            transition: all 0.3s ease;
        }
        
        .question:hover {
            border-color: #667eea;
            box-shadow: 0 4px 8px rgba(102, 126, 234, 0.1);
        }
        
        .question-header {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.1em;
        }
        
        .question-number {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 3px 10px;
            border-radius: 15px;
            margin-right: 10px;
            font-size: 0.9em;
        }
        
        textarea {
            width: 100%;
            min-height: 100px;
            padding: 12px;
            border: 2px solid #dee2e6;
            border-radius: 5px;
            font-family: inherit;
            font-size: 1em;
            resize: vertical;
            transition: border-color 0.3s ease;
        }
        
        textarea:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .mcq-options, .tf-options {
            margin-top: 15px;
        }
        
        .option {
            margin: 10px 0;
            padding: 12px 15px;
            background: #f8f9fa;
            border: 2px solid #dee2e6;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
        }
        
        .option:hover {
            background: #e9ecef;
            border-color: #667eea;
        }
        
        .option input[type="radio"] {
            margin-right: 10px;
            cursor: pointer;
            width: 18px;
            height: 18px;
        }
        
        .option label {
            cursor: pointer;
            flex: 1;
        }
        
        .fill-blank {
            display: inline-block;
            min-width: 150px;
            padding: 5px 10px;
            border: none;
            border-bottom: 2px solid #667eea;
            background: transparent;
            font-size: 1em;
            transition: all 0.3s ease;
        }
        
        .fill-blank:focus {
            outline: none;
            background: #f8f9fa;
            border-bottom-color: #764ba2;
        }
        
        .list-input {
            width: 100%;
            padding: 10px;
            margin: 5px 0;
            border: 2px solid #dee2e6;
            border-radius: 5px;
            font-size: 1em;
        }
        
        .list-input:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .submit-section {
            text-align: center;
            padding: 30px;
            background: #f8f9fa;
            border-top: 3px solid #667eea;
        }
        
        .submit-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 50px;
            border: none;
            border-radius: 30px;
            font-size: 1.2em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
        }
        
        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }
        
        .submit-btn:active {
            transform: translateY(0);
        }
        
        .check-answer-btn {
            background: linear-gradient(135deg, #17a2b8 0%, #138496 100%);
            color: white;
            padding: 8px 20px;
            border: none;
            border-radius: 20px;
            font-size: 0.95em;
            font-weight: 600;
            cursor: pointer;
            margin-top: 10px;
            transition: all 0.3s ease;
        }
        
        .check-answer-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(23, 162, 184, 0.3);
        }
        
        .model-answer {
            display: none;
            margin-top: 15px;
            padding: 15px;
            background: #e7f3ff;
            border-left: 4px solid #2196F3;
            border-radius: 5px;
        }
        
        .model-answer.show {
            display: block;
        }
        
        .model-answer h5 {
            color: #2196F3;
            margin-bottom: 10px;
            font-size: 1em;
        }
        
        .model-answer-content {
            color: #1565C0;
            line-height: 1.6;
        }
        
        .answer-explanation {
            display: none;
            margin-top: 15px;
            padding: 15px;
            border-radius: 5px;
            animation: slideDown 0.3s ease;
        }
        
        .answer-explanation.show {
            display: block;
        }
        
        .answer-explanation.correct {
            background: #d4edda;
            border-left: 4px solid #28a745;
        }
        
        .answer-explanation.incorrect {
            background: #f8d7da;
            border-left: 4px solid #dc3545;
        }
        
        .answer-explanation.partial {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
        }
        
        .explanation-header {
            font-weight: 600;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .explanation-icon {
            font-size: 1.3em;
        }
        
        .correct .explanation-icon {
            color: #28a745;
        }
        
        .incorrect .explanation-icon {
            color: #dc3545;
        }
        
        .partial .explanation-icon {
            color: #ffc107;
        }
        
        .explanation-text {
            margin-top: 10px;
            color: #495057;
        }
        
        .your-answer-inline {
            background: #f8f9fa;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
            font-style: italic;
        }
        
        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .results {
            display: none;
            padding: 30px;
            background: white;
        }
        
        .results.show {
            display: block;
        }
        
        .results-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 25px;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 30px;
        }
        
        .results-header h2 {
            font-size: 2em;
            margin-bottom: 15px;
        }
        
        .score-display {
            font-size: 3em;
            font-weight: 700;
            margin: 20px 0;
        }
        
        .grade-letter {
            font-size: 2.5em;
            margin: 15px 0;
            padding: 15px 30px;
            background: rgba(255,255,255,0.2);
            border-radius: 10px;
            display: inline-block;
        }
        
        .section-results {
            margin: 20px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 5px solid #667eea;
        }
        
        .section-results h3 {
            color: #667eea;
            margin-bottom: 15px;
        }
        
        .question-result {
            margin: 15px 0;
            padding: 15px;
            background: white;
            border-radius: 8px;
            border-left: 4px solid #dee2e6;
        }
        
        .question-result.correct {
            border-left-color: #28a745;
            background: #f0fff4;
        }
        
        .question-result.incorrect {
            border-left-color: #dc3545;
            background: #fff5f5;
        }
        
        .question-result.partial {
            border-left-color: #ffc107;
            background: #fffbf0;
        }
        
        .result-icon {
            display: inline-block;
            margin-right: 10px;
            font-weight: 700;
            font-size: 1.2em;
        }
        
        .correct .result-icon {
            color: #28a745;
        }
        
        .incorrect .result-icon {
            color: #dc3545;
        }
        
        .partial .result-icon {
            color: #ffc107;
        }
        
        .your-answer {
            margin-top: 10px;
            padding: 10px;
            background: #e9ecef;
            border-radius: 5px;
        }
        
        .correct-answer {
            margin-top: 10px;
            padding: 10px;
            background: #d4edda;
            border-radius: 5px;
            color: #155724;
        }
        
        .feedback {
            margin-top: 10px;
            font-style: italic;
            color: #6c757d;
        }
        
        .retry-btn {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            color: white;
            padding: 12px 40px;
            border: none;
            border-radius: 25px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s ease;
        }
        
        .retry-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(40, 167, 69, 0.3);
        }
        
        @media print {
            .submit-section, .retry-btn {
                display: none;
            }
        }
        
        @media (max-width: 768px) {
            header h1 {
                font-size: 1.6em;
            }
            .exam-content {
                padding: 20px;
            }
            .section {
                padding: 15px;
            }
        }
    </style>
  <script src="/javascripts/standalone-theme.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>ISC 103 Examination</h1>
            <p>Islamic Economic System</p>
        </header>
        
        <div class="exam-info">
            <p><strong>Total Points:</strong> 100</p>
            <p><strong>Duration:</strong> 120 minutes</p>
            <p><strong>Instructions:</strong> Answer all questions carefully. The exam will be graded automatically based on keyword detection.</p>
        </div>
        
        <div class="exam-content">
            <!-- Section 1: Write the Term -->
            <div class="section">
                <div class="section-header">
                    <h2>Section 1: Define the Following Terms</h2>
                    <p class="points">Total: 20 points (4 points each)</p>
                </div>
                
                <div class="question">
                    <div class="question-header">
                        <span class="question-number">Q1</span>
                        What is the definition of Islamic Economy?
                    </div>
                    <textarea id="q1" placeholder="Write your answer here..."></textarea>
                    <button class="check-answer-btn" onclick="checkAnswer('q1')">Check Answer</button>
                    <div id="q1-explanation" class="answer-explanation"></div>
                    <div id="q1-model" class="model-answer">
                        <h5>ðŸ“š Model Answer:</h5>
                        <div class="model-answer-content">
                            Islamic Economy refers to the knowledge of practical religious legislations through detailed proofs that regulate earning, spending, and investing money according to Islamic principles and Shariah law. It encompasses the study of how economic activities should be conducted in accordance with Islamic values and teachings.
                        </div>
                    </div>
                </div>
                
                <div class="question">
                    <div class="question-header">
                        <span class="question-number">Q2</span>
                        Define "Zakat" and explain its significance in Islam.
                    </div>
                    <textarea id="q2" placeholder="Write your answer here..."></textarea>
                    <button class="check-answer-btn" onclick="checkAnswer('q2')">Check Answer</button>
                    <div id="q2-explanation" class="answer-explanation"></div>
                    <div id="q2-model" class="model-answer">
                        <h5>ðŸ“š Model Answer:</h5>
                        <div class="model-answer-content">
                            Zakat is the allocated amount in the wealth of certain individuals for a specific group of people at a certain time. It is the third pillar of Islam and a religious obligation. Zakat is customarily 2.5% (or 1/40) of a Muslim's total disposable wealth after necessities. It serves as a means of purification and is distributed to eight categories of recipients as outlined in the Quran (Surah At-Tawbah 9:60): the poor, the needy, administrators of Zakat, those whose hearts are to be reconciled, freeing captives, debtors, in the cause of Allah, and stranded travelers.
                        </div>
                    </div>
                </div>
                
                <div class="question">
                    <div class="question-header">
                        <span class="question-number">Q3</span>
                        What is meant by "Utility" in economic terms?
                    </div>
                    <textarea id="q3" placeholder="Write your answer here..."></textarea>
                    <button class="check-answer-btn" onclick="checkAnswer('q3')">Check Answer</button>
                    <div id="q3-explanation" class="answer-explanation"></div>
                    <div id="q3-model" class="model-answer">
                        <h5>ðŸ“š Model Answer:</h5>
                        <div class="model-answer-content">
                            Utility is the ability or power of a good or service to satisfy a specific human need. It represents the inherent capacity of an economic product to fulfill wants. For example, the utility of a book is its inherent power to satisfy the desire for knowledge, and the utility of a car is its inherent power to satisfy the desire to travel quickly from one place to another.
                        </div>
                    </div>
                </div>
                
                <div class="question">
                    <div class="question-header">
                        <span class="question-number">Q4</span>
                        Define "Commodity" and list its conditions in Islamic economics.
                    </div>
                    <textarea id="q4" placeholder="Write your answer here..."></textarea>
                    <button class="check-answer-btn" onclick="checkAnswer('q4')">Check Answer</button>
                    <div id="q4-explanation" class="answer-explanation"></div>
                    <div id="q4-model" class="model-answer">
                        <h5>ðŸ“š Model Answer:</h5>
                        <div class="model-answer-content">
                            A commodity is a tangible economic product that has a physical form. In Islamic economics, a commodity must meet four conditions: (1) It must be beneficial - providing utility to users, (2) It must be relatively rare - not infinitely available, (3) It must be tradable - able to be exchanged among society members, and (4) It must be permissible (Halal) according to Islamic law - this condition is unique to Islamic economics and takes precedence over the other conditions.
                        </div>
                    </div>
                </div>
                
                <div class="question">
                    <div class="question-header">
                        <span class="question-number">Q5</span>
                        What is "Jizya" and who was required to pay it?
                    </div>
                    <textarea id="q5" placeholder="Write your answer here..."></textarea>
                    <button class="check-answer-btn" onclick="checkAnswer('q5')">Check Answer</button>
                    <div id="q5-explanation" class="answer-explanation"></div>
                    <div id="q5-model" class="model-answer">
                        <h5>ðŸ“š Model Answer:</h5>
                        <div class="model-answer-content">
                            Jizya is a per capita yearly tax historically levied by Islamic states on certain non-Muslim subjects (dhimmi) living under Islamic law. It was paid in exchange for protection from outside aggression, exemption from military service, and the right to practice their faith with communal autonomy. Jizya was primarily required from free, sane, adult males among the dhimmi community (Jews, Christians, and others). Exempted from paying were women, children, the elderly, the poor, the handicapped, slaves, monks, and hermits.
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Section 2: List Questions -->
            <div class="section">
                <div class="section-header">
                    <h2>Section 2: List the Following</h2>
                    <p class="points">Total: 15 points (5 points each)</p>
                </div>
                
                <div class="question">
                    <div class="question-header">
                        <span class="question-number">Q6</span>
                        List the THREE characteristics of Islamic Economy.
                    </div>
                    <input type="text" class="list-input" id="q6-1" placeholder="1.">
                    <input type="text" class="list-input" id="q6-2" placeholder="2.">
                    <input type="text" class="list-input" id="q6-3" placeholder="3.">
                    <button class="check-answer-btn" onclick="checkAnswer('q6')">Check Answer</button>
                    <div id="q6-explanation" class="answer-explanation"></div>
                    <div id="q6-model" class="model-answer">
                        <h5>ðŸ“š Model Answer:</h5>
                        <div class="model-answer-content">
                            1. <strong>Dual Property</strong> - Realizing a balance between individual interest and community interest when no contradiction exists between them<br>
                            2. <strong>Restricted Economic Liberty</strong> - Finding legitimate regulations in earning and spending money within Islamic guidelines<br>
                            3. <strong>Social Solidarity</strong> - The obligation of fulfilling Zakat, charities, and benevolences
                        </div>
                    </div>
                </div>
                
                <div class="question">
                    <div class="question-header">
                        <span class="question-number">Q7</span>
                        List FOUR disadvantages of the Capitalist Economy.
                    </div>
                    <input type="text" class="list-input" id="q7-1" placeholder="1.">
                    <input type="text" class="list-input" id="q7-2" placeholder="2.">
                    <input type="text" class="list-input" id="q7-3" placeholder="3.">
                    <input type="text" class="list-input" id="q7-4" placeholder="4.">
                    <button class="check-answer-btn" onclick="checkAnswer('q7')">Check Answer</button>
                    <div id="q7-explanation" class="answer-explanation"></div>
                    <div id="q7-model" class="model-answer">
                        <h5>ðŸ“š Model Answer:</h5>
                        <div class="model-answer-content">
                            1. <strong>Imbalance in wealth distribution</strong> - Wealth becomes concentrated among few individuals<br>
                            2. <strong>Occurrence of crises and unemployment</strong> - Economic instability and job insecurity<br>
                            3. <strong>Merchandise monopoly</strong> - Large corporations controlling markets<br>
                            4. <strong>Absolute freedom in earning and expenditure</strong> - Lack of moral constraints on economic activities
                        </div>
                    </div>
                </div>
                
                <div class="question">
                    <div class="question-header">
                        <span class="question-number">Q8</span>
                        List the FIVE categories mentioned in the Hadith about what a person will be asked about on the Day of Judgment.
                    </div>
                    <input type="text" class="list-input" id="q8-1" placeholder="1.">
                    <input type="text" class="list-input" id="q8-2" placeholder="2.">
                    <input type="text" class="list-input" id="q8-3" placeholder="3.">
                    <input type="text" class="list-input" id="q8-4" placeholder="4.">
                    <input type="text" class="list-input" id="q8-5" placeholder="5.">
                    <button class="check-answer-btn" onclick="checkAnswer('q8')">Check Answer</button>
                    <div id="q8-explanation" class="answer-explanation"></div>
                    <div id="q8-model" class="model-answer">
                        <h5>ðŸ“š Model Answer:</h5>
                        <div class="model-answer-content">
                            1. <strong>Life</strong> - How did he consume/spend it<br>
                            2. <strong>Knowledge</strong> - What did he do with it<br>
                            3. <strong>Wealth</strong> - How did he earn it and how did he dispose of it<br>
                            4. <strong>Body</strong> - How did he wear it out<br>
                            5. <strong>Time/Youth</strong> - How was it spent
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Section 3: True/False -->
            <div class="section">
                <div class="section-header">
                    <h2>Section 3: True or False</h2>
                    <p class="points">Total: 15 points (3 points each)</p>
                </div>
                
                <div class="question">
                    <div class="question-header">
                        <span class="question-number">Q9</span>
                        Zakat is the fourth pillar of Islam.
                    </div>
                    <div class="tf-options">
                        <div class="option">
                            <input type="radio" name="q9" id="q9-true" value="true">
                            <label for="q9-true">True</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q9" id="q9-false" value="false">
                            <label for="q9-false">False</label>
                        </div>
                    </div>
                    <button class="check-answer-btn" onclick="checkAnswer('q9')">Check Answer</button>
                    <div id="q9-explanation" class="answer-explanation"></div>
                    <div id="q9-model" class="model-answer">
                        <h5>ðŸ“š Correct Answer: False</h5>
                        <div class="model-answer-content">
                            Zakat is the <strong>third pillar of Islam</strong>, not the fourth. The five pillars in order are: (1) Shahada (Declaration of Faith), (2) Salat (Prayer), (3) Zakat (Alms), (4) Sawm (Fasting during Ramadan), and (5) Hajj (Pilgrimage to Mecca).
                        </div>
                    </div>
                </div>
                
                <div class="question">
                    <div class="question-header">
                        <span class="question-number">Q10</span>
                        In Islamic economy, money belongs to Allah and people are merely trustees.
                    </div>
                    <div class="tf-options">
                        <div class="option">
                            <input type="radio" name="q10" id="q10-true" value="true">
                            <label for="q10-true">True</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q10" id="q10-false" value="false">
                            <label for="q10-false">False</label>
                        </div>
                    </div>
                    <button class="check-answer-btn" onclick="checkAnswer('q10')">Check Answer</button>
                    <div id="q10-explanation" class="answer-explanation"></div>
                    <div id="q10-model" class="model-answer">
                        <h5>ðŸ“š Correct Answer: True</h5>
                        <div class="model-answer-content">
                            This is one of the fundamental principles of Islamic economics. Allah says in the Quran: "Spend out of that in which He has made you successors" - indicating that humans are trustees (khalifah/successors) of wealth that ultimately belongs to Allah. This creates accountability for how wealth is earned and spent.
                        </div>
                    </div>
                </div>
                
                <div class="question">
                    <div class="question-header">
                        <span class="question-number">Q11</span>
                        Capitalism focuses on balancing individual and community interests equally.
                    </div>
                    <div class="tf-options">
                        <div class="option">
                            <input type="radio" name="q11" id="q11-true" value="true">
                            <label for="q11-true">True</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q11" id="q11-false" value="false">
                            <label for="q11-false">False</label>
                        </div>
                    </div>
                    <button class="check-answer-btn" onclick="checkAnswer('q11')">Check Answer</button>
                    <div id="q11-explanation" class="answer-explanation"></div>
                    <div id="q11-model" class="model-answer">
                        <h5>ðŸ“š Correct Answer: False</h5>
                        <div class="model-answer-content">
                            Capitalism prioritizes <strong>individual interest</strong> above community interest. It assumes that public interest is automatically realized through the achievement of individual interests. This is in contrast to Islamic economics, which explicitly balances both individual and community interests through the principle of dual property.
                        </div>
                    </div>
                </div>
                
                <div class="question">
                    <div class="question-header">
                        <span class="question-number">Q12</span>
                        The concept of wealth includes both goods and services.
                    </div>
                    <div class="tf-options">
                        <div class="option">
                            <input type="radio" name="q12" id="q12-true" value="true">
                            <label for="q12-true">True</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q12" id="q12-false" value="false">
                            <label for="q12-false">False</label>
                        </div>
                    </div>
                    <button class="check-answer-btn" onclick="checkAnswer('q12')">Check Answer</button>
                    <div id="q12-explanation" class="answer-explanation"></div>
                    <div id="q12-model" class="model-answer">
                        <h5>ðŸ“š Correct Answer: False</h5>
                        <div class="model-answer-content">
                            The concept of wealth <strong>does NOT include services</strong>. Wealth refers only to the sum of productive and consumable economic assets (tangible goods) that exist at a given moment. Services are intangible and are treated separately in economic analysis.
                        </div>
                    </div>
                </div>
                
                <div class="question">
                    <div class="question-header">
                        <span class="question-number">Q13</span>
                        Omar Ibn Al-Khattab was the first to establish the state treasury (Beit Al-Mal).
                    </div>
                    <div class="tf-options">
                        <div class="option">
                            <input type="radio" name="q13" id="q13-true" value="true">
                            <label for="q13-true">True</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q13" id="q13-false" value="false">
                            <label for="q13-false">False</label>
                        </div>
                    </div>
                    <button class="check-answer-btn" onclick="checkAnswer('q13')">Check Answer</button>
                    <div id="q13-explanation" class="answer-explanation"></div>
                    <div id="q13-model" class="model-answer">
                        <h5>ðŸ“š Correct Answer: True</h5>
                        <div class="model-answer-content">
                            Omar Ibn Al-Khattab established the state treasury (Beit Al-Mal) during his caliphate. This was necessary because the Islamic state had expanded significantly, revenues had increased, and there was need for organized financial management. During the Prophet's era and Abu Bakr's time, revenues were distributed immediately without need for a formal treasury.
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Section 4: Multiple Choice -->
            <div class="section">
                <div class="section-header">
                    <h2>Section 4: Multiple Choice Questions</h2>
                    <p class="points">Total: 30 points (3 points each)</p>
                </div>
                
                <div class="question">
                    <div class="question-header">
                        <span class="question-number">Q14</span>
                        What percentage is typically required for Zakat on wealth?
                    </div>
                    <div class="mcq-options">
                        <div class="option">
                            <input type="radio" name="q14" id="q14-a" value="a">
                            <label for="q14-a">A) 1.5%</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q14" id="q14-b" value="b">
                            <label for="q14-b">B) 2.5%</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q14" id="q14-c" value="c">
                            <label for="q14-c">C) 5%</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q14" id="q14-d" value="d">
                            <label for="q14-d">D) 10%</label>
                        </div>
                    </div>
                    <button class="check-answer-btn" onclick="checkAnswer('q14')">Check Answer</button>
                    <div id="q14-explanation" class="answer-explanation"></div>
                    <div id="q14-model" class="model-answer">
                        <h5>ðŸ“š Correct Answer: B) 2.5%</h5>
                        <div class="model-answer-content">
                            Zakat on wealth is customarily 2.5% (or 1/40) of a Muslim's total disposable income after fulfilling necessities for themselves and their dependents.
                        </div>
                    </div>
                </div>
                
                <div class="question">
                    <div class="question-header">
                        <span class="question-number">Q15</span>
                        Which of the following is NOT a characteristic of Islamic Economy?
                    </div>
                    <div class="mcq-options">
                        <div class="option">
                            <input type="radio" name="q15" id="q15-a" value="a">
                            <label for="q15-a">A) Dual property</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q15" id="q15-b" value="b">
                            <label for="q15-b">B) Restricted economic liberty</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q15" id="q15-c" value="c">
                            <label for="q15-c">C) Social solidarity</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q15" id="q15-d" value="d">
                            <label for="q15-d">D) Absolute economic freedom</label>
                        </div>
                    </div>
                    <button class="check-answer-btn" onclick="checkAnswer('q15')">Check Answer</button>
                    <div id="q15-explanation" class="answer-explanation"></div>
                    <div id="q15-model" class="model-answer">
                        <h5>ðŸ“š Correct Answer: D) Absolute economic freedom</h5>
                        <div class="model-answer-content">
                            Absolute economic freedom is NOT a characteristic of Islamic Economy. Instead, Islamic economy features <strong>restricted economic liberty</strong> - economic freedom within legitimate Islamic regulations. The three characteristics are: dual property, restricted economic liberty, and social solidarity.
                        </div>
                    </div>
                </div>
                
                <div class="question">
                    <div class="question-header">
                        <span class="question-number">Q16</span>
                        How many categories of Zakat recipients are mentioned in the Quran?
                    </div>
                    <div class="mcq-options">
                        <div class="option">
                            <input type="radio" name="q16" id="q16-a" value="a">
                            <label for="q16-a">A) 5</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q16" id="q16-b" value="b">
                            <label for="q16-b">B) 6</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q16" id="q16-c" value="c">
                            <label for="q16-c">C) 7</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q16" id="q16-d" value="d">
                            <label for="q16-d">D) 8</label>
                        </div>
                    </div>
                    <button class="check-answer-btn" onclick="checkAnswer('q16')">Check Answer</button>
                    <div id="q16-explanation" class="answer-explanation"></div>
                    <div id="q16-model" class="model-answer">
                        <h5>ðŸ“š Correct Answer: D) 8</h5>
                        <div class="model-answer-content">
                            The Quran (Surah At-Tawbah 9:60) identifies 8 categories of Zakat recipients: (1) the poor, (2) the needy, (3) Zakat administrators, (4) those whose hearts are to be reconciled, (5) freeing captives, (6) debtors, (7) in the cause of Allah, and (8) stranded travelers.
                        </div>
                    </div>
                </div>
                
                <div class="question">
                    <div class="question-header">
                        <span class="question-number">Q17</span>
                        Which economic system believes that wealth and production means belong to the entire community?
                    </div>
                    <div class="mcq-options">
                        <div class="option">
                            <input type="radio" name="q17" id="q17-a" value="a">
                            <label for="q17-a">A) Capitalism</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q17" id="q17-b" value="b">
                            <label for="q17-b">B) Socialism</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q17" id="q17-c" value="c">
                            <label for="q17-c">C) Islamic Economy</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q17" id="q17-d" value="d">
                            <label for="q17-d">D) Mixed Economy</label>
                        </div>
                    </div>
                    <button class="check-answer-btn" onclick="checkAnswer('q17')">Check Answer</button>
                    <div id="q17-explanation" class="answer-explanation"></div>
                    <div id="q17-model" class="model-answer">
                        <h5>ðŸ“š Correct Answer: B) Socialism</h5>
                        <div class="model-answer-content">
                            Socialism is the economic system based on the idea that wealth and production means are property of the whole community. Individuals have no rights to them and only receive rewards allocated by the government for their services.
                        </div>
                    </div>
                </div>
                
                <div class="question">
                    <div class="question-header">
                        <span class="question-number">Q18</span>
                        What does "Fay'" refer to in Islamic economics?
                    </div>
                    <div class="mcq-options">
                        <div class="option">
                            <input type="radio" name="q18" id="q18-a" value="a">
                            <label for="q18-a">A) Land tax</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q18" id="q18-b" value="b">
                            <label for="q18-b">B) Money from non-Muslims without fighting</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q18" id="q18-c" value="c">
                            <label for="q18-c">C) Spoils of war</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q18" id="q18-d" value="d">
                            <label for="q18-d">D) Customs tax</label>
                        </div>
                    </div>
                    <button class="check-answer-btn" onclick="checkAnswer('q18')">Check Answer</button>
                    <div id="q18-explanation" class="answer-explanation"></div>
                    <div id="q18-model" class="model-answer">
                        <h5>ðŸ“š Correct Answer: B) Money from non-Muslims without fighting</h5>
                        <div class="model-answer-content">
                            Fay' is money that returns to Muslims from non-Muslims without fighting, or what they agreed upon in peace treaties, or what is returned to them from their own money. It is spent for the benefits of Muslims.
                        </div>
                    </div>
                </div>
                
                <div class="question">
                    <div class="question-header">
                        <span class="question-number">Q19</span>
                        Which Caliph fought people who refused to pay Zakat?
                    </div>
                    <div class="mcq-options">
                        <div class="option">
                            <input type="radio" name="q19" id="q19-a" value="a">
                            <label for="q19-a">A) Omar Ibn Al-Khattab</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q19" id="q19-b" value="b">
                            <label for="q19-b">B) Abu Bakr</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q19" id="q19-c" value="c">
                            <label for="q19-c">C) Othman Ibn Affan</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q19" id="q19-d" value="d">
                            <label for="q19-d">D) Ali Ibn Abi Talib</label>
                        </div>
                    </div>
                    <button class="check-answer-btn" onclick="checkAnswer('q19')">Check Answer</button>
                    <div id="q19-explanation" class="answer-explanation"></div>
                    <div id="q19-model" class="model-answer">
                        <h5>ðŸ“š Correct Answer: B) Abu Bakr</h5>
                        <div class="model-answer-content">
                            Abu Bakr Al-Siddiq fought those who refused to pay Zakat after the death of Prophet Muhammad ï·º. This demonstrated that Zakat is a mandatory obligation in Islam, not optional, and refusing to pay it is a serious offense.
                        </div>
                    </div>
                </div>
                
                <div class="question">
                    <div class="question-header">
                        <span class="question-number">Q20</span>
                        What fraction of spoils of war goes to the state according to Islamic law?
                    </div>
                    <div class="mcq-options">
                        <div class="option">
                            <input type="radio" name="q20" id="q20-a" value="a">
                            <label for="q20-a">A) One-third</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q20" id="q20-b" value="b">
                            <label for="q20-b">B) One-fourth</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q20" id="q20-c" value="c">
                            <label for="q20-c">C) One-fifth</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q20" id="q20-d" value="d">
                            <label for="q20-d">D) One-half</label>
                        </div>
                    </div>
                    <button class="check-answer-btn" onclick="checkAnswer('q20')">Check Answer</button>
                    <div id="q20-explanation" class="answer-explanation"></div>
                    <div id="q20-model" class="model-answer">
                        <h5>ðŸ“š Correct Answer: C) One-fifth</h5>
                        <div class="model-answer-content">
                            Spoils of war are divided into five parts. Four-fifths are shared among the army (mujahidin) who fought, and one-fifth goes to the state to be spent for the welfare of Muslims, as mentioned in the Quran (8:41).
                        </div>
                    </div>
                </div>
                
                <div class="question">
                    <div class="question-header">
                        <span class="question-number">Q21</span>
                        Which of the following is a disadvantage of Socialism?
                    </div>
                    <div class="mcq-options">
                        <div class="option">
                            <input type="radio" name="q21" id="q21-a" value="a">
                            <label for="q21-a">A) Wealth distribution imbalance</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q21" id="q21-b" value="b">
                            <label for="q21-b">B) Merchandise monopoly</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q21" id="q21-c" value="c">
                            <label for="q21-c">C) Fighting human instinct of ownership</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q21" id="q21-d" value="d">
                            <label for="q21-d">D) Absolute freedom in earning</label>
                        </div>
                    </div>
                    <button class="check-answer-btn" onclick="checkAnswer('q21')">Check Answer</button>
                    <div id="q21-explanation" class="answer-explanation"></div>
                    <div id="q21-model" class="model-answer">
                        <h5>ðŸ“š Correct Answer: C) Fighting human instinct of ownership</h5>
                        <div class="model-answer-content">
                            One of the main disadvantages of socialism is that it fights the natural human instinct of ownership. Other disadvantages include treating humans like machines (which demolishes productivity motives) and often resulting in poverty. Options A, B, and D are disadvantages of capitalism, not socialism.
                        </div>
                    </div>
                </div>
                
                <div class="question">
                    <div class="question-header">
                        <span class="question-number">Q22</span>
                        What is the Arabic word from which "Economy" is linguistically derived?
                    </div>
                    <div class="mcq-options">
                        <div class="option">
                            <input type="radio" name="q22" id="q22-a" value="a">
                            <label for="q22-a">A) Ù‚ØµØ¯ (Qasd)</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q22" id="q22-b" value="b">
                            <label for="q22-b">B) Ø²ÙƒØ§Ø© (Zakat)</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q22" id="q22-c" value="c">
                            <label for="q22-c">C) Ù…Ø§Ù„ (Mal)</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q22" id="q22-d" value="d">
                            <label for="q22-d">D) Ø®Ø±Ø§Ø¬ (Kharaj)</label>
                        </div>
                    </div>
                    <button class="check-answer-btn" onclick="checkAnswer('q22')">Check Answer</button>
                    <div id="q22-explanation" class="answer-explanation"></div>
                    <div id="q22-model" class="model-answer">
                        <h5>ðŸ“š Correct Answer: A) Ù‚ØµØ¯ (Qasd)</h5>
                        <div class="model-answer-content">
                            Linguistically, "Economy" in Arabic comes from the word Ù‚ØµØ¯ (Qasd), which means the straightness of the road and the rationing of something. It represents a balance between extravagance (immoderacy) and excessive frugality (scrimping).
                        </div>
                    </div>
                </div>
                
                <div class="question">
                    <div class="question-header">
                        <span class="question-number">Q23</span>
                        Which is NOT a condition for a commodity in Islamic economics?
                    </div>
                    <div class="mcq-options">
                        <div class="option">
                            <input type="radio" name="q23" id="q23-a" value="a">
                            <label for="q23-a">A) Must be beneficial</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q23" id="q23-b" value="b">
                            <label for="q23-b">B) Must be relatively rare</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q23" id="q23-c" value="c">
                            <label for="q23-c">C) Must be expensive</label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q23" id="q23-d" value="d">
                            <label for="q23-d">D) Must be permissible (Halal)</label>
                        </div>
                    </div>
                    <button class="check-answer-btn" onclick="checkAnswer('q23')">Check Answer</button>
                    <div id="q23-explanation" class="answer-explanation"></div>
                    <div id="q23-model" class="model-answer">
                        <h5>ðŸ“š Correct Answer: C) Must be expensive</h5>
                        <div class="model-answer-content">
                            "Must be expensive" is NOT a condition for a commodity. The four conditions are: (1) beneficial, (2) relatively rare, (3) tradable among society members, and (4) permissible (Halal) according to Islamic law. Price is not a determining factor for whether something qualifies as a commodity.
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Section 5: Fill in the Gaps -->
            <div class="section">
                <div class="section-header">
                    <h2>Section 5: Fill in the Blanks</h2>
                    <p class="points">Total: 20 points (2 points each)</p>
                </div>
                
                <div class="question">
                    <div class="question-header">
                        <span class="question-number">Q24</span>
                    </div>
                    <p>The three aspects of Islamic Economics are: Ideological, <input type="text" class="fill-blank" id="q24-1">, and <input type="text" class="fill-blank" id="q24-2">.</p>
                    <button class="check-answer-btn" onclick="checkAnswer('q24')">Check Answer</button>
                    <div id="q24-explanation" class="answer-explanation"></div>
                    <div id="q24-model" class="model-answer">
                        <h5>ðŸ“š Correct Answer:</h5>
                        <div class="model-answer-content">
                            Theoretical/Analytical and Applied (Economic Policy)
                        </div>
                    </div>
                </div>
                
                <div class="question">
                    <div class="question-header">
                        <span class="question-number">Q25</span>
                    </div>
                    <p>Zakat was decided in the <input type="text" class="fill-blank" id="q25"> year of Hijra, after fasting the month of Ramadan.</p>
                    <button class="check-answer-btn" onclick="checkAnswer('q25')">Check Answer</button>
                    <div id="q25-explanation" class="answer-explanation"></div>
                    <div id="q25-model" class="model-answer">
                        <h5>ðŸ“š Correct Answer:</h5>
                        <div class="model-answer-content">Second (2)</div>
                    </div>
                </div>
                
                <div class="question">
                    <div class="question-header">
                        <span class="question-number">Q26</span>
                    </div>
                    <p><input type="text" class="fill-blank" id="q26"> is the portion of income that is not spent; it is the portion remaining after consumption.</p>
                    <button class="check-answer-btn" onclick="checkAnswer('q26')">Check Answer</button>
                    <div id="q26-explanation" class="answer-explanation"></div>
                    <div id="q26-model" class="model-answer">
                        <h5>ðŸ“š Correct Answer:</h5>
                        <div class="model-answer-content">Saving</div>
                    </div>
                </div>
                
                <div class="question">
                    <div class="question-header">
                        <span class="question-number">Q27</span>
                    </div>
                    <p>The state budget represents the government's <input type="text" class="fill-blank" id="q27"> activity, obtaining resources and spending them to fulfill public needs.</p>
                    <button class="check-answer-btn" onclick="checkAnswer('q27')">Check Answer</button>
                    <div id="q27-explanation" class="answer-explanation"></div>
                    <div id="q27-model" class="model-answer">
                        <h5>ðŸ“š Correct Answer:</h5>
                        <div class="model-answer-content">Financial (or Economic)</div>
                    </div>
                </div>
                
                <div class="question">
                    <div class="question-header">
                        <span class="question-number">Q28</span>
                    </div>
                    <p>In capitalism, the person is considered the sole <input type="text" class="fill-blank" id="q28"> of the money he earns.</p>
                    <button class="check-answer-btn" onclick="checkAnswer('q28')">Check Answer</button>
                    <div id="q28-explanation" class="answer-explanation"></div>
                    <div id="q28-model" class="model-answer">
                        <h5>ðŸ“š Correct Answer:</h5>
                        <div class="model-answer-content">Owner</div>
                    </div>
                </div>
                
                <div class="question">
                    <div class="question-header">
                        <span class="question-number">Q29</span>
                    </div>
                    <p><input type="text" class="fill-blank" id="q29"> is a yearly tax levied on non-Muslim subjects living under Islamic law in exchange for protection.</p>
                    <button class="check-answer-btn" onclick="checkAnswer('q29')">Check Answer</button>
                    <div id="q29-explanation" class="answer-explanation"></div>
                    <div id="q29-model" class="model-answer">
                        <h5>ðŸ“š Correct Answer:</h5>
                        <div class="model-answer-content">Jizya (or Jizyah)</div>
                    </div>
                </div>
                
                <div class="question">
                    <div class="question-header">
                        <span class="question-number">Q30</span>
                    </div>
                    <p>The three rules of public expenditure in Islam are: Beneficial Use, Economic Use, and <input type="text" class="fill-blank" id="q30">.</p>
                    <button class="check-answer-btn" onclick="checkAnswer('q30')">Check Answer</button>
                    <div id="q30-explanation" class="answer-explanation"></div>
                    <div id="q30-model" class="model-answer">
                        <h5>ðŸ“š Correct Answer:</h5>
                        <div class="model-answer-content">Authorization</div>
                    </div>
                </div>
                
                <div class="question">
                    <div class="question-header">
                        <span class="question-number">Q31</span>
                    </div>
                    <p>Consumer goods are divided into <input type="text" class="fill-blank" id="q31-1"> consumer goods and <input type="text" class="fill-blank" id="q31-2"> consumer goods.</p>
                    <button class="check-answer-btn" onclick="checkAnswer('q31')">Check Answer</button>
                    <div id="q31-explanation" class="answer-explanation"></div>
                    <div id="q31-model" class="model-answer">
                        <h5>ðŸ“š Correct Answer:</h5>
                        <div class="model-answer-content">Durable and Single-use (or one-time)</div>
                    </div>
                </div>
                
                <div class="question">
                    <div class="question-header">
                        <span class="question-number">Q32</span>
                    </div>
                    <p><input type="text" class="fill-blank" id="q32"> is the creation of new tangible capital, represented by productive capacity.</p>
                    <button class="check-answer-btn" onclick="checkAnswer('q32')">Check Answer</button>
                    <div id="q32-explanation" class="answer-explanation"></div>
                    <div id="q32-model" class="model-answer">
                        <h5>ðŸ“š Correct Answer:</h5>
                        <div class="model-answer-content">Investment</div>
                    </div>
                </div>
                
                <div class="question">
                    <div class="question-header">
                        <span class="question-number">Q33</span>
                    </div>
                    <p>Waqf is an <input type="text" class="fill-blank" id="q33"> charitable endowment under Islamic law with no intention of reclamation.</p>
                    <button class="check-answer-btn" onclick="checkAnswer('q33')">Check Answer</button>
                    <div id="q33-explanation" class="answer-explanation"></div>
                    <div id="q33-model" class="model-answer">
                        <h5>ðŸ“š Correct Answer:</h5>
                        <div class="model-answer-content">Inalienable (or permanent/perpetual)</div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="submit-section">
            <button class="submit-btn" onclick="gradeExam()">Submit Exam</button>
        </div>
        
        <div class="results" id="results">
            <!-- Results will be populated by JavaScript -->
        </div>
    </div>

    <script>
        // Answer key with keywords for grading
        const answerKey = {
            // Section 1: Define Terms (keyword-based)
            q1: {
                keywords: ['knowledge', 'practical', 'religious', 'legislation', 'earning', 'spending', 'investing', 'money', 'shariah', 'islamic law'],
                minKeywords: 4,
                points: 4
            },
            q2: {
                keywords: ['zakat', 'allocated', 'amount', 'wealth', 'certain', 'pillar', 'islam', 'obligation', 'religious', 'purification', '2.5', 'poor', 'needy'],
                minKeywords: 5,
                points: 4
            },
            q3: {
                keywords: ['ability', 'power', 'good', 'service', 'satisfy', 'need', 'human'],
                minKeywords: 3,
                points: 4
            },
            q4: {
                keywords: ['tangible', 'economic', 'product', 'physical', 'beneficial', 'rare', 'tradable', 'permissible', 'halal', 'conditions'],
                minKeywords: 5,
                points: 4
            },
            q5: {
                keywords: ['tax', 'yearly', 'non-muslim', 'dhimmi', 'protection', 'exemption', 'military', 'adult', 'males', 'jews', 'christians'],
                minKeywords: 4,
                points: 4
            },
            
            // Section 2: Lists
            q6: {
                keywords: ['dual property', 'restricted economic liberty', 'social solidarity', 'balance', 'individual', 'community', 'freedom', 'regulations', 'zakat', 'charities'],
                items: 3,
                points: 5
            },
            q7: {
                keywords: ['imbalance', 'wealth distribution', 'crises', 'unemployment', 'monopoly', 'merchandise', 'absolute freedom', 'earning', 'expenditure'],
                items: 4,
                points: 5
            },
            q8: {
                keywords: ['life', 'knowledge', 'wealth', 'body', 'time', 'youth', 'earned', 'spent', 'consumed', 'disposed'],
                items: 5,
                points: 5
            },
            
            // Section 3: True/False
            q9: { answer: 'false', points: 3 },
            q10: { answer: 'true', points: 3 },
            q11: { answer: 'false', points: 3 },
            q12: { answer: 'false', points: 3 },
            q13: { answer: 'true', points: 3 },
            
            // Section 4: MCQ
            q14: { answer: 'b', points: 3 },
            q15: { answer: 'd', points: 3 },
            q16: { answer: 'd', points: 3 },
            q17: { answer: 'b', points: 3 },
            q18: { answer: 'b', points: 3 },
            q19: { answer: 'b', points: 3 },
            q20: { answer: 'c', points: 3 },
            q21: { answer: 'c', points: 3 },
            q22: { answer: 'a', points: 3 },
            q23: { answer: 'c', points: 3 },
            
            // Section 5: Fill in the Blanks
            q24: {
                answers: [
                    { keywords: ['theoretical', 'analytical'], points: 1 },
                    { keywords: ['applied', 'policy', 'economic policy'], points: 1 }
                ]
            },
            q25: { keywords: ['second', '2'], points: 2 },
            q26: { keywords: ['saving', 'savings'], points: 2 },
            q27: { keywords: ['financial', 'economic'], points: 2 },
            q28: { keywords: ['owner', 'ownership'], points: 2 },
            q29: { keywords: ['jizya', 'jizyah'], points: 2 },
            q30: { keywords: ['authorization', 'approval', 'authority'], points: 2 },
            q31: {
                answers: [
                    { keywords: ['durable', 'multiple'], points: 1 },
                    { keywords: ['single', 'single-use', 'one-time'], points: 1 }
                ]
            },
            q32: { keywords: ['investment', 'investing'], points: 2 },
            q33: { keywords: ['inalienable', 'permanent', 'perpetual'], points: 2 }
        };

        function normalizeText(text) {
            return text.toLowerCase().trim().replace(/[^\w\s]/g, '');
        }

        function checkKeywords(answer, keywords, minRequired = 1) {
            const normalizedAnswer = normalizeText(answer);
            let foundKeywords = 0;
            
            keywords.forEach(keyword => {
                if (normalizedAnswer.includes(normalizeText(keyword))) {
                    foundKeywords++;
                }
            });
            
            return foundKeywords >= minRequired;
        }

        function checkAnswer(questionId) {
            const explanationDiv = document.getElementById(`${questionId}-explanation`);
            const modelDiv = document.getElementById(`${questionId}-model`);
            const answerData = answerKey[questionId];
            
            let result = null;
            let yourAnswer = '';
            
            // Determine question type and grade accordingly
            if (questionId.startsWith('q') && parseInt(questionId.substring(1)) <= 5) {
                // Text answer
                yourAnswer = document.getElementById(questionId).value;
                result = gradeTextAnswerInline(questionId, yourAnswer, answerData);
            } else if (questionId === 'q6' || questionId === 'q7' || questionId === 'q8') {
                // List answer
                result = gradeListAnswerInline(questionId, answerData);
            } else if (parseInt(questionId.substring(1)) >= 9 && parseInt(questionId.substring(1)) <= 13) {
                // True/False
                const selected = document.querySelector(`input[name="${questionId}"]:checked`);
                yourAnswer = selected ? selected.value : 'Not answered';
                result = gradeTrueFalseInline(questionId, yourAnswer, answerData);
            } else if (parseInt(questionId.substring(1)) >= 14 && parseInt(questionId.substring(1)) <= 23) {
                // MCQ
                const selected = document.querySelector(`input[name="${questionId}"]:checked`);
                yourAnswer = selected ? selected.value.toUpperCase() : 'Not answered';
                result = gradeMCQInline(questionId, yourAnswer, answerData);
            } else {
                // Fill in blank
                result = gradeFillBlankInline(questionId, answerData);
            }
            
            // Display explanation
            if (result) {
                const statusClass = result.score === result.maxScore ? 'correct' : (result.score > 0 ? 'partial' : 'incorrect');
                const icon = result.score === result.maxScore ? 'âœ“' : (result.score > 0 ? 'â—' : 'âœ—');
                
                explanationDiv.className = `answer-explanation ${statusClass} show`;
                explanationDiv.innerHTML = `
                    <div class="explanation-header">
                        <span class="explanation-icon">${icon}</span>
                        <span>${result.score}/${result.maxScore} points</span>
                    </div>
                    ${result.yourAnswer ? `<div class="your-answer-inline"><strong>Your answer:</strong> ${result.yourAnswer}</div>` : ''}
                    ${result.feedback ? `<div class="explanation-text">${result.feedback}</div>` : ''}
                `;
                
                // Show model answer
                modelDiv.classList.add('show');
            }
        }

        function gradeTextAnswerInline(questionId, answer, answerData) {
            const normalizedAnswer = normalizeText(answer);
            
            if (normalizedAnswer.length < 10) {
                return { 
                    score: 0, 
                    maxScore: answerData.points,
                    yourAnswer: answer,
                    feedback: 'Answer too short. Please provide more detail and include key concepts mentioned in the model answer.' 
                };
            }
            
            const keywordsFound = answerData.keywords.filter(keyword => 
                normalizedAnswer.includes(normalizeText(keyword))
            ).length;
            
            const percentage = keywordsFound / answerData.minKeywords;
            
            if (percentage >= 1) {
                return { 
                    score: answerData.points,
                    maxScore: answerData.points,
                    yourAnswer: answer,
                    feedback: `Excellent! You included ${keywordsFound} key concepts.` 
                };
            } else if (percentage >= 0.7) {
                const score = Math.round(answerData.points * 0.8);
                return { 
                    score: score,
                    maxScore: answerData.points,
                    yourAnswer: answer,
                    feedback: `Good answer, but could be improved. You included ${keywordsFound} out of ${answerData.minKeywords} required key concepts. Review the model answer for missing elements.` 
                };
            } else if (percentage >= 0.4) {
                const score = Math.round(answerData.points * 0.5);
                return { 
                    score: score,
                    maxScore: answerData.points,
                    yourAnswer: answer,
                    feedback: `Partial answer. You only included ${keywordsFound} key concepts. Your answer is missing important points - please review the model answer.` 
                };
            } else {
                return { 
                    score: 0,
                    maxScore: answerData.points,
                    yourAnswer: answer,
                    feedback: `Insufficient answer. Major concepts are missing. Please review the model answer and try to include the key points about this topic.` 
                };
            }
        }

        function gradeListAnswerInline(questionId, answerData) {
            const inputs = [];
            for (let i = 1; i <= answerData.items; i++) {
                const elem = document.getElementById(`${questionId}-${i}`);
                const value = elem ? elem.value : '';
                inputs.push(value);
            }
            
            let correctItems = 0;
            inputs.forEach(input => {
                if (checkKeywords(input, answerData.keywords, 1)) {
                    correctItems++;
                }
            });
            
            const percentage = correctItems / answerData.items;
            const score = Math.round(answerData.points * percentage);
            
            let feedback = '';
            if (correctItems === answerData.items) {
                feedback = 'Perfect! All items are correct.';
            } else if (correctItems > 0) {
                feedback = `You got ${correctItems} out of ${answerData.items} items correct. Check the model answer for the complete list.`;
            } else {
                feedback = 'None of the items match the expected answers. Please review the model answer carefully.';
            }
            
            return {
                score: score,
                maxScore: answerData.points,
                yourAnswer: inputs.join(', '),
                feedback: feedback
            };
        }

        function gradeTrueFalseInline(questionId, yourAnswer, answerData) {
            const isCorrect = yourAnswer === answerData.answer;
            
            return {
                score: isCorrect ? answerData.points : 0,
                maxScore: answerData.points,
                yourAnswer: yourAnswer,
                feedback: isCorrect ? 'Correct!' : `Incorrect. The correct answer is: ${answerData.answer.toUpperCase()}. See the model answer for explanation.`
            };
        }

        function gradeMCQInline(questionId, yourAnswer, answerData) {
            const isCorrect = yourAnswer.toLowerCase() === answerData.answer;
            
            return {
                score: isCorrect ? answerData.points : 0,
                maxScore: answerData.points,
                yourAnswer: `Option ${yourAnswer}`,
                feedback: isCorrect ? 'Correct!' : `Incorrect. The correct answer is Option ${answerData.answer.toUpperCase()}. See the model answer for explanation.`
            };
        }

        function gradeFillBlankInline(questionId, answerData) {
            if (answerData.answers) {
                // Multiple blanks
                let totalScore = 0;
                let maxScore = 0;
                const answers = [];
                
                answerData.answers.forEach((blank, index) => {
                    const elem = document.getElementById(`${questionId}-${index + 1}`);
                    const value = elem ? elem.value : '';
                    answers.push(value);
                    maxScore += blank.points;
                    if (checkKeywords(value, blank.keywords)) {
                        totalScore += blank.points;
                    }
                });
                
                return { 
                    score: totalScore,
                    maxScore: maxScore,
                    yourAnswer: answers.join(', '),
                    feedback: totalScore === maxScore ? 'All blanks correct!' : 'Some blanks are incorrect. Check the model answer.'
                };
            } else {
                // Single blank
                const elem = document.getElementById(questionId);
                const value = elem ? elem.value : '';
                const isCorrect = checkKeywords(value, answerData.keywords);
                
                return { 
                    score: isCorrect ? answerData.points : 0,
                    maxScore: answerData.points,
                    yourAnswer: value,
                    feedback: isCorrect ? 'Correct!' : 'Incorrect. Check the model answer for the correct term.'
                };
            }
        }

        function gradeExam() {
            let totalScore = 0;
            const maxScore = 100;
            
            // Grade Section 1: Text Answers (Q1-Q5)
            for (let i = 1; i <= 5; i++) {
                const questionId = `q${i}`;
                const answer = document.getElementById(questionId).value;
                const result = gradeTextAnswerInline(questionId, answer, answerKey[questionId]);
                totalScore += result.score;
            }
            
            // Grade Section 2: Lists (Q6-Q8)
            for (let i = 6; i <= 8; i++) {
                const questionId = `q${i}`;
                const result = gradeListAnswerInline(questionId, answerKey[questionId]);
                totalScore += result.score;
            }
            
            // Grade Section 3: True/False (Q9-Q13)
            for (let i = 9; i <= 13; i++) {
                const questionId = `q${i}`;
                const selected = document.querySelector(`input[name="${questionId}"]:checked`);
                const isCorrect = selected && selected.value === answerKey[questionId].answer;
                totalScore += isCorrect ? answerKey[questionId].points : 0;
            }
            
            // Grade Section 4: MCQ (Q14-Q23)
            for (let i = 14; i <= 23; i++) {
                const questionId = `q${i}`;
                const selected = document.querySelector(`input[name="${questionId}"]:checked`);
                const isCorrect = selected && selected.value === answerKey[questionId].answer;
                totalScore += isCorrect ? answerKey[questionId].points : 0;
            }
            
            // Grade Section 5: Fill in the Blanks (Q24-Q33)
            const fillBlankQuestions = [24, 25, 26, 27, 28, 29, 30, 31, 32, 33];
            fillBlankQuestions.forEach(num => {
                const questionId = `q${num}`;
                const result = gradeFillBlankInline(questionId, answerKey[questionId]);
                totalScore += result.score;
            });
            
            // Calculate grade
            const percentage = (totalScore / maxScore) * 100;
            let gradeLetter = '';
            if (percentage >= 90) gradeLetter = 'A';
            else if (percentage >= 80) gradeLetter = 'B';
            else if (percentage >= 70) gradeLetter = 'C';
            else if (percentage >= 60) gradeLetter = 'D';
            else gradeLetter = 'F';
            
            displayResults(totalScore, maxScore, percentage, gradeLetter);
        }

        function displayResults(score, maxScore, percentage, grade) {
            const resultsDiv = document.getElementById('results');
            
            let html = `
                <div class="results-header">
                    <h2>Final Examination Results</h2>
                    <div class="score-display">${score} / ${maxScore}</div>
                    <p style="font-size: 1.2em;">${percentage.toFixed(1)}%</p>
                    <div class="grade-letter">Grade: ${grade}</div>
                </div>
                
                <div style="text-align: center; padding: 20px;">
                    <p style="font-size: 1.1em; color: #495057; margin-bottom: 20px;">
                        ${grade === 'A' ? 'Excellent work! ðŸŽ‰' : 
                          grade === 'B' ? 'Great job! ðŸ‘' : 
                          grade === 'C' ? 'Good effort! Keep studying! ðŸ“š' : 
                          grade === 'D' ? 'You passed, but there\'s room for improvement. ðŸ“–' : 
                          'Don\'t give up! Review the material and try again. ðŸ’ª'}
                    </p>
                    <p style="font-size: 1em; color: #6c757d; margin-bottom: 20px;">
                        Scroll up to see detailed feedback for each question by clicking the "Check Answer" buttons.
                    </p>
                    <button class="retry-btn" onclick="location.reload()">Start New Exam</button>
                </div>
            `;
            
            resultsDiv.innerHTML = html;
            resultsDiv.classList.add('show');
            
            // Scroll to results
            resultsDiv.scrollIntoView({ behavior: 'smooth' });
        }
    </script>
</body>
</html>