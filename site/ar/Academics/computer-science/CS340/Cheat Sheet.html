<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Database Cheat Sheet - CS340</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            line-height: 1.6;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        header p {
            font-size: 1.2em;
            opacity: 0.9;
        }

        .content {
            padding: 40px;
        }

        .section {
            margin-bottom: 40px;
            border-left: 5px solid #667eea;
            padding-left: 20px;
        }

        .section h2 {
            color: #667eea;
            font-size: 2em;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section h3 {
            color: #764ba2;
            font-size: 1.5em;
            margin: 20px 0 10px 0;
            border-bottom: 2px solid #f0f0f0;
            padding-bottom: 10px;
        }

        .tip-box {
            background: linear-gradient(135deg, #ffeaa7 0%, #fdcb6e 100%);
            border-left: 5px solid #e17055;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }

        .tip-box strong {
            color: #d63031;
            display: block;
            margin-bottom: 5px;
            font-size: 1.1em;
        }

        .memory-hack {
            background: linear-gradient(135deg, #a29bfe 0%, #6c5ce7 100%);
            color: white;
            padding: 15px;
            margin: 15px 0;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(108, 92, 231, 0.3);
        }

        .memory-hack strong {
            display: block;
            margin-bottom: 5px;
            font-size: 1.1em;
        }

        .example {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
        }

        .example-title {
            color: #667eea;
            font-weight: bold;
            margin-bottom: 10px;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        code {
            background: #2d3436;
            color: #00b894;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
        }

        .code-block {
            background: #2d3436;
            color: #00b894;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 10px 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }

        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }

        th {
            background: #667eea;
            color: white;
        }

        tr:nth-child(even) {
            background: #f8f9fa;
        }

        .formula {
            background: #fff5e6;
            border-left: 5px solid #ff9800;
            padding: 15px;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 1.1em;
        }

        .icon {
            font-size: 1.5em;
        }

        ul, ol {
            margin-left: 20px;
            margin-bottom: 15px;
        }

        li {
            margin-bottom: 8px;
        }

        .highlight {
            background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
            color: white;
            padding: 3px 8px;
            border-radius: 3px;
            font-weight: bold;
        }

        .warning {
            background: #ffe0e0;
            border-left: 5px solid #d63031;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }

        @media (max-width: 768px) {
            .content {
                padding: 20px;
            }
            
            header h1 {
                font-size: 1.8em;
            }
            
            .section h2 {
                font-size: 1.5em;
            }
        }
    </style>
  <script src="/javascripts/standalone-theme.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>üìö Database Systems Cheat Sheet</h1>
            <p>CS340: Complete Guide to Database Design, SQL, NoSQL & More</p>
        </header>

        <div class="content">
            <!-- ACID Properties -->
            <div class="section">
                <h2><span class="icon">‚öõÔ∏è</span> ACID Properties</h2>
                
                <div class="memory-hack">
                    <strong>üß† Memory Hack:</strong> "All Cars In Danger" ‚Üí Atomicity, Consistency, Isolation, Durability
                </div>

                <h3>Atomicity (All or Nothing)</h3>
                <p><strong>Definition:</strong> Transaction is treated as a single unit - either all operations succeed or all fail.</p>
                
                <div class="example">
                    <div class="example-title">Example: Money Transfer</div>
                    <strong>Account X: $500, Account Y: $200</strong><br>
                    Transfer $100 from X to Y:<br>
                    T1: X = X - 100 (X becomes 400)<br>
                    T2: Y = Y + 100 (Y becomes 300)<br><br>
                    If T1 succeeds but T2 fails ‚Üí Transaction is ABORTED<br>
                    Both accounts return to original state (X=$500, Y=$200)
                </div>

                <div class="tip-box">
                    <strong>üí° Tip:</strong> Think of atomicity as an "undo" button - if anything goes wrong, the database goes back to its previous state.
                </div>

                <h3>Consistency (Integrity Constraints Maintained)</h3>
                <p><strong>Definition:</strong> Database must remain in a valid state before and after transaction.</p>
                
                <div class="example">
                    <div class="example-title">Example: Continuing Money Transfer</div>
                    Before: X($500) + Y($200) = $700<br>
                    After: X($400) + Y($300) = $700<br>
                    ‚úì Total is maintained ‚Üí Database is CONSISTENT
                </div>

                <h3>Isolation (Transactions Independent)</h3>
                <p><strong>Definition:</strong> Concurrent transactions don't interfere with each other.</p>
                
                <div class="example">
                    <div class="example-title">Example: Problem Without Isolation</div>
                    X = $500, Y = $500<br>
                    Transaction T: X = X * 100; Y = Y + X<br>
                    Transaction T'': Sum = X + Y<br><br>
                    If T'' reads X after T updates it but before T updates Y:<br>
                    T'' reads: X = $50,000, Y = $500 ‚Üí Sum = $50,500 ‚ùå<br>
                    Correct sum should be: X = $50,000, Y = $50,500 ‚Üí Sum = $100,500 ‚úì
                </div>

                <div class="tip-box">
                    <strong>üí° Tip:</strong> Isolation prevents "dirty reads" - reading data that's in the middle of being changed.
                </div>

                <h3>Durability (Changes Persist)</h3>
                <p><strong>Definition:</strong> Once a transaction commits, changes are permanent even if system crashes.</p>
                
                <div class="memory-hack">
                    <strong>üß† Memory Hack:</strong> Durability = "Durable like a diamond" - once committed, it's forever!
                </div>
            </div>

            <!-- Database Design Process -->
            <div class="section">
                <h2><span class="icon">üé®</span> Database Design Process</h2>
                
                <div class="memory-hack">
                    <strong>üß† Memory Hack:</strong> "Charlie Loves Onions" ‚Üí Conceptual, Logical, Optimization
                </div>

                <h3>1. Conceptual Design (ER Diagrams)</h3>
                <p>Draw Entity-Relationship diagrams showing entities, attributes, and relationships.</p>

                <div class="example">
                    <div class="example-title">Example: University Database</div>
                    <strong>Entities:</strong> STUDENT, COURSE, DEPARTMENT<br>
                    <strong>Relationships:</strong> Student ENROLLS-IN Course (M:N)<br>
                    <strong>Attributes:</strong> Student(ID, Name, DOB, Major)<br>
                    Course(CourseNo, Title, Credits)
                </div>

                <h3>2. Logical Design (Relational Model)</h3>
                <p>Convert ER diagrams to relational schemas (tables).</p>

                <div class="example">
                    <div class="example-title">Example: Converting to Relations</div>
                    STUDENT(StudentID, Name, DOB, Major)<br>
                    COURSE(CourseNo, Title, Credits)<br>
                    ENROLLS(StudentID, CourseNo, Grade) -- Junction table for M:N
                </div>

                <h3>3. Optimization (Normalization)</h3>
                <p>Remove redundancy and anomalies through normal forms (1NF, 2NF, 3NF, BCNF).</p>

                <div class="tip-box">
                    <strong>üí° Tip:</strong> Think of normalization as "organizing your closet" - everything has its proper place!
                </div>
            </div>

            <!-- ER Diagram Components -->
            <div class="section">
                <h2><span class="icon">üî∑</span> ER Diagram Components</h2>

                <h3>Entities (Rectangle)</h3>
                <p>Real-world objects distinguishable from other objects.</p>
                
                <div class="example">
                    <div class="example-title">Example: Types of Entities</div>
                    <strong>Strong Entity:</strong> EMPLOYEE (has its own key: SSN)<br>
                    <strong>Weak Entity:</strong> DEPENDENT (depends on EMPLOYEE, identified by combination of employee SSN + dependent name)
                </div>

                <h3>Attributes (Oval)</h3>
                
                <table>
                    <tr>
                        <th>Type</th>
                        <th>Description</th>
                        <th>Example</th>
                    </tr>
                    <tr>
                        <td><strong>Simple</strong></td>
                        <td>Single atomic value</td>
                        <td>Age, SSN</td>
                    </tr>
                    <tr>
                        <td><strong>Composite</strong></td>
                        <td>Can be divided into parts</td>
                        <td>Address(Street, City, Zip)</td>
                    </tr>
                    <tr>
                        <td><strong>Multivalued</strong></td>
                        <td>Multiple values allowed</td>
                        <td>Phone_Numbers = {123, 456, 789}</td>
                    </tr>
                    <tr>
                        <td><strong>Derived</strong></td>
                        <td>Calculated from other attributes</td>
                        <td>Age (derived from BirthDate)</td>
                    </tr>
                </table>

                <div class="memory-hack">
                    <strong>üß† Memory Hack:</strong> "Some Cats Make Dinner" ‚Üí Simple, Composite, Multivalued, Derived
                </div>

                <h3>Relationships (Diamond)</h3>
                
                <h4>Cardinality Constraints:</h4>
                
                <div class="example">
                    <div class="example-title">Example: All Cardinality Types</div>
                    <strong>1:1 (One-to-One):</strong><br>
                    EMPLOYEE manages DEPARTMENT<br>
                    Each employee manages ‚â§ 1 department, each department has ‚â§ 1 manager<br><br>

                    <strong>1:N (One-to-Many):</strong><br>
                    DEPARTMENT has EMPLOYEE<br>
                    Each department has many employees, each employee works for 1 department<br><br>

                    <strong>M:N (Many-to-Many):</strong><br>
                    EMPLOYEE works-on PROJECT<br>
                    Each employee works on many projects, each project has many employees
                </div>

                <div class="tip-box">
                    <strong>üí° Tip:</strong> For M:N relationships, always create a junction table in the relational model!
                </div>

                <h4>Participation Constraints:</h4>
                <ul>
                    <li><strong>Total Participation (Double line):</strong> Every entity must participate. Example: Every EMPLOYEE must work for a DEPARTMENT.</li>
                    <li><strong>Partial Participation (Single line):</strong> Not all entities need to participate. Example: Not all EMPLOYEEs manage a DEPARTMENT.</li>
                </ul>

                <div class="memory-hack">
                    <strong>üß† Memory Hack:</strong> "Total = Two lines, Partial = One line"
                </div>
            </div>

            <!-- Keys -->
            <div class="section">
                <h2><span class="icon">üîë</span> Keys in Databases</h2>

                <h3>Types of Keys</h3>

                <table>
                    <tr>
                        <th>Key Type</th>
                        <th>Definition</th>
                        <th>Example</th>
                    </tr>
                    <tr>
                        <td><strong>Superkey</strong></td>
                        <td>Any set of attributes that uniquely identifies a tuple</td>
                        <td>{SSN}, {SSN, Name}, {SSN, Age}</td>
                    </tr>
                    <tr>
                        <td><strong>Candidate Key</strong></td>
                        <td>Minimal superkey (no redundant attributes)</td>
                        <td>{SSN}, {EmployeeID}</td>
                    </tr>
                    <tr>
                        <td><strong>Primary Key</strong></td>
                        <td>Chosen candidate key (underlined)</td>
                        <td><u>SSN</u></td>
                    </tr>
                    <tr>
                        <td><strong>Foreign Key</strong></td>
                        <td>References primary key in another table</td>
                        <td>Dno in EMPLOYEE references Dnumber in DEPARTMENT</td>
                    </tr>
                    <tr>
                        <td><strong>Partial Key</strong></td>
                        <td>Part of key for weak entity (dashed underline)</td>
                        <td>Dependent_Name in DEPENDENT</td>
                    </tr>
                </table>

                <div class="memory-hack">
                    <strong>üß† Memory Hack:</strong> "Super Can Primary Foreign Partially" for the order of key types!
                </div>

                <div class="example">
                    <div class="example-title">Example: Finding Keys</div>
                    CAR(State, RegNo, SerialNo, Make, Model, Year)<br><br>
                    <strong>Candidate Keys:</strong><br>
                    1. {State, RegNo} - License plate is unique per state<br>
                    2. {SerialNo} - VIN is globally unique<br><br>
                    <strong>Superkeys:</strong><br>
                    {SerialNo}, {State, RegNo}, {SerialNo, Make}, {State, RegNo, Model}, etc.<br><br>
                    <strong>Primary Key:</strong> Choose {SerialNo} (smaller)
                </div>
            </div>

            <!-- EER Model -->
            <div class="section">
                <h2><span class="icon">üå≥</span> Enhanced ER (EER) Model</h2>

                <h3>Specialization/Generalization</h3>

                <div class="example">
                    <div class="example-title">Example: Employee Specialization</div>
                    <strong>Superclass:</strong> EMPLOYEE(SSN, Name, Salary)<br>
                    <strong>Subclasses:</strong><br>
                    - SECRETARY(TypingSpeed)<br>
                    - ENGINEER(EngType)<br>
                    - TECHNICIAN(TGrade)<br><br>
                    A Secretary IS-A Employee (inherits all attributes)
                </div>

                <h3>Constraints on Specialization</h3>

                <table>
                    <tr>
                        <th>Constraint</th>
                        <th>Symbol</th>
                        <th>Meaning</th>
                        <th>Example</th>
                    </tr>
                    <tr>
                        <td><strong>Disjoint</strong></td>
                        <td>d</td>
                        <td>Entity can belong to at most ONE subclass</td>
                        <td>STUDENT is either Undergraduate OR Graduate (not both)</td>
                    </tr>
                    <tr>
                        <td><strong>Overlapping</strong></td>
                        <td>o</td>
                        <td>Entity can belong to MULTIPLE subclasses</td>
                        <td>EMPLOYEE can be both ENGINEER and MANAGER</td>
                    </tr>
                    <tr>
                        <td><strong>Total</strong></td>
                        <td>Double line</td>
                        <td>Every entity MUST belong to a subclass</td>
                        <td>Every VEHICLE is either CAR or TRUCK</td>
                    </tr>
                    <tr>
                        <td><strong>Partial</strong></td>
                        <td>Single line</td>
                        <td>Entity MAY NOT belong to any subclass</td>
                        <td>Not all EMPLOYEEs are MANAGERS</td>
                    </tr>
                </table>

                <div class="memory-hack">
                    <strong>üß† Memory Hack:</strong> "DOPT" ‚Üí Disjoint/Overlapping, Partial/Total
                </div>

                <h3>Categories (Union Types)</h3>
                <p>Subclass with multiple superclasses from different entity types.</p>

                <div class="example">
                    <div class="example-title">Example: Vehicle Owner</div>
                    OWNER is a category of {PERSON, COMPANY, BANK}<br>
                    An owner can be a person OR company OR bank<br>
                    (Subset of the UNION, not intersection)
                </div>

                <div class="tip-box">
                    <strong>üí° Tip:</strong> Category = Union (U symbol), Shared Subclass = Intersection
                </div>
            </div>

            <!-- ER to Relational Mapping -->
            <div class="section">
                <h2><span class="icon">üîÑ</span> ER to Relational Mapping</h2>

                <div class="memory-hack">
                    <strong>üß† Memory Hack:</strong> "Really Smart Owls Often Make Mountains Nearly Spectacular" ‚Üí 7 mapping steps
                </div>

                <h3>Step 1: Regular Entity Types</h3>
                <p>Create a table for each strong entity with all simple attributes.</p>

                <div class="example">
                    <div class="example-title">Example:</div>
                    ER: EMPLOYEE(SSN, Name, Address, Salary)<br>
                    Relational: EMPLOYEE(<u>SSN</u>, Name, Address, Salary)
                </div>

                <h3>Step 2: Weak Entity Types</h3>
                <p>Include owner's primary key as foreign key. Combine with partial key for primary key.</p>

                <div class="example">
                    <div class="example-title">Example:</div>
                    DEPENDENT weak entity depends on EMPLOYEE<br>
                    DEPENDENT(<u>ESSN</u>, <u>Dependent_Name</u>, Sex, BirthDate)<br>
                    FK: ESSN references EMPLOYEE(SSN)
                </div>

                <h3>Step 3: Binary 1:1 Relationships</h3>
                <p><strong>Three approaches:</strong></p>

                <div class="example">
                    <div class="example-title">Example: EMPLOYEE manages DEPARTMENT</div>
                    
                    <strong>Approach 1 - Foreign Key (Best for total participation):</strong><br>
                    DEPARTMENT(<u>Dnumber</u>, Dname, Mgr_SSN, Start_Date)<br>
                    FK: Mgr_SSN references EMPLOYEE(SSN)<br><br>

                    <strong>Approach 2 - Merged Relation (For both total):</strong><br>
                    EMPLOYEE_DEPT(<u>SSN</u>, Name, Dnumber, Dname, Start_Date)<br><br>

                    <strong>Approach 3 - Relationship Relation (For both partial):</strong><br>
                    EMPLOYEE(<u>SSN</u>, Name)<br>
                    DEPARTMENT(<u>Dnumber</u>, Dname)<br>
                    MANAGES(<u>SSN</u>, Dnumber, Start_Date)
                </div>

                <div class="tip-box">
                    <strong>üí° Tip:</strong> For 1:1, put foreign key in the table with total participation to avoid NULLs!
                </div>

                <h3>Step 4: Binary 1:N Relationships</h3>
                <p>Put foreign key on the N side.</p>

                <div class="example">
                    <div class="example-title">Example: DEPARTMENT has EMPLOYEEs</div>
                    DEPARTMENT(<u>Dnumber</u>, Dname)<br>
                    EMPLOYEE(<u>SSN</u>, Name, Dno)<br>
                    FK: Dno references DEPARTMENT(Dnumber)
                </div>

                <div class="warning">
                    <strong>‚ö†Ô∏è Warning:</strong> NEVER put the foreign key on the 1 side - it would create multivalued attributes!
                </div>

                <h3>Step 5: Binary M:N Relationships</h3>
                <p>Create a new junction/relationship table with both primary keys as foreign keys.</p>

                <div class="example">
                    <div class="example-title">Example: EMPLOYEE works-on PROJECT</div>
                    EMPLOYEE(<u>SSN</u>, Name)<br>
                    PROJECT(<u>PNumber</u>, PName)<br>
                    WORKS_ON(<u>SSN</u>, <u>PNumber</u>, Hours)<br>
                    FK: SSN references EMPLOYEE(SSN)<br>
                    FK: PNumber references PROJECT(PNumber)
                </div>

                <h3>Step 6: Multivalued Attributes</h3>
                <p>Create separate table with primary key of parent + multivalued attribute.</p>

                <div class="example">
                    <div class="example-title">Example: DEPARTMENT Locations</div>
                    DEPARTMENT(<u>Dnumber</u>, Dname)<br>
                    DEPT_LOCATIONS(<u>Dnumber</u>, <u>Location</u>)<br>
                    FK: Dnumber references DEPARTMENT(Dnumber)
                </div>

                <h3>Step 7: N-ary Relationships (n > 2)</h3>
                <p>Create table with all participating entity primary keys as foreign keys.</p>

                <div class="example">
                    <div class="example-title">Example: SUPPLIER supplies PART to PROJECT</div>
                    SUPPLY(<u>SName</u>, <u>PartNo</u>, <u>ProjName</u>, Quantity)<br>
                    FK: SName references SUPPLIER<br>
                    FK: PartNo references PART<br>
                    FK: ProjName references PROJECT
                </div>

                <h3>Step 8: Specialization/Generalization</h3>
                <p><strong>Four Options:</strong></p>

                <div class="example">
                    <div class="example-title">Example: EMPLOYEE with subclasses SECRETARY, ENGINEER</div>
                    
                    <strong>Option 8A - Multiple Relations (Superclass + Subclasses):</strong><br>
                    EMPLOYEE(<u>SSN</u>, Name, Salary)<br>
                    SECRETARY(<u>SSN</u>, TypingSpeed)<br>
                    ENGINEER(<u>SSN</u>, EngType)<br>
                    Use: Works for any specialization<br><br>

                    <strong>Option 8B - Subclass Relations Only:</strong><br>
                    SECRETARY(<u>SSN</u>, Name, Salary, TypingSpeed)<br>
                    ENGINEER(<u>SSN</u>, Name, Salary, EngType)<br>
                    Use: Only for TOTAL specialization<br><br>

                    <strong>Option 8C - Single Relation with Type Attribute:</strong><br>
                    EMPLOYEE(<u>SSN</u>, Name, Salary, JobType, TypingSpeed, EngType)<br>
                    Use: For DISJOINT specialization<br><br>

                    <strong>Option 8D - Single Relation with Boolean Flags:</strong><br>
                    EMPLOYEE(<u>SSN</u>, Name, Salary, IsSecretary, IsEngineer, TypingSpeed, EngType)<br>
                    Use: For OVERLAPPING specialization
                </div>

                <div class="tip-box">
                    <strong>üí° Tip:</strong> Choose mapping option based on constraints: Total‚Üí8B, Disjoint‚Üí8C, Overlapping‚Üí8D, Any‚Üí8A
                </div>

                <h3>Step 9: Categories (Union Types)</h3>
                <p>Create relation with surrogate key + attributes from each superclass.</p>

                <div class="example">
                    <div class="example-title">Example: OWNER category</div>
                    PERSON(<u>PersonID</u>, Name)<br>
                    COMPANY(<u>CompanyID</u>, Name)<br>
                    BANK(<u>BankID</u>, Name)<br>
                    OWNER(<u>OwnerID</u>, PersonID, CompanyID, BankID, ...)<br>
                    -- Only one of PersonID/CompanyID/BankID will be non-NULL
                </div>
            </div>

            <!-- Relational Model -->
            <div class="section">
                <h2><span class="icon">üìä</span> Relational Model Concepts</h2>

                <h3>Terminology Comparison</h3>

                <table>
                    <tr>
                        <th>Informal</th>
                        <th>Formal</th>
                        <th>Example</th>
                    </tr>
                    <tr>
                        <td>Table</td>
                        <td>Relation</td>
                        <td>EMPLOYEE</td>
                    </tr>
                    <tr>
                        <td>Column</td>
                        <td>Attribute</td>
                        <td>SSN, Name</td>
                    </tr>
                    <tr>
                        <td>Row</td>
                        <td>Tuple</td>
                        <td>(123, "John", ...)</td>
                    </tr>
                    <tr>
                        <td>Table Definition</td>
                        <td>Schema</td>
                        <td>EMPLOYEE(SSN, Name, Salary)</td>
                    </tr>
                    <tr>
                        <td>Populated Table</td>
                        <td>Instance/State</td>
                        <td>All rows currently in table</td>
                    </tr>
                </table>

                <h3>Relation Characteristics</h3>
                <ul>
                    <li>Tuples are <strong>unordered</strong> (no inherent row order)</li>
                    <li>Attributes are <strong>ordered</strong> in schema definition</li>
                    <li>All values are <strong>atomic</strong> (1NF: no composite/multivalued attributes)</li>
                    <li>Each attribute value must be from its <strong>domain</strong></li>
                    <li>NULL values represent unknown/unavailable/not applicable data</li>
                </ul>

                <div class="tip-box">
                    <strong>üí° Tip:</strong> Think of relations as mathematical sets - order doesn't matter, no duplicates allowed!
                </div>

                <h3>Constraints in Relational Model</h3>

                <h4>1. Domain Constraints</h4>
                <p>Values must be from the attribute's domain.</p>

                <div class="example">
                    <div class="example-title">Example:</div>
                    Age INT ‚Üí must be integer<br>
                    Email VARCHAR(50) ‚Üí must be string<br>
                    Grade ENUM('A','B','C','D','F') ‚Üí must be one of these
                </div>

                <h4>2. Key Constraints</h4>
                <p>No two tuples can have the same key value.</p>

                <h4>3. Entity Integrity Constraint</h4>
                <p>Primary key cannot be NULL.</p>

                <div class="warning">
                    <strong>‚ö†Ô∏è Critical Rule:</strong> t[PK] ‚â† NULL for any tuple t
                </div>

                <h4>4. Referential Integrity Constraint</h4>
                <p>Foreign key must either be NULL or match a primary key value in referenced table.</p>

                <div class="example">
                    <div class="example-title">Example:</div>
                    EMPLOYEE(SSN, Name, Dno)<br>
                    DEPARTMENT(Dnumber, Dname)<br>
                    FK: Dno references Dnumber<br><br>
                    Valid: Dno = 5 (if department 5 exists)<br>
                    Valid: Dno = NULL (employee not assigned)<br>
                    Invalid: Dno = 99 (if department 99 doesn't exist)
                </div>

                <h3>Update Operations & Anomalies</h3>

                <h4>INSERT Violations:</h4>
                <ul>
                    <li><strong>Domain:</strong> Wrong data type</li>
                    <li><strong>Key:</strong> Duplicate primary key</li>
                    <li><strong>Entity Integrity:</strong> NULL primary key</li>
                    <li><strong>Referential Integrity:</strong> Foreign key references non-existent value</li>
                </ul>

                <h4>DELETE Options:</h4>
                <ul>
                    <li><strong>RESTRICT:</strong> Reject deletion if referenced</li>
                    <li><strong>CASCADE:</strong> Delete all referencing tuples</li>
                    <li><strong>SET NULL:</strong> Set foreign keys to NULL</li>
                </ul>

                <div class="example">
                    <div class="example-title">Example: ON DELETE CASCADE</div>
                    Delete DEPARTMENT 5 ‚Üí<br>
                    Automatically deletes all EMPLOYEEs with Dno = 5
                </div>

                <h4>UPDATE Violations:</h4>
                <ul>
                    <li>Updating <strong>primary key</strong> = DELETE + INSERT</li>
                    <li>Updating <strong>foreign key</strong> may violate referential integrity</li>
                    <li>Updating <strong>ordinary attribute</strong> may violate domain constraint</li>
                </ul>
            </div>

            <!-- SQL Basics -->
            <div class="section">
                <h2><span class="icon">üíæ</span> SQL - Structured Query Language</h2>

                <div class="memory-hack">
                    <strong>üß† Memory Hack:</strong> "Sweet Fluffy Wombats Gulp Honey Oranges" ‚Üí SELECT, FROM, WHERE, GROUP BY, HAVING, ORDER BY (query order!)
                </div>

                <h3>DDL (Data Definition Language)</h3>

                <h4>CREATE TABLE</h4>
                <div class="code-block">
CREATE TABLE Student (
    StudentID INT PRIMARY KEY,
    Name VARCHAR(50) NOT NULL,
    GPA DECIMAL(3,2),
    DeptID INT,
    FOREIGN KEY (DeptID) REFERENCES Department(DeptID)
        ON DELETE SET NULL
        ON UPDATE CASCADE
);
                </div>

                <div class="tip-box">
                    <strong>üí° Tip:</strong> Always specify ON DELETE and ON UPDATE actions for foreign keys!
                </div>

                <h4>Common Data Types</h4>
                <table>
                    <tr>
                        <th>Type</th>
                        <th>Description</th>
                        <th>Example</th>
                    </tr>
                    <tr>
                        <td>INT</td>
                        <td>Integer</td>
                        <td>Age INT</td>
                    </tr>
                    <tr>
                        <td>VARCHAR(n)</td>
                        <td>Variable string</td>
                        <td>Name VARCHAR(50)</td>
                    </tr>
                    <tr>
                        <td>CHAR(n)</td>
                        <td>Fixed string</td>
                        <td>SSN CHAR(9)</td>
                    </tr>
                    <tr>
                        <td>DECIMAL(p,s)</td>
                        <td>Exact decimal</td>
                        <td>Price DECIMAL(10,2)</td>
                    </tr>
                    <tr>
                        <td>DATE</td>
                        <td>Date (YYYY-MM-DD)</td>
                        <td>BirthDate DATE</td>
                    </tr>
                    <tr>
                        <td>BOOLEAN</td>
                        <td>True/False</td>
                        <td>IsActive BOOLEAN</td>
                    </tr>
                    <tr>
                        <td>ENUM</td>
                        <td>List of values</td>
                        <td>Status ENUM('Active','Inactive')</td>
                    </tr>
                </table>

                <h4>ALTER TABLE</h4>
                <div class="code-block">
-- Add column
ALTER TABLE Student ADD Email VARCHAR(100);

-- Modify column
ALTER TABLE Student MODIFY COLUMN GPA DECIMAL(4,3);

-- Drop column
ALTER TABLE Student DROP COLUMN Email;

-- Add constraint
ALTER TABLE Student ADD CONSTRAINT unique_email UNIQUE(Email);
                </div>

                <h4>DROP TABLE</h4>
                <div class="code-block">
DROP TABLE Student;  -- Permanent deletion!
                </div>

                <div class="warning">
                    <strong>‚ö†Ô∏è Warning:</strong> DROP TABLE permanently deletes the table and all data - use with extreme caution!
                </div>

                <h3>DML (Data Manipulation Language)</h3>

                <h4>Basic Query Structure</h4>
                <div class="formula">
SELECT [DISTINCT] &lt;attributes&gt;<br>
FROM &lt;tables&gt;<br>
[WHERE &lt;condition&gt;]<br>
[GROUP BY &lt;attributes&gt;]<br>
[HAVING &lt;group condition&gt;]<br>
[ORDER BY &lt;attributes&gt; [ASC|DESC]]
                </div>

                <h4>SELECT - Projection</h4>
                <div class="code-block">
-- All columns
SELECT * FROM Student;

-- Specific columns
SELECT Name, GPA FROM Student;

-- Remove duplicates
SELECT DISTINCT Major FROM Student;

-- Calculated columns
SELECT Name, Salary * 1.1 AS NewSalary FROM Employee;

-- Rename columns
SELECT Name AS StudentName, GPA AS Grade FROM Student;
                </div>

                <h4>WHERE - Selection</h4>
                <div class="code-block">
-- Comparison operators
SELECT * FROM Student WHERE GPA >= 3.5;

-- Logical operators
SELECT * FROM Student WHERE GPA >= 3.5 AND Major = 'CS';

-- BETWEEN
SELECT * FROM Student WHERE Age BETWEEN 18 AND 25;

-- IN
SELECT * FROM Student WHERE Major IN ('CS', 'SE', 'IS');

-- LIKE pattern matching
SELECT * FROM Student WHERE Name LIKE 'A%';  -- Starts with A
SELECT * FROM Student WHERE Name LIKE '%a%';  -- Contains a
SELECT * FROM Student WHERE Name LIKE 'J__n';  -- J, any 2 chars, n

-- IS NULL
SELECT * FROM Employee WHERE SupervisorSSN IS NULL;

-- NOT
SELECT * FROM Student WHERE Major NOT IN ('CS', 'SE');
                </div>

                <div class="memory-hack">
                    <strong>üß† Memory Hack:</strong> "% = Zero or More, _ = Exactly One" for LIKE patterns
                </div>

                <h4>JOIN Operations</h4>

                <div class="code-block">
-- INNER JOIN (default)
SELECT S.Name, C.Title
FROM Student S JOIN Enrollment E ON S.StudentID = E.StudentID
               JOIN Course C ON E.CourseID = C.CourseID;

-- LEFT OUTER JOIN
SELECT S.Name, C.Title
FROM Student S LEFT JOIN Enrollment E ON S.StudentID = E.StudentID;
-- Returns all students, even those not enrolled

-- RIGHT OUTER JOIN
SELECT S.Name, C.Title
FROM Student S RIGHT JOIN Enrollment E ON S.StudentID = E.StudentID;
-- Returns all enrollments, even if student deleted

-- FULL OUTER JOIN
SELECT S.Name, C.Title
FROM Student S FULL OUTER JOIN Enrollment E ON S.StudentID = E.StudentID;
-- Returns all students AND all enrollments

-- CROSS JOIN (Cartesian Product)
SELECT * FROM Student CROSS JOIN Course;
-- Every student paired with every course

-- NATURAL JOIN
SELECT * FROM Student NATURAL JOIN Enrollment;
-- Automatic join on columns with same name
                </div>

                <div class="tip-box">
                    <strong>üí° Tip:</strong> LEFT JOIN = "Keep everything from the left table"<br>
                    RIGHT JOIN = "Keep everything from the right table"<br>
                    INNER JOIN = "Keep only matches"
                </div>

                <h4>Aggregation Functions</h4>

                <div class="code-block">
-- COUNT
SELECT COUNT(*) FROM Student;  -- Count all rows
SELECT COUNT(DISTINCT Major) FROM Student;  -- Count unique majors

-- SUM
SELECT SUM(Salary) FROM Employee WHERE Dno = 5;

-- AVG
SELECT AVG(GPA) FROM Student;

-- MAX/MIN
SELECT MAX(Salary), MIN(Salary) FROM Employee;

-- Multiple aggregates
SELECT Dno, COUNT(*) AS NumEmployees, AVG(Salary) AS AvgSal
FROM Employee
GROUP BY Dno;
                </div>

                <h4>GROUP BY & HAVING</h4>

                <div class="code-block">
-- Group by single attribute
SELECT Major, AVG(GPA) AS AvgGPA
FROM Student
GROUP BY Major;

-- Group by multiple attributes
SELECT Major, Year, COUNT(*) AS NumStudents
FROM Student
GROUP BY Major, Year;

-- Filter groups with HAVING
SELECT Major, AVG(GPA) AS AvgGPA
FROM Student
GROUP BY Major
HAVING AVG(GPA) > 3.5;

-- WHERE filters tuples, HAVING filters groups
SELECT Dno, COUNT(*) AS NumEmp, AVG(Salary) AS AvgSal
FROM Employee
WHERE Salary > 30000  -- Filter BEFORE grouping
GROUP BY Dno
HAVING COUNT(*) > 5;  -- Filter AFTER grouping
                </div>

                <div class="memory-hack">
                    <strong>üß† Memory Hack:</strong> "WHERE = rows/tuples, HAVING = groups" (W before H, filtering before grouping!)
                </div>

                <h4>ORDER BY</h4>

                <div class="code-block">
-- Ascending (default)
SELECT * FROM Student ORDER BY GPA;

-- Descending
SELECT * FROM Student ORDER BY GPA DESC;

-- Multiple columns
SELECT * FROM Student ORDER BY Major ASC, GPA DESC;
                </div>

                <h4>Nested Queries (Subqueries)</h4>

                <div class="code-block">
-- IN
SELECT Name FROM Student
WHERE StudentID IN (
    SELECT StudentID FROM Enrollment WHERE CourseID = 'CS340'
);

-- ANY/ALL
SELECT Name FROM Employee
WHERE Salary > ALL (
    SELECT Salary FROM Employee WHERE Dno = 5
);

-- EXISTS
SELECT Name FROM Employee E
WHERE EXISTS (
    SELECT * FROM Dependent D
    WHERE E.SSN = D.ESSN AND E.Name = D.Name
);

-- NOT EXISTS
SELECT Name FROM Sailor S
WHERE NOT EXISTS (
    SELECT * FROM Reserves R WHERE S.sid = R.sid
);
-- Sailors who haven't reserved any boat

-- Correlated subquery
SELECT Name FROM Employee E
WHERE Salary > (
    SELECT AVG(Salary) FROM Employee WHERE Dno = E.Dno
);
-- Employees earning above their department average
                </div>

                <div class="tip-box">
                    <strong>üí° Tip:</strong> Use EXISTS for checking existence, IN for small lists, ANY/ALL for comparisons
                </div>

                <h4>Set Operations</h4>

                <div class="code-block">
-- UNION (removes duplicates)
SELECT Name FROM Student_2023
UNION
SELECT Name FROM Student_2024;

-- UNION ALL (keeps duplicates)
SELECT Name FROM Student_2023
UNION ALL
SELECT Name FROM Student_2024;

-- INTERSECT
SELECT StudentID FROM Enrollment WHERE CourseID = 'CS340'
INTERSECT
SELECT StudentID FROM Enrollment WHERE CourseID = 'CS101';
-- Students taking both courses

-- EXCEPT/MINUS
SELECT StudentID FROM Student
EXCEPT
SELECT StudentID FROM Enrollment;
-- Students not enrolled in any course
                </div>

                <h4>INSERT</h4>

                <div class="code-block">
-- Insert single row
INSERT INTO Student VALUES (123, 'John', 3.5, 5);

-- Insert with specified columns
INSERT INTO Student (StudentID, Name) VALUES (124, 'Mary');

-- Insert multiple rows
INSERT INTO Student VALUES 
    (125, 'Ali', 3.8, 5),
    (126, 'Sara', 3.9, 3);

-- Insert from query
INSERT INTO HighGPA (StudentID, Name, GPA)
SELECT StudentID, Name, GPA FROM Student WHERE GPA >= 3.5;
                </div>

                <h4>UPDATE</h4>

                <div class="code-block">
-- Update single column
UPDATE Employee SET Salary = 50000 WHERE SSN = '123456789';

-- Update multiple columns
UPDATE Employee 
SET Salary = Salary * 1.1, Dno = 5 
WHERE Dno = 3;

-- Update with calculation
UPDATE Employee SET Salary = Salary * 1.1;

-- Update from subquery
UPDATE Employee SET Salary = (
    SELECT AVG(Salary) FROM Employee
) WHERE SSN = '123456789';
                </div>

                <h4>DELETE</h4>

                <div class="code-block">
-- Delete specific rows
DELETE FROM Student WHERE GPA < 2.0;

-- Delete all rows (keeps table structure)
DELETE FROM Student;

-- Better for deleting all: TRUNCATE (faster)
TRUNCATE TABLE Student;
                </div>

                <div class="warning">
                    <strong>‚ö†Ô∏è Warning:</strong> Always use WHERE clause with UPDATE/DELETE or you'll affect ALL rows!
                </div>

                <h3>Views</h3>

                <div class="code-block">
-- Create view
CREATE VIEW HighGPA AS
SELECT StudentID, Name, GPA 
FROM Student 
WHERE GPA >= 3.5;

-- Use view
SELECT * FROM HighGPA;

-- Drop view
DROP VIEW HighGPA;

-- Materialized view (stores data physically)
CREATE MATERIALIZED VIEW DeptSalary AS
SELECT Dno, AVG(Salary) AS AvgSalary
FROM Employee
GROUP BY Dno;

-- Refresh materialized view
REFRESH MATERIALIZED VIEW DeptSalary;
                </div>

                <div class="tip-box">
                    <strong>üí° Tip:</strong> Use views for security (hide sensitive columns), simplify complex queries, and provide different user perspectives
                </div>
            </div>

            <!-- Functional Dependencies -->
            <div class="section">
                <h2><span class="icon">üîó</span> Functional Dependencies (FDs)</h2>

                <div class="memory-hack">
                    <strong>üß† Memory Hack:</strong> "If X determines Y, write X ‚Üí Y" (arrow points to what's determined)
                </div>

                <h3>Definition</h3>
                <p>X ‚Üí Y means: If two tuples have the same X value, they must have the same Y value.</p>

                <div class="example">
                    <div class="example-title">Example: Employee Table</div>
                    SSN ‚Üí Name (SSN determines Name)<br>
                    If t1[SSN] = t2[SSN], then t1[Name] = t2[Name]<br><br>
                    SSN ‚Üí {Name, Address, Salary} (SSN determines multiple attributes)<br>
                    {SSN, PNumber} ‚Üí Hours (combination determines Hours)
                </div>

                <h3>Types of Functional Dependencies</h3>

                <h4>1. Full Dependency</h4>
                <p>Y depends on ALL of X (cannot remove any attribute from X).</p>

                <div class="example">
                    <div class="example-title">Example:</div>
                    {SSN, PNumber} ‚Üí Hours is FULL<br>
                    Because: SSN alone doesn't determine Hours<br>
                    And: PNumber alone doesn't determine Hours
                </div>

                <h4>2. Partial Dependency</h4>
                <p>Y depends on part of X (can remove some attributes from X).</p>

                <div class="example">
                    <div class="example-title">Example:</div>
                    {SSN, PNumber} ‚Üí Name is PARTIAL<br>
                    Because: SSN ‚Üí Name (don't need PNumber)
                </div>

                <div class="tip-box">
                    <strong>üí° Tip:</strong> Partial dependencies violate 2NF and cause redundancy!
                </div>

                <h4>3. Transitive Dependency</h4>
                <p>X ‚Üí Y and Y ‚Üí Z, so X ‚Üí Z indirectly.</p>

                <div class="example">
                    <div class="example-title">Example:</div>
                    SSN ‚Üí DNumber (Employee determines Department)<br>
                    DNumber ‚Üí DName (Department determines DeptName)<br>
                    Therefore: SSN ‚Üí DName (transitive dependency)
                </div>

                <div class="tip-box">
                    <strong>üí° Tip:</strong> Transitive dependencies violate 3NF and cause redundancy!
                </div>

                <h3>Armstrong's Axioms</h3>

                <table>
                    <tr>
                        <th>Rule</th>
                        <th>Description</th>
                        <th>Example</th>
                    </tr>
                    <tr>
                        <td><strong>Reflexivity</strong></td>
                        <td>If Y ‚äÜ X, then X ‚Üí Y</td>
                        <td>AB ‚Üí B (trivial)</td>
                    </tr>
                    <tr>
                        <td><strong>Augmentation</strong></td>
                        <td>If X ‚Üí Y, then XZ ‚Üí YZ</td>
                        <td>If A ‚Üí B, then AC ‚Üí BC</td>
                    </tr>
                    <tr>
                        <td><strong>Transitivity</strong></td>
                        <td>If X ‚Üí Y and Y ‚Üí Z, then X ‚Üí Z</td>
                        <td>If A ‚Üí B and B ‚Üí C, then A ‚Üí C</td>
                    </tr>
                    <tr>
                        <td><strong>Union</strong></td>
                        <td>If X ‚Üí Y and X ‚Üí Z, then X ‚Üí YZ</td>
                        <td>If A ‚Üí B and A ‚Üí C, then A ‚Üí BC</td>
                    </tr>
                    <tr>
                        <td><strong>Decomposition</strong></td>
                        <td>If X ‚Üí YZ, then X ‚Üí Y and X ‚Üí Z</td>
                        <td>If A ‚Üí BC, then A ‚Üí B and A ‚Üí C</td>
                    </tr>
                </table>

                <h3>Finding Closure (X+)</h3>
                <p>Closure X+ = all attributes functionally determined by X.</p>

                <div class="example">
                    <div class="example-title">Example: Finding Closure</div>
                    <strong>Given:</strong><br>
                    FD1: A ‚Üí BC<br>
                    FD2: CD ‚Üí E<br>
                    FD3: E ‚Üí F<br><br>
                    <strong>Find: (A)+</strong><br>
                    Start: (A)+ = {A}<br>
                    FD1: A ‚Üí BC, so (A)+ = {A, B, C}<br>
                    FD2: CD ‚Üí E, but we don't have D ‚úó<br>
                    No more changes<br>
                    <strong>Result: (A)+ = {A, B, C}</strong><br><br>
                    
                    <strong>Find: (AD)+</strong><br>
                    Start: (AD)+ = {A, D}<br>
                    FD1: A ‚Üí BC, so (AD)+ = {A, B, C, D}<br>
                    FD2: CD ‚Üí E, we have C and D ‚úì, so (AD)+ = {A, B, C, D, E}<br>
                    FD3: E ‚Üí F, we have E ‚úì, so (AD)+ = {A, B, C, D, E, F}<br>
                    <strong>Result: (AD)+ = {A, B, C, D, E, F} ‚Üí AD is a superkey!</strong>
                </div>

                <div class="tip-box">
                    <strong>üí° Tip:</strong> If X+ contains all attributes, X is a superkey!
                </div>
            </div>

            <!-- Normalization -->
            <div class="section">
                <h2><span class="icon">‚ö°</span> Normalization & Normal Forms</h2>

                <div class="memory-hack">
                    <strong>üß† Memory Hack:</strong> "The key [1NF], the whole key [2NF], and nothing but the key [3NF], so help me Codd [BCNF]"
                </div>

                <h3>Why Normalize?</h3>
                <ul>
                    <li><strong>Minimize Redundancy:</strong> Don't store same data multiple times</li>
                    <li><strong>Prevent Update Anomalies:</strong> Avoid insertion, deletion, modification problems</li>
                    <li><strong>Improve Data Integrity:</strong> Maintain consistency</li>
                    <li><strong>Optimize Storage:</strong> Use less space</li>
                </ul>

                <h3>Update Anomalies</h3>

                <div class="example">
                    <div class="example-title">Example: Bad Design</div>
                    EMP_PROJ(EmpID, EmpName, ProjID, ProjName, Hours)<br><br>
                    
                    <strong>Sample Data:</strong><br>
                    (E1, John, P1, ProjectX, 10)<br>
                    (E1, John, P2, ProjectY, 20)<br>
                    (E2, Mary, P1, ProjectX, 15)<br><br>

                    <strong>1. Update Anomaly:</strong><br>
                    Change P1 name to "ProjectZ" ‚Üí must update 2 rows!<br><br>

                    <strong>2. Insert Anomaly:</strong><br>
                    Can't add new project without assigning employee<br>
                    Can't add employee without assigning project<br><br>

                    <strong>3. Delete Anomaly:</strong><br>
                    Delete E2 (only employee on P1) ‚Üí lose project P1 info!
                </div>

                <h3>First Normal Form (1NF)</h3>
                <p><strong>Rule:</strong> All attributes must be atomic (no composite, no multivalued, no nested relations).</p>

                <div class="example">
                    <div class="example-title">Example: Violates 1NF</div>
                    <strong>Bad:</strong><br>
                    EMPLOYEE(SSN, Name, PhoneNumbers)<br>
                    Where PhoneNumbers = {123, 456, 789}<br><br>

                    <strong>Good (Fix 1):</strong><br>
                    EMPLOYEE(SSN, Name)<br>
                    PHONE(SSN, PhoneNumber)<br><br>

                    <strong>Good (Fix 2 - with redundancy):</strong><br>
                    EMPLOYEE(SSN, Name, Phone1, Phone2, Phone3)
                </div>

                <div class="tip-box">
                    <strong>üí° Tip:</strong> Fix multivalued attributes by creating separate table or adding multiple columns
                </div>

                <h3>Second Normal Form (2NF)</h3>
                <p><strong>Rule:</strong> Must be in 1NF AND no partial dependencies (non-prime attributes must fully depend on primary key).</p>

                <div class="example">
                    <div class="example-title">Example: Violates 2NF</div>
                    <strong>Bad:</strong><br>
                    WORKS_ON(<u>SSN</u>, <u>PNumber</u>, Hours, EName, PName)<br><br>
                    FDs:<br>
                    {SSN, PNumber} ‚Üí Hours (full dependency ‚úì)<br>
                    SSN ‚Üí EName (partial dependency ‚úó)<br>
                    PNumber ‚Üí PName (partial dependency ‚úó)<br><br>

                    <strong>Good (Decompose):</strong><br>
                    WORKS_ON(<u>SSN</u>, <u>PNumber</u>, Hours)<br>
                    EMPLOYEE(<u>SSN</u>, EName)<br>
                    PROJECT(<u>PNumber</u>, PName)
                </div>

                <div class="memory-hack">
                    <strong>üß† Memory Hack:</strong> 2NF = "No Partial Possibilities" (eliminate partial dependencies)
                </div>

                <h3>Third Normal Form (3NF)</h3>
                <p><strong>Rule:</strong> Must be in 2NF AND no transitive dependencies (non-prime attributes depend only on primary key, not on other non-prime attributes).</p>

                <div class="example">
                    <div class="example-title">Example: Violates 3NF</div>
                    <strong>Bad:</strong><br>
                    EMPLOYEE(<u>SSN</u>, Name, DNumber, DName, DMgrSSN)<br><br>
                    FDs:<br>
                    SSN ‚Üí DNumber (good)<br>
                    SSN ‚Üí DName (transitive ‚úó)<br>
                    Because: SSN ‚Üí DNumber and DNumber ‚Üí DName<br><br>

                    <strong>Good (Decompose):</strong><br>
                    EMPLOYEE(<u>SSN</u>, Name, DNumber)<br>
                    DEPARTMENT(<u>DNumber</u>, DName, DMgrSSN)
                </div>

                <h3>Boyce-Codd Normal Form (BCNF)</h3>
                <p><strong>Rule:</strong> For every FD X ‚Üí A, X must be a superkey.</p>
                <p><strong>Stronger than 3NF:</strong> Eliminates anomalies where prime attributes depend on non-keys.</p>

                <div class="example">
                    <div class="example-title">Example: In 3NF but Violates BCNF</div>
                    <strong>Bad:</strong><br>
                    TEACH(<u>Student</u>, <u>Course</u>, Instructor)<br><br>
                    FDs:<br>
                    {Student, Course} ‚Üí Instructor<br>
                    Instructor ‚Üí Course (violates BCNF! Instructor not superkey)<br><br>

                    <strong>Good (Decompose):</strong><br>
                    TEACHES(<u>Instructor</u>, Course)<br>
                    ENROLLED(<u>Student</u>, Instructor)
                </div>

                <div class="warning">
                    <strong>‚ö†Ô∏è Note:</strong> BCNF decomposition may lose some functional dependencies (not always dependency-preserving)
                </div>

                <h3>Normal Forms Summary</h3>

                <table>
                    <tr>
                        <th>NF</th>
                        <th>Rule</th>
                        <th>Eliminates</th>
                    </tr>
                    <tr>
                        <td><strong>1NF</strong></td>
                        <td>Atomic values only</td>
                        <td>Repeating groups, multivalued attributes</td>
                    </tr>
                    <tr>
                        <td><strong>2NF</strong></td>
                        <td>1NF + No partial dependencies</td>
                        <td>Redundancy from partial dependencies</td>
                    </tr>
                    <tr>
                        <td><strong>3NF</strong></td>
                        <td>2NF + No transitive dependencies</td>
                        <td>Redundancy from transitive dependencies</td>
                    </tr>
                    <tr>
                        <td><strong>BCNF</strong></td>
                        <td>Every determinant is a superkey</td>
                        <td>All anomalies based on FDs</td>
                    </tr>
                </table>

                <div class="tip-box">
                    <strong>üí° Practical Tip:</strong> Most databases normalize to 3NF. BCNF is ideal but sometimes impractical. Denormalization is OK for performance when justified!
                </div>

                <h3>Normalization Algorithm</h3>

                <div class="example">
                    <div class="example-title">Step-by-Step Process</div>
                    <strong>1. Check 1NF:</strong> Remove multivalued/composite attributes<br>
                    <strong>2. Check 2NF:</strong> Remove partial dependencies<br>
                    &nbsp;&nbsp;&nbsp;For each partial dependency X ‚Üí A, create new relation R(X, A)<br>
                    <strong>3. Check 3NF:</strong> Remove transitive dependencies<br>
                    &nbsp;&nbsp;&nbsp;For each transitive dependency X ‚Üí Y ‚Üí Z, create R(Y, Z)<br>
                    <strong>4. Check BCNF:</strong> For each FD X ‚Üí A where X not superkey<br>
                    &nbsp;&nbsp;&nbsp;Decompose into R1(X, A) and R2(R - A)<br>
                    <strong>5. Verify:</strong> Check lossless join and dependency preservation
                </div>
            </div>

            <!-- NoSQL & MongoDB -->
            <div class="section">
                <h2><span class="icon">üçÉ</span> NoSQL & MongoDB</h2>

                <h3>SQL vs NoSQL</h3>

                <table>
                    <tr>
                        <th>Aspect</th>
                        <th>SQL (RDBMS)</th>
                        <th>NoSQL (MongoDB)</th>
                    </tr>
                    <tr>
                        <td><strong>Data Model</strong></td>
                        <td>Tables with rows/columns</td>
                        <td>Documents (JSON-like)</td>
                    </tr>
                    <tr>
                        <td><strong>Schema</strong></td>
                        <td>Rigid, predefined</td>
                        <td>Flexible, dynamic</td>
                    </tr>
                    <tr>
                        <td><strong>Relationships</strong></td>
                        <td>Foreign keys, JOINs</td>
                        <td>Embedded documents, references</td>
                    </tr>
                    <tr>
                        <td><strong>Scalability</strong></td>
                        <td>Vertical (add more power)</td>
                        <td>Horizontal (add more servers)</td>
                    </tr>
                    <tr>
                        <td><strong>ACID</strong></td>
                        <td>Full support</td>
                        <td>Relaxed (eventual consistency)</td>
                    </tr>
                    <tr>
                        <td><strong>Best For</strong></td>
                        <td>Structured, transactional data</td>
                        <td>Unstructured, big data, rapid development</td>
                    </tr>
                </table>

                <div class="memory-hack">
                    <strong>üß† Memory Hack:</strong> "NoSQL = Not Only SQL" (it's an addition, not replacement!)
                </div>

                <h3>MongoDB Terminology</h3>

                <table>
                    <tr>
                        <th>SQL</th>
                        <th>MongoDB</th>
                    </tr>
                    <tr>
                        <td>Database</td>
                        <td>Database</td>
                    </tr>
                    <tr>
                        <td>Table</td>
                        <td>Collection</td>
                    </tr>
                    <tr>
                        <td>Row/Tuple</td>
                        <td>Document</td>
                    </tr>
                    <tr>
                        <td>Column</td>
                        <td>Field</td>
                    </tr>
                    <tr>
                        <td>Primary Key</td>
                        <td>_id (auto-generated)</td>
                    </tr>
                    <tr>
                        <td>JOIN</td>
                        <td>Embedded documents/$lookup</td>
                    </tr>
                </table>

                <h3>JSON & BSON</h3>

                <div class="example">
                    <div class="example-title">JSON Example</div>
                    <div class="code-block">
{
  "_id": "123456789",
  "name": "John Smith",
  "age": 30,
  "email": "john@example.com",
  "address": {
    "street": "123 Main St",
    "city": "Houston",
    "state": "TX"
  },
  "skills": ["Java", "Python", "SQL"],
  "salary": 75000,
  "active": true
}
                    </div>
                </div>

                <div class="tip-box">
                    <strong>üí° Tip:</strong> MongoDB uses BSON (Binary JSON) internally for better performance, but you work with JSON!
                </div>

                <h3>MongoDB Data Types</h3>

                <table>
                    <tr>
                        <th>Type</th>
                        <th>Description</th>
                        <th>Example</th>
                    </tr>
                    <tr>
                        <td>String</td>
                        <td>UTF-8 text</td>
                        <td>"John"</td>
                    </tr>
                    <tr>
                        <td>Integer</td>
                        <td>32 or 64 bit</td>
                        <td>42</td>
                    </tr>
                    <tr>
                        <td>Double</td>
                        <td>Floating point</td>
                        <td>3.14</td>
                    </tr>
                    <tr>
                        <td>Boolean</td>
                        <td>true/false</td>
                        <td>true</td>
                    </tr>
                    <tr>
                        <td>Array</td>
                        <td>List of values</td>
                        <td>["a", "b", "c"]</td>
                    </tr>
                    <tr>
                        <td>Object</td>
                        <td>Embedded document</td>
                        <td>{"x": 1, "y": 2}</td>
                    </tr>
                    <tr>
                        <td>Date</td>
                        <td>Timestamp</td>
                        <td>ISODate("2024-01-01")</td>
                    </tr>
                    <tr>
                        <td>Null</td>
                        <td>Null value</td>
                        <td>null</td>
                    </tr>
                    <tr>
                        <td>ObjectId</td>
                        <td>Unique identifier</td>
                        <td>ObjectId("507f1f77...")</td>
                    </tr>
                </table>

                <h3>MongoDB CRUD Operations</h3>

                <h4>Create (Insert)</h4>

                <div class="code-block">
// Insert one document
db.students.insertOne({
  name: "Ali Ahmed",
  age: 20,
  major: "CS",
  gpa: 3.8
});

// Insert many documents
db.students.insertMany([
  { name: "Sara Ali", age: 21, major: "SE", gpa: 3.9 },
  { name: "Omar Khaled", age: 19, major: "IS", gpa: 3.5 }
]);
                </div>

                <h4>Read (Query)</h4>

                <div class="code-block">
// Find all
db.students.find();

// Find with condition
db.students.find({ major: "CS" });

// Find with multiple conditions (AND)
db.students.find({ major: "CS", gpa: { $gte: 3.5 } });

// Find with OR
db.students.find({
  $or: [
    { major: "CS" },
    { major: "SE" }
  ]
});

// Find one
db.students.findOne({ name: "Ali Ahmed" });

// Projection (select specific fields)
db.students.find(
  { major: "CS" },
  { name: 1, gpa: 1, _id: 0 }  // 1 = include, 0 = exclude
);

// Sort
db.students.find().sort({ gpa: -1 });  // -1 = descending

// Limit
db.students.find().limit(5);

// Skip (pagination)
db.students.find().skip(10).limit(5);  // Page 3
                </div>

                <h4>Update</h4>

                <div class="code-block">
// Update one
db.students.updateOne(
  { name: "Ali Ahmed" },
  { $set: { gpa: 3.9 } }
);

// Update many
db.students.updateMany(
  { major: "CS" },
  { $set: { department: "Computer Science" } }
);

// Increment value
db.students.updateOne(
  { name: "Ali Ahmed" },
  { $inc: { age: 1 } }  // age = age + 1
);

// Push to array
db.students.updateOne(
  { name: "Ali Ahmed" },
  { $push: { courses: "CS340" } }
);

// Replace entire document
db.students.replaceOne(
  { name: "Ali Ahmed" },
  { name: "Ali Ahmed", age: 21, major: "CS", gpa: 4.0 }
);
                </div>

                <h4>Delete</h4>

                <div class="code-block">
// Delete one
db.students.deleteOne({ name: "Ali Ahmed" });

// Delete many
db.students.deleteMany({ gpa: { $lt: 2.0 } });

// Delete all documents
db.students.deleteMany({});
                </div>

                <h3>MongoDB Query Operators</h3>

                <table>
                    <tr>
                        <th>Operator</th>
                        <th>Description</th>
                        <th>Example</th>
                    </tr>
                    <tr>
                        <td>$eq</td>
                        <td>Equal to</td>
                        <td>{ age: { $eq: 20 } }</td>
                    </tr>
                    <tr>
                        <td>$ne</td>
                        <td>Not equal</td>
                        <td>{ age: { $ne: 20 } }</td>
                    </tr>
                    <tr>
                        <td>$gt</td>
                        <td>Greater than</td>
                        <td>{ age: { $gt: 20 } }</td>
                    </tr>
                    <tr>
                        <td>$gte</td>
                        <td>Greater than or equal</td>
                        <td>{ age: { $gte: 20 } }</td>
                    </tr>
                    <tr>
                        <td>$lt</td>
                        <td>Less than</td>
                        <td>{ age: { $lt: 20 } }</td>
                    </tr>
                    <tr>
                        <td>$lte</td>
                        <td>Less than or equal</td>
                        <td>{ age: { $lte: 20 } }</td>
                    </tr>
                    <tr>
                        <td>$in</td>
                        <td>In array</td>
                        <td>{ major: { $in: ["CS","SE"] } }</td>
                    </tr>
                    <tr>
                        <td>$nin</td>
                        <td>Not in array</td>
                        <td>{ major: { $nin: ["CS"] } }</td>
                    </tr>
                    <tr>
                        <td>$and</td>
                        <td>Logical AND</td>
                        <td>{ $and: [{...}, {...}] }</td>
                    </tr>
                    <tr>
                        <td>$or</td>
                        <td>Logical OR</td>
                        <td>{ $or: [{...}, {...}] }</td>
                    </tr>
                    <tr>
                        <td>$not</td>
                        <td>Logical NOT</td>
                        <td>{ age: { $not: { $gt: 20 } } }</td>
                    </tr>
                    <tr>
                        <td>$exists</td>
                        <td>Field exists</td>
                        <td>{ email: { $exists: true } }</td>
                    </tr>
                </table>

                <div class="memory-hack">
                    <strong>üß† Memory Hack:</strong> MongoDB operators start with $ (dollar sign)
                </div>

                <h3>Aggregation Pipeline</h3>

                <div class="code-block">
// Example: Average GPA by major
db.students.aggregate([
  { $group: {
      _id: "$major",
      avgGPA: { $avg: "$gpa" },
      count: { $sum: 1 }
    }
  },
  { $sort: { avgGPA: -1 } }
]);

// Example: Filter then group
db.students.aggregate([
  { $match: { gpa: { $gte: 3.0 } } },  // WHERE gpa >= 3.0
  { $group: {
      _id: "$major",
      students: { $push: "$name" }
    }
  }
]);

// Example: Project (select fields)
db.students.aggregate([
  { $project: {
      name: 1,
      gpa: 1,
      highAchiever: { $gte: ["$gpa", 3.5] }
    }
  }
]);
                </div>

                <div class="tip-box">
                    <strong>üí° Tip:</strong> Aggregation pipeline is like SQL GROUP BY + HAVING + ORDER BY combined!
                </div>

                <h3>Embedding vs Referencing</h3>

                <h4>Embedding (Denormalized)</h4>

                <div class="example">
                    <div class="example-title">Best for: 1:Few relationships, data read together</div>
                    <div class="code-block">
{
  "_id": "E123",
  "name": "John Smith",
  "department": {
    "deptId": "D5",
    "deptName": "Research",
    "location": "Houston"
  }
}
                    </div>
                    <strong>Pros:</strong> One query to get all data, better performance<br>
                    <strong>Cons:</strong> Data duplication, harder to update
                </div>

                <h4>Referencing (Normalized)</h4>

                <div class="example">
                    <div class="example-title">Best for: 1:Many, Many:Many, frequently updated data</div>
                    <div class="code-block">
// Employee document
{
  "_id": "E123",
  "name": "John Smith",
  "deptId": "D5"
}

// Department document
{
  "_id": "D5",
  "deptName": "Research",
  "location": "Houston"
}

// Query with $lookup (JOIN)
db.employees.aggregate([
  {
    $lookup: {
      from: "departments",
      localField: "deptId",
      foreignField: "_id",
      as: "department"
    }
  }
]);
                    </div>
                    <strong>Pros:</strong> No duplication, easier updates<br>
                    <strong>Cons:</strong> Requires multiple queries or $lookup
                </div>
            </div>

            <!-- Database Security -->
            <div class="section">
                <h2><span class="icon">üîí</span> Database Security</h2>

                <h3>Key Components</h3>

                <div class="example">
                    <div class="example-title">7 Pillars of Database Security</div>
                    <strong>1. Access Control:</strong> Who can access what<br>
                    <strong>2. Encryption:</strong> Data protection at rest and in transit<br>
                    <strong>3. Audit Trails:</strong> Logging all activities<br>
                    <strong>4. Data Masking:</strong> Hide sensitive data<br>
                    <strong>5. Backup & Recovery:</strong> Prevent data loss<br>
                    <strong>6. Patch Management:</strong> Keep systems updated<br>
                    <strong>7. Firewalls:</strong> Network-level protection
                </div>

                <h3>SQL Security Commands (DCL)</h3>

                <div class="code-block">
-- GRANT privileges
GRANT SELECT, INSERT ON Student TO user_john;

GRANT ALL PRIVILEGES ON database_name.* TO 'username'@'localhost';

-- REVOKE privileges
REVOKE INSERT ON Student FROM user_john;

-- Create user
CREATE USER 'john'@'localhost' IDENTIFIED BY 'password123';

-- Show grants
SHOW GRANTS FOR 'john'@'localhost';
                </div>

                <h3>Database Users</h3>

                <table>
                    <tr>
                        <th>User Type</th>
                        <th>Role</th>
                        <th>Responsibilities</th>
                    </tr>
                    <tr>
                        <td><strong>DBA</strong></td>
                        <td>Administrator</td>
                        <td>Authorize access, monitor performance, backup/recovery</td>
                    </tr>
                    <tr>
                        <td><strong>Database Designer</strong></td>
                        <td>Architect</td>
                        <td>Define schema, constraints, relationships</td>
                    </tr>
                    <tr>
                        <td><strong>End User</strong></td>
                        <td>User</td>
                        <td>Query, update data through applications</td>
                    </tr>
                    <tr>
                        <td><strong>Application Developer</strong></td>
                        <td>Programmer</td>
                        <td>Build applications using database</td>
                    </tr>
                </table>

                <div class="tip-box">
                    <strong>üí° Tip:</strong> Follow principle of least privilege - give users only the access they need!
                </div>
            </div>

            <!-- System Catalog -->
            <div class="section">
                <h2><span class="icon">üìñ</span> System Catalog (Data Dictionary)</h2>

                <p><strong>Definition:</strong> Metadata about the database stored in the database itself.</p>

                <h3>What's Stored in System Catalog</h3>

                <ul>
                    <li>Relation/table names</li>
                    <li>Attribute names and data types</li>
                    <li>Constraints (primary keys, foreign keys, NOT NULL, etc.)</li>
                    <li>Views definitions</li>
                    <li>Indexes and storage structures</li>
                    <li>User privileges and security info</li>
                    <li>Statistics for query optimization (tuple counts, value distributions)</li>
                </ul>

                <div class="example">
                    <div class="example-title">Querying System Catalog in MySQL</div>
                    <div class="code-block">
-- Show all tables
SHOW TABLES;

-- Describe table structure
DESCRIBE Student;

-- Show table creation SQL
SHOW CREATE TABLE Student;

-- Query information schema
SELECT * FROM INFORMATION_SCHEMA.TABLES 
WHERE TABLE_SCHEMA = 'mydb';

SELECT * FROM INFORMATION_SCHEMA.COLUMNS
WHERE TABLE_NAME = 'Student';
                    </div>
                </div>

                <div class="tip-box">
                    <strong>üí° Tip:</strong> System catalog is how the DBMS knows about your database structure - it's the database about the database!
                </div>
            </div>

            <!-- Database Architecture -->
            <div class="section">
                <h2><span class="icon">üèóÔ∏è</span> Database Architecture</h2>

                <h3>Three-Schema Architecture</h3>

                <div class="memory-hack">
                    <strong>üß† Memory Hack:</strong> "ELI" ‚Üí External, Logical, Internal (top to bottom)
                </div>

                <table>
                    <tr>
                        <th>Level</th>
                        <th>View</th>
                        <th>Description</th>
                        <th>Example</th>
                    </tr>
                    <tr>
                        <td><strong>External</strong></td>
                        <td>User View</td>
                        <td>Different views for different users</td>
                        <td>Students see grades, Faculty see all data</td>
                    </tr>
                    <tr>
                        <td><strong>Conceptual/Logical</strong></td>
                        <td>Community View</td>
                        <td>Overall logical structure (ER, tables)</td>
                        <td>STUDENT(ID, Name, GPA)</td>
                    </tr>
                    <tr>
                        <td><strong>Internal/Physical</strong></td>
                        <td>Storage View</td>
                        <td>How data is physically stored</td>
                        <td>B-trees, file organization, indexes</td>
                    </tr>
                </table>

                <h3>Data Independence</h3>

                <div class="example">
                    <div class="example-title">Two Types</div>
                    <strong>1. Physical Data Independence:</strong><br>
                    Change internal schema without changing conceptual schema<br>
                    Example: Change from B-tree to hash index ‚Üí applications unaffected<br><br>

                    <strong>2. Logical Data Independence:</strong><br>
                    Change conceptual schema without changing external schemas<br>
                    Example: Add new attribute to table ‚Üí views don't break<br>
                    (Harder to achieve than physical!)
                </div>

                <h3>Client-Server Architectures</h3>

                <h4>2-Tier Architecture</h4>
                <ul>
                    <li><strong>Client:</strong> User interface + application logic</li>
                    <li><strong>Server:</strong> Database server (DBMS)</li>
                    <li><strong>Example:</strong> Desktop application connecting directly to database</li>
                </ul>

                <h4>3-Tier Architecture</h4>
                <ul>
                    <li><strong>Presentation Tier:</strong> User interface (web browser, mobile app)</li>
                    <li><strong>Application Tier:</strong> Business logic (web server, API)</li>
                    <li><strong>Data Tier:</strong> Database server</li>
                    <li><strong>Advantages:</strong> Better security, scalability, maintainability</li>
                </ul>

                <div class="tip-box">
                    <strong>üí° Tip:</strong> Modern web apps use 3-tier: React (presentation) + Node.js (application) + MySQL (data)
                </div>
            </div>

            <!-- Quick Reference Tables -->
            <div class="section">
                <h2><span class="icon">‚ö°</span> Quick Reference Tables</h2>

                <h3>SQL vs MongoDB Commands</h3>

                <table>
                    <tr>
                        <th>Operation</th>
                        <th>SQL</th>
                        <th>MongoDB</th>
                    </tr>
                    <tr>
                        <td>Create DB</td>
                        <td>CREATE DATABASE db</td>
                        <td>use db</td>
                    </tr>
                    <tr>
                        <td>Create Table/Collection</td>
                        <td>CREATE TABLE student(...)</td>
                        <td>db.createCollection("student")</td>
                    </tr>
                    <tr>
                        <td>Insert</td>
                        <td>INSERT INTO student VALUES(...)</td>
                        <td>db.student.insertOne({...})</td>
                    </tr>
                    <tr>
                        <td>Select All</td>
                        <td>SELECT * FROM student</td>
                        <td>db.student.find()</td>
                    </tr>
                    <tr>
                        <td>Where Clause</td>
                        <td>SELECT * FROM student WHERE age > 20</td>
                        <td>db.student.find({age: {$gt: 20}})</td>
                    </tr>
                    <tr>
                        <td>Update</td>
                        <td>UPDATE student SET age=21 WHERE id=1</td>
                        <td>db.student.updateOne({id:1}, {$set:{age:21}})</td>
                    </tr>
                    <tr>
                        <td>Delete</td>
                        <td>DELETE FROM student WHERE id=1</td>
                        <td>db.student.deleteOne({id:1})</td>
                    </tr>
                    <tr>
                        <td>Join</td>
                        <td>SELECT * FROM a JOIN b ON a.id=b.id</td>
                        <td>db.a.aggregate([{$lookup:{...}}])</td>
                    </tr>
                    <tr>
                        <td>Group By</td>
                        <td>SELECT major, COUNT(*) FROM student GROUP BY major</td>
                        <td>db.student.aggregate([{$group:{_id:"$major", count:{$sum:1}}}])</td>
                    </tr>
                </table>

                <h3>Normal Forms Cheat Sheet</h3>

                <table>
                    <tr>
                        <th>Normal Form</th>
                        <th>Check For</th>
                        <th>How to Fix</th>
                    </tr>
                    <tr>
                        <td><strong>1NF</strong></td>
                        <td>Multivalued or composite attributes</td>
                        <td>Create separate table or flatten</td>
                    </tr>
                    <tr>
                        <td><strong>2NF</strong></td>
                        <td>Partial dependencies (non-prime ‚Üí part of key)</td>
                        <td>Move to separate table with partial key</td>
                    </tr>
                    <tr>
                        <td><strong>3NF</strong></td>
                        <td>Transitive dependencies (non-prime ‚Üí non-prime)</td>
                        <td>Move to separate table with determinant</td>
                    </tr>
                    <tr>
                        <td><strong>BCNF</strong></td>
                        <td>Any FD where determinant isn't superkey</td>
                        <td>Decompose into R1(X,A) and R2(R-A)</td>
                    </tr>
                </table>

                <h3>ER Diagram Symbols</h3>

                <table>
                    <tr>
                        <th>Symbol</th>
                        <th>Meaning</th>
                        <th>Example</th>
                    </tr>
                    <tr>
                        <td>Rectangle</td>
                        <td>Strong Entity</td>
                        <td>EMPLOYEE</td>
                    </tr>
                    <tr>
                        <td>Double Rectangle</td>
                        <td>Weak Entity</td>
                        <td>DEPENDENT</td>
                    </tr>
                    <tr>
                        <td>Oval</td>
                        <td>Attribute</td>
                        <td>Name, Age</td>
                    </tr>
                    <tr>
                        <td>Double Oval</td>
                        <td>Multivalued Attribute</td>
                        <td>{Phone_Numbers}</td>
                    </tr>
                    <tr>
                        <td>Dashed Oval</td>
                        <td>Derived Attribute</td>
                        <td>Age (from BirthDate)</td>
                    </tr>
                    <tr>
                        <td>Underline</td>
                        <td>Key Attribute</td>
                        <td><u>SSN</u></td>
                    </tr>
                    <tr>
                        <td>Dashed Underline</td>
                        <td>Partial Key</td>
                        <td>Dependent_Name</td>
                    </tr>
                    <tr>
                        <td>Diamond</td>
                        <td>Relationship</td>
                        <td>WORKS_FOR</td>
                    </tr>
                    <tr>
                        <td>Double Diamond</td>
                        <td>Identifying Relationship</td>
                        <td>DEPENDENTS_OF</td>
                    </tr>
                    <tr>
                        <td>Single Line</td>
                        <td>Partial Participation</td>
                        <td>Not all employees manage</td>
                    </tr>
                    <tr>
                        <td>Double Line</td>
                        <td>Total Participation</td>
                        <td>All employees work for a dept</td>
                    </tr>
                    <tr>
                        <td>1, N, M</td>
                        <td>Cardinality Ratio</td>
                        <td>1:N, M:N</td>
                    </tr>
                    <tr>
                        <td>(min, max)</td>
                        <td>Participation Constraint</td>
                        <td>(0,N), (1,1)</td>
                    </tr>
                </table>
            </div>

            <!-- Exam Tips & Tricks -->
            <div class="section">
                <h2><span class="icon">üéØ</span> Exam Tips & Tricks</h2>

                <h3>Common Mistakes to Avoid</h3>

                <div class="warning">
                    <strong>1. Forgetting Foreign Key Constraints</strong><br>
                    Always specify ON DELETE and ON UPDATE actions!
                </div>

                <div class="warning">
                    <strong>2. Confusing WHERE and HAVING</strong><br>
                    WHERE filters tuples BEFORE grouping<br>
                    HAVING filters groups AFTER grouping
                </div>

                <div class="warning">
                    <strong>3. Wrong Placement of Foreign Keys</strong><br>
                    1:N ‚Üí Foreign key goes on the N side<br>
                    M:N ‚Üí Create junction table with both keys
                </div>

                <div class="warning">
                    <strong>4. Not Checking All Normal Forms</strong><br>
                    Check in order: 1NF ‚Üí 2NF ‚Üí 3NF ‚Üí BCNF<br>
                    Don't skip steps!
                </div>

                <div class="warning">
                    <strong>5. Forgetting DISTINCT in Aggregates</strong><br>
                    COUNT(*) vs COUNT(DISTINCT column) are different!
                </div>

                <h3>Problem-Solving Strategies</h3>

                <div class="tip-box">
                    <strong>For ER Diagrams:</strong><br>
                    1. Identify all nouns (potential entities)<br>
                    2. Identify all verbs (potential relationships)<br>
                    3. Determine attributes for each entity<br>
                    4. Find keys (what uniquely identifies each entity?)<br>
                    5. Determine cardinality (1:1, 1:N, M:N)<br>
                    6. Check for weak entities (depend on others?)
                </div>

                <div class="tip-box">
                    <strong>For Normalization:</strong><br>
                    1. List all FDs from the problem<br>
                    2. Find all candidate keys using closure<br>
                    3. Check 1NF (atomic values?)<br>
                    4. Check 2NF (partial dependencies?)<br>
                    5. Check 3NF (transitive dependencies?)<br>
                    6. Check BCNF (all determinants superkeys?)<br>
                    7. Decompose if needed
                </div>

                <div class="tip-box">
                    <strong>For SQL Queries:</strong><br>
                    1. Understand what output is needed<br>
                    2. Identify which tables are needed<br>
                    3. Determine join conditions<br>
                    4. Add WHERE filters<br>
                    5. Add GROUP BY if aggregating<br>
                    6. Add HAVING if filtering groups<br>
                    7. Add ORDER BY if sorting needed<br>
                    8. Test with sample data mentally
                </div>

                <h3>Time-Saving Tips</h3>

                <div class="memory-hack">
                    <strong>üß† For Multiple Choice:</strong><br>
                    1. Eliminate obviously wrong answers first<br>
                    2. Look for keywords (ALL, NONE, ALWAYS, NEVER often wrong)<br>
                    3. Check for trick wording carefully<br>
                    4. Use process of elimination
                </div>

                <div class="memory-hack">
                    <strong>üß† For Design Problems:</strong><br>
                    1. Draw ER diagram first (visualize!)<br>
                    2. Map to relational step-by-step<br>
                    3. Write down all constraints<br>
                    4. Check your work by tracing sample data
                </div>

                <h3>Last-Minute Review Checklist</h3>

                <ul>
                    <li>‚úì Know all 4 ACID properties and examples</li>
                    <li>‚úì Can draw and map ER diagrams (all 9 steps)</li>
                    <li>‚úì Understand all key types (super, candidate, primary, foreign)</li>
                    <li>‚úì Know cardinality ratios (1:1, 1:N, M:N) and where FK goes</li>
                    <li>‚úì Can identify weak entities and their notation</li>
                    <li>‚úì Understand EER concepts (specialization, generalization, categories)</li>
                    <li>‚úì Know all 4 constraints on specialization (d/o, total/partial)</li>
                    <li>‚úì Can write basic SQL queries (SELECT, FROM, WHERE, JOIN)</li>
                    <li>‚úì Know difference between INNER/LEFT/RIGHT/FULL OUTER JOIN</li>
                    <li>‚úì Understand aggregation functions (COUNT, SUM, AVG, MAX, MIN)</li>
                    <li>‚úì Can use GROUP BY and HAVING correctly</li>
                    <li>‚úì Know nested queries (IN, EXISTS, ANY, ALL)</li>
                    <li>‚úì Understand functional dependencies (full, partial, transitive)</li>
                    <li>‚úì Can find closure of attributes</li>
                    <li>‚úì Know all normal forms (1NF, 2NF, 3NF, BCNF) and how to fix violations</li>
                    <li>‚úì Can decompose relations properly</li>
                    <li>‚úì Understand update anomalies (insert, delete, modify)</li>
                    <li>‚úì Know MongoDB basic CRUD operations</li>
                    <li>‚úì Understand embedding vs referencing in NoSQL</li>
                    <li>‚úì Know database security concepts and DCL commands</li>
                </ul>
            </div>

            <!-- Advanced SQL Topics -->
            <div class="section">
                <h2><span class="icon">üöÄ</span> Advanced SQL Topics</h2>

                <h3>Triggers</h3>
                <p>Automatically execute code when certain events occur.</p>

                <div class="code-block">
-- Create trigger to update total salary when employee added
CREATE TRIGGER update_dept_salary
AFTER INSERT ON Employee
FOR EACH ROW
BEGIN
    UPDATE Department 
    SET TotalSalary = TotalSalary + NEW.Salary
    WHERE Dnumber = NEW.Dno;
END;

-- Trigger to prevent deletion of employees with dependents
CREATE TRIGGER prevent_delete_with_dependents
BEFORE DELETE ON Employee
FOR EACH ROW
BEGIN
    IF (SELECT COUNT(*) FROM Dependent WHERE ESSN = OLD.SSN) > 0 THEN
        SIGNAL SQLSTATE '45000'
        SET MESSAGE_TEXT = 'Cannot delete employee with dependents';
    END IF;
END;
                </div>

                <div class="tip-box">
                    <strong>üí° Tip:</strong> Triggers are useful for maintaining derived data, enforcing complex constraints, and auditing!
                </div>

                <h3>Assertions</h3>
                <p>Global constraints that must always be true.</p>

                <div class="code-block">
-- Assertion: Every department must have at least one employee
CREATE ASSERTION dept_has_employee
CHECK (NOT EXISTS (
    SELECT * FROM Department D
    WHERE NOT EXISTS (
        SELECT * FROM Employee E
        WHERE E.Dno = D.Dnumber
    )
));

-- Assertion: Manager salary must be highest in department
CREATE ASSERTION manager_highest_salary
CHECK (NOT EXISTS (
    SELECT * FROM Employee E, Department D
    WHERE E.Dno = D.Dnumber 
    AND D.MgrSSN IS NOT NULL
    AND E.Salary > (
        SELECT Salary FROM Employee WHERE SSN = D.MgrSSN
    )
));
                </div>

                <h3>Transactions (TCL)</h3>

                <div class="code-block">
-- Start transaction
START TRANSACTION;

-- Make changes
UPDATE Account SET Balance = Balance - 100 WHERE AccountID = 1;
UPDATE Account SET Balance = Balance + 100 WHERE AccountID = 2;

-- Commit (make permanent)
COMMIT;

-- Or rollback (undo all changes)
ROLLBACK;

-- Savepoint for partial rollback
START TRANSACTION;
UPDATE Account SET Balance = Balance - 50 WHERE AccountID = 1;
SAVEPOINT sp1;
UPDATE Account SET Balance = Balance + 50 WHERE AccountID = 2;
-- Oops, mistake! Rollback to savepoint
ROLLBACK TO sp1;
-- Now commit the first update only
COMMIT;
                </div>

                <div class="memory-hack">
                    <strong>üß† Memory Hack:</strong> "COMMIT = Confirm It's MY Intent To save"
                </div>

                <h3>Indexes</h3>
                <p>Speed up query performance by creating fast lookup structures.</p>

                <div class="code-block">
-- Create index on single column
CREATE INDEX idx_student_name ON Student(Name);

-- Create composite index
CREATE INDEX idx_employee_dept_salary ON Employee(Dno, Salary);

-- Create unique index
CREATE UNIQUE INDEX idx_student_email ON Student(Email);

-- Drop index
DROP INDEX idx_student_name;
                </div>

                <div class="tip-box">
                    <strong>üí° Tip:</strong> Index columns used in WHERE, JOIN, and ORDER BY clauses. But too many indexes slow down INSERT/UPDATE/DELETE!
                </div>

                <h3>Window Functions (Advanced Analytics)</h3>

                <div class="code-block">
-- Rank students by GPA
SELECT Name, GPA,
       RANK() OVER (ORDER BY GPA DESC) AS rank
FROM Student;

-- Running total of salaries
SELECT Name, Salary,
       SUM(Salary) OVER (ORDER BY SSN) AS running_total
FROM Employee;

-- Partition by department
SELECT Name, Dno, Salary,
       AVG(Salary) OVER (PARTITION BY Dno) AS dept_avg_salary
FROM Employee;

-- Row number within partition
SELECT Name, Major, GPA,
       ROW_NUMBER() OVER (PARTITION BY Major ORDER BY GPA DESC) AS rank_in_major
FROM Student;
                </div>

                <h3>Common Table Expressions (CTEs)</h3>

                <div class="code-block">
-- WITH clause for readable complex queries
WITH HighGPAStudents AS (
    SELECT StudentID, Name, GPA
    FROM Student
    WHERE GPA >= 3.5
)
SELECT S.*, E.CourseID
FROM HighGPAStudents S
JOIN Enrollment E ON S.StudentID = E.StudentID;

-- Recursive CTE (employee hierarchy)
WITH RECURSIVE EmployeeHierarchy AS (
    -- Base case: top-level managers
    SELECT SSN, Name, SuperSSN, 1 AS Level
    FROM Employee
    WHERE SuperSSN IS NULL
    
    UNION ALL
    
    -- Recursive case: employees under managers
    SELECT E.SSN, E.Name, E.SuperSSN, EH.Level + 1
    FROM Employee E
    JOIN EmployeeHierarchy EH ON E.SuperSSN = EH.SSN
)
SELECT * FROM EmployeeHierarchy ORDER BY Level, Name;
                </div>

                <div class="tip-box">
                    <strong>üí° Tip:</strong> CTEs make complex queries more readable than nested subqueries!
                </div>
            </div>

            <!-- Object-Oriented Databases -->
            <div class="section">
                <h2><span class="icon">üîÆ</span> Object-Oriented Databases (OODBMS)</h2>

                <h3>Key Concepts</h3>

                <table>
                    <tr>
                        <th>Concept</th>
                        <th>Description</th>
                        <th>Example</th>
                    </tr>
                    <tr>
                        <td><strong>Objects</strong></td>
                        <td>Data stored as programming objects</td>
                        <td>Employee object with methods and attributes</td>
                    </tr>
                    <tr>
                        <td><strong>Classes</strong></td>
                        <td>Template for objects</td>
                        <td>Employee class defines structure</td>
                    </tr>
                    <tr>
                        <td><strong>Inheritance</strong></td>
                        <td>Classes inherit from parent classes</td>
                        <td>Manager inherits from Employee</td>
                    </tr>
                    <tr>
                        <td><strong>Encapsulation</strong></td>
                        <td>Data and methods bundled together</td>
                        <td>Employee.calculateSalary() method</td>
                    </tr>
                    <tr>
                        <td><strong>Persistence</strong></td>
                        <td>Objects survive program termination</td>
                        <td>Objects stored in database</td>
                    </tr>
                </table>

                <h3>RDBMS vs OODBMS</h3>

                <table>
                    <tr>
                        <th>Aspect</th>
                        <th>RDBMS</th>
                        <th>OODBMS</th>
                    </tr>
                    <tr>
                        <td>Data Structure</td>
                        <td>Tables (rows & columns)</td>
                        <td>Objects with attributes & methods</td>
                    </tr>
                    <tr>
                        <td>Relationships</td>
                        <td>Foreign keys, JOINs</td>
                        <td>Direct object references</td>
                    </tr>
                    <tr>
                        <td>Query Language</td>
                        <td>SQL</td>
                        <td>OQL (Object Query Language)</td>
                    </tr>
                    <tr>
                        <td>Inheritance</td>
                        <td>Not supported</td>
                        <td>Native support</td>
                    </tr>
                    <tr>
                        <td>Complex Data Types</td>
                        <td>Difficult</td>
                        <td>Easy (arrays, nested objects)</td>
                    </tr>
                    <tr>
                        <td>Best For</td>
                        <td>Business transactions</td>
                        <td>CAD, multimedia, complex apps</td>
                    </tr>
                </table>

                <div class="example">
                    <div class="example-title">OODBMS Example Structure</div>
                    <strong>In OODBMS:</strong><br>
                    Customer {<br>
                    &nbsp;&nbsp;customerID: String<br>
                    &nbsp;&nbsp;name: String<br>
                    &nbsp;&nbsp;orders: List&lt;Order&gt; // Direct reference!<br>
                    }<br><br>
                    Order {<br>
                    &nbsp;&nbsp;orderID: String<br>
                    &nbsp;&nbsp;customer: Customer // Direct reference!<br>
                    &nbsp;&nbsp;amount: Float<br>
                    }<br><br>
                    <strong>In RDBMS:</strong><br>
                    Customer(CustomerID, Name)<br>
                    Order(OrderID, CustomerID, Amount) -- Foreign key
                </div>

                <div class="tip-box">
                    <strong>üí° Tip:</strong> PostgreSQL started as an object-relational database, supporting both paradigms!
                </div>
            </div>

            <!-- Performance & Optimization -->
            <div class="section">
                <h2><span class="icon">‚ö°</span> Performance & Optimization Tips</h2>

                <h3>Query Optimization</h3>

                <div class="tip-box">
                    <strong>1. Use indexes on frequently queried columns</strong><br>
                    Especially for WHERE, JOIN, and ORDER BY clauses
                </div>

                <div class="tip-box">
                    <strong>2. Avoid SELECT *</strong><br>
                    Only select columns you need to reduce data transfer
                </div>

                <div class="tip-box">
                    <strong>3. Use LIMIT for large result sets</strong><br>
                    Pagination improves performance
                </div>

                <div class="tip-box">
                    <strong>4. Use EXPLAIN to analyze queries</strong><br>
                    See query execution plan and identify bottlenecks
                </div>

                <div class="code-block">
-- Analyze query performance
EXPLAIN SELECT * FROM Employee WHERE Salary > 50000;

-- Detailed analysis
EXPLAIN ANALYZE SELECT E.Name, D.Dname
FROM Employee E JOIN Department D ON E.Dno = D.Dnumber;
                </div>

                <div class="tip-box">
                    <strong>5. Use proper JOIN types</strong><br>
                    INNER JOIN is faster than OUTER JOIN when possible
                </div>

                <div class="tip-box">
                    <strong>6. Filter early with WHERE</strong><br>
                    Reduce data before grouping/joining
                </div>

                <div class="tip-box">
                    <strong>7. Denormalize for read-heavy workloads</strong><br>
                    Sometimes breaking normal forms improves performance
                </div>

                <div class="tip-box">
                    <strong>8. Use batch operations</strong><br>
                    INSERT many rows at once instead of multiple single inserts
                </div>

                <h3>When to Denormalize</h3>

                <ul>
                    <li>Read operations vastly outnumber writes</li>
                    <li>Complex joins causing performance issues</li>
                    <li>Data warehouse / reporting scenarios</li>
                    <li>Real-time dashboards needing fast queries</li>
                </ul>

                <div class="warning">
                    <strong>‚ö†Ô∏è Remember:</strong> Denormalization trades consistency for performance. Only do it when benefits outweigh costs!
                </div>
            </div>

            <!-- Study Strategies -->
            <div class="section">
                <h2><span class="icon">üìù</span> Final Study Strategies</h2>

                <h3>The 24-Hour Before Exam Plan</h3>

                <div class="memory-hack">
                    <strong>Morning (9 AM - 12 PM):</strong><br>
                    ‚Ä¢ Review ER diagrams and mapping (1 hour)<br>
                    ‚Ä¢ Practice SQL queries - write 10 different queries (1.5 hours)<br>
                    ‚Ä¢ Review normalization - work through 2 examples (30 min)
                </div>

                <div class="memory-hack">
                    <strong>Afternoon (2 PM - 5 PM):</strong><br>
                    ‚Ä¢ Review all memory hacks from this cheat sheet (30 min)<br>
                    ‚Ä¢ Practice finding FDs and closures (1 hour)<br>
                    ‚Ä¢ Review ACID properties with examples (30 min)<br>
                    ‚Ä¢ Quick MongoDB CRUD review (1 hour)
                </div>

                <div class="memory-hack">
                    <strong>Evening (7 PM - 9 PM):</strong><br>
                    ‚Ä¢ Review all formulas and definitions (1 hour)<br>
                    ‚Ä¢ Practice one complete database design problem (1 hour)<br>
                    ‚Ä¢ Light review of weak areas only
                </div>

                <div class="memory-hack">
                    <strong>Night Before:</strong><br>
                    ‚Ä¢ Read through this cheat sheet once<br>
                    ‚Ä¢ Get 8 hours of sleep!<br>
                    ‚Ä¢ DON'T cram new material
                </div>

                <h3>Active Recall Questions</h3>

                <div class="tip-box">
                    Test yourself without looking at answers:<br>
                    ‚Ä¢ What are the 4 ACID properties? Give examples.<br>
                    ‚Ä¢ Draw an ER diagram for a university database<br>
                    ‚Ä¢ What's the difference between 2NF and 3NF?<br>
                    ‚Ä¢ Where does the foreign key go in 1:N relationship?<br>
                    ‚Ä¢ Write SQL query to find employees earning above department average<br>
                    ‚Ä¢ What's the closure of {A,B} given FDs: A‚ÜíC, B‚ÜíD, CD‚ÜíE?<br>
                    ‚Ä¢ How do you fix a partial dependency?<br>
                    ‚Ä¢ What's the difference between INNER JOIN and LEFT JOIN?
                </div>

                <h3>Common Exam Question Types</h3>

                <div class="example">
                    <div class="example-title">Type 1: ER Diagram Design</div>
                    Given requirements, draw ER diagram with:<br>
                    ‚úì All entities (strong and weak)<br>
                    ‚úì All relationships with cardinality<br>
                    ‚úì All attributes (including keys)<br>
                    ‚úì Participation constraints
                </div>

                <div class="example">
                    <div class="example-title">Type 2: Mapping ER to Relational</div>
                    Convert ER diagram to relations:<br>
                    ‚úì Apply all 9 mapping steps<br>
                    ‚úì Identify primary and foreign keys<br>
                    ‚úì Specify ON DELETE/UPDATE actions
                </div>

                <div class="example">
                    <div class="example-title">Type 3: Normalization</div>
                    Given relation with FDs:<br>
                    ‚úì Find all candidate keys<br>
                    ‚úì Check each normal form<br>
                    ‚úì Decompose if violations found<br>
                    ‚úì Verify lossless join
                </div>

                <div class="example">
                    <div class="example-title">Type 4: SQL Query Writing</div>
                    Write queries to:<br>
                    ‚úì Select with conditions<br>
                    ‚úì Join multiple tables<br>
                    ‚úì Use aggregation and GROUP BY<br>
                    ‚úì Write nested subqueries
                </div>

                <div class="example">
                    <div class="example-title">Type 5: Conceptual Questions</div>
                    Explain concepts:<br>
                    ‚úì ACID properties<br>
                    ‚úì Referential integrity<br>
                    ‚úì Data independence<br>
                    ‚úì Update anomalies
                </div>
            </div>

            <!-- Master Formula Sheet -->
            <div class="section">
                <h2><span class="icon">üìê</span> Master Formula & Definition Sheet</h2>

                <h3>Key Definitions (Memorize These!)</h3>

                <div class="formula">
                    <strong>Database:</strong> Organized collection of related data
                </div>

                <div class="formula">
                    <strong>DBMS:</strong> Software to manage databases (create, query, update, control)
                </div>

                <div class="formula">
                    <strong>Relation:</strong> Table with tuples (rows) and attributes (columns)
                </div>

                <div class="formula">
                    <strong>Superkey:</strong> Set of attributes that uniquely identifies tuples
                </div>

                <div class="formula">
                    <strong>Candidate Key:</strong> Minimal superkey
                </div>

                <div class="formula">
                    <strong>Primary Key:</strong> Chosen candidate key (cannot be NULL)
                </div>

                <div class="formula">
                    <strong>Foreign Key:</strong> Attribute referencing primary key in another relation
                </div>

                <div class="formula">
                    <strong>Functional Dependency X ‚Üí Y:</strong> If t1[X] = t2[X], then t1[Y] = t2[Y]
                </div>

                <div class="formula">
                    <strong>Closure X+:</strong> Set of all attributes functionally determined by X
                </div>

                <div class="formula">
                    <strong>1NF:</strong> All attributes atomic (no multivalued/composite)
                </div>

                <div class="formula">
                    <strong>2NF:</strong> 1NF + No partial dependencies
                </div>

                <div class="formula">
                    <strong>3NF:</strong> 2NF + No transitive dependencies
                </div>

                <div class="formula">
                    <strong>BCNF:</strong> Every determinant is a superkey
                </div>

                <h3>Essential Formulas</h3>

                <div class="formula">
                    <strong>Cardinality:</strong> Number of tuples in a relation
                </div>

                <div class="formula">
                    <strong>Degree/Arity:</strong> Number of attributes in a relation
                </div>

                <div class="formula">
                    <strong>Cartesian Product:</strong> |R √ó S| = |R| √ó |S| tuples
                </div>

                <div class="formula">
                    <strong>Lossless Join Test:</strong><br>
                    (R1 ‚à© R2) ‚Üí (R1 - R2) OR (R1 ‚à© R2) ‚Üí (R2 - R1) must be in F+
                </div>
            </div>

            <!-- Final Reminders -->
            <div class="section">
                <h2><span class="icon">üéì</span> Final Exam Day Reminders</h2>

                <div class="memory-hack">
                    <strong>‚ú® Before You Start:</strong><br>
                    1. Read ALL questions first<br>
                    2. Do easy questions first (build confidence!)<br>
                    3. Budget time: divide total time by points<br>
                    4. Leave hard questions for last
                </div>

                <div class="memory-hack">
                    <strong>‚ú® During The Exam:</strong><br>
                    1. Draw diagrams for complex problems<br>
                    2. Show your work (partial credit!)<br>
                    3. Check for obvious mistakes (NULL in primary key?)<br>
                    4. Use examples to verify your answer<br>
                    5. If stuck, move on and come back
                </div>

                <div class="memory-hack">
                    <strong>‚ú® Common Errors to Check:</strong><br>
                    ‚úì Did you underline all keys?<br>
                    ‚úì Did you specify foreign key constraints?<br>
                    ‚úì Did you check ALL normal forms?<br>
                    ‚úì Did you use correct JOIN syntax?<br>
                    ‚úì Did you handle NULL values properly?<br>
                    ‚úì Did you use GROUP BY with aggregates?<br>
                    ‚úì Did you put foreign key on correct side?
                </div>

                <div class="tip-box">
                    <strong>üí™ You've Got This!</strong><br>
                    Remember: You've learned an entire semester of material. Trust your preparation, stay calm, and think through each problem logically. Database design is about understanding concepts and applying them systematically. You know this material!
                </div>
            </div>

            <!-- Footer -->
            <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 30px; text-align: center; margin-top: 40px;">
                <h2>Good Luck on Your Exam! üöÄ</h2>
                <p style="font-size: 1.2em; margin-top: 10px;">Study smart, stay confident, and show what you know!</p>
                <p style="margin-top: 20px; opacity: 0.9;">CS340 - Database Systems</p>
            </div>
        </div>
    </div>
</body>
</html>