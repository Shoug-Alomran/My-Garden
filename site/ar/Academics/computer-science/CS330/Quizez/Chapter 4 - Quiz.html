<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OS Chapter 4 - Comprehensive Exam</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        
        .header {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }
        
        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }
        
        .header p {
            font-size: 1.1em;
            opacity: 0.95;
        }
        
        .exam-info {
            background: #f8f9fa;
            padding: 20px 30px;
            border-bottom: 3px solid #f093fb;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }
        
        .info-item {
            display: flex;
            flex-direction: column;
        }
        
        .info-label {
            font-weight: bold;
            color: #f093fb;
            font-size: 0.9em;
            margin-bottom: 5px;
        }
        
        .info-value {
            font-size: 1.1em;
            color: #333;
        }
        
        .content {
            padding: 30px;
        }
        
        .section {
            margin-bottom: 40px;
        }
        
        .section-title {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 15px 20px;
            border-radius: 8px;
            font-size: 1.3em;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        .question {
            background: #f8f9fa;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 10px;
            border-left: 4px solid #f093fb;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        .question:hover {
            transform: translateX(5px);
            box-shadow: 0 4px 12px rgba(240, 147, 251, 0.3);
        }
        
        .question-number {
            display: inline-block;
            background: #f093fb;
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-weight: bold;
            margin-bottom: 10px;
            font-size: 0.9em;
        }
        
        .question-text {
            font-size: 1.05em;
            line-height: 1.6;
            color: #333;
            margin-bottom: 15px;
        }
        
        .question-marks {
            display: inline-block;
            background: #28a745;
            color: white;
            padding: 3px 10px;
            border-radius: 12px;
            font-size: 0.85em;
            margin-left: 10px;
        }
        
        .options {
            list-style: none;
            margin-top: 15px;
        }
        
        .options li {
            padding: 12px;
            margin: 8px 0;
            background: white;
            border-radius: 6px;
            border: 2px solid #e0e0e0;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .options li:hover {
            border-color: #f093fb;
            background: #fef5ff;
        }
        
        .options input[type="radio"] {
            margin-right: 10px;
        }
        
        .answer-textarea {
            width: 100%;
            min-height: 100px;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 6px;
            font-size: 1em;
            font-family: inherit;
            resize: vertical;
            transition: border-color 0.2s;
        }
        
        .answer-textarea:focus {
            outline: none;
            border-color: #f093fb;
        }
        
        .submit-container {
            text-align: center;
            margin: 30px 0;
        }
        
        .submit-btn {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 15px 40px;
            border: none;
            border-radius: 30px;
            font-size: 1.2em;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(240, 147, 251, 0.4);
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(240, 147, 251, 0.6);
        }
        
        .submit-btn:active {
            transform: translateY(0);
        }
        
        .results-container {
            display: none;
            background: #f8f9fa;
            padding: 30px;
            border-radius: 10px;
            margin: 20px 0;
        }
        
        .results-header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .score-display {
            font-size: 3em;
            font-weight: bold;
            color: #f093fb;
        }
        
        .feedback {
            margin-top: 15px;
            padding: 15px;
            border-radius: 8px;
            display: none;
        }
        
        .feedback.correct {
            background: #d4edda;
            border: 2px solid #28a745;
            color: #155724;
        }
        
        .feedback.incorrect {
            background: #f8d7da;
            border: 2px solid #dc3545;
            color: #721c24;
        }
        
        .feedback.partial {
            background: #fff3cd;
            border: 2px solid #ffc107;
            color: #856404;
        }
        
        .feedback-icon {
            font-size: 1.2em;
            margin-right: 10px;
        }
        
        .model-answer {
            background: #e7f3ff;
            padding: 15px;
            border-radius: 6px;
            margin-top: 10px;
            border-left: 4px solid #2196F3;
        }
        
        .model-answer-title {
            font-weight: bold;
            color: #1976D2;
            margin-bottom: 10px;
        }
        
        .explanation {
            background: #fff9e6;
            padding: 15px;
            border-radius: 6px;
            margin-top: 10px;
            border-left: 4px solid #ff9800;
        }
        
        .explanation-title {
            font-weight: bold;
            color: #f57c00;
            margin-bottom: 10px;
        }
        
        .question.graded.correct {
            border-left-color: #28a745;
        }
        
        .question.graded.incorrect {
            border-left-color: #dc3545;
        }
        
        .question.graded.partial {
            border-left-color: #ffc107;
        }
        
        .footer {
            background: #2d3748;
            color: white;
            text-align: center;
            padding: 20px;
            font-size: 0.95em;
        }
        
        .footer-name {
            font-size: 1.2em;
            font-weight: bold;
            color: #f093fb;
            margin-top: 5px;
        }
    </style>
  <script src="/javascripts/standalone-theme.js"></script>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ðŸ“š Operating Systems</h1>
            <p>Chapter 4: Threads & Concurrency</p>
            <p>Comprehensive Examination</p>
        </div>
        
        <div class="exam-info">
            <div class="info-item">
                <span class="info-label">Course Code</span>
                <span class="info-value">CS 330</span>
            </div>
            <div class="info-item">
                <span class="info-label">Duration</span>
                <span class="info-value">120 Minutes</span>
            </div>
            <div class="info-item">
                <span class="info-label">Total Marks</span>
                <span class="info-value">70 Marks</span>
            </div>
            <div class="info-item">
                <span class="info-label">Total Questions</span>
                <span class="info-value">50 Questions</span>
            </div>
        </div>
        
        <div class="content">
            <form id="examForm">
                <!-- Section 1: Overview & Motivation -->
                <div class="section">
                    <div class="section-title">Section 1: Thread Overview & Motivation (10 marks)</div>
                    
                    <div class="question" data-question="1" data-type="mcq" data-marks="1" data-answer="b">
                        <span class="question-number">Q1</span>
                        <span class="question-marks">[1 mark]</span>
                        <div class="question-text">
                            A thread is best described as:
                            <ul class="options">
                                <li><input type="radio" name="q1" value="a"> a) A process</li>
                                <li><input type="radio" name="q1" value="b"> b) A basic unit of CPU utilization</li>
                                <li><input type="radio" name="q1" value="c"> c) A memory segment</li>
                                <li><input type="radio" name="q1" value="d"> d) An I/O operation</li>
                            </ul>
                        </div>
                        <div class="feedback"></div>
                    </div>

                    <div class="question" data-question="2" data-type="mcq" data-marks="1" data-answer="c">
                        <span class="question-number">Q2</span>
                        <span class="question-marks">[1 mark]</span>
                        <div class="question-text">
                            Which of the following is NOT shared by threads? (From old exam)
                            <ul class="options">
                                <li><input type="radio" name="q2" value="a"> a) Program counter</li>
                                <li><input type="radio" name="q2" value="b"> b) Stack</li>
                                <li><input type="radio" name="q2" value="c"> c) Both (a) and (b)</li>
                                <li><input type="radio" name="q2" value="d"> d) None of the mentioned</li>
                            </ul>
                        </div>
                        <div class="feedback"></div>
                    </div>

                    <div class="question" data-question="3" data-type="essay" data-marks="3">
                        <span class="question-number">Q3</span>
                        <span class="question-marks">[3 marks]</span>
                        <div class="question-text">
                            What comprises a thread? What does it share with other threads in the same process?
                            <textarea class="answer-textarea" name="q3" placeholder="Write your answer here..."></textarea>
                        </div>
                        <div class="feedback"></div>
                    </div>

                    <div class="question" data-question="4" data-type="mcq" data-marks="1" data-answer="a">
                        <span class="question-number">Q4</span>
                        <span class="question-marks">[1 mark]</span>
                        <div class="question-text">
                            Most modern applications are:
                            <ul class="options">
                                <li><input type="radio" name="q4" value="a"> a) Multithreaded</li>
                                <li><input type="radio" name="q4" value="b"> b) Single-threaded</li>
                                <li><input type="radio" name="q4" value="c"> c) Non-threaded</li>
                                <li><input type="radio" name="q4" value="d"> d) Process-based only</li>
                            </ul>
                        </div>
                        <div class="feedback"></div>
                    </div>

                    <div class="question" data-question="5" data-type="essay" data-marks="4">
                        <span class="question-number">Q5</span>
                        <span class="question-marks">[4 marks]</span>
                        <div class="question-text">
                            List and explain the FOUR benefits of multithreaded programming.
                            <textarea class="answer-textarea" name="q5" placeholder="Write your answer here..."></textarea>
                        </div>
                        <div class="feedback"></div>
                    </div>
                </div>

                <!-- Section 2: Multicore Programming -->
                <div class="section">
                    <div class="section-title">Section 2: Multicore Programming (12 marks)</div>

                    <div class="question" data-question="6" data-type="essay" data-marks="3">
                        <span class="question-number">Q6</span>
                        <span class="question-marks">[3 marks]</span>
                        <div class="question-text">
                            Explain the difference between concurrency and parallelism. Give an example of each.
                            <textarea class="answer-textarea" name="q6" placeholder="Write your answer here..."></textarea>
                        </div>
                        <div class="feedback"></div>
                    </div>

                    <div class="question" data-question="7" data-type="mcq" data-marks="1" data-answer="a">
                        <span class="question-number">Q7</span>
                        <span class="question-marks">[1 mark]</span>
                        <div class="question-text">
                            On a single-core system with multithreading, execution is:
                            <ul class="options">
                                <li><input type="radio" name="q7" value="a"> a) Concurrent (interleaved)</li>
                                <li><input type="radio" name="q7" value="b"> b) Parallel (simultaneous)</li>
                                <li><input type="radio" name="q7" value="c"> c) Both concurrent and parallel</li>
                                <li><input type="radio" name="q7" value="d"> d) Neither concurrent nor parallel</li>
                            </ul>
                        </div>
                        <div class="feedback"></div>
                    </div>

                    <div class="question" data-question="8" data-type="essay" data-marks="2">
                        <span class="question-number">Q8</span>
                        <span class="question-marks">[2 marks]</span>
                        <div class="question-text">
                            What is data parallelism? Give an example.
                            <textarea class="answer-textarea" name="q8" placeholder="Write your answer here..."></textarea>
                        </div>
                        <div class="feedback"></div>
                    </div>

                    <div class="question" data-question="9" data-type="essay" data-marks="2">
                        <span class="question-number">Q9</span>
                        <span class="question-marks">[2 marks]</span>
                        <div class="question-text">
                            What is task parallelism? Give an example.
                            <textarea class="answer-textarea" name="q9" placeholder="Write your answer here..."></textarea>
                        </div>
                        <div class="feedback"></div>
                    </div>

                    <div class="question" data-question="10" data-type="essay" data-marks="4">
                        <span class="question-number">Q10</span>
                        <span class="question-marks">[4 marks]</span>
                        <div class="question-text">
                            List and briefly describe FOUR challenges in programming for multicore systems.
                            <textarea class="answer-textarea" name="q10" placeholder="Write your answer here..."></textarea>
                        </div>
                        <div class="feedback"></div>
                    </div>
                </div>

                <!-- Section 3: User and Kernel Threads -->
                <div class="section">
                    <div class="section-title">Section 3: User and Kernel Threads (10 marks)</div>

                    <div class="question" data-question="11" data-type="essay" data-marks="4">
                        <span class="question-number">Q11</span>
                        <span class="question-marks">[4 marks]</span>
                        <div class="question-text">
                            What is the difference between user threads and kernel threads? List advantages and disadvantages of each.
                            <textarea class="answer-textarea" name="q11" placeholder="Write your answer here..."></textarea>
                        </div>
                        <div class="feedback"></div>
                    </div>

                    <div class="question" data-question="12" data-type="mcq" data-marks="1" data-answer="b">
                        <span class="question-number">Q12</span>
                        <span class="question-marks">[1 mark]</span>
                        <div class="question-text">
                            User-level threads are managed by:
                            <ul class="options">
                                <li><input type="radio" name="q12" value="a"> a) The operating system kernel</li>
                                <li><input type="radio" name="q12" value="b"> b) A user-level threads library</li>
                                <li><input type="radio" name="q12" value="c"> c) The hardware</li>
                                <li><input type="radio" name="q12" value="d"> d) The file system</li>
                            </ul>
                        </div>
                        <div class="feedback"></div>
                    </div>

                    <div class="question" data-question="13" data-type="mcq" data-marks="1" data-answer="c">
                        <span class="question-number">Q13</span>
                        <span class="question-marks">[1 mark]</span>
                        <div class="question-text">
                            If the kernel is single threaded, then any user-level thread performing a blocking system call will: (From old exam)
                            <ul class="options">
                                <li><input type="radio" name="q13" value="a"> a) Cause the entire process to run along with the other threads</li>
                                <li><input type="radio" name="q13" value="b"> b) Cause the thread to block with the other threads running</li>
                                <li><input type="radio" name="q13" value="c"> c) Cause the entire process to block even if the other threads are available to run</li>
                                <li><input type="radio" name="q13" value="d"> d) None of these</li>
                            </ul>
                        </div>
                        <div class="feedback"></div>
                    </div>

                    <div class="question" data-question="14" data-type="mcq" data-marks="1" data-answer="a">
                        <span class="question-number">Q14</span>
                        <span class="question-marks">[1 mark]</span>
                        <div class="question-text">
                            (True/False - From old exam) In a multi-processor system kernel threads cannot execute concurrently.
                            <ul class="options">
                                <li><input type="radio" name="q14" value="a"> a) False</li>
                                <li><input type="radio" name="q14" value="b"> b) True</li>
                            </ul>
                        </div>
                        <div class="feedback"></div>
                    </div>

                    <div class="question" data-question="15" data-type="essay" data-marks="3">
                        <span class="question-number">Q15</span>
                        <span class="question-marks">[3 marks]</span>
                        <div class="question-text">
                            Name THREE examples of thread libraries mentioned in the textbook.
                            <textarea class="answer-textarea" name="q15" placeholder="Write your answer here..."></textarea>
                        </div>
                        <div class="feedback"></div>
                    </div>
                </div>

                <!-- Section 4: Multithreading Models -->
                <div class="section">
                    <div class="section-title">Section 4: Multithreading Models (18 marks)</div>

                    <div class="question" data-question="16" data-type="essay" data-marks="4">
                        <span class="question-number">Q16</span>
                        <span class="question-marks">[4 marks]</span>
                        <div class="question-text">
                            Describe the Many-to-One threading model. What are its advantages and disadvantages?
                            <textarea class="answer-textarea" name="q16" placeholder="Write your answer here..."></textarea>
                        </div>
                        <div class="feedback"></div>
                    </div>

                    <div class="question" data-question="17" data-type="mcq" data-marks="1" data-answer="c">
                        <span class="question-number">Q17</span>
                        <span class="question-marks">[1 mark]</span>
                        <div class="question-text">
                            In the many-to-one model, multiple threads cannot run in parallel on multiprocessors because:
                            <ul class="options">
                                <li><input type="radio" name="q17" value="a"> a) User threads are too slow</li>
                                <li><input type="radio" name="q17" value="b"> b) The OS prevents it</li>
                                <li><input type="radio" name="q17" value="c"> c) All user threads map to a single kernel thread</li>
                                <li><input type="radio" name="q17" value="d"> d) Hardware limitations</li>
                            </ul>
                        </div>
                        <div class="feedback"></div>
                    </div>

                    <div class="question" data-question="18" data-type="essay" data-marks="4">
                        <span class="question-number">Q18</span>
                        <span class="question-marks">[4 marks]</span>
                        <div class="question-text">
                            Describe the One-to-One threading model. What are its advantages and disadvantages?
                            <textarea class="answer-textarea" name="q18" placeholder="Write your answer here..."></textarea>
                        </div>
                        <div class="feedback"></div>
                    </div>

                    <div class="question" data-question="19" data-type="mcq" data-marks="1" data-answer="b">
                        <span class="question-number">Q19</span>
                        <span class="question-marks">[1 mark]</span>
                        <div class="question-text">
                            Which operating systems use the one-to-one model?
                            <ul class="options">
                                <li><input type="radio" name="q19" value="a"> a) Old UNIX systems</li>
                                <li><input type="radio" name="q19" value="b"> b) Windows and Linux</li>
                                <li><input type="radio" name="q19" value="c"> c) Solaris prior to version 9</li>
                                <li><input type="radio" name="q19" value="d"> d) No modern systems</li>
                            </ul>
                        </div>
                        <div class="feedback"></div>
                    </div>

                    <div class="question" data-question="20" data-type="essay" data-marks="4">
                        <span class="question-number">Q20</span>
                        <span class="question-marks">[4 marks]</span>
                        <div class="question-text">
                            Describe the Many-to-Many threading model. What are its advantages?
                            <textarea class="answer-textarea" name="q20" placeholder="Write your answer here..."></textarea>
                        </div>
                        <div class="feedback"></div>
                    </div>

                    <div class="question" data-question="21" data-type="mcq" data-marks="1" data-answer="a">
                        <span class="question-number">Q21</span>
                        <span class="question-marks">[1 mark]</span>
                        <div class="question-text">
                            Which system historically used the many-to-many model?
                            <ul class="options">
                                <li><input type="radio" name="q21" value="a"> a) Solaris prior to version 9</li>
                                <li><input type="radio" name="q21" value="b"> b) Windows 10</li>
                                <li><input type="radio" name="q21" value="c"> c) Modern Linux</li>
                                <li><input type="radio" name="q21" value="d"> d) Mac OS X</li>
                            </ul>
                        </div>
                        <div class="feedback"></div>
                    </div>

                    <div class="question" data-question="22" data-type="essay" data-marks="3">
                        <span class="question-number">Q22</span>
                        <span class="question-marks">[3 marks]</span>
                        <div class="question-text">
                            What is the Two-Level model? How does it differ from the many-to-many model?
                            <textarea class="answer-textarea" name="q22" placeholder="Write your answer here..."></textarea>
                        </div>
                        <div class="feedback"></div>
                    </div>
                </div>

                <!-- Section 5: Threading Issues -->
                <div class="section">
                    <div class="section-title">Section 5: Threading Issues (12 marks)</div>

                    <div class="question" data-question="23" data-type="essay" data-marks="2">
                        <span class="question-number">Q23</span>
                        <span class="question-marks">[2 marks]</span>
                        <div class="question-text">
                            What is the difference between asynchronous cancellation and deferred cancellation?
                            <textarea class="answer-textarea" name="q23" placeholder="Write your answer here..."></textarea>
                        </div>
                        <div class="feedback"></div>
                    </div>

                    <div class="question" data-question="24" data-type="mcq" data-marks="1" data-answer="b">
                        <span class="question-number">Q24</span>
                        <span class="question-marks">[1 mark]</span>
                        <div class="question-text">
                            Which cancellation method is safer?
                            <ul class="options">
                                <li><input type="radio" name="q24" value="a"> a) Asynchronous cancellation</li>
                                <li><input type="radio" name="q24" value="b"> b) Deferred cancellation</li>
                                <li><input type="radio" name="q24" value="c"> c) Both are equally safe</li>
                                <li><input type="radio" name="q24" value="d"> d) Neither is safe</li>
                            </ul>
                        </div>
                        <div class="feedback"></div>
                    </div>

                    <div class="question" data-question="25" data-type="essay" data-marks="3">
                        <span class="question-number">Q25</span>
                        <span class="question-marks">[3 marks]</span>
                        <div class="question-text">
                            Explain the difference between synchronous and asynchronous signals. Give an example of each.
                            <textarea class="answer-textarea" name="q25" placeholder="Write your answer here..."></textarea>
                        </div>
                        <div class="feedback"></div>
                    </div>

                    <div class="question" data-question="26" data-type="essay" data-marks="3">
                        <span class="question-number">Q26</span>
                        <span class="question-marks">[3 marks]</span>
                        <div class="question-text">
                            What are THREE options for delivering signals in a multithreaded program?
                            <textarea class="answer-textarea" name="q26" placeholder="Write your answer here..."></textarea>
                        </div>
                        <div class="feedback"></div>
                    </div>

                    <div class="question" data-question="27" data-type="mcq" data-marks="1" data-answer="b">
                        <span class="question-number">Q27</span>
                        <span class="question-marks">[1 mark]</span>
                        <div class="question-text">
                            Thread-local storage (TLS) is:
                            <ul class="options">
                                <li><input type="radio" name="q27" value="a"> a) Shared among all threads</li>
                                <li><input type="radio" name="q27" value="b"> b) Unique to each thread</li>
                                <li><input type="radio" name="q27" value="c"> c) Stored in the kernel</li>
                                <li><input type="radio" name="q27" value="d"> d) The same as global variables</li>
                            </ul>
                        </div>
                        <div class="feedback"></div>
                    </div>

                    <div class="question" data-question="28" data-type="mcq" data-marks="1" data-answer="c">
                        <span class="question-number">Q28</span>
                        <span class="question-marks">[1 mark]</span>
                        <div class="question-text">
                            Scheduler activations provide:
                            <ul class="options">
                                <li><input type="radio" name="q28" value="a"> a) Downcalls from thread library to kernel</li>
                                <li><input type="radio" name="q28" value="b"> b) Direct CPU scheduling</li>
                                <li><input type="radio" name="q28" value="c"> c) Upcalls from kernel to thread library</li>
                                <li><input type="radio" name="q28" value="d"> d) Automatic thread creation</li>
                            </ul>
                        </div>
                        <div class="feedback"></div>
                    </div>

                    <div class="question" data-question="29" data-type="mcq" data-marks="1" data-answer="c">
                        <span class="question-number">Q29</span>
                        <span class="question-marks">[1 mark]</span>
                        <div class="question-text">
                            LWP (Lightweight Process) is:
                            <ul class="options">
                                <li><input type="radio" name="q29" value="a"> a) Another name for a thread</li>
                                <li><input type="radio" name="q29" value="b"> b) A type of kernel</li>
                                <li><input type="radio" name="q29" value="c"> c) An intermediate data structure between user and kernel threads</li>
                                <li><input type="radio" name="q29" value="d"> d) A scheduling algorithm</li>
                            </ul>
                        </div>
                        <div class="feedback"></div>
                    </div>
                </div>

                <!-- Section 6: Thread Scheduling -->
                <div class="section">
                    <div class="section-title">Section 6: Thread Scheduling (8 marks)</div>

                    <div class="question" data-question="30" data-type="essay" data-marks="4">
                        <span class="question-number">Q30</span>
                        <span class="question-marks">[4 marks]</span>
                        <div class="question-text">
                            Explain the difference between Process-Contention Scope (PCS) and System-Contention Scope (SCS).
                            <textarea class="answer-textarea" name="q30" placeholder="Write your answer here..."></textarea>
                        </div>
                        <div class="feedback"></div>
                    </div>

                    <div class="question" data-question="31" data-type="mcq" data-marks="1" data-answer="a">
                        <span class="question-number">Q31</span>
                        <span class="question-marks">[1 mark]</span>
                        <div class="question-text">
                            PCS (Process-Contention Scope) involves competition:
                            <ul class="options">
                                <li><input type="radio" name="q31" value="a"> a) Among threads within the same process</li>
                                <li><input type="radio" name="q31" value="b"> b) Among all threads in the system</li>
                                <li><input type="radio" name="q31" value="c"> c) Among all processes</li>
                                <li><input type="radio" name="q31" value="d"> d) Between different CPUs</li>
                            </ul>
                        </div>
                        <div class="feedback"></div>
                    </div>

                    <div class="question" data-question="32" data-type="mcq" data-marks="1" data-answer="b">
                        <span class="question-number">Q32</span>
                        <span class="question-marks">[1 mark]</span>
                        <div class="question-text">
                            SCS (System-Contention Scope) involves competition:
                            <ul class="options">
                                <li><input type="radio" name="q32" value="a"> a) Among threads within the same process</li>
                                <li><input type="radio" name="q32" value="b"> b) Among all threads in the system</li>
                                <li><input type="radio" name="q32" value="c"> c) Only among kernel threads</li>
                                <li><input type="radio" name="q32" value="d"> d) Only among user threads</li>
                            </ul>
                        </div>
                        <div class="feedback"></div>
                    </div>

                    <div class="question" data-question="33" data-type="mcq" data-marks="1" data-answer="b">
                        <span class="question-number">Q33</span>
                        <span class="question-marks">[1 mark]</span>
                        <div class="question-text">
                            Systems with many-to-many model use:
                            <ul class="options">
                                <li><input type="radio" name="q33" value="a"> a) Only SCS</li>
                                <li><input type="radio" name="q33" value="b"> b) PCS for user threads to LWPs</li>
                                <li><input type="radio" name="q33" value="c"> c) No scheduling</li>
                                <li><input type="radio" name="q33" value="d"> d) Round-robin only</li>
                            </ul>
                        </div>
                        <div class="feedback"></div>
                    </div>

                    <div class="question" data-question="34" data-type="mcq" data-marks="1" data-answer="b">
                        <span class="question-number">Q34</span>
                        <span class="question-marks">[1 mark]</span>
                        <div class="question-text">
                            Systems with one-to-one model use:
                            <ul class="options">
                                <li><input type="radio" name="q34" value="a"> a) Only PCS</li>
                                <li><input type="radio" name="q34" value="b"> b) SCS (kernel schedules threads onto CPUs)</li>
                                <li><input type="radio" name="q34" value="c"> c> Both PCS and SCS</li>
                                <li><input type="radio" name="q34" value="d"> d) Neither PCS nor SCS</li>
                            </ul>
                        </div>
                        <div class="feedback"></div>
                    </div>
                </div>

                <!-- Section 7: Implicit Threading & Applications -->
                <div class="section">
                    <div class="section-title">Section 7: Implicit Threading & Applications (Bonus: 10 marks)</div>

                    <div class="question" data-question="35" data-type="essay" data-marks="3">
                        <span class="question-number">Q35</span>
                        <span class="question-marks">[3 marks]</span>
                        <div class="question-text">
                            Describe how a multithreaded web server works. Why is multithreading beneficial for web servers?
                            <textarea class="answer-textarea" name="q35" placeholder="Write your answer here..."></textarea>
                        </div>
                        <div class="feedback"></div>
                    </div>

                    <div class="question" data-question="36" data-type="essay" data-marks="3">
                        <span class="question-number">Q36</span>
                        <span class="question-marks">[3 marks]</span>
                        <div class="question-text">
                            Describe three separate threads that might be used in a word processor application.
                            <textarea class="answer-textarea" name="q36" placeholder="Write your answer here..."></textarea>
                        </div>
                        <div class="feedback"></div>
                    </div>

                    <div class="question" data-question="37" data-type="essay" data-marks="3">
                        <span class="question-number">Q37</span>
                        <span class="question-marks">[3 marks]</span>
                        <div class="question-text">
                            What is a thread pool? What are THREE benefits of using thread pools?
                            <textarea class="answer-textarea" name="q37" placeholder="Write your answer here..."></textarea>
                        </div>
                        <div class="feedback"></div>
                    </div>

                    <div class="question" data-question="38" data-type="mcq" data-marks="1" data-answer="a">
                        <span class="question-number">Q38</span>
                        <span class="question-marks">[1 mark]</span>
                        <div class="question-text">
                            Implicit threading means:
                            <ul class="options">
                                <li><input type="radio" name="q38" value="a"> a) Threading is handled by compilers and libraries, not the programmer</li>
                                <li><input type="radio" name="q38" value="b"> b) Threads are created automatically by the OS</li>
                                <li><input type="radio" name="q38" value="c"> c) No threading is used</li>
                                <li><input type="radio" name="q38" value="d"> d) All threads are hidden from the user</li>
                            </ul>
                        </div>
                        <div class="feedback"></div>
                    </div>

                    <div class="question" data-question="39" data-type="essay" data-marks="3">
                        <span class="question-number">Q39</span>
                        <span class="question-marks">[Bonus 3 marks]</span>
                        <div class="question-text">
                            What is OpenMP? How does it simplify parallel programming?
                            <textarea class="answer-textarea" name="q39" placeholder="Write your answer here..."></textarea>
                        </div>
                        <div class="feedback"></div>
                    </div>

                    <div class="question" data-question="40" data-type="essay" data-marks="3">
                        <span class="question-number">Q40</span>
                        <span class="question-marks">[Bonus 3 marks]</span>
                        <div class="question-text">
                            Compare how Windows and Linux represent threads. What data structures are used?
                            <textarea class="answer-textarea" name="q40" placeholder="Write your answer here..."></textarea>
                        </div>
                        <div class="feedback"></div>
                    </div>

                    <div class="question" data-question="41" data-type="essay" data-marks="4">
                        <span class="question-number">Q41</span>
                        <span class="question-marks">[Bonus 4 marks]</span>
                        <div class="question-text">
                            A programming task can be divided into four subtasks: A, B, C and D. (From old exam)<br>
                            (i) How many threads should you create in your program for maximum gains on a four-processor CPU if the subtasks are independent of each other?<br>
                            (ii) How many if C is dependent on B and D is dependent on A?
                            <textarea class="answer-textarea" name="q41" placeholder="Write your answer here..."></textarea>
                        </div>
                        <div class="feedback"></div>
                    </div>

                    <div class="question" data-question="42" data-type="essay" data-marks="3">
                        <span class="question-number">Q42</span>
                        <span class="question-marks">[Bonus 3 marks]</span>
                        <div class="question-text">
                            Why should we have multiple threads? Why not multiple processes? Give at least TWO reasons. (From old exam)
                            <textarea class="answer-textarea" name="q42" placeholder="Write your answer here..."></textarea>
                        </div>
                        <div class="feedback"></div>
                    </div>

                    <div class="question" data-question="43" data-type="mcq" data-marks="1" data-answer="c">
                        <span class="question-number">Q43</span>
                        <span class="question-marks">[1 mark]</span>
                        <div class="question-text">
                            Which of the following statements are true for threads? (From old exam)
                            <ul class="options">
                                <li><input type="radio" name="q43" value="a"> a) Require less time to create</li>
                                <li><input type="radio" name="q43" value="b"> b) Defines a single sequential execution stream</li>
                                <li><input type="radio" name="q43" value="c"> c) Both (a) and (b)</li>
                                <li><input type="radio" name="q43" value="d"> d) It takes longer to context-switch between them</li>
                            </ul>
                        </div>
                        <div class="feedback"></div>
                    </div>

                    <div class="question" data-question="44" data-type="mcq" data-marks="1" data-answer="b">
                        <span class="question-number">Q44</span>
                        <span class="question-marks">[1 mark]</span>
                        <div class="question-text">
                            One of the disadvantages of User-Level Threads (ULTs) compared to Kernel-Level Threads (KLTs) is: (From old exam)
                            <ul class="options">
                                <li><input type="radio" name="q44" value="a"> a) Scheduling is application specific</li>
                                <li><input type="radio" name="q44" value="b"> b) When a ULT executes a system call, all threads in the process are blocked</li>
                                <li><input type="radio" name="q44" value="c"> c) Thread switching does not require kernel mode privileges</li>
                                <li><input type="radio" name="q44" value="d"> d) None of the above</li>
                            </ul>
                        </div>
                        <div class="feedback"></div>
                    </div>

                    <div class="question" data-question="45" data-type="essay" data-marks="3">
                        <span class="question-number">Q45</span>
                        <span class="question-marks">[Bonus 3 marks]</span>
                        <div class="question-text">
                            Explain Grand Central Dispatch (GCD) used in Apple's macOS and iOS systems.
                            <textarea class="answer-textarea" name="q45" placeholder="Write your answer here..."></textarea>
                        </div>
                        <div class="feedback"></div>
                    </div>

                    <div class="question" data-question="46" data-type="essay" data-marks="3">
                        <span class="question-number">Q46</span>
                        <span class="question-marks">[Bonus 3 marks]</span>
                        <div class="question-text">
                            What are fork() and exec() semantics in a multithreaded program? Does fork() duplicate all threads?
                            <textarea class="answer-textarea" name="q46" placeholder="Write your answer here..."></textarea>
                        </div>
                        <div class="feedback"></div>
                    </div>

                    <div class="question" data-question="47" data-type="essay" data-marks="4">
                        <span class="question-number">Q47</span>
                        <span class="question-marks">[Bonus 4 marks]</span>
                        <div class="question-text">
                            Discuss the benefits and challenges of designing multithreaded applications for modern multicore systems.
                            <textarea class="answer-textarea" name="q47" placeholder="Write your answer here..."></textarea>
                        </div>
                        <div class="feedback"></div>
                    </div>

                    <div class="question" data-question="48" data-type="mcq" data-marks="1" data-answer="a">
                        <span class="question-number">Q48</span>
                        <span class="question-marks">[1 mark]</span>
                        <div class="question-text">
                            Creating a thread in Solaris is approximately how much faster than creating a process?
                            <ul class="options">
                                <li><input type="radio" name="q48" value="a"> a) 30 times faster</li>
                                <li><input type="radio" name="q48" value="b"> b) 5 times faster</li>
                                <li><input type="radio" name="q48" value="c"> c) Same speed</li>
                                <li><input type="radio" name="q48" value="d"> d) Slower</li>
                            </ul>
                        </div>
                        <div class="feedback"></div>
                    </div>

                    <div class="question" data-question="49" data-type="essay" data-marks="3">
                        <span class="question-number">Q49</span>
                        <span class="question-marks">[Bonus 3 marks]</span>
                        <div class="question-text">
                            Explain what Java threads are and how they are implemented across different platforms.
                            <textarea class="answer-textarea" name="q49" placeholder="Write your answer here..."></textarea>
                        </div>
                        <div class="feedback"></div>
                    </div>

                    <div class="question" data-question="50" data-type="essay" data-marks="4">
                        <span class="question-number">Q50</span>
                        <span class="question-marks">[Bonus 4 marks]</span>
                        <div class="question-text">
                            Compare and contrast processes and threads. When would you use one versus the other?
                            <textarea class="answer-textarea" name="q50" placeholder="Write your answer here..."></textarea>
                        </div>
                        <div class="feedback"></div>
                    </div>
                </div>

                <div class="submit-container">
                    <button type="submit" class="submit-btn">ðŸ“ Submit Exam</button>
                </div>

                <div class="results-container" id="results">
                    <div class="results-header">
                        <h2>Exam Results</h2>
                        <div class="score-display" id="scoreDisplay"></div>
                        <p id="scoreText"></p>
                    </div>
                </div>
            </form>
        </div>
        
        <div class="footer">
            <p>Operating Systems (CS 330) - Chapter 4 Examination</p>
            <p class="footer-name">Prepared by: Shoug Alomran</p>
        </div>
    </div>

    <script>
        const modelAnswers = {
            q3: {
                keywords: ['thread id', 'program counter', 'register set', 'stack', 'shares', 'code section', 'data section', 'resources', 'files', 'heap'],
                model: "A thread consists of: 1) Thread ID, 2) Program counter (PC), 3) Register set, 4) Stack space. A thread shares with other threads in the same process: 1) Code section (program instructions), 2) Data section (global variables), 3) OS resources (open files, signals), 4) Heap (dynamically allocated memory).",
                explanation: "Each thread has its own execution context (PC, registers, stack) for independent execution, but shares the process's code, data, and resources for efficiency."
            },
            q5: {
                keywords: ['responsiveness', 'continue running', 'blocked', 'resource sharing', 'share memory', 'economy', 'cheaper', 'faster', 'scalability', 'multiprocessor', 'parallel'],
                model: "Four benefits of multithreaded programming: 1) Responsiveness - allows a program to continue running even if part of it is blocked (e.g., UI remains responsive while loading data). 2) Resource Sharing - threads share memory and resources of their process automatically, easier than IPC. 3) Economy - threads are cheaper to create and context-switch than processes (30x faster in Solaris). 4) Scalability - threads can run in parallel on different CPUs in multiprocessor systems, improving performance.",
                explanation: "These benefits make threads essential for modern responsive applications, especially on multicore systems."
            },
            q6: {
                keywords: ['concurrency', 'make progress', 'interleaved', 'single core', 'parallelism', 'simultaneously', 'multiple cores', 'same instant'],
                model: "Concurrency: Multiple tasks make progress by having their execution interleaved over time through rapid context switching. Can occur on a single-core system. Example: Operating system switching between multiple processes on one CPU. Parallelism: Multiple tasks execute simultaneously at the exact same instant. Requires multiple cores/processors. Example: Two threads running truly simultaneously on two different cores, each processing different data.",
                explanation: "Concurrency = illusion of simultaneity (time-sharing). Parallelism = true simultaneity (requires multiple cores)."
            },
            q8: {
                keywords: ['data parallelism', 'subsets', 'same data', 'multiple cores', 'same operation', 'distribute'],
                model: "Data parallelism distributes subsets of the same data across multiple cores, with each core performing the same operation on its subset. Example: Adding two arrays - split arrays into chunks, each core adds its chunk: Core 1 adds A[0-99]+B[0-99], Core 2 adds A[100-199]+B[100-199], etc. All cores perform the same 'add' operation on different data.",
                explanation: "Data parallelism = divide the DATA, everyone does the SAME work on their piece."
            },
            q9: {
                keywords: ['task parallelism', 'distributing threads', 'different', 'unique operation', 'tasks'],
                model: "Task parallelism distributes different threads (tasks) across multiple cores, with each thread performing a unique operation. Example: Web server - Thread 1 handles network I/O, Thread 2 processes HTTP requests, Thread 3 queries database, Thread 4 generates HTML. Each thread performs a DIFFERENT task.",
                explanation: "Task parallelism = divide the WORK, everyone does DIFFERENT tasks."
            },
            q10: {
                keywords: ['dividing activities', 'identify', 'balance', 'equal work', 'data splitting', 'divide data', 'data dependency', 'synchronization', 'testing', 'debugging', 'difficult'],
                model: "Four challenges: 1) Dividing activities - identifying which parts of the application can be divided into separate, concurrent tasks. 2) Balance - ensuring tasks perform equal work of equal value so all cores are utilized efficiently. 3) Data splitting - data accessed by tasks must be divided to run on separate cores. 4) Data dependency - when one task depends on data from another, execution must be synchronized. Additional: Testing and debugging - many execution paths make bugs hard to reproduce.",
                explanation: "Multicore programming requires careful analysis of the problem to achieve good parallel speedup."
            },
            q11: {
                keywords: ['user threads', 'managed', 'thread library', 'user space', 'fast', 'create', 'kernel threads', 'operating system', 'kernel', 'slower', 'blocking', 'parallel', 'multiprocessors'],
                model: "User threads: Managed by user-level thread library, supported above the kernel. Advantages: Fast to create and manage (no kernel involvement), flexible scheduling. Disadvantages: If one thread blocks on system call, entire process blocks; cannot run truly in parallel on multiprocessors. Kernel threads: Managed by operating system kernel. Advantages: If one thread blocks, others can still run; can run in parallel on multiple processors. Disadvantages: Slower to create and manage (requires kernel mode transitions).",
                explanation: "User threads = fast but limited. Kernel threads = slower but more powerful with true parallelism."
            },
            q15: {
                keywords: ['pthreads', 'posix', 'java', 'win32', 'windows'],
                model: "Three primary thread libraries: 1) POSIX Pthreads - specification for thread behavior on POSIX-compliant systems (UNIX, Linux, Mac OS X). 2) Java threads - part of the Java API, implemented using threads model of the host OS. 3) Win32 threads - kernel-level thread library for Windows systems.",
                explanation: "These are thread APIs/specifications - the actual implementation depends on the operating system."
            },
            q16: {
                keywords: ['many-to-one', 'many user threads', 'single kernel thread', 'efficient', 'user space', 'entire process blocks', 'blocking system call', 'cannot', 'parallel', 'multiprocessors'],
                model: "Many-to-One model: Many user-level threads are mapped to a single kernel thread. Advantages: Efficient thread management in user space, fast thread operations, developer can create as many user threads as needed. Disadvantages: 1) Entire process blocks if any thread makes a blocking system call (kernel sees only one thread). 2) Multiple threads cannot run in parallel on multiprocessors. 3) Rarely used in modern systems. Examples: Solaris Green Threads, GNU Portable Threads.",
                explanation: "This model provides efficient thread management but sacrifices parallelism and has blocking problems."
            },
            q18: {
                keywords: ['one-to-one', 'each user thread', 'kernel thread', 'more concurrency', 'parallel', 'multiprocessors', 'blocking', 'overhead', 'creating', 'limit'],
                model: "One-to-One model: Each user thread maps to its own kernel thread. Advantages: 1) More concurrency - if one thread blocks, others can still run. 2) Multiple threads can run truly in parallel on multiprocessors. 3) Better system resource utilization. Disadvantages: Creating a user thread requires creating a kernel thread (overhead), may limit the number of threads per process. Used by: Windows, Linux, and most modern operating systems.",
                explanation: "This is the most common model today - provides true parallelism but with kernel overhead."
            },
            q20: {
                keywords: ['many-to-many', 'many user threads', 'multiplexed', 'smaller', 'equal number', 'kernel threads', 'flexible', 'developer', 'parallel', 'blocking'],
                model: "Many-to-Many model: Many user threads are multiplexed onto a smaller or equal number of kernel threads. Advantages: 1) Developer can create as many user threads as needed. 2) Kernel threads can run in parallel on multiprocessors. 3) When a thread blocks, the kernel can schedule another thread for execution. 4) Most flexible model - combines benefits of both previous models. Examples: Solaris prior to version 9, some UNIX implementations.",
                explanation: "This model provides both flexibility and efficiency but is complex to implement."
            },
            q22: {
                keywords: ['two-level', 'similar', 'many-to-many', 'allows', 'bound', 'user thread', 'specific', 'kernel thread'],
                model: "Two-Level model: Similar to many-to-many but also allows a user thread to be bound to a specific kernel thread. This provides flexibility - most threads use the many-to-many multiplexing for efficiency, but critical threads can be bound (pinned) to dedicated kernel threads for guaranteed performance and scheduling. Examples: IRIX, HP-UX, Tru64 UNIX, Solaris 8 and earlier.",
                explanation: "Adds the ability to 'pin' important threads for predictable, guaranteed performance when needed."
            },
            q23: {
                keywords: ['asynchronous', 'immediately', 'terminates', 'target thread', 'deferred', 'periodically checks', 'cancellation points', 'safe', 'orderly'],
                model: "Asynchronous cancellation: One thread immediately terminates the target thread. Risky because the target thread might be in the middle of updating shared data or holding resources. Deferred cancellation: Target thread periodically checks if it should be cancelled (at cancellation points). Allows the thread to terminate itself in an orderly fashion at safe points. Deferred is safer and more commonly used.",
                explanation: "Asynchronous = forced termination (dangerous). Deferred = cooperative, controlled termination at safe points (preferred)."
            },
            q25: {
                keywords: ['synchronous', 'delivered', 'same thread', 'generated', 'illegal memory', 'divide by zero', 'asynchronous', 'external', 'ctrl-c', 'timer', 'another process'],
                model: "Synchronous signals: Generated by and delivered to the same thread that performed the operation causing the signal. Examples: illegal memory access, divide by zero, illegal instruction - caused by the thread's own actions. Asynchronous signals: Generated by events external to the running thread. Examples: Ctrl-C from keyboard, timer expiration, kill signal from another process.",
                explanation: "Synchronous = self-generated errors/events. Asynchronous = external interrupts/signals."
            },
            q26: {
                keywords: ['deliver', 'thread', 'applies', 'every thread', 'process', 'certain threads', 'specific thread', 'assign', 'dedicated'],
                model: "Three options for signal delivery: 1) Deliver the signal to the thread to which the signal applies (best for synchronous signals). 2) Deliver the signal to every thread in the process. 3) Deliver the signal to certain threads in the process (using signal masks). 4) Assign a specific thread to receive all signals for the process (dedicated signal-handling thread).",
                explanation: "Choice depends on signal type - synchronous signals go to the causing thread, asynchronous can use various strategies."
            },
            q30: {
                keywords: ['pcs', 'process-contention scope', 'competition', 'within', 'same process', 'thread library', 'user threads', 'lwp', 'scs', 'system-contention scope', 'all threads', 'system', 'kernel', 'cpu'],
                model: "PCS (Process-Contention Scope): Competition for CPU resources occurs among threads within the same process. Used in many-to-one and many-to-many models. Thread library schedules user threads onto available LWPs. Scheduling decisions made by the thread library. SCS (System-Contention Scope): Competition occurs among all threads in the entire system. Used in one-to-one model. Kernel schedules kernel threads directly onto physical CPUs. Scheduling decisions made by the OS kernel.",
                explanation: "PCS = local/internal competition (within process). SCS = global/system-wide competition (among all threads)."
            },
            q35: {
                keywords: ['web server', 'listening thread', 'client request', 'creates new thread', 'service', 'concurrent', 'multiple clients', 'responsive'],
                model: "Multithreaded web server: 1) Server creates a listening thread that waits for client requests. 2) When a request arrives, the server creates a new thread to service that specific request. 3) The listening thread immediately resumes listening for more requests. 4) Multiple client requests are handled concurrently by different threads. Benefits: Server can handle multiple clients simultaneously, better responsiveness, efficient use of server resources, no client needs to wait for others to complete.",
                explanation: "Multithreading allows web servers to handle many clients concurrently without blocking."
            },
            q36: {
                keywords: ['display', 'graphics', 'keyboard', 'user input', 'spell check', 'grammar', 'save', 'disk', 'separate threads'],
                model: "Three threads in a word processor: 1) Display thread - handles rendering graphics and updating the screen/UI. 2) Keyboard/input thread - reads and processes user input from keyboard and mouse. 3) Spell/grammar checking thread - performs background spell and grammar checking while user types. Additional: Background save thread - periodically saves document to disk. Each thread runs independently, providing a responsive user experience.",
                explanation: "Multiple threads allow the word processor to remain responsive while performing background tasks."
            },
            q37: {
                keywords: ['thread pool', 'number of threads', 'startup', 'pool', 'wait', 'service', 'reuse', 'faster', 'limit', 'threads exist'],
                model: "Thread pool: A set of threads created at process startup and placed into a pool where they wait for work. When a request arrives, a thread from the pool is awakened to service it; when finished, the thread returns to the pool. Three benefits: 1) Faster service - servicing request with existing thread is faster than creating new thread. 2) Limits number of threads - prevents resource exhaustion by limiting concurrent threads. 3) Separates task creation from task execution - allows different strategies for running tasks.",
                explanation: "Thread pools are efficient and widely used in servers, databases, and web applications."
            },
            q39: {
                keywords: ['openmp', 'compiler directives', 'pragmas', 'parallel regions', 'shared memory', 'automatic', 'api'],
                model: "OpenMP: A set of compiler directives and API for parallel programming in C, C++, and Fortran for shared-memory systems. Uses pragma directives (e.g., #pragma omp parallel) to identify parallel regions. Simplification: 1) Compiler automatically creates and manages threads. 2) Programmer just adds simple directives to sequential code. 3) Portable across different platforms and compilers. 4) Scalable - automatically uses available processors. No explicit thread creation or management needed.",
                explanation: "OpenMP makes parallel programming much easier - just add annotations to existing code for parallelization."
            },
            q40: {
                keywords: ['windows', 'ethread', 'kthread', 'one-to-one', 'linux', 'task_struct', 'clone', 'same structure'],
                model: "Windows: Uses one-to-one model. Threads represented by ETHREAD (executive thread block) containing thread-specific info and KTHREAD (kernel thread block) for scheduling. Each thread has separate structures from process. Linux: Uses clone() system call to create threads. Both threads and processes represented by task_struct. Linux doesn't strongly distinguish threads from processes - both are 'tasks'. Threads are processes that share address space, file descriptors, and signal handlers.",
                explanation: "Windows has distinct thread structures. Linux treats threads as lightweight processes (tasks) that share resources."
            },
            q41: {
                keywords: ['independent', 'four', '4', 'threads', 'maximum', 'dependent', 'two', '2', 'sequential', 'parallel'],
                model: "(i) If subtasks are independent: Create 4 threads, one for each subtask (A, B, C, D). All can run in parallel on 4 processors for maximum speedup of 4x. (ii) If C depends on B and D depends on A: Create 2 threads. Thread 1 executes A then D sequentially. Thread 2 executes B then C sequentially. The two threads can run in parallel, achieving speedup of 2x. Dependencies force sequential execution within threads but threads can still run in parallel.",
                explanation: "Dependencies limit parallelism. Independent = maximum parallelism. Dependencies = constrained parallelism within dependency chains."
            },
            q42: {
                keywords: ['faster', 'create', 'threads', 'processes', 'less time', 'terminate', 'switch', 'context', 'share', 'memory', 'resources', 'communication', 'overhead'],
                model: "Reasons for threads over processes: 1) Much faster creation and termination - creating a thread is approximately 30 times faster than creating a process (in Solaris). 2) Faster context switching - switching between threads is faster than between processes (less state to save/restore). 3) Easier communication - threads share memory naturally, while processes need IPC mechanisms (pipes, message queues, shared memory setup). 4) Less memory overhead - threads share address space, processes need separate memory spaces.",
                explanation: "Threads provide parallelism benefits with significantly less overhead than processes."
            },
            q45: {
                keywords: ['grand central dispatch', 'gcd', 'apple', 'dispatch queue', 'serial', 'concurrent', 'blocks', 'macos', 'ios'],
                model: "Grand Central Dispatch (GCD): Apple's technology for application developers to use multicore processors on macOS and iOS. Uses dispatch queues to manage threads. Programmer defines tasks as blocks and submits them to dispatch queues (serial or concurrent). GCD manages thread pool and schedules blocks. Serial queues execute blocks one at a time in FIFO order. Concurrent queues execute multiple blocks simultaneously. System handles all thread management automatically.",
                explanation: "GCD simplifies parallel programming on Apple platforms - developer focuses on tasks, system manages threads."
            },
            q46: {
                keywords: ['fork', 'duplicate', 'all threads', 'only calling thread', 'exec', 'replace', 'entire process', 'semantics'],
                model: "Fork semantics in multithreaded programs: Two versions exist. 1) fork() duplicates only the calling thread (most common) - new process has only one thread. 2) fork() duplicates all threads (less common). Most systems use option 1. Exec semantics: exec() replaces the entire process including all threads with the new program. Typical pattern: fork() to create child (single thread), then exec() to load new program. If not calling exec(), need version that duplicates all threads.",
                explanation: "Most systems duplicate only the calling thread to avoid complexity, since exec() typically follows fork()."
            },
            q47: {
                keywords: ['benefits', 'performance', 'utilize', 'cores', 'responsiveness', 'challenges', 'dividing', 'balance', 'synchronization', 'testing', 'debugging', 'race conditions'],
                model: "Benefits: 1) Better performance - utilize all available CPU cores for faster execution. 2) Improved responsiveness - UI remains responsive during computation. 3) Better resource utilization - keep all cores busy. 4) Scalability - performance improves with more cores. Challenges: 1) Identifying parallelizable parts. 2) Load balancing - ensuring equal work distribution. 3) Data synchronization and race conditions. 4) Data dependency management. 5) Testing and debugging - multiple execution paths, hard to reproduce bugs, race conditions. 6) Overhead of thread creation and synchronization can reduce gains.",
                explanation: "Multicore programming is powerful but challenging - requires careful design to achieve good speedup while avoiding concurrency bugs."
            },
            q49: {
                keywords: ['java threads', 'java api', 'platform', 'jvm', 'implementation', 'host operating system', 'depends'],
                model: "Java threads: Threads are part of the Java language and API, supported by the Java Virtual Machine (JVM). Implementation depends on the host operating system: On Windows, Java threads are typically mapped to Windows threads (one-to-one). On Linux/UNIX, mapped to Pthreads. The JVM handles the mapping. Java provides a consistent threading API regardless of platform, making threaded Java programs portable. Java threads can be created by extending Thread class or implementing Runnable interface.",
                explanation: "Java provides platform-independent threading API - JVM maps to underlying OS threads for portability."
            },
            q50: {
                keywords: ['processes', 'separate', 'address space', 'resources', 'heavyweight', 'threads', 'share', 'lightweight', 'isolation', 'communication', 'fault tolerance'],
                model: "Processes: Separate address spaces, separate resources, heavyweight, expensive to create/switch, strong isolation. Use when: need isolation (security/stability), fault tolerance (one failure doesn't affect others), distributed systems, unrelated tasks. Threads: Share address space and resources, lightweight, cheap to create/switch, weak isolation. Use when: need sharing, performance critical, tasks cooperate closely, within same application, multicore parallelism. Threads are faster but processes provide better isolation. Choice depends on requirements for isolation vs. performance.",
                explanation: "Processes = isolation and safety. Threads = speed and sharing. Choose based on whether isolation or performance is more important."
            }
        };

        const explanations = {
            q1: "A thread is the basic unit of CPU utilization - it represents a single sequential execution stream within a process.",
            q2: "Both program counter (PC) and stack are NOT shared - each thread needs its own to maintain independent execution context.",
            q4: "Most modern applications use multiple threads for better performance, responsiveness, and resource utilization.",
            q7: "On a single core, threads execute concurrently through rapid time-slicing (interleaved), not truly in parallel.",
            q12: "User-level threads are managed by a thread library in user space, not by the kernel.",
            q13: "If kernel is single-threaded and a user thread blocks, the kernel blocks the entire process (can't see individual user threads).",
            q14: "False! Kernel threads CAN execute concurrently on multiple processors - that's one of their main advantages.",
            q17: "In many-to-one, all user threads map to ONE kernel thread, so only one can execute at a time - no true parallelism possible.",
            q19: "Windows and Linux both use one-to-one model (each user thread gets its own kernel thread) for maximum concurrency.",
            q21: "Solaris prior to version 9 used many-to-many. Modern Solaris (9+) switched to one-to-one like other modern OSes.",
            q24: "Deferred cancellation is safer - allows threads to check and terminate at safe points rather than being killed immediately.",
            q27: "Thread-Local Storage (TLS) is unique to each thread - not shared. Each thread gets its own copy.",
            q28: "Scheduler activations use 'upcalls' - kernel notifies thread library about events (communication from kernel up to library).",
            q29: "LWP is an intermediate virtual processor between user and kernel threads in many-to-many systems.",
            q31: "PCS = Process-Contention Scope = competition WITHIN the same process for resources.",
            q32: "SCS = System-Contention Scope = competition system-wide among ALL threads for CPU.",
            q33: "Many-to-many uses PCS to schedule user threads onto LWPs, then kernel schedules LWPs.",
            q34: "One-to-one uses SCS - kernel schedules all kernel threads (which are mapped one-to-one from user threads) directly.",
            q38: "Implicit threading means the compiler/runtime handles threading details - programmer doesn't explicitly create/manage threads.",
            q43: "Both statements are true - threads require less time to create AND define a single sequential execution stream.",
            q44: "The disadvantage is that when a ULT blocks on system call, ALL threads block (kernel sees only one kernel thread).",
            q48: "Creating a thread in Solaris is approximately 30 times faster than creating a process."
        };

        document.getElementById('examForm').addEventListener('submit', function(e) {
            e.preventDefault();
            gradeExam();
        });

        function gradeExam() {
            let totalScore = 0;
            let maxScore = 0;

            const questions = document.querySelectorAll('.question');
            
            questions.forEach(question => {
                const qNum = question.dataset.question;
                const qType = question.dataset.type;
                const marks = parseInt(question.dataset.marks);
                maxScore += marks;

                if (qType === 'mcq') {
                    const selected = document.querySelector(`input[name="q${qNum}"]:checked`);
                    const correct = question.dataset.answer;
                    
                    const feedback = question.querySelector('.feedback');
                    feedback.style.display = 'block';
                    
                    if (selected && selected.value === correct) {
                        totalScore += marks;
                        question.classList.add('graded', 'correct');
                        feedback.className = 'feedback correct';
                        feedback.innerHTML = `
                            <span class="feedback-icon">âœ“</span>
                            <strong>Correct!</strong> You earned ${marks} mark(s).
                            <div class="explanation">
                                <div class="explanation-title">ðŸ’¡ Explanation:</div>
                                ${explanations[`q${qNum}`] || 'Well done!'}
                            </div>
                        `;
                    } else {
                        question.classList.add('graded', 'incorrect');
                        feedback.className = 'feedback incorrect';
                        const correctOption = question.querySelector(`input[value="${correct}"]`).parentElement.textContent.trim();
                        feedback.innerHTML = `
                            <span class="feedback-icon">âœ—</span>
                            <strong>Incorrect.</strong> You earned 0 marks.
                            <div class="model-answer">
                                <div class="model-answer-title">âœ“ Correct Answer:</div>
                                ${correctOption}
                            </div>
                            <div class="explanation">
                                <div class="explanation-title">ðŸ’¡ Why you were wrong:</div>
                                ${explanations[`q${qNum}`] || 'Review the material for this concept.'}
                            </div>
                        `;
                    }
                } else if (qType === 'essay') {
                    const answer = document.querySelector(`[name="q${qNum}"]`).value.trim().toLowerCase();
                    const model = modelAnswers[`q${qNum}`];
                    
                    const feedback = question.querySelector('.feedback');
                    feedback.style.display = 'block';
                    
                    if (answer.length === 0) {
                        question.classList.add('graded', 'incorrect');
                        feedback.className = 'feedback incorrect';
                        feedback.innerHTML = `
                            <span class="feedback-icon">âœ—</span>
                            <strong>No Answer Provided.</strong> You earned 0 marks.
                            <div class="model-answer">
                                <div class="model-answer-title">ðŸ“ Model Answer:</div>
                                ${model.model}
                            </div>
                        `;
                    } else {
                        let foundKeywords = [];
                        let missingKeywords = [];
                        
                        model.keywords.forEach(keyword => {
                            if (answer.includes(keyword.toLowerCase())) {
                                foundKeywords.push(keyword);
                            } else {
                                missingKeywords.push(keyword);
                            }
                        });
                        
                        const percentage = (foundKeywords.length / model.keywords.length) * 100;
                        let earnedMarks = 0;
                        
                        if (percentage >= 70) {
                            earnedMarks = marks;
                            question.classList.add('graded', 'correct');
                            feedback.className = 'feedback correct';
                        } else if (percentage >= 40) {
                            earnedMarks = Math.ceil(marks * (percentage / 100));
                            question.classList.add('graded', 'partial');
                            feedback.className = 'feedback partial';
                        } else {
                            question.classList.add('graded', 'incorrect');
                            feedback.className = 'feedback incorrect';
                        }
                        
                        totalScore += earnedMarks;
                        
                        let feedbackHTML = `
                            <span class="feedback-icon">${earnedMarks === marks ? 'âœ“' : earnedMarks > 0 ? 'â—' : 'âœ—'}</span>
                            <strong>${earnedMarks === marks ? 'Excellent!' : earnedMarks > 0 ? 'Partial Credit' : 'Needs Improvement'}</strong> 
                            You earned ${earnedMarks} out of ${marks} mark(s). (${percentage.toFixed(0)}% keyword match)
                            <div style="margin-top: 10px;">
                                <strong>Keywords found:</strong> ${foundKeywords.length > 0 ? foundKeywords.join(', ') : 'None'}
                            </div>
                        `;
                        
                        if (missingKeywords.length > 0) {
                            feedbackHTML += `
                                <div style="margin-top: 5px; color: #d32f2f;">
                                    <strong>Missing important concepts:</strong> ${missingKeywords.join(', ')}
                                </div>
                            `;
                        }
                        
                        feedbackHTML += `
                            <div class="model-answer">
                                <div class="model-answer-title">ðŸ“ Model Answer:</div>
                                ${model.model}
                            </div>
                            <div class="explanation">
                                <div class="explanation-title">ðŸ’¡ Explanation:</div>
                                ${model.explanation}
                            </div>
                        `;
                        
                        feedback.innerHTML = feedbackHTML;
                    }
                }
            });

            const percentage = (totalScore / maxScore * 100).toFixed(1);
            const resultsDiv = document.getElementById('results');
            const scoreDisplay = document.getElementById('scoreDisplay');
            const scoreText = document.getElementById('scoreText');
            
            let grade, message, color;
            if (percentage >= 90) {
                grade = 'A+';
                message = 'Outstanding Performance! ðŸŒŸ';
                color = '#f093fb';
            } else if (percentage >= 85) {
                grade = 'A';
                message = 'Excellent Work! ðŸŽ‰';
                color = '#f5576c';
            } else if (percentage >= 80) {
                grade = 'B+';
                message = 'Very Good! ðŸ‘';
                color = '#f78ca0';
            } else if (percentage >= 75) {
                grade = 'B';
                message = 'Good Job! ðŸ‘';
                color = '#f9a8d4';
            } else if (percentage >= 70) {
                grade = 'C+';
                message = 'Satisfactory ðŸ“š';
                color = '#fbbf24';
            } else if (percentage >= 60) {
                grade = 'C';
                message = 'Pass - Keep Studying ðŸ“–';
                color = '#fb923c';
            } else {
                grade = 'F';
                message = 'Needs More Study ðŸ“';
                color = '#ef4444';
            }
            
            scoreDisplay.textContent = `${totalScore}/${maxScore}`;
            scoreDisplay.style.color = color;
            scoreText.innerHTML = `
                <strong style="font-size: 1.5em; color: ${color};">Grade: ${grade}</strong><br>
                <span style="font-size: 1.2em;">${percentage}%</span><br>
                <em>${message}</em>
            `;
            
            resultsDiv.style.display = 'block';
            resultsDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }
    </script>
</body>
</html>